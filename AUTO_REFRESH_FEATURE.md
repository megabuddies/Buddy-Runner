# üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

## –û–ø–∏—Å–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–∫–∞–∫ –ø–æ F5) –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ Privy –∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ Faucet.

## –ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### 1. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ Privy
- **–ú–µ—Å—Ç–æ**: `src/components/WalletConnection.jsx`
- **–£—Å–ª–æ–≤–∏–µ**: –£—Å–ø–µ—à–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ó–∞–¥–µ—Ä–∂–∫–∞**: 3 —Å–µ–∫—É–Ω–¥—ã (–¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ—à–µ–ª—å–∫–∞)
- **–õ–æ–≥–∏–∫–∞**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ –±–æ–ª–µ–µ 5 —Å–µ–∫—É–Ω–¥ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### 2. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ Faucet
- **–ú–µ—Å—Ç–æ**: `src/hooks/useBlockchainUtils.js`
- **–£—Å–ª–æ–≤–∏–µ**: –£—Å–ø–µ—à–Ω—ã–π –≤—ã–∑–æ–≤ API faucet —Å —Ñ–ª–∞–≥–æ–º `shouldRefresh: true`
- **–ó–∞–¥–µ—Ä–∂–∫–∞**: 2 —Å–µ–∫—É–Ω–¥—ã (–¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
- **–õ–æ–≥–∏–∫–∞**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### 3. –ü–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –∏–≥—Ä–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **–ú–µ—Å—Ç–æ**: `src/App.jsx`
- **–£—Å–ª–æ–≤–∏–µ**: –ü–µ—Ä–µ—Ö–æ–¥ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ –≤ –∏–≥—Ä–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **–ó–∞–¥–µ—Ä–∂–∫–∞**: 2.5 —Å–µ–∫—É–Ω–¥—ã (–¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)

### 4. –ü–æ—Å–ª–µ —Ä—É—á–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ Faucet
- **–ú–µ—Å—Ç–æ**: `src/components/GameComponent.jsx`
- **–£—Å–ª–æ–≤–∏–µ**: –£—Å–ø–µ—à–Ω—ã–π —Ä—É—á–Ω–æ–π –≤—ã–∑–æ–≤ faucet —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "Get Test ETH"
- **–ó–∞–¥–µ—Ä–∂–∫–∞**: 2 —Å–µ–∫—É–Ω–¥—ã

## –ú–µ—Ö–∞–Ω–∏–∑–º –∑–∞—â–∏—Ç—ã –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### localStorage –∫–æ–Ω—Ç—Ä–æ–ª—å
```javascript
const lastRefresh = localStorage.getItem('lastPageRefresh');
const timeSinceLastRefresh = lastRefresh ? Date.now() - parseInt(lastRefresh) : Infinity;

if (timeSinceLastRefresh > 5000) { // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–µ —á–∞—â–µ —á–µ–º —Ä–∞–∑ –≤ 5 —Å–µ–∫—É–Ω–¥
  localStorage.setItem('lastPageRefresh', Date.now().toString());
  setTimeout(() => {
    window.location.reload();
  }, 2000);
}
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:
- `üîÑ Auto-refreshing page after successful faucet...`
- `üîÑ Auto-refreshing page after successful wallet connection...`
- `üîÑ Auto-refreshing page after entering game state...`
- `‚è±Ô∏è Page refresh skipped - too recent`

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏**: 5 —Å–µ–∫—É–Ω–¥
- **–ó–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞**: 3 —Å–µ–∫—É–Ω–¥—ã
- **–ó–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ faucet**: 2 —Å–µ–∫—É–Ω–¥—ã
- **–ó–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –∏–≥—Ä—É**: 2.5 —Å–µ–∫—É–Ω–¥—ã

### –£—Å–ª–æ–≤–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
- –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –¢–æ–ª—å–∫–æ –¥–ª—è blockchain —Å–µ—Ç–µ–π (–Ω–µ –¥–ª—è Web2 —Ä–µ–∂–∏–º–∞)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
```javascript
// –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
fetch('/test-auto-refresh.js').then(r => r.text()).then(eval);
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫ —á–µ—Ä–µ–∑ Privy
2. –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, MegaETH Testnet)
3. –ï—Å–ª–∏ –±–∞–ª–∞–Ω—Å < 0.00005 ETH, faucet –≤—ã–∑–æ–≤–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
5. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –Ω–∞–∂–∞—Ç—å "Get Test ETH" –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ faucet

## –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
```
‚úÖ Background faucet completed
‚úÖ Faucet sent to embedded wallet: 0x...
üîÑ Auto-refreshing page after successful faucet...
```

### –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```
‚è±Ô∏è Page refresh skipped - too recent
```

### –û—à–∏–±–∫–∏
```
‚ö†Ô∏è Background faucet failed (non-blocking): Error message
```

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å Privy embedded wallets
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–æ—à–µ–ª—å–∫–∞–º–∏
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∏ —Ä—É—á–Ω—ã–º –≤—ã–∑–æ–≤–æ–º faucet
- ‚úÖ –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ Web2 —Ä–µ–∂–∏–º –∏–≥—Ä—ã
- ‚úÖ –ó–∞—â–∏—â–µ–Ω–æ –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –º–æ–∂–Ω–æ:

1. –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –≤—ã–∑–æ–≤—ã `window.location.reload()`
2. –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ –≤ localStorage:
```javascript
localStorage.setItem('disableAutoRefresh', 'true');
```

–ò –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º:
```javascript
if (!localStorage.getItem('disableAutoRefresh')) {
  window.location.reload();
}
```