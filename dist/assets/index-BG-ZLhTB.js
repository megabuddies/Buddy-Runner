var Ys=Object.defineProperty;var En=s=>{throw TypeError(s)};var Xs=(s,t,e)=>t in s?Ys(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var h=(s,t,e)=>Xs(s,typeof t!="symbol"?t+"":t,e),Ve=(s,t,e)=>t.has(s)||En("Cannot "+e);var m=(s,t,e)=>(Ve(s,t,"read from private field"),e?e.call(s):t.get(s)),P=(s,t,e)=>t.has(s)?En("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),O=(s,t,e,n)=>(Ve(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),j=(s,t,e)=>(Ve(s,t,"access private method"),e);var Nn=(s,t,e,n)=>({set _(r){O(s,t,r,e)},get _(){return m(s,t,n)}});import{m as Me,o as Zn,j as l,i as un,a as Qs,X as Zs}from"./privy-C-Ell8v5.js";import{b as qs,r as F,R as tr}from"./vendor-C7A1SLig.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();var Xe={},vn=qs;Xe.createRoot=vn.createRoot,Xe.hydrateRoot=vn.hydrateRoot;const er="/images/buddy_standing_still.png",nr="/images/buddy_standing_still_eye_closed.png",sr="/images/buddy_run1.png",rr="/images/buddy_run2.png",ir="/images/ground.png",ar="/images/carrot_1.png",or="/images/carrot_2.png",cr="/images/carrot_3.png",Pt={buddyStandingStill:er,buddyStandingStillEyeClosed:nr,buddyRun1:sr,buddyRun2:rr,ground:ir,carrot1:ar,carrot2:or,carrot3:cr};class lr{constructor(t,e,n,r,i,a,o=null){h(this,"WALK_ANIMATION_TIMER",180);h(this,"walkAnimationTimer",this.WALK_ANIMATION_TIMER);h(this,"buddyRunImages",[]);h(this,"jumpPressed",!1);h(this,"jumpInProgress",!1);h(this,"falling",!1);h(this,"JUMP_SPEED",.65);h(this,"GRAVITY",.38);h(this,"dustParticles",[]);h(this,"showDust",!1);h(this,"dustTimer",0);h(this,"touchstart",()=>{this.jumpPressed=!0});h(this,"touchend",()=>{this.jumpPressed=!1});h(this,"keydown",t=>{t.code==="Space"&&(this.jumpPressed=!0)});h(this,"keyup",t=>{t.code==="Space"&&(this.jumpPressed=!1)});this.ctx=t,this.canvas=t.canvas,this.width=e,this.height=n,this.minJumpHeight=r,this.maxJumpHeight=i,this.scaleRatio=a,this.onMovementCallback=o,this.x=10*a,this.y=this.canvas.height-this.height-1.5*a,this.yStandingPosition=this.y,this.standingStillImage=new Image,this.standingStillImage.src=Pt.buddyStandingStill,this.standingStillImage.onerror=()=>console.error("Failed to load buddy_standing_still.png"),this.image=this.standingStillImage,this.jumpingImage=new Image,this.jumpingImage.src=Pt.buddyStandingStillEyeClosed,this.jumpingImage.onerror=()=>console.error("Failed to load buddy_standing_still_eye_closed.png");const c=new Image;c.src=Pt.buddyRun1,c.onerror=()=>console.error("Failed to load buddy_run1.png");const u=new Image;u.src=Pt.buddyRun2,u.onerror=()=>console.error("Failed to load buddy_run2.png"),this.buddyRunImages.push(c),this.buddyRunImages.push(u),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),window.removeEventListener("touchstart",this.touchstart),window.removeEventListener("touchend",this.touchend),window.addEventListener("touchstart",this.touchstart),window.addEventListener("touchend",this.touchend)}update(t,e){this.run(t,e),this.jumpInProgress&&(this.image=this.jumpingImage),this.jump(e),this.updateDust(e)}jump(t){this.jumpPressed&&(this.jumpInProgress||this.onMovementCallback&&this.onMovementCallback(),this.jumpInProgress=!0),this.jumpInProgress&&!this.falling?this.y>this.canvas.height-this.minJumpHeight||this.y>this.canvas.height-this.maxJumpHeight&&this.jumpPressed?this.y-=this.JUMP_SPEED*t*this.scaleRatio:this.falling=!0:this.y<this.yStandingPosition?(this.y+=this.GRAVITY*t*this.scaleRatio,this.y+this.height>this.canvas.height&&(this.y=this.yStandingPosition,this.createDustEffect())):(this.falling=!1,this.jumpInProgress=!1)}createDustEffect(){this.showDust=!0,this.dustTimer=300}updateDust(t){this.showDust&&(this.dustTimer-=t,this.dustTimer<=0&&(this.showDust=!1))}run(t,e){this.walkAnimationTimer<=0&&(this.image===this.buddyRunImages[0]?this.image=this.buddyRunImages[1]:this.image=this.buddyRunImages[0],this.walkAnimationTimer=this.WALK_ANIMATION_TIMER),this.walkAnimationTimer-=e*t}draw(){if(this.image&&this.image.complete&&this.image.naturalWidth>0&&this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height),this.showDust){this.ctx.fillStyle="rgba(139, 69, 19, 0.6)";const t=this.yStandingPosition+this.height;for(let e=0;e<5;e++){const n=this.x+this.width*.2+e*8*this.scaleRatio,r=(3-e*.5)*this.scaleRatio;this.ctx.beginPath(),this.ctx.arc(n,t-r,r,0,Math.PI*2),this.ctx.fill()}}}}class ur{constructor(t,e,n,r,i){this.ctx=t,this.canvas=t.canvas,this.width=e,this.height=n,this.speed=r,this.scaleRatio=i,this.x=0,this.y=this.canvas.height-this.height,this.groundImage=new Image,this.groundImage.src=Pt.ground,this.groundImage.onerror=()=>console.error("Failed to load ground.png")}update(t,e){this.x-=t*e*this.speed*this.scaleRatio}draw(){this.ctx.fillStyle="#7BA428",this.ctx.fillRect(0,this.y,this.canvas.width,this.height),this.ctx.fillStyle="#6B9420";for(let t=0;t<this.canvas.width;t+=3)this.ctx.fillRect(t,this.y,1,this.height);this.ctx.fillStyle="#8B4513",this.ctx.fillRect(0,this.y+this.height*.7,this.canvas.width,this.height*.3),this.x<-this.width&&(this.x=0)}reset(){this.x=0}}class hr{constructor(t,e,n,r,i,a){this.ctx=t,this.x=e,this.y=n,this.width=r,this.height=i,this.image=a}update(t,e,n,r){this.x-=t*e*n*r}draw(){this.image&&this.image.complete&&this.image.naturalWidth>0&&this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height)}collideWith(t){return t.x<this.x+this.width/1.4&&t.x+t.width/1.4>this.x&&t.y<this.y+this.height/1.4&&t.height+t.y/1.4>this.y}}class dr{constructor(t,e,n,r){h(this,"CARROT_INTERVAL_MIN",500);h(this,"CARROT_INTERVAL_MAX",2e3);h(this,"nextCarrotInterval",null);h(this,"carrots",[]);this.ctx=t,this.canvas=t.canvas,this.carrotImages=e,this.scaleRatio=n,this.speed=r,this.setNextCarrotTime()}setNextCarrotTime(){const t=this.getRandomNumber(this.CARROT_INTERVAL_MIN,this.CARROT_INTERVAL_MAX);this.nextCarrotInterval=t}getRandomNumber(t,e){return Math.floor(Math.random()*(e-t+1)+t)}createCarrot(){const t=this.getRandomNumber(0,this.carrotImages.length-1),e=this.carrotImages[t],n=this.canvas.width*1.5,r=this.canvas.height-e.height,i=new hr(this.ctx,n,r,e.width,e.height,e.image);this.carrots.push(i)}update(t,e){this.nextCarrotInterval<=0&&(this.createCarrot(),this.setNextCarrotTime()),this.nextCarrotInterval-=e,this.carrots.forEach(n=>{n.update(this.speed,t,e,this.scaleRatio)}),this.carrots=this.carrots.filter(n=>n.x>-n.width)}draw(){this.carrots.forEach(t=>t.draw())}collideWith(t){return this.carrots.some(e=>e.collideWith(t))}reset(){this.carrots=[]}}class fr{constructor(t,e,n=null){h(this,"score",0);h(this,"HIGH_SCORE_KEY","highScore");this.ctx=t,this.canvas=t.canvas,this.scaleRatio=e,this.blockchainStatus=n}update(t){this.score+=t*.01}reset(){this.score=0}setHighScore(){const t=Number(localStorage.getItem(this.HIGH_SCORE_KEY));this.score>t&&localStorage.setItem(this.HIGH_SCORE_KEY,Math.floor(this.score))}draw(){const t=Number(localStorage.getItem(this.HIGH_SCORE_KEY)),e=20*this.scaleRatio,n=20*this.scaleRatio;this.ctx.font=`${n}px serif`,this.ctx.fillStyle="#6B8E6B";const r=this.canvas.width-75*this.scaleRatio,i=r-125*this.scaleRatio,a=Math.floor(this.score).toString().padStart(6,0),o=t.toString().padStart(6,0);if(this.ctx.fillText(a,r,e),this.ctx.fillText(`HI ${o}`,i,e),this.blockchainStatus){const c=e+30*this.scaleRatio,u=12*this.scaleRatio;this.ctx.font=`${u}px monospace`,this.ctx.fillStyle=this.blockchainStatus.contractAvailable?"#7FBC7F":"#FFA500",this.ctx.fillText(`⛓️ ${this.blockchainStatus.networkName}`,10*this.scaleRatio,c),this.ctx.fillStyle="#4169E1",this.ctx.fillText(`Moves: ${this.blockchainStatus.totalMovements}`,10*this.scaleRatio,c+20*this.scaleRatio),this.blockchainStatus.pendingTransactions>0&&(this.ctx.fillStyle="#FF6347",this.ctx.fillText(`Pending: ${this.blockchainStatus.pendingTransactions}`,10*this.scaleRatio,c+40*this.scaleRatio)),this.blockchainStatus.onChainScore>0&&(this.ctx.fillStyle="#32CD32",this.ctx.fillText(`On-chain: ${this.blockchainStatus.onChainScore}`,10*this.scaleRatio,c+60*this.scaleRatio))}}}const pr="6.15.0";function mr(s,t,e){const n=t.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof s===t)return}const r=new Error(`invalid value for type ${t}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${e}`,r.value=s,r}async function Qe(s){const t=Object.keys(s);return(await Promise.all(t.map(n=>Promise.resolve(s[n])))).reduce((n,r,i)=>(n[t[i]]=r,n),{})}function T(s,t,e){for(let n in t){let r=t[n];const i=e?e[n]:null;i&&mr(r,i,n),Object.defineProperty(s,n,{enumerable:!0,value:r,writable:!1})}}function te(s,t){if(s==null)return"null";if(t==null&&(t=new Set),typeof s=="object"){if(t.has(s))return"[Circular]";t.add(s)}if(Array.isArray(s))return"[ "+s.map(e=>te(e,t)).join(", ")+" ]";if(s instanceof Uint8Array){const e="0123456789abcdef";let n="0x";for(let r=0;r<s.length;r++)n+=e[s[r]>>4],n+=e[s[r]&15];return n}if(typeof s=="object"&&typeof s.toJSON=="function")return te(s.toJSON(),t);switch(typeof s){case"boolean":case"number":case"symbol":return s.toString();case"bigint":return BigInt(s).toString();case"string":return JSON.stringify(s);case"object":{const e=Object.keys(s);return e.sort(),"{ "+e.map(n=>`${te(n,t)}: ${te(s[n],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function le(s,t){return s&&s.code===t}function qn(s){return le(s,"CALL_EXCEPTION")}function me(s,t,e){let n=s;{const i=[];if(e){if("message"in e||"code"in e||"name"in e)throw new Error(`value will overwrite populated values: ${te(e)}`);for(const a in e){if(a==="shortMessage")continue;const o=e[a];i.push(a+"="+te(o))}}i.push(`code=${t}`),i.push(`version=${pr}`),i.length&&(s+=" ("+i.join(", ")+")")}let r;switch(t){case"INVALID_ARGUMENT":r=new TypeError(s);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(s);break;default:r=new Error(s)}return T(r,{code:t}),e&&Object.assign(r,e),r.shortMessage==null&&T(r,{shortMessage:n}),r}function N(s,t,e,n){if(!s)throw me(t,e,n)}function y(s,t,e,n){N(s,t,"INVALID_ARGUMENT",{argument:e,value:n})}function ts(s,t,e){e==null&&(e=""),e&&(e=": "+e),N(s>=t,"missing argument"+e,"MISSING_ARGUMENT",{count:s,expectedCount:t}),N(s<=t,"too many arguments"+e,"UNEXPECTED_ARGUMENT",{count:s,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((s,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");s.push(t)}catch{}return s},[]);function hn(s,t,e){if(e==null&&(e=""),s!==t){let n=e,r="new";e&&(n+=".",r+=" "+e),N(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function es(s,t,e){if(s instanceof Uint8Array)return e?new Uint8Array(s):s;if(typeof s=="string"&&s.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((s.length-2)/2);let r=2;for(let i=0;i<n.length;i++)n[i]=parseInt(s.substring(r,r+2),16),r+=2;return n}y(!1,"invalid BytesLike value",t||"value",s)}function Tt(s,t){return es(s,t,!1)}function mt(s,t){return es(s,t,!0)}function Et(s,t){return!(typeof s!="string"||!s.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&s.length!==2+2*t||t===!0&&s.length%2!==0)}function gr(s){return Et(s,!0)||s instanceof Uint8Array}const Tn="0123456789abcdef";function D(s){const t=Tt(s);let e="0x";for(let n=0;n<t.length;n++){const r=t[n];e+=Tn[(r&240)>>4]+Tn[r&15]}return e}function se(s){return"0x"+s.map(t=>D(t).substring(2)).join("")}function Zt(s,t,e){const n=Tt(s);return e!=null&&e>n.length&&N(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:e}),D(n.slice(t??0,e??n.length))}function ns(s,t,e){const n=Tt(s);N(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});const r=new Uint8Array(t);return r.fill(0),e?r.set(n,t-n.length):r.set(n,0),D(r)}function yr(s,t){return ns(s,t,!0)}function wr(s,t){return ns(s,t,!1)}const _e=BigInt(0),at=BigInt(1),ee=9007199254740991;function br(s,t){const e=Fe(s,"value"),n=BigInt(Rt(t,"width"));if(N(e>>n===_e,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:s}),e>>n-at){const r=(at<<n)-at;return-((~e&r)+at)}return e}function xr(s,t){let e=Ut(s,"value");const n=BigInt(Rt(t,"width")),r=at<<n-at;if(e<_e){e=-e,N(e<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:s});const i=(at<<n)-at;return(~e&i)+at}else N(e<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:s});return e}function Te(s,t){const e=Fe(s,"value"),n=BigInt(Rt(t,"bits"));return e&(at<<n)-at}function Ut(s,t){switch(typeof s){case"bigint":return s;case"number":return y(Number.isInteger(s),"underflow",t||"value",s),y(s>=-ee&&s<=ee,"overflow",t||"value",s),BigInt(s);case"string":try{if(s==="")throw new Error("empty string");return s[0]==="-"&&s[1]!=="-"?-BigInt(s.substring(1)):BigInt(s)}catch(e){y(!1,`invalid BigNumberish string: ${e.message}`,t||"value",s)}}y(!1,"invalid BigNumberish value",t||"value",s)}function Fe(s,t){const e=Ut(s,t);return N(e>=_e,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:s}),e}const Sn="0123456789abcdef";function ss(s){if(s instanceof Uint8Array){let t="0x0";for(const e of s)t+=Sn[e>>4],t+=Sn[e&15];return BigInt(t)}return Ut(s)}function Rt(s,t){switch(typeof s){case"bigint":return y(s>=-ee&&s<=ee,"overflow",t||"value",s),Number(s);case"number":return y(Number.isInteger(s),"underflow",t||"value",s),y(s>=-ee&&s<=ee,"overflow",t||"value",s),s;case"string":try{if(s==="")throw new Error("empty string");return Rt(BigInt(s),t)}catch(e){y(!1,`invalid numeric string: ${e.message}`,t||"value",s)}}y(!1,"invalid numeric value",t||"value",s)}function Er(s){return Rt(ss(s))}function rs(s,t){let n=Fe(s,"value").toString(16);if(t==null)n.length%2&&(n="0"+n);else{const r=Rt(t,"width");for(N(r*2>=n.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:s});n.length<r*2;)n="0"+n}return"0x"+n}function Nr(s){const t=Fe(s,"value");if(t===_e)return new Uint8Array([]);let e=t.toString(16);e.length%2&&(e="0"+e);const n=new Uint8Array(e.length/2);for(let r=0;r<n.length;r++){const i=r*2;n[r]=parseInt(e.substring(i,i+2),16)}return n}var re;class vr{constructor(t,e,n){h(this,"filter");h(this,"emitter");P(this,re);O(this,re,e),T(this,{emitter:t,filter:n})}async removeListener(){m(this,re)!=null&&await this.emitter.off(this.filter,m(this,re))}}re=new WeakMap;function Tr(s,t,e,n,r){y(!1,`invalid codepoint at offset ${t}; ${s}`,"bytes",e)}function is(s,t,e,n,r){if(s==="BAD_PREFIX"||s==="UNEXPECTED_CONTINUE"){let i=0;for(let a=t+1;a<e.length&&e[a]>>6===2;a++)i++;return i}return s==="OVERRUN"?e.length-t-1:0}function Sr(s,t,e,n,r){return s==="OVERLONG"?(y(typeof r=="number","invalid bad code point for replacement","badCodepoint",r),n.push(r),0):(n.push(65533),is(s,t,e))}const Rr=Object.freeze({error:Tr,ignore:is,replace:Sr});function Ir(s,t){t==null&&(t=Rr.error);const e=Tt(s,"bytes"),n=[];let r=0;for(;r<e.length;){const i=e[r++];if(!(i>>7)){n.push(i);continue}let a=null,o=null;if((i&224)===192)a=1,o=127;else if((i&240)===224)a=2,o=2047;else if((i&248)===240)a=3,o=65535;else{(i&192)===128?r+=t("UNEXPECTED_CONTINUE",r-1,e,n):r+=t("BAD_PREFIX",r-1,e,n);continue}if(r-1+a>=e.length){r+=t("OVERRUN",r-1,e,n);continue}let c=i&(1<<8-a-1)-1;for(let u=0;u<a;u++){let d=e[r];if((d&192)!=128){r+=t("MISSING_CONTINUE",r,e,n),c=null;break}c=c<<6|d&63,r++}if(c!==null){if(c>1114111){r+=t("OUT_OF_RANGE",r-1-a,e,n,c);continue}if(c>=55296&&c<=57343){r+=t("UTF16_SURROGATE",r-1-a,e,n,c);continue}if(c<=o){r+=t("OVERLONG",r-1-a,e,n,c);continue}n.push(c)}}return n}function as(s,t){y(typeof s=="string","invalid string value","str",s);let e=[];for(let n=0;n<s.length;n++){const r=s.charCodeAt(n);if(r<128)e.push(r);else if(r<2048)e.push(r>>6|192),e.push(r&63|128);else if((r&64512)==55296){n++;const i=s.charCodeAt(n);y(n<s.length&&(i&64512)===56320,"invalid surrogate pair","str",s);const a=65536+((r&1023)<<10)+(i&1023);e.push(a>>18|240),e.push(a>>12&63|128),e.push(a>>6&63|128),e.push(a&63|128)}else e.push(r>>12|224),e.push(r>>6&63|128),e.push(r&63|128)}return new Uint8Array(e)}function Or(s){return s.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function Ar(s,t){return Or(Ir(s,t))}const V=32,Ze=new Uint8Array(V),kr=["then"],Se={},os=new WeakMap;function Mt(s){return os.get(s)}function Rn(s,t){os.set(s,t)}function he(s,t){const e=new Error(`deferred error during ABI decoding triggered accessing ${s}`);throw e.error=t,e}function qe(s,t,e){return s.indexOf(null)>=0?t.map((n,r)=>n instanceof ue?qe(Mt(n),n,e):n):s.reduce((n,r,i)=>{let a=t.getValue(r);return r in n||(e&&a instanceof ue&&(a=qe(Mt(a),a,e)),n[r]=a),n},{})}var ie;const ne=class ne extends Array{constructor(...e){const n=e[0];let r=e[1],i=(e[2]||[]).slice(),a=!0;n!==Se&&(r=e,i=[],a=!1);super(r.length);P(this,ie);r.forEach((u,d)=>{this[d]=u});const o=i.reduce((u,d)=>(typeof d=="string"&&u.set(d,(u.get(d)||0)+1),u),new Map);if(Rn(this,Object.freeze(r.map((u,d)=>{const f=i[d];return f!=null&&o.get(f)===1?f:null}))),O(this,ie,[]),m(this,ie)==null&&m(this,ie),!a)return;Object.freeze(this);const c=new Proxy(this,{get:(u,d,f)=>{if(typeof d=="string"){if(d.match(/^[0-9]+$/)){const E=Rt(d,"%index");if(E<0||E>=this.length)throw new RangeError("out of result range");const S=u[E];return S instanceof Error&&he(`index ${E}`,S),S}if(kr.indexOf(d)>=0)return Reflect.get(u,d,f);const g=u[d];if(g instanceof Function)return function(...E){return g.apply(this===f?u:this,E)};if(!(d in u))return u.getValue.apply(this===f?u:this,[d])}return Reflect.get(u,d,f)}});return Rn(c,Mt(this)),c}toArray(e){const n=[];return this.forEach((r,i)=>{r instanceof Error&&he(`index ${i}`,r),e&&r instanceof ne&&(r=r.toArray(e)),n.push(r)}),n}toObject(e){const n=Mt(this);return n.reduce((r,i,a)=>(N(i!=null,`value at index ${a} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),qe(n,this,e)),{})}slice(e,n){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const r=Mt(this),i=[],a=[];for(let o=e;o<n;o++)i.push(this[o]),a.push(r[o]);return new ne(Se,i,a)}filter(e,n){const r=Mt(this),i=[],a=[];for(let o=0;o<this.length;o++){const c=this[o];c instanceof Error&&he(`index ${o}`,c),e.call(n,c,o,this)&&(i.push(c),a.push(r[o]))}return new ne(Se,i,a)}map(e,n){const r=[];for(let i=0;i<this.length;i++){const a=this[i];a instanceof Error&&he(`index ${i}`,a),r.push(e.call(n,a,i,this))}return r}getValue(e){const n=Mt(this).indexOf(e);if(n===-1)return;const r=this[n];return r instanceof Error&&he(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,n){return new ne(Se,e,n)}};ie=new WeakMap;let ue=ne;function In(s){let t=Nr(s);return N(t.length<=V,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:V,offset:t.length}),t.length!==V&&(t=mt(se([Ze.slice(t.length%V),t]))),t}class It{constructor(t,e,n,r){h(this,"name");h(this,"type");h(this,"localName");h(this,"dynamic");T(this,{name:t,type:e,localName:n,dynamic:r},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){y(!1,t,this.localName,e)}}var xt,Dt,ae,Ae;class tn{constructor(){P(this,ae);P(this,xt);P(this,Dt);O(this,xt,[]),O(this,Dt,0)}get data(){return se(m(this,xt))}get length(){return m(this,Dt)}appendWriter(t){return j(this,ae,Ae).call(this,mt(t.data))}writeBytes(t){let e=mt(t);const n=e.length%V;return n&&(e=mt(se([e,Ze.slice(n)]))),j(this,ae,Ae).call(this,e)}writeValue(t){return j(this,ae,Ae).call(this,In(t))}writeUpdatableValue(){const t=m(this,xt).length;return m(this,xt).push(Ze),O(this,Dt,m(this,Dt)+V),e=>{m(this,xt)[t]=In(e)}}}xt=new WeakMap,Dt=new WeakMap,ae=new WeakSet,Ae=function(t){return m(this,xt).push(t),O(this,Dt,m(this,Dt)+t.length),t.length};var J,q,Ht,$t,At,Yt,nn,cs;const yn=class yn{constructor(t,e,n){P(this,Yt);h(this,"allowLoose");P(this,J);P(this,q);P(this,Ht);P(this,$t);P(this,At);T(this,{allowLoose:!!e}),O(this,J,mt(t)),O(this,Ht,0),O(this,$t,null),O(this,At,n??1024),O(this,q,0)}get data(){return D(m(this,J))}get dataLength(){return m(this,J).length}get consumed(){return m(this,q)}get bytes(){return new Uint8Array(m(this,J))}subReader(t){const e=new yn(m(this,J).slice(m(this,q)+t),this.allowLoose,m(this,At));return O(e,$t,this),e}readBytes(t,e){let n=j(this,Yt,cs).call(this,0,t,!!e);return j(this,Yt,nn).call(this,t),O(this,q,m(this,q)+n.length),n.slice(0,t)}readValue(){return ss(this.readBytes(V))}readIndex(){return Er(this.readBytes(V))}};J=new WeakMap,q=new WeakMap,Ht=new WeakMap,$t=new WeakMap,At=new WeakMap,Yt=new WeakSet,nn=function(t){var e;if(m(this,$t))return j(e=m(this,$t),Yt,nn).call(e,t);O(this,Ht,m(this,Ht)+t),N(m(this,At)<1||m(this,Ht)<=m(this,At)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${m(this,At)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:mt(m(this,J)),offset:m(this,q),length:t,info:{bytesRead:m(this,Ht),dataLength:this.dataLength}})},cs=function(t,e,n){let r=Math.ceil(e/V)*V;return m(this,q)+r>m(this,J).length&&(this.allowLoose&&n&&m(this,q)+e<=m(this,J).length?r=e:N(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:mt(m(this,J)),length:m(this,J).length,offset:m(this,q)+r})),m(this,J).slice(m(this,q),m(this,q)+r)};let en=yn;function On(s){if(!Number.isSafeInteger(s)||s<0)throw new Error(`Wrong positive integer: ${s}`)}function ls(s,...t){if(!(s instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(s.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${s.length}`)}function An(s,t=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(t&&s.finished)throw new Error("Hash#digest() has already been called")}function Cr(s,t){ls(s);const e=t.outputLen;if(s.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pr=s=>s instanceof Uint8Array,Lr=s=>new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)),Ur=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ur)throw new Error("Non little-endian hardware is not supported");function Br(s){if(typeof s!="string")throw new Error(`utf8ToBytes expected string, got ${typeof s}`);return new Uint8Array(new TextEncoder().encode(s))}function us(s){if(typeof s=="string"&&(s=Br(s)),!Pr(s))throw new Error(`expected Uint8Array, got ${typeof s}`);return s}class jr{clone(){return this._cloneInto()}}function Mr(s){const t=n=>s().update(us(n)).digest(),e=s();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>s(),t}const Re=BigInt(2**32-1),kn=BigInt(32);function _r(s,t=!1){return t?{h:Number(s&Re),l:Number(s>>kn&Re)}:{h:Number(s>>kn&Re)|0,l:Number(s&Re)|0}}function Fr(s,t=!1){let e=new Uint32Array(s.length),n=new Uint32Array(s.length);for(let r=0;r<s.length;r++){const{h:i,l:a}=_r(s[r],t);[e[r],n[r]]=[i,a]}return[e,n]}const Dr=(s,t,e)=>s<<e|t>>>32-e,Hr=(s,t,e)=>t<<e|s>>>32-e,$r=(s,t,e)=>t<<e-32|s>>>64-e,Gr=(s,t,e)=>s<<e-32|t>>>64-e,[hs,ds,fs]=[[],[],[]],Wr=BigInt(0),de=BigInt(1),zr=BigInt(2),Vr=BigInt(7),Kr=BigInt(256),Jr=BigInt(113);for(let s=0,t=de,e=1,n=0;s<24;s++){[e,n]=[n,(2*e+3*n)%5],hs.push(2*(5*n+e)),ds.push((s+1)*(s+2)/2%64);let r=Wr;for(let i=0;i<7;i++)t=(t<<de^(t>>Vr)*Jr)%Kr,t&zr&&(r^=de<<(de<<BigInt(i))-de);fs.push(r)}const[Yr,Xr]=Fr(fs,!0),Cn=(s,t,e)=>e>32?$r(s,t,e):Dr(s,t,e),Pn=(s,t,e)=>e>32?Gr(s,t,e):Hr(s,t,e);function Qr(s,t=24){const e=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let a=0;a<10;a++)e[a]=s[a]^s[a+10]^s[a+20]^s[a+30]^s[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,u=e[c],d=e[c+1],f=Cn(u,d,1)^e[o],g=Pn(u,d,1)^e[o+1];for(let E=0;E<50;E+=10)s[a+E]^=f,s[a+E+1]^=g}let r=s[2],i=s[3];for(let a=0;a<24;a++){const o=ds[a],c=Cn(r,i,o),u=Pn(r,i,o),d=hs[a];r=s[d],i=s[d+1],s[d]=c,s[d+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)e[o]=s[a+o];for(let o=0;o<10;o++)s[a+o]^=~e[(o+2)%10]&e[(o+4)%10]}s[0]^=Yr[n],s[1]^=Xr[n]}e.fill(0)}class dn extends jr{constructor(t,e,n,r=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,On(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Lr(this.state)}keccak(){Qr(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){An(this);const{blockLen:e,state:n}=this;t=us(t);const r=t.length;for(let i=0;i<r;){const a=Math.min(e-this.pos,r-i);for(let o=0;o<a;o++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,e&128&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){An(this,!1),ls(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,i=t.length;r<i;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+a),r),this.posOut+=a,r+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return On(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Cr(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:i,enableXOF:a}=this;return t||(t=new dn(e,n,r,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=r,t.enableXOF=a,t.destroyed=this.destroyed,t}}const Zr=(s,t,e)=>Mr(()=>new dn(t,s,e)),qr=Zr(1,136,256/8);let ps=!1;const ms=function(s){return qr(s)};let gs=ms;function Lt(s){const t=Tt(s,"data");return D(gs(t))}Lt._=ms;Lt.lock=function(){ps=!0};Lt.register=function(s){if(ps)throw new TypeError("keccak256 is locked");gs=s};Object.freeze(Lt);const ti=BigInt(0),ei=BigInt(36);function Ln(s){s=s.toLowerCase();const t=s.substring(2).split(""),e=new Uint8Array(40);for(let r=0;r<40;r++)e[r]=t[r].charCodeAt(0);const n=Tt(Lt(e));for(let r=0;r<40;r+=2)n[r>>1]>>4>=8&&(t[r]=t[r].toUpperCase()),(n[r>>1]&15)>=8&&(t[r+1]=t[r+1].toUpperCase());return"0x"+t.join("")}const fn={};for(let s=0;s<10;s++)fn[String(s)]=String(s);for(let s=0;s<26;s++)fn[String.fromCharCode(65+s)]=String(10+s);const Un=15;function ni(s){s=s.toUpperCase(),s=s.substring(4)+s.substring(0,2)+"00";let t=s.split("").map(n=>fn[n]).join("");for(;t.length>=Un;){let n=t.substring(0,Un);t=parseInt(n,10)%97+t.substring(n.length)}let e=String(98-parseInt(t,10)%97);for(;e.length<2;)e="0"+e;return e}const si=function(){const s={};for(let t=0;t<36;t++){const e="0123456789abcdefghijklmnopqrstuvwxyz"[t];s[e]=BigInt(t)}return s}();function ri(s){s=s.toLowerCase();let t=ti;for(let e=0;e<s.length;e++)t=t*ei+si[s[e]];return t}function zt(s){if(y(typeof s=="string","invalid address","address",s),s.match(/^(0x)?[0-9a-fA-F]{40}$/)){s.startsWith("0x")||(s="0x"+s);const t=Ln(s);return y(!s.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===s,"bad address checksum","address",s),t}if(s.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){y(s.substring(2,4)===ni(s),"bad icap checksum","address",s);let t=ri(s.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return Ln("0x"+t)}y(!1,"invalid address","address",s)}function ys(s){return s&&typeof s.getAddress=="function"}async function Ke(s,t){const e=await t;return(e==null||e==="0x0000000000000000000000000000000000000000")&&(N(typeof s!="string","unconfigured name","UNCONFIGURED_NAME",{value:s}),y(!1,"invalid AddressLike value; did not resolve to a value address","target",s)),zt(e)}function ge(s,t){if(typeof s=="string")return s.match(/^0x[0-9a-f]{40}$/i)?zt(s):(N(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Ke(s,t.resolveName(s)));if(ys(s))return Ke(s,s.getAddress());if(s&&typeof s.then=="function")return Ke(s,s);y(!1,"unsupported addressable value","target",s)}const yt={};function x(s,t){let e=!1;return t<0&&(e=!0,t*=-1),new z(yt,`${e?"":"u"}int${t}`,s,{signed:e,width:t})}function k(s,t){return new z(yt,`bytes${t||""}`,s,{size:t})}const Bn=Symbol.for("_ethers_typed");var Gt;const wt=class wt{constructor(t,e,n,r){h(this,"type");h(this,"value");P(this,Gt);h(this,"_typedSymbol");r==null&&(r=null),hn(yt,t,"Typed"),T(this,{_typedSymbol:Bn,type:e,value:n}),O(this,Gt,r),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return m(this,Gt)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return m(this,Gt)===!0?-1:m(this,Gt)===!1?this.value.length:null}static from(t,e){return new wt(yt,t,e)}static uint8(t){return x(t,8)}static uint16(t){return x(t,16)}static uint24(t){return x(t,24)}static uint32(t){return x(t,32)}static uint40(t){return x(t,40)}static uint48(t){return x(t,48)}static uint56(t){return x(t,56)}static uint64(t){return x(t,64)}static uint72(t){return x(t,72)}static uint80(t){return x(t,80)}static uint88(t){return x(t,88)}static uint96(t){return x(t,96)}static uint104(t){return x(t,104)}static uint112(t){return x(t,112)}static uint120(t){return x(t,120)}static uint128(t){return x(t,128)}static uint136(t){return x(t,136)}static uint144(t){return x(t,144)}static uint152(t){return x(t,152)}static uint160(t){return x(t,160)}static uint168(t){return x(t,168)}static uint176(t){return x(t,176)}static uint184(t){return x(t,184)}static uint192(t){return x(t,192)}static uint200(t){return x(t,200)}static uint208(t){return x(t,208)}static uint216(t){return x(t,216)}static uint224(t){return x(t,224)}static uint232(t){return x(t,232)}static uint240(t){return x(t,240)}static uint248(t){return x(t,248)}static uint256(t){return x(t,256)}static uint(t){return x(t,256)}static int8(t){return x(t,-8)}static int16(t){return x(t,-16)}static int24(t){return x(t,-24)}static int32(t){return x(t,-32)}static int40(t){return x(t,-40)}static int48(t){return x(t,-48)}static int56(t){return x(t,-56)}static int64(t){return x(t,-64)}static int72(t){return x(t,-72)}static int80(t){return x(t,-80)}static int88(t){return x(t,-88)}static int96(t){return x(t,-96)}static int104(t){return x(t,-104)}static int112(t){return x(t,-112)}static int120(t){return x(t,-120)}static int128(t){return x(t,-128)}static int136(t){return x(t,-136)}static int144(t){return x(t,-144)}static int152(t){return x(t,-152)}static int160(t){return x(t,-160)}static int168(t){return x(t,-168)}static int176(t){return x(t,-176)}static int184(t){return x(t,-184)}static int192(t){return x(t,-192)}static int200(t){return x(t,-200)}static int208(t){return x(t,-208)}static int216(t){return x(t,-216)}static int224(t){return x(t,-224)}static int232(t){return x(t,-232)}static int240(t){return x(t,-240)}static int248(t){return x(t,-248)}static int256(t){return x(t,-256)}static int(t){return x(t,-256)}static bytes1(t){return k(t,1)}static bytes2(t){return k(t,2)}static bytes3(t){return k(t,3)}static bytes4(t){return k(t,4)}static bytes5(t){return k(t,5)}static bytes6(t){return k(t,6)}static bytes7(t){return k(t,7)}static bytes8(t){return k(t,8)}static bytes9(t){return k(t,9)}static bytes10(t){return k(t,10)}static bytes11(t){return k(t,11)}static bytes12(t){return k(t,12)}static bytes13(t){return k(t,13)}static bytes14(t){return k(t,14)}static bytes15(t){return k(t,15)}static bytes16(t){return k(t,16)}static bytes17(t){return k(t,17)}static bytes18(t){return k(t,18)}static bytes19(t){return k(t,19)}static bytes20(t){return k(t,20)}static bytes21(t){return k(t,21)}static bytes22(t){return k(t,22)}static bytes23(t){return k(t,23)}static bytes24(t){return k(t,24)}static bytes25(t){return k(t,25)}static bytes26(t){return k(t,26)}static bytes27(t){return k(t,27)}static bytes28(t){return k(t,28)}static bytes29(t){return k(t,29)}static bytes30(t){return k(t,30)}static bytes31(t){return k(t,31)}static bytes32(t){return k(t,32)}static address(t){return new wt(yt,"address",t)}static bool(t){return new wt(yt,"bool",!!t)}static bytes(t){return new wt(yt,"bytes",t)}static string(t){return new wt(yt,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new wt(yt,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===Bn}static dereference(t,e){if(wt.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}};Gt=new WeakMap;let z=wt;class ii extends It{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let n=z.dereference(e,"string");try{n=zt(n)}catch(r){return this._throwError(r.message,e)}return t.writeValue(n)}decode(t){return zt(rs(t.readValue(),20))}}class ai extends It{constructor(e){super(e.name,e.type,"_",e.dynamic);h(this,"coder");this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,n){return this.coder.encode(e,n)}decode(e){return this.coder.decode(e)}}function ws(s,t,e){let n=[];if(Array.isArray(e))n=e;else if(e&&typeof e=="object"){let c={};n=t.map(u=>{const d=u.localName;return N(d,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),N(!c[d],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),c[d]=!0,e[d]})}else y(!1,"invalid tuple value","tuple",e);y(t.length===n.length,"types/value length mismatch","tuple",e);let r=new tn,i=new tn,a=[];t.forEach((c,u)=>{let d=n[u];if(c.dynamic){let f=i.length;c.encode(i,d);let g=r.writeUpdatableValue();a.push(E=>{g(E+f)})}else c.encode(r,d)}),a.forEach(c=>{c(r.length)});let o=s.appendWriter(r);return o+=s.appendWriter(i),o}function bs(s,t){let e=[],n=[],r=s.subReader(0);return t.forEach(i=>{let a=null;if(i.dynamic){let o=s.readIndex(),c=r.subReader(o);try{a=i.decode(c)}catch(u){if(le(u,"BUFFER_OVERRUN"))throw u;a=u,a.baseType=i.name,a.name=i.localName,a.type=i.type}}else try{a=i.decode(s)}catch(o){if(le(o,"BUFFER_OVERRUN"))throw o;a=o,a.baseType=i.name,a.name=i.localName,a.type=i.type}if(a==null)throw new Error("investigate");e.push(a),n.push(i.localName||null)}),ue.fromItems(e,n)}class oi extends It{constructor(e,n,r){const i=e.type+"["+(n>=0?n:"")+"]",a=n===-1||e.dynamic;super("array",i,r,a);h(this,"coder");h(this,"length");T(this,{coder:e,length:n})}defaultValue(){const e=this.coder.defaultValue(),n=[];for(let r=0;r<this.length;r++)n.push(e);return n}encode(e,n){const r=z.dereference(n,"array");Array.isArray(r)||this._throwError("expected array value",r);let i=this.length;i===-1&&(i=r.length,e.writeValue(r.length)),ts(r.length,i,"coder array"+(this.localName?" "+this.localName:""));let a=[];for(let o=0;o<r.length;o++)a.push(this.coder);return ws(e,a,r)}decode(e){let n=this.length;n===-1&&(n=e.readIndex(),N(n*V<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:n*V,length:e.dataLength}));let r=[];for(let i=0;i<n;i++)r.push(new ai(this.coder));return bs(e,r)}}class ci extends It{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const n=z.dereference(e,"bool");return t.writeValue(n?1:0)}decode(t){return!!t.readValue()}}class xs extends It{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=mt(e);let n=t.writeValue(e.length);return n+=t.writeBytes(e),n}decode(t){return t.readBytes(t.readIndex(),!0)}}class li extends xs{constructor(t){super("bytes",t)}decode(t){return D(super.decode(t))}}class ui extends It{constructor(e,n){let r="bytes"+String(e);super(r,r,n,!1);h(this,"size");T(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,n){let r=mt(z.dereference(n,this.type));return r.length!==this.size&&this._throwError("incorrect data length",n),e.writeBytes(r)}decode(e){return D(e.readBytes(this.size))}}const hi=new Uint8Array([]);class di extends It{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return e!=null&&this._throwError("not null",e),t.writeBytes(hi)}decode(t){return t.readBytes(0),null}}const fi=BigInt(0),pi=BigInt(1),mi=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class gi extends It{constructor(e,n,r){const i=(n?"int":"uint")+e*8;super(i,i,r,!1);h(this,"size");h(this,"signed");T(this,{size:e,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,n){let r=Ut(z.dereference(n,this.type)),i=Te(mi,V*8);if(this.signed){let a=Te(i,this.size*8-1);(r>a||r<-(a+pi))&&this._throwError("value out-of-bounds",n),r=xr(r,8*V)}else(r<fi||r>Te(i,this.size*8))&&this._throwError("value out-of-bounds",n);return e.writeValue(r)}decode(e){let n=Te(e.readValue(),this.size*8);return this.signed&&(n=br(n,this.size*8)),n}}class yi extends xs{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,as(z.dereference(e,"string")))}decode(t){return Ar(super.decode(t))}}class Ie extends It{constructor(e,n){let r=!1;const i=[];e.forEach(o=>{o.dynamic&&(r=!0),i.push(o.type)});const a="tuple("+i.join(",")+")";super("tuple",a,n,r);h(this,"coders");T(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const n=this.coders.reduce((r,i)=>{const a=i.localName;return a&&(r[a]||(r[a]=0),r[a]++),r},{});return this.coders.forEach((r,i)=>{let a=r.localName;!a||n[a]!==1||(a==="length"&&(a="_length"),e[a]==null&&(e[a]=e[i]))}),Object.freeze(e)}encode(e,n){const r=z.dereference(n,"tuple");return ws(e,this.coders,r)}decode(e){return bs(e,this.coders)}}function Je(s,t){return{address:zt(s),storageKeys:t.map((e,n)=>(y(Et(e,32),"invalid slot",`storageKeys[${n}]`,e),e.toLowerCase()))}}function wi(s){if(Array.isArray(s))return s.map((e,n)=>Array.isArray(e)?(y(e.length===2,"invalid slot set",`value[${n}]`,e),Je(e[0],e[1])):(y(e!=null&&typeof e=="object","invalid address-slot set","value",s),Je(e.address,e.storageKeys)));y(s!=null&&typeof s=="object","invalid access list","value",s);const t=Object.keys(s).map(e=>{const n=s[e].reduce((r,i)=>(r[i]=!0,r),{});return Je(e,Object.keys(n).sort())});return t.sort((e,n)=>e.address.localeCompare(n.address)),t}function ye(s){return Lt(as(s))}function K(s){const t=new Set;return s.forEach(e=>t.add(e)),Object.freeze(t)}const bi="external public payable override",xi=K(bi.split(" ")),Es="constant external internal payable private public pure view override",Ei=K(Es.split(" ")),Ns="constructor error event fallback function receive struct",vs=K(Ns.split(" ")),Ts="calldata memory storage payable indexed",Ni=K(Ts.split(" ")),vi="tuple returns",Ti=[Ns,Ts,vi,Es].join(" "),Si=K(Ti.split(" ")),Ri={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Ii=new RegExp("^(\\s*)"),Oi=new RegExp("^([0-9]+)"),Ai=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Ss=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Rs=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var H,it,be,sn;const Be=class Be{constructor(t){P(this,be);P(this,H);P(this,it);O(this,H,0),O(this,it,t.slice())}get offset(){return m(this,H)}get length(){return m(this,it).length-m(this,H)}clone(){return new Be(m(this,it))}reset(){O(this,H,0)}popKeyword(t){const e=this.peek();if(e.type!=="KEYWORD"||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const e=this.peek();throw new Error(`expected ${t}; got ${e.type} ${JSON.stringify(e.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=j(this,be,sn).call(this,m(this,H)+1,t.match+1);return O(this,H,t.match+1),e}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=[];for(;m(this,H)<t.match-1;){const n=this.peek().linkNext;e.push(j(this,be,sn).call(this,m(this,H)+1,n)),O(this,H,n)}return O(this,H,t.match+1),e}peek(){if(m(this,H)>=m(this,it).length)throw new Error("out-of-bounds");return m(this,it)[m(this,H)]}peekKeyword(t){const e=this.peekType("KEYWORD");return e!=null&&t.has(e)?e:null}peekType(t){if(this.length===0)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return Nn(this,H)._++,t}toString(){const t=[];for(let e=m(this,H);e<m(this,it).length;e++){const n=m(this,it)[e];t.push(`${n.type}:${n.text}`)}return`<TokenString ${t.join(" ")}>`}};H=new WeakMap,it=new WeakMap,be=new WeakSet,sn=function(t=0,e=0){return new Be(m(this,it).slice(t,e).map(n=>Object.freeze(Object.assign({},n,{match:n.match-t,linkBack:n.linkBack-t,linkNext:n.linkNext-t}))))};let ot=Be;function Bt(s){const t=[],e=a=>{const o=i<s.length?JSON.stringify(s[i]):"$EOI";throw new Error(`invalid token ${o} at ${i}: ${a}`)};let n=[],r=[],i=0;for(;i<s.length;){let a=s.substring(i),o=a.match(Ii);o&&(i+=o[1].length,a=s.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let u=Ri[a[0]]||"";if(u){if(c.type=u,c.text=a[0],i++,u==="OPEN_PAREN")n.push(t.length-1),r.push(t.length-1);else if(u=="CLOSE_PAREN")n.length===0&&e("no matching open bracket"),c.match=n.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=r.pop(),t[c.linkBack].linkNext=t.length-1;else if(u==="COMMA")c.linkBack=r.pop(),t[c.linkBack].linkNext=t.length-1,r.push(t.length-1);else if(u==="OPEN_BRACKET")c.type="BRACKET";else if(u==="CLOSE_BRACKET"){let d=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const f=t.pop().text;d=f+d,t[t.length-1].value=Rt(f)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=d}continue}if(o=a.match(Ai),o){if(c.text=o[1],i+=c.text.length,Si.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Rs)){c.type="TYPE";continue}c.type="ID";continue}if(o=a.match(Oi),o){c.text=o[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${i}`)}return new ot(t.map(a=>Object.freeze(a)))}function jn(s,t){let e=[];for(const n in t.keys())s.has(n)&&e.push(n);if(e.length>1)throw new Error(`conflicting types: ${e.join(", ")}`)}function De(s,t){if(t.peekKeyword(vs)){const e=t.pop().text;if(e!==s)throw new Error(`expected ${s}, got ${e}`)}return t.popType("ID")}function St(s,t){const e=new Set;for(;;){const n=s.peekType("KEYWORD");if(n==null||t&&!t.has(n))break;if(s.pop(),e.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);e.add(n)}return Object.freeze(e)}function Is(s){let t=St(s,Ei);return jn(t,K("constant payable nonpayable".split(" "))),jn(t,K("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function vt(s,t){return s.popParams().map(e=>$.from(e,t))}function Os(s){if(s.peekType("AT")){if(s.pop(),s.peekType("NUMBER"))return Ut(s.pop().text);throw new Error("invalid gas")}return null}function Vt(s){if(s.length)throw new Error(`unexpected tokens at offset ${s.offset}: ${s.toString()}`)}const ki=new RegExp(/^(.*)\[([0-9]*)\]$/);function Mn(s){const t=s.match(Rs);if(y(t,"invalid type","type",s),s==="uint")return"uint256";if(s==="int")return"int256";if(t[2]){const e=parseInt(t[2]);y(e!==0&&e<=32,"invalid bytes length","type",s)}else if(t[3]){const e=parseInt(t[3]);y(e!==0&&e<=256&&e%8===0,"invalid numeric width","type",s)}return s}const M={},X=Symbol.for("_ethers_internal"),_n="_ParamTypeInternal",Fn="_ErrorInternal",Dn="_EventInternal",Hn="_ConstructorInternal",$n="_FallbackInternal",Gn="_FunctionInternal",Wn="_StructInternal";var oe,ke;const et=class et{constructor(t,e,n,r,i,a,o,c){P(this,oe);h(this,"name");h(this,"type");h(this,"baseType");h(this,"indexed");h(this,"components");h(this,"arrayLength");h(this,"arrayChildren");if(hn(t,M,"ParamType"),Object.defineProperty(this,X,{value:_n}),a&&(a=Object.freeze(a.slice())),r==="array"){if(o==null||c==null)throw new Error("")}else if(o!=null||c!=null)throw new Error("");if(r==="tuple"){if(a==null)throw new Error("")}else if(a!=null)throw new Error("");T(this,{name:e,type:n,baseType:r,indexed:i,components:a,arrayLength:o,arrayChildren:c})}format(t){if(t==null&&(t="sighash"),t==="json"){const n=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=n,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const r={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(i=>JSON.parse(i.format(t)))),JSON.stringify(r)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map(n=>n.format(t)).join(t==="full"?", ":",")+")":e+=this.type,t!=="sighash"&&(this.indexed===!0&&(e+=" indexed"),t==="full"&&this.name&&(e+=" "+this.name)),e}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return t.map(r=>n.arrayChildren.walk(r,e))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const n=this;return t.map((r,i)=>n.components[i].walk(r,e))}return e(this.type,t)}async walkAsync(t,e){const n=[],r=[t];return j(this,oe,ke).call(this,n,t,e,i=>{r[0]=i}),n.length&&await Promise.all(n),r[0]}static from(t,e){if(et.isParamType(t))return t;if(typeof t=="string")try{return et.from(Bt(t),e)}catch{y(!1,"invalid param type","obj",t)}else if(t instanceof ot){let o="",c="",u=null;St(t,K(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(c="tuple",u=t.popParams().map(A=>et.from(A)),o=`tuple(${u.map(A=>A.format()).join(",")})`):(o=Mn(t.popType("TYPE")),c=o);let d=null,f=null;for(;t.length&&t.peekType("BRACKET");){const A=t.pop();d=new et(M,"",o,c,null,u,f,d),f=A.value,o+=A.text,c="array",u=null}let g=null;if(St(t,Ni).has("indexed")){if(!e)throw new Error("");g=!0}const S=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new et(M,S,o,c,g,u,f,d)}const n=t.name;y(!n||typeof n=="string"&&n.match(Ss),"invalid name","obj.name",n);let r=t.indexed;r!=null&&(y(e,"parameter cannot be indexed","obj.indexed",t.indexed),r=!!r);let i=t.type,a=i.match(ki);if(a){const o=parseInt(a[2]||"-1"),c=et.from({type:a[1],components:t.components});return new et(M,n||"",i,"array",r,null,o,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const o=t.components!=null?t.components.map(u=>et.from(u)):null;return new et(M,n||"",i,"tuple",r,o,null,null)}return i=Mn(t.type),new et(M,n||"",i,i,r,null,null,null)}static isParamType(t){return t&&t[X]===_n}};oe=new WeakSet,ke=function(t,e,n,r){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const a=this.arrayChildren,o=e.slice();o.forEach((c,u)=>{var d;j(d=a,oe,ke).call(d,t,c,n,f=>{o[u]=f})}),r(o);return}if(this.isTuple()){const a=this.components;let o;if(Array.isArray(e))o=e.slice();else{if(e==null||typeof e!="object")throw new Error("invalid tuple value");o=a.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in e))throw new Error(`missing value for component ${c.name}`);return e[c.name]})}if(o.length!==this.components.length)throw new Error("array is wrong length");o.forEach((c,u)=>{var d;j(d=a[u],oe,ke).call(d,t,c,n,f=>{o[u]=f})}),r(o);return}const i=n(this.type,e);i.then?t.push(async function(){r(await i)}()):r(i)};let $=et;class Kt{constructor(t,e,n){h(this,"type");h(this,"inputs");hn(t,M,"Fragment"),n=Object.freeze(n.slice()),T(this,{type:e,inputs:n})}static from(t){if(typeof t=="string"){try{Kt.from(JSON.parse(t))}catch{}return Kt.from(Bt(t))}if(t instanceof ot)switch(t.peekKeyword(vs)){case"constructor":return Nt.from(t);case"error":return Y.from(t);case"event":return ft.from(t);case"fallback":case"receive":return bt.from(t);case"function":return pt.from(t);case"struct":return Wt.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return Nt.from(t);case"error":return Y.from(t);case"event":return ft.from(t);case"fallback":case"receive":return bt.from(t);case"function":return pt.from(t);case"struct":return Wt.from(t)}N(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}y(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return Nt.isFragment(t)}static isError(t){return Y.isFragment(t)}static isEvent(t){return ft.isFragment(t)}static isFunction(t){return pt.isFragment(t)}static isStruct(t){return Wt.isFragment(t)}}class He extends Kt{constructor(e,n,r,i){super(e,n,i);h(this,"name");y(typeof r=="string"&&r.match(Ss),"invalid identifier","name",r),i=Object.freeze(i.slice()),T(this,{name:r})}}function we(s,t){return"("+t.map(e=>e.format(s)).join(s==="full"?", ":",")+")"}class Y extends He{constructor(t,e,n){super(t,"error",e,n),Object.defineProperty(this,X,{value:Fn})}get selector(){return ye(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(t)))});const e=[];return t!=="sighash"&&e.push("error"),e.push(this.name+we(t,this.inputs)),e.join(" ")}static from(t){if(Y.isFragment(t))return t;if(typeof t=="string")return Y.from(Bt(t));if(t instanceof ot){const e=De("error",t),n=vt(t);return Vt(t),new Y(M,e,n)}return new Y(M,t.name,t.inputs?t.inputs.map($.from):[])}static isFragment(t){return t&&t[X]===Fn}}class ft extends He{constructor(e,n,r,i){super(e,"event",n,r);h(this,"anonymous");Object.defineProperty(this,X,{value:Dn}),T(this,{anonymous:i})}get topicHash(){return ye(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("event"),n.push(this.name+we(e,this.inputs)),e!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(e,n){return n=(n||[]).map(i=>$.from(i)),new ft(M,e,n,!1).topicHash}static from(e){if(ft.isFragment(e))return e;if(typeof e=="string")try{return ft.from(Bt(e))}catch{y(!1,"invalid event fragment","obj",e)}else if(e instanceof ot){const n=De("event",e),r=vt(e,!0),i=!!St(e,K(["anonymous"])).has("anonymous");return Vt(e),new ft(M,n,r,i)}return new ft(M,e.name,e.inputs?e.inputs.map(n=>$.from(n,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[X]===Dn}}class Nt extends Kt{constructor(e,n,r,i,a){super(e,n,r);h(this,"payable");h(this,"gas");Object.defineProperty(this,X,{value:Hn}),T(this,{payable:i,gas:a})}format(e){if(N(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[`constructor${we(e,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(e){if(Nt.isFragment(e))return e;if(typeof e=="string")try{return Nt.from(Bt(e))}catch{y(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof ot){St(e,K(["constructor"]));const n=vt(e),r=!!St(e,xi).has("payable"),i=Os(e);return Vt(e),new Nt(M,"constructor",n,r,i)}return new Nt(M,"constructor",e.inputs?e.inputs.map($.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[X]===Hn}}class bt extends Kt{constructor(e,n,r){super(e,"fallback",n);h(this,"payable");Object.defineProperty(this,X,{value:$n}),T(this,{payable:r})}format(e){const n=this.inputs.length===0?"receive":"fallback";if(e==="json"){const r=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:r})}return`${n}()${this.payable?" payable":""}`}static from(e){if(bt.isFragment(e))return e;if(typeof e=="string")try{return bt.from(Bt(e))}catch{y(!1,"invalid fallback fragment","obj",e)}else if(e instanceof ot){const n=e.toString(),r=e.peekKeyword(K(["fallback","receive"]));if(y(r,"type must be fallback or receive","obj",n),e.popKeyword(K(["fallback","receive"]))==="receive"){const c=vt(e);return y(c.length===0,"receive cannot have arguments","obj.inputs",c),St(e,K(["payable"])),Vt(e),new bt(M,[],!0)}let a=vt(e);a.length?y(a.length===1&&a[0].type==="bytes","invalid fallback inputs","obj.inputs",a.map(c=>c.format("minimal")).join(", ")):a=[$.from("bytes")];const o=Is(e);if(y(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),St(e,K(["returns"])).has("returns")){const c=vt(e);y(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(u=>u.format("minimal")).join(", "))}return Vt(e),new bt(M,a,o==="payable")}if(e.type==="receive")return new bt(M,[],!0);if(e.type==="fallback"){const n=[$.from("bytes")],r=e.stateMutability==="payable";return new bt(M,n,r)}y(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[X]===$n}}class pt extends He{constructor(e,n,r,i,a,o){super(e,"function",n,i);h(this,"constant");h(this,"outputs");h(this,"stateMutability");h(this,"payable");h(this,"gas");Object.defineProperty(this,X,{value:Gn}),a=Object.freeze(a.slice()),T(this,{constant:r==="view"||r==="pure",gas:o,outputs:a,payable:r==="payable",stateMutability:r})}get selector(){return ye(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("function"),n.push(this.name+we(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(we(e,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(e,n){return n=(n||[]).map(i=>$.from(i)),new pt(M,e,"view",n,[],null).selector}static from(e){if(pt.isFragment(e))return e;if(typeof e=="string")try{return pt.from(Bt(e))}catch{y(!1,"invalid function fragment","obj",e)}else if(e instanceof ot){const r=De("function",e),i=vt(e),a=Is(e);let o=[];St(e,K(["returns"])).has("returns")&&(o=vt(e));const c=Os(e);return Vt(e),new pt(M,r,a,i,o,c)}let n=e.stateMutability;return n==null&&(n="payable",typeof e.constant=="boolean"?(n="view",e.constant||(n="payable",typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable")),new pt(M,e.name,n,e.inputs?e.inputs.map($.from):[],e.outputs?e.outputs.map($.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[X]===Gn}}class Wt extends He{constructor(t,e,n){super(t,"struct",e,n),Object.defineProperty(this,X,{value:Wn})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return Wt.from(Bt(t))}catch{y(!1,"invalid struct fragment","obj",t)}else if(t instanceof ot){const e=De("struct",t),n=vt(t);return Vt(t),new Wt(M,e,n)}return new Wt(M,t.name,t.inputs?t.inputs.map($.from):[])}static isFragment(t){return t&&t[X]===Wn}}const ct=new Map;ct.set(0,"GENERIC_PANIC");ct.set(1,"ASSERT_FALSE");ct.set(17,"OVERFLOW");ct.set(18,"DIVIDE_BY_ZERO");ct.set(33,"ENUM_RANGE_ERROR");ct.set(34,"BAD_STORAGE_DATA");ct.set(49,"STACK_UNDERFLOW");ct.set(50,"ARRAY_RANGE_ERROR");ct.set(65,"OUT_OF_MEMORY");ct.set(81,"UNINITIALIZED_FUNCTION_CALL");const Ci=new RegExp(/^bytes([0-9]*)$/),Pi=new RegExp(/^(u?int)([0-9]*)$/);let Ye=null,zn=1024;function Li(s,t,e,n){let r="missing revert data",i=null;const a=null;let o=null;if(e){r="execution reverted";const u=Tt(e);if(e=D(e),u.length===0)r+=" (no data present; likely require(false) occurred",i="require(false)";else if(u.length%32!==4)r+=" (could not decode reason; invalid data length)";else if(D(u.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],u.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[i]},r+=`: ${JSON.stringify(i)}`}catch{r+=" (could not decode reason; invalid string data)"}else if(D(u.slice(0,4))==="0x4e487b71")try{const d=Number(n.decode(["uint256"],u.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[d]},i=`Panic due to ${ct.get(d)||"UNKNOWN"}(${d})`,r+=`: ${i}`}catch{r+=" (could not decode panic code)"}else r+=" (unknown custom error)"}const c={to:t.to?zt(t.to):null,data:t.data||"0x"};return t.from&&(c.from=zt(t.from)),me(r,"CALL_EXCEPTION",{action:s,data:e,reason:i,transaction:c,invocation:a,revert:o})}var kt,qt;const je=class je{constructor(){P(this,kt)}getDefaultValue(t){const e=t.map(r=>j(this,kt,qt).call(this,$.from(r)));return new Ie(e,"_").defaultValue()}encode(t,e){ts(e.length,t.length,"types/values length mismatch");const n=t.map(a=>j(this,kt,qt).call(this,$.from(a))),r=new Ie(n,"_"),i=new tn;return r.encode(i,e),i.data}decode(t,e,n){const r=t.map(a=>j(this,kt,qt).call(this,$.from(a)));return new Ie(r,"_").decode(new en(e,n,zn))}static _setDefaultMaxInflation(t){y(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),zn=t}static defaultAbiCoder(){return Ye==null&&(Ye=new je),Ye}static getBuiltinCallException(t,e,n){return Li(t,e,n,je.defaultAbiCoder())}};kt=new WeakSet,qt=function(t){if(t.isArray())return new oi(j(this,kt,qt).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new Ie(t.components.map(n=>j(this,kt,qt).call(this,n)),t.name);switch(t.baseType){case"address":return new ii(t.name);case"bool":return new ci(t.name);case"string":return new yi(t.name);case"bytes":return new li(t.name);case"":return new di(t.name)}let e=t.type.match(Pi);if(e){let n=parseInt(e[2]||"256");return y(n!==0&&n<=256&&n%8===0,"invalid "+e[1]+" bit length","param",t),new gi(n/8,e[1]==="int",t.name)}if(e=t.type.match(Ci),e){let n=parseInt(e[1]);return y(n!==0&&n<=32,"invalid bytes length","param",t),new ui(n,t.name)}y(!1,"invalid type","type",t.type)};let Le=je;class Ui{constructor(t,e,n){h(this,"fragment");h(this,"name");h(this,"signature");h(this,"topic");h(this,"args");const r=t.name,i=t.format();T(this,{fragment:t,name:r,signature:i,topic:e,args:n})}}class Bi{constructor(t,e,n,r){h(this,"fragment");h(this,"name");h(this,"args");h(this,"signature");h(this,"selector");h(this,"value");const i=t.name,a=t.format();T(this,{fragment:t,name:i,args:n,signature:a,selector:e,value:r})}}class ji{constructor(t,e,n){h(this,"fragment");h(this,"name");h(this,"args");h(this,"signature");h(this,"selector");const r=t.name,i=t.format();T(this,{fragment:t,name:r,args:n,signature:i,selector:e})}}class Vn{constructor(t){h(this,"hash");h(this,"_isIndexed");T(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const Kn={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},Jn={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:s=>`reverted with reason string ${JSON.stringify(s)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:s=>{let t="unknown panic code";return s>=0&&s<=255&&Kn[s.toString()]&&(t=Kn[s.toString()]),`reverted with panic code 0x${s.toString(16)} (${t})`}}};var ut,ht,dt,W,gt,Ce,Pe;const _t=class _t{constructor(t){P(this,gt);h(this,"fragments");h(this,"deploy");h(this,"fallback");h(this,"receive");P(this,ut);P(this,ht);P(this,dt);P(this,W);let e=[];typeof t=="string"?e=JSON.parse(t):e=t,O(this,dt,new Map),O(this,ut,new Map),O(this,ht,new Map);const n=[];for(const a of e)try{n.push(Kt.from(a))}catch(o){console.log(`[Warning] Invalid Fragment ${JSON.stringify(a)}:`,o.message)}T(this,{fragments:Object.freeze(n)});let r=null,i=!1;O(this,W,this.getAbiCoder()),this.fragments.forEach((a,o)=>{let c;switch(a.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}T(this,{deploy:a});return;case"fallback":a.inputs.length===0?i=!0:(y(!r||a.payable!==r.payable,"conflicting fallback fragments",`fragments[${o}]`,a),r=a,i=r.payable);return;case"function":c=m(this,dt);break;case"event":c=m(this,ht);break;case"error":c=m(this,ut);break;default:return}const u=a.format();c.has(u)||c.set(u,a)}),this.deploy||T(this,{deploy:Nt.from("constructor()")}),T(this,{fallback:r,receive:i})}format(t){const e=t?"minimal":"full";return this.fragments.map(r=>r.format(e))}formatJson(){const t=this.fragments.map(e=>e.format("json"));return JSON.stringify(t.map(e=>JSON.parse(e)))}getAbiCoder(){return Le.defaultAbiCoder()}getFunctionName(t){const e=j(this,gt,Ce).call(this,t,null,!1);return y(e,"no matching function","key",t),e.name}hasFunction(t){return!!j(this,gt,Ce).call(this,t,null,!1)}getFunction(t,e){return j(this,gt,Ce).call(this,t,e||null,!0)}forEachFunction(t){const e=Array.from(m(this,dt).keys());e.sort((n,r)=>n.localeCompare(r));for(let n=0;n<e.length;n++){const r=e[n];t(m(this,dt).get(r),n)}}getEventName(t){const e=j(this,gt,Pe).call(this,t,null,!1);return y(e,"no matching event","key",t),e.name}hasEvent(t){return!!j(this,gt,Pe).call(this,t,null,!1)}getEvent(t,e){return j(this,gt,Pe).call(this,t,e||null,!0)}forEachEvent(t){const e=Array.from(m(this,ht).keys());e.sort((n,r)=>n.localeCompare(r));for(let n=0;n<e.length;n++){const r=e[n];t(m(this,ht).get(r),n)}}getError(t,e){if(Et(t)){const r=t.toLowerCase();if(Jn[r])return Y.from(Jn[r].signature);for(const i of m(this,ut).values())if(r===i.selector)return i;return null}if(t.indexOf("(")===-1){const r=[];for(const[i,a]of m(this,ut))i.split("(")[0]===t&&r.push(a);if(r.length===0)return t==="Error"?Y.from("error Error(string)"):t==="Panic"?Y.from("error Panic(uint256)"):null;if(r.length>1){const i=r.map(a=>JSON.stringify(a.format())).join(", ");y(!1,`ambiguous error description (i.e. ${i})`,"name",t)}return r[0]}if(t=Y.from(t).format(),t==="Error(string)")return Y.from("error Error(string)");if(t==="Panic(uint256)")return Y.from("error Panic(uint256)");const n=m(this,ut).get(t);return n||null}forEachError(t){const e=Array.from(m(this,ut).keys());e.sort((n,r)=>n.localeCompare(r));for(let n=0;n<e.length;n++){const r=e[n];t(m(this,ut).get(r),n)}}_decodeParams(t,e){return m(this,W).decode(t,e)}_encodeParams(t,e){return m(this,W).encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);y(n,"unknown error","fragment",t),t=n}return y(Zt(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,Zt(e,4))}encodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);y(n,"unknown error","fragment",t),t=n}return se([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);y(n,"unknown function","fragment",t),t=n}return y(Zt(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,Zt(e,4))}encodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);y(n,"unknown function","fragment",t),t=n}return se([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if(typeof t=="string"){const i=this.getFunction(t);y(i,"unknown function","fragment",t),t=i}let n="invalid length for result data";const r=mt(e);if(r.length%32===0)try{return m(this,W).decode(t.outputs,r)}catch{n="could not decode result data"}N(!1,n,"BAD_DATA",{value:D(r),info:{method:t.name,signature:t.format()}})}makeError(t,e){const n=Tt(t,"data"),r=Le.getBuiltinCallException("call",e,n);if(r.message.startsWith("execution reverted (unknown custom error)")){const o=D(n.slice(0,4)),c=this.getError(o);if(c)try{const u=m(this,W).decode(c.inputs,n.slice(4));r.revert={name:c.name,signature:c.format(),args:u},r.reason=r.revert.signature,r.message=`execution reverted: ${r.reason}`}catch{r.message="execution reverted (coult not decode custom error)"}}const a=this.parseTransaction(e);return a&&(r.invocation={method:a.name,signature:a.signature,args:a.args}),r}encodeFunctionResult(t,e){if(typeof t=="string"){const n=this.getFunction(t);y(n,"unknown function","fragment",t),t=n}return D(m(this,W).encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if(typeof t=="string"){const i=this.getEvent(t);y(i,"unknown event","eventFragment",t),t=i}N(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const n=[];t.anonymous||n.push(t.topicHash);const r=(i,a)=>i.type==="string"?ye(a):i.type==="bytes"?Lt(D(a)):(i.type==="bool"&&typeof a=="boolean"?a=a?"0x01":"0x00":i.type.match(/^u?int/)?a=rs(a):i.type.match(/^bytes/)?a=wr(a,32):i.type==="address"&&m(this,W).encode(["address"],[a]),yr(D(a),32));for(e.forEach((i,a)=>{const o=t.inputs[a];if(!o.indexed){y(i==null,"cannot filter non-indexed parameters; must be null","contract."+o.name,i);return}i==null?n.push(null):o.baseType==="array"||o.baseType==="tuple"?y(!1,"filtering with tuples or arrays not supported","contract."+o.name,i):Array.isArray(i)?n.push(i.map(c=>r(o,c))):n.push(r(o,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(t,e){if(typeof t=="string"){const a=this.getEvent(t);y(a,"unknown event","eventFragment",t),t=a}const n=[],r=[],i=[];return t.anonymous||n.push(t.topicHash),y(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach((a,o)=>{const c=e[o];if(a.indexed)if(a.type==="string")n.push(ye(c));else if(a.type==="bytes")n.push(Lt(c));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");n.push(m(this,W).encode([a.type],[c]))}else r.push(a),i.push(c)}),{data:m(this,W).encode(r,i),topics:n}}decodeEventLog(t,e,n){if(typeof t=="string"){const E=this.getEvent(t);y(E,"unknown event","eventFragment",t),t=E}if(n!=null&&!t.anonymous){const E=t.topicHash;y(Et(n[0],32)&&n[0].toLowerCase()===E,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const r=[],i=[],a=[];t.inputs.forEach((E,S)=>{E.indexed?E.type==="string"||E.type==="bytes"||E.baseType==="tuple"||E.baseType==="array"?(r.push($.from({type:"bytes32",name:E.name})),a.push(!0)):(r.push(E),a.push(!1)):(i.push(E),a.push(!1))});const o=n!=null?m(this,W).decode(r,se(n)):null,c=m(this,W).decode(i,e,!0),u=[],d=[];let f=0,g=0;return t.inputs.forEach((E,S)=>{let A=null;if(E.indexed)if(o==null)A=new Vn(null);else if(a[S])A=new Vn(o[g++]);else try{A=o[g++]}catch(L){A=L}else try{A=c[f++]}catch(L){A=L}u.push(A),d.push(E.name||null)}),ue.fromItems(u,d)}parseTransaction(t){const e=Tt(t.data,"tx.data"),n=Ut(t.value!=null?t.value:0,"tx.value"),r=this.getFunction(D(e.slice(0,4)));if(!r)return null;const i=m(this,W).decode(r.inputs,e.slice(4));return new Bi(r,r.selector,i,n)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new Ui(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=D(t),n=this.getError(Zt(e,0,4));if(!n)return null;const r=m(this,W).decode(n.inputs,Zt(e,4));return new ji(n,n.selector,r)}static from(t){return t instanceof _t?t:typeof t=="string"?new _t(JSON.parse(t)):typeof t.formatJson=="function"?new _t(t.formatJson()):typeof t.format=="function"?new _t(t.format("json")):new _t(t)}};ut=new WeakMap,ht=new WeakMap,dt=new WeakMap,W=new WeakMap,gt=new WeakSet,Ce=function(t,e,n){if(Et(t)){const i=t.toLowerCase();for(const a of m(this,dt).values())if(i===a.selector)return a;return null}if(t.indexOf("(")===-1){const i=[];for(const[a,o]of m(this,dt))a.split("(")[0]===t&&i.push(o);if(e){const a=e.length>0?e[e.length-1]:null;let o=e.length,c=!0;z.isTyped(a)&&a.type==="overrides"&&(c=!1,o--);for(let u=i.length-1;u>=0;u--){const d=i[u].inputs.length;d!==o&&(!c||d!==o-1)&&i.splice(u,1)}for(let u=i.length-1;u>=0;u--){const d=i[u].inputs;for(let f=0;f<e.length;f++)if(z.isTyped(e[f])){if(f>=d.length){if(e[f].type==="overrides")continue;i.splice(u,1);break}if(e[f].type!==d[f].baseType){i.splice(u,1);break}}}}if(i.length===1&&e&&e.length!==i[0].inputs.length){const a=e[e.length-1];(a==null||Array.isArray(a)||typeof a!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){const a=i.map(o=>JSON.stringify(o.format())).join(", ");y(!1,`ambiguous function description (i.e. matches ${a})`,"key",t)}return i[0]}const r=m(this,dt).get(pt.from(t).format());return r||null},Pe=function(t,e,n){if(Et(t)){const i=t.toLowerCase();for(const a of m(this,ht).values())if(i===a.topicHash)return a;return null}if(t.indexOf("(")===-1){const i=[];for(const[a,o]of m(this,ht))a.split("(")[0]===t&&i.push(o);if(e){for(let a=i.length-1;a>=0;a--)i[a].inputs.length<e.length&&i.splice(a,1);for(let a=i.length-1;a>=0;a--){const o=i[a].inputs;for(let c=0;c<e.length;c++)if(z.isTyped(e[c])&&e[c].type!==o[c].baseType){i.splice(a,1);break}}}if(i.length===0)return null;if(i.length>1&&n){const a=i.map(o=>JSON.stringify(o.format())).join(", ");y(!1,`ambiguous event description (i.e. matches ${a})`,"key",t)}return i[0]}const r=m(this,ht).get(ft.from(t).format());return r||null};let rn=_t;const As=BigInt(0);function nt(s){return s==null?null:s.toString()}function Mi(s){const t={};s.to&&(t.to=s.to),s.from&&(t.from=s.from),s.data&&(t.data=D(s.data));const e="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of e)!(r in s)||s[r]==null||(t[r]=Ut(s[r],`request.${r}`));const n="type,nonce".split(/,/);for(const r of n)!(r in s)||s[r]==null||(t[r]=Rt(s[r],`request.${r}`));return s.accessList&&(t.accessList=wi(s.accessList)),s.authorizationList&&(t.authorizationList=s.authorizationList.slice()),"blockTag"in s&&(t.blockTag=s.blockTag),"enableCcipRead"in s&&(t.enableCcipRead=!!s.enableCcipRead),"customData"in s&&(t.customData=s.customData),"blobVersionedHashes"in s&&s.blobVersionedHashes&&(t.blobVersionedHashes=s.blobVersionedHashes.slice()),"kzg"in s&&(t.kzg=s.kzg),"blobs"in s&&s.blobs&&(t.blobs=s.blobs.map(r=>gr(r)?D(r):Object.assign({},r))),t}class $e{constructor(t,e){h(this,"provider");h(this,"transactionHash");h(this,"blockHash");h(this,"blockNumber");h(this,"removed");h(this,"address");h(this,"data");h(this,"topics");h(this,"index");h(this,"transactionIndex");this.provider=e;const n=Object.freeze(t.topics.slice());T(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:n,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:n,data:r,index:i,removed:a,topics:o,transactionHash:c,transactionIndex:u}=this;return{_type:"log",address:t,blockHash:e,blockNumber:n,data:r,index:i,removed:a,topics:o,transactionHash:c,transactionIndex:u}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return N(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return N(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return N(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return Fi(this)}}var xe;class _i{constructor(t,e){h(this,"provider");h(this,"to");h(this,"from");h(this,"contractAddress");h(this,"hash");h(this,"index");h(this,"blockHash");h(this,"blockNumber");h(this,"logsBloom");h(this,"gasUsed");h(this,"blobGasUsed");h(this,"cumulativeGasUsed");h(this,"gasPrice");h(this,"blobGasPrice");h(this,"type");h(this,"status");h(this,"root");P(this,xe);O(this,xe,Object.freeze(t.logs.map(r=>new $e(r,e))));let n=As;t.effectiveGasPrice!=null?n=t.effectiveGasPrice:t.gasPrice!=null&&(n=t.gasPrice),T(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:n,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return m(this,xe)}toJSON(){const{to:t,from:e,contractAddress:n,hash:r,index:i,blockHash:a,blockNumber:o,logsBloom:c,logs:u,status:d,root:f}=this;return{_type:"TransactionReceipt",blockHash:a,blockNumber:o,contractAddress:n,cumulativeGasUsed:nt(this.cumulativeGasUsed),from:e,gasPrice:nt(this.gasPrice),blobGasUsed:nt(this.blobGasUsed),blobGasPrice:nt(this.blobGasPrice),gasUsed:nt(this.gasUsed),hash:r,index:i,logs:u,logsBloom:c,root:f,status:d,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Cs(this)}reorderedEvent(t){return N(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),ks(this,t)}}xe=new WeakMap;var Ct;const wn=class wn{constructor(t,e){h(this,"provider");h(this,"blockNumber");h(this,"blockHash");h(this,"index");h(this,"hash");h(this,"type");h(this,"to");h(this,"from");h(this,"nonce");h(this,"gasLimit");h(this,"gasPrice");h(this,"maxPriorityFeePerGas");h(this,"maxFeePerGas");h(this,"maxFeePerBlobGas");h(this,"data");h(this,"value");h(this,"chainId");h(this,"signature");h(this,"accessList");h(this,"blobVersionedHashes");h(this,"authorizationList");P(this,Ct);this.provider=e,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,this.authorizationList=t.authorizationList!=null?t.authorizationList:null,O(this,Ct,-1)}toJSON(){const{blockNumber:t,blockHash:e,index:n,hash:r,type:i,to:a,from:o,nonce:c,data:u,signature:d,accessList:f,blobVersionedHashes:g}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:t,blockHash:e,blobVersionedHashes:g,chainId:nt(this.chainId),data:u,from:o,gasLimit:nt(this.gasLimit),gasPrice:nt(this.gasPrice),hash:r,maxFeePerGas:nt(this.maxFeePerGas),maxPriorityFeePerGas:nt(this.maxPriorityFeePerGas),maxFeePerBlobGas:nt(this.maxFeePerBlobGas),nonce:c,signature:d,to:a,index:n,type:i,value:nt(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const n=await this.getTransaction();n&&(t=n.blockNumber)}if(t==null)return null;const e=this.provider.getBlock(t);if(e==null)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:e,blockNumber:n}=await Qe({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return e==null||e.blockNumber==null?0:n-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const n=t??1,r=e??0;let i=m(this,Ct),a=-1,o=i===-1;const c=async()=>{if(o)return null;const{blockNumber:g,nonce:E}=await Qe({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(E<this.nonce){i=g;return}if(o)return null;const S=await this.getTransaction();if(!(S&&S.blockNumber!=null))for(a===-1&&(a=i-3,a<m(this,Ct)&&(a=m(this,Ct)));a<=g;){if(o)return null;const A=await this.provider.getBlock(a,!0);if(A==null)return;for(const L of A)if(L===this.hash)return;for(let L=0;L<A.length;L++){const I=await A.getTransaction(L);if(I.from===this.from&&I.nonce===this.nonce){if(o)return null;const B=await this.provider.getTransactionReceipt(I.hash);if(B==null||g-B.blockNumber+1<n)return;let Q="replaced";I.data===this.data&&I.to===this.to&&I.value===this.value?Q="repriced":I.data==="0x"&&I.from===I.to&&I.value===As&&(Q="cancelled"),N(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:Q==="replaced"||Q==="cancelled",reason:Q,replacement:I.replaceableTransaction(i),hash:I.hash,receipt:B})}}a++}},u=g=>{if(g==null||g.status!==0)return g;N(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:g.to,from:g.from,data:""},receipt:g})},d=await this.provider.getTransactionReceipt(this.hash);if(n===0)return u(d);if(d){if(n===1||await d.confirmations()>=n)return u(d)}else if(await c(),n===0)return null;return await new Promise((g,E)=>{const S=[],A=()=>{S.forEach(I=>I())};if(S.push(()=>{o=!0}),r>0){const I=setTimeout(()=>{A(),E(me("wait for transaction timeout","TIMEOUT"))},r);S.push(()=>{clearTimeout(I)})}const L=async I=>{if(await I.confirmations()>=n){A();try{g(u(I))}catch(B){E(B)}}};if(S.push(()=>{this.provider.off(this.hash,L)}),this.provider.on(this.hash,L),i>=0){const I=async()=>{try{await c()}catch(B){if(le(B,"TRANSACTION_REPLACED")){A(),E(B);return}}o||this.provider.once("block",I)};S.push(()=>{this.provider.off("block",I)}),this.provider.once("block",I)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return N(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Cs(this)}reorderedEvent(t){return N(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),N(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ks(this,t)}replaceableTransaction(t){y(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new wn(this,this.provider);return O(e,Ct,t),e}};Ct=new WeakMap;let an=wn;function ks(s,t){return{orphan:"reorder-transaction",tx:s,other:t}}function Cs(s){return{orphan:"drop-transaction",tx:s}}function Fi(s){return{orphan:"drop-log",log:{transactionHash:s.transactionHash,blockHash:s.blockHash,blockNumber:s.blockNumber,address:s.address,data:s.data,topics:Object.freeze(s.topics.slice()),index:s.index}}}class pn extends $e{constructor(e,n,r){super(e,e.provider);h(this,"interface");h(this,"fragment");h(this,"args");const i=n.decodeEventLog(r,e.data,e.topics);T(this,{args:i,fragment:r,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Ps extends $e{constructor(e,n){super(e,e.provider);h(this,"error");T(this,{error:n})}}var ce;class Di extends _i{constructor(e,n,r){super(r,n);P(this,ce);O(this,ce,e)}get logs(){return super.logs.map(e=>{const n=e.topics.length?m(this,ce).getEvent(e.topics[0]):null;if(n)try{return new pn(e,m(this,ce),n)}catch(r){return new Ps(e,r)}return e})}}ce=new WeakMap;var Ee;class mn extends an{constructor(e,n,r){super(r,n);P(this,Ee);O(this,Ee,e)}async wait(e,n){const r=await super.wait(e,n);return r==null?null:new Di(m(this,Ee),this.provider,r)}}Ee=new WeakMap;class Ls extends vr{constructor(e,n,r,i){super(e,n,r);h(this,"log");T(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Hi extends Ls{constructor(t,e,n,r,i){super(t,e,n,new pn(i,t.interface,r));const a=t.interface.decodeEventLog(r,this.log.data,this.log.topics);T(this,{args:a,fragment:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Yn=BigInt(0);function Us(s){return s&&typeof s.call=="function"}function Bs(s){return s&&typeof s.estimateGas=="function"}function Ge(s){return s&&typeof s.resolveName=="function"}function js(s){return s&&typeof s.sendTransaction=="function"}function Ms(s){if(s!=null){if(Ge(s))return s;if(s.provider)return s.provider}}var Ne;class $i{constructor(t,e,n){P(this,Ne);h(this,"fragment");if(T(this,{fragment:e}),e.inputs.length<n.length)throw new Error("too many arguments");const r=Jt(t.runner,"resolveName"),i=Ge(r)?r:null;O(this,Ne,async function(){const a=await Promise.all(e.inputs.map((o,c)=>n[c]==null?null:o.walkAsync(n[c],(d,f)=>d==="address"?Array.isArray(f)?Promise.all(f.map(g=>ge(g,i))):ge(f,i):f)));return t.interface.encodeFilterTopics(e,a)}())}getTopicFilter(){return m(this,Ne)}}Ne=new WeakMap;function Jt(s,t){return s==null?null:typeof s[t]=="function"?s:s.provider&&typeof s.provider[t]=="function"?s.provider:null}function Ft(s){return s==null?null:s.provider||null}async function _s(s,t){const e=z.dereference(s,"overrides");y(typeof e=="object","invalid overrides parameter","overrides",s);const n=Mi(e);return y(n.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),y(n.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function Gi(s,t,e){const n=Jt(s,"resolveName"),r=Ge(n)?n:null;return await Promise.all(t.map((i,a)=>i.walkAsync(e[a],(o,c)=>(c=z.dereference(c,o),o==="address"?ge(c,r):c))))}function Wi(s){const t=async function(a){const o=await _s(a,["data"]);o.to=await s.getAddress(),o.from&&(o.from=await ge(o.from,Ms(s.runner)));const c=s.interface,u=Ut(o.value||Yn,"overrides.value")===Yn,d=(o.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!d&&!u&&y(!1,"cannot send data to receive or send value to non-payable fallback","overrides",a),y(c.fallback||d,"cannot send data to receive-only contract","overrides.data",o.data);const f=c.receive||c.fallback&&c.fallback.payable;return y(f||u,"cannot send value to non-payable fallback","overrides.value",o.value),y(c.fallback||d,"cannot send data to receive-only contract","overrides.data",o.data),o},e=async function(a){const o=Jt(s.runner,"call");N(Us(o),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await t(a);try{return await o.call(c)}catch(u){throw qn(u)&&u.data?s.interface.makeError(u.data,c):u}},n=async function(a){const o=s.runner;N(js(o),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await o.sendTransaction(await t(a)),u=Ft(s.runner);return new mn(s.interface,u,c)},r=async function(a){const o=Jt(s.runner,"estimateGas");return N(Bs(o),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await o.estimateGas(await t(a))},i=async a=>await n(a);return T(i,{_contract:s,estimateGas:r,populateTransaction:t,send:n,staticCall:e}),i}function zi(s,t){const e=function(...u){const d=s.interface.getFunction(t,u);return N(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:u}}),d},n=async function(...u){const d=e(...u);let f={};if(d.inputs.length+1===u.length&&(f=await _s(u.pop()),f.from&&(f.from=await ge(f.from,Ms(s.runner)))),d.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const g=await Gi(s.runner,d.inputs,u);return Object.assign({},f,await Qe({to:s.getAddress(),data:s.interface.encodeFunctionData(d,g)}))},r=async function(...u){const d=await o(...u);return d.length===1?d[0]:d},i=async function(...u){const d=s.runner;N(js(d),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await d.sendTransaction(await n(...u)),g=Ft(s.runner);return new mn(s.interface,g,f)},a=async function(...u){const d=Jt(s.runner,"estimateGas");return N(Bs(d),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await d.estimateGas(await n(...u))},o=async function(...u){const d=Jt(s.runner,"call");N(Us(d),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await n(...u);let g="0x";try{g=await d.call(f)}catch(S){throw qn(S)&&S.data?s.interface.makeError(S.data,f):S}const E=e(...u);return s.interface.decodeFunctionResult(E,g)},c=async(...u)=>e(...u).constant?await r(...u):await i(...u);return T(c,{name:s.interface.getFunctionName(t),_contract:s,_key:t,getFragment:e,estimateGas:a,populateTransaction:n,send:i,staticCall:r,staticCallResult:o}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=s.interface.getFunction(t);return N(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),u}}),c}function Vi(s,t){const e=function(...r){const i=s.interface.getEvent(t,r);return N(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),i},n=function(...r){return new $i(s,e(...r),r)};return T(n,{name:s.interface.getEventName(t),_contract:s,_key:t,getFragment:e}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=s.interface.getEvent(t);return N(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),n}const Ue=Symbol.for("_ethersInternal_contract"),Fs=new WeakMap;function Ki(s,t){Fs.set(s[Ue],t)}function Z(s){return Fs.get(s[Ue])}function Ji(s){return s&&typeof s=="object"&&"getTopicFilter"in s&&typeof s.getTopicFilter=="function"&&s.fragment}async function gn(s,t){let e,n=null;if(Array.isArray(t)){const i=function(a){if(Et(a,32))return a;const o=s.interface.getEvent(a);return y(o,"unknown fragment","name",a),o.topicHash};e=t.map(a=>a==null?null:Array.isArray(a)?a.map(i):i(a))}else t==="*"?e=[null]:typeof t=="string"?Et(t,32)?e=[t]:(n=s.interface.getEvent(t),y(n,"unknown fragment","event",t),e=[n.topicHash]):Ji(t)?e=await t.getTopicFilter():"fragment"in t?(n=t.fragment,e=[n.topicHash]):y(!1,"unknown event name","event",t);e=e.map(i=>{if(i==null)return null;if(Array.isArray(i)){const a=Array.from(new Set(i.map(o=>o.toLowerCase())).values());return a.length===1?a[0]:(a.sort(),a)}return i.toLowerCase()});const r=e.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:r,topics:e}}async function fe(s,t){const{subs:e}=Z(s);return e.get((await gn(s,t)).tag)||null}async function Xn(s,t,e){const n=Ft(s.runner);N(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:r,tag:i,topics:a}=await gn(s,e),{addr:o,subs:c}=Z(s);let u=c.get(i);if(!u){const f={address:o||s,topics:a},g=L=>{let I=r;if(I==null)try{I=s.interface.getEvent(L.topics[0])}catch{}if(I){const B=I,Q=r?s.interface.decodeEventLog(r,L.data,L.topics):[];cn(s,e,Q,v=>new Hi(s,v,e,B,L))}else cn(s,e,[],B=>new Ls(s,B,e,L))};let E=[];u={tag:i,listeners:[],start:()=>{E.length||E.push(n.on(f,g))},stop:async()=>{if(E.length==0)return;let L=E;E=[],await Promise.all(L),n.off(f,g)}},c.set(i,u)}return u}let on=Promise.resolve();async function Yi(s,t,e,n){await on;const r=await fe(s,t);if(!r)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:a,once:o})=>{const c=Array.from(e);n&&c.push(n(o?null:a));try{a.call(s,...c)}catch{}return!o}),r.listeners.length===0&&(r.stop(),Z(s).subs.delete(r.tag)),i>0}async function cn(s,t,e,n){try{await on}catch{}const r=Yi(s,t,e,n);return on=r,await r}const Oe=["then"];var Qn;Qn=Ue;const pe=class pe{constructor(t,e,n,r){h(this,"target");h(this,"interface");h(this,"runner");h(this,"filters");h(this,Qn);h(this,"fallback");y(typeof t=="string"||ys(t),"invalid value for Contract target","target",t),n==null&&(n=null);const i=rn.from(e);T(this,{target:t,runner:n,interface:i}),Object.defineProperty(this,Ue,{value:{}});let a,o=null,c=null;if(r){const f=Ft(n);c=new mn(this.interface,f,r)}let u=new Map;if(typeof t=="string")if(Et(t))o=t,a=Promise.resolve(t);else{const f=Jt(n,"resolveName");if(!Ge(f))throw me("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});a=f.resolveName(t).then(g=>{if(g==null)throw me("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return Z(this).addr=g,g})}else a=t.getAddress().then(f=>{if(f==null)throw new Error("TODO");return Z(this).addr=f,f});Ki(this,{addrPromise:a,addr:o,deployTx:c,subs:u});const d=new Proxy({},{get:(f,g,E)=>{if(typeof g=="symbol"||Oe.indexOf(g)>=0)return Reflect.get(f,g,E);try{return this.getEvent(g)}catch(S){if(!le(S,"INVALID_ARGUMENT")||S.argument!=="key")throw S}},has:(f,g)=>Oe.indexOf(g)>=0?Reflect.has(f,g):Reflect.has(f,g)||this.interface.hasEvent(String(g))});return T(this,{filters:d}),T(this,{fallback:i.receive||i.fallback?Wi(this):null}),new Proxy(this,{get:(f,g,E)=>{if(typeof g=="symbol"||g in f||Oe.indexOf(g)>=0)return Reflect.get(f,g,E);try{return f.getFunction(g)}catch(S){if(!le(S,"INVALID_ARGUMENT")||S.argument!=="key")throw S}},has:(f,g)=>typeof g=="symbol"||g in f||Oe.indexOf(g)>=0?Reflect.has(f,g):f.interface.hasFunction(g)})}connect(t){return new pe(this.target,this.interface,t)}attach(t){return new pe(t,this.interface,this.runner)}async getAddress(){return await Z(this).addrPromise}async getDeployedCode(){const t=Ft(this.runner);N(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return e==="0x"?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=Ft(this.runner);return N(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((r,i)=>{const a=async()=>{try{if(await this.getDeployedCode()!=null)return r(this);n.once("block",a)}catch(o){i(o)}};a()})}deploymentTransaction(){return Z(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),zi(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),Vi(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,n){e==null&&(e=0),n==null&&(n="latest");const{addr:r,addrPromise:i}=Z(this),a=r||await i,{fragment:o,topics:c}=await gn(this,t),u={address:a,topics:c,fromBlock:e,toBlock:n},d=Ft(this.runner);return N(d,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await d.getLogs(u)).map(f=>{let g=o;if(g==null)try{g=this.interface.getEvent(f.topics[0])}catch{}if(g)try{return new pn(f,this.interface,g)}catch(E){return new Ps(f,E)}return new $e(f,d)})}async on(t,e){const n=await Xn(this,"on",t);return n.listeners.push({listener:e,once:!1}),n.start(),this}async once(t,e){const n=await Xn(this,"once",t);return n.listeners.push({listener:e,once:!0}),n.start(),this}async emit(t,...e){return await cn(this,t,e,null)}async listenerCount(t){if(t){const r=await fe(this,t);return r?r.listeners.length:0}const{subs:e}=Z(this);let n=0;for(const{listeners:r}of e.values())n+=r.length;return n}async listeners(t){if(t){const r=await fe(this,t);return r?r.listeners.map(({listener:i})=>i):[]}const{subs:e}=Z(this);let n=[];for(const{listeners:r}of e.values())n=n.concat(r.map(({listener:i})=>i));return n}async off(t,e){const n=await fe(this,t);if(!n)return this;if(e){const r=n.listeners.map(({listener:i})=>i).indexOf(e);r>=0&&n.listeners.splice(r,1)}return(e==null||n.listeners.length===0)&&(n.stop(),Z(this).subs.delete(n.tag)),this}async removeAllListeners(t){if(t){const e=await fe(this,t);if(!e)return this;e.stop(),Z(this).subs.delete(e.tag)}else{const{subs:e}=Z(this);for(const{tag:n,stop:r}of e.values())r(),e.delete(n)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){class e extends pe{constructor(r,i=null){super(r,t,i)}}return e}static from(t,e,n){return n==null&&(n=null),new this(t,e,n)}};let ln=pe;function Xi(){return ln}class Qi extends Xi(){}const Zi=["function startGame()","function makeMovement()","function endGame()","function getPlayerSession(address player) view returns (tuple(address player, uint256 score, uint256 movements, uint256 startTime, bool isActive))","function getPlayerHighScore(address player) view returns (uint256)","event GameStarted(address indexed player, uint256 timestamp)","event MovementMade(address indexed player, uint256 movementCount, uint256 score)","event GameEnded(address indexed player, uint256 finalScore, uint256 totalMovements)"],qi={6342:"0x0000000000000000000000000000000000000000",84532:"0x0000000000000000000000000000000000000000",10143:"0x0000000000000000000000000000000000000000"};class ta{constructor(){this.provider=null,this.signer=null,this.contract=null,this.chainId=null,this.transactionQueue=[],this.isProcessingQueue=!1}async initialize(t){try{if(!t)throw new Error("No wallet provided");const e=await t.getEthersProvider();this.provider=e,this.signer=e.getSigner();const n=await e.getNetwork();this.chainId=n.chainId;const r=qi[this.chainId];return r&&r!=="0x0000000000000000000000000000000000000000"&&(this.contract=new Qi(r,Zi,this.signer)),console.log(`Blockchain service initialized on chain ${this.chainId}`),!0}catch(e){return console.error("Failed to initialize blockchain service:",e),!1}}async startGame(){if(!this.contract)return console.warn("Contract not available on current network"),{success:!1,error:"Contract not deployed on current network"};try{const t=await this.contract.startGame();console.log("Game started, transaction:",t.hash);const e=await t.wait();return console.log("Game start confirmed:",e.transactionHash),{success:!0,txHash:e.transactionHash}}catch(t){return console.error("Failed to start game:",t),{success:!1,error:t.message}}}async makeMovement(){return this.contract?new Promise(t=>{this.transactionQueue.push({type:"movement",resolve:t,timestamp:Date.now()}),this.processQueue()}):(console.warn("Contract not available, simulating movement"),{success:!0,simulated:!0})}async processQueue(){if(!(this.isProcessingQueue||this.transactionQueue.length===0)){this.isProcessingQueue=!0;try{const e=this.transactionQueue.splice(0,2);for(const n of e)try{const r=await this.contract.makeMovement();console.log("Movement transaction sent:",r.hash),r.wait().then(i=>{console.log("Movement confirmed:",i.transactionHash)}),n.resolve({success:!0,txHash:r.hash,pending:!0})}catch(r){console.error("Movement transaction failed:",r),n.resolve({success:!1,error:r.message})}}catch(t){console.error("Error processing transaction queue:",t)}this.isProcessingQueue=!1,this.transactionQueue.length>0&&setTimeout(()=>this.processQueue(),100)}}async endGame(){if(!this.contract)return console.warn("Contract not available on current network"),{success:!1,error:"Contract not deployed on current network"};try{const t=await this.contract.endGame();console.log("Game ended, transaction:",t.hash);const e=await t.wait();return console.log("Game end confirmed:",e.transactionHash),{success:!0,txHash:e.transactionHash}}catch(t){return console.error("Failed to end game:",t),{success:!1,error:t.message}}}async getPlayerSession(t){if(!this.contract)return null;try{const e=await this.contract.getPlayerSession(t);return{player:e.player,score:e.score.toString(),movements:e.movements.toString(),startTime:e.startTime.toString(),isActive:e.isActive}}catch(e){return console.error("Failed to get player session:",e),null}}async getPlayerHighScore(t){if(!this.contract)return 0;try{return(await this.contract.getPlayerHighScore(t)).toString()}catch(e){return console.error("Failed to get high score:",e),0}}getNetworkName(){return{6342:"MegaETH Testnet",84532:"Base Sepolia",10143:"Monad Testnet",1:"Ethereum Mainnet",11155111:"Sepolia Testnet"}[this.chainId]||`Unknown Network (${this.chainId})`}isContractAvailable(){return this.contract!==null}getPendingTransactions(){return this.transactionQueue.length}}const jt=new ta,ea=({selectedNetwork:s})=>{const t=F.useRef(null),e=F.useRef({}),{user:n,authenticated:r}=Me(),{wallets:i}=Zn(),[a,o]=F.useState({initialized:!1,networkName:(s==null?void 0:s.name)||"Unknown",contractAvailable:!1,pendingTransactions:0,totalMovements:0,onChainScore:0}),c=1,u=1e-5,d=800,f=200,g=88/1.5,E=94/1.5,S=f,A=150,L=2400,I=24,B=.5,Q=[{width:48/1.5,height:100/1.5,imageSrc:Pt.carrot1},{width:98/1.5,height:100/1.5,imageSrc:Pt.carrot2},{width:68/1.5,height:70/1.5,imageSrc:Pt.carrot3}],v=async()=>{if(!r||!i||i.length===0||!s){o(w=>({...w,initialized:!1}));return}try{const w=i[0];try{await w.switchChain(s.id),console.log(`Switched to ${s.name}`)}catch(U){console.warn(`Failed to switch to ${s.name}:`,U)}const p=await jt.initialize(w);o({initialized:p,networkName:s.name,contractAvailable:jt.isContractAvailable(),pendingTransactions:0,totalMovements:0,onChainScore:0}),p&&jt.isContractAvailable()&&await jt.startGame()}catch(w){console.error("Failed to initialize blockchain:",w),o(p=>({...p,initialized:!1,networkName:s.name}))}},st=async()=>{if(a.initialized)try{const w=await jt.makeMovement();if(o(p=>({...p,totalMovements:p.totalMovements+1,pendingTransactions:jt.getPendingTransactions()})),w.success&&!w.simulated){const p=R();if(p){const U=await jt.getPlayerScore(p);o(b=>({...b,onChainScore:U}))}}}catch(w){console.error("On-chain movement failed:",w)}},G=()=>{if(s&&s.isWeb2)return{identifier:"CLASSIC PLAYER",address:null,isWeb2:!0};if(!r||!n)return null;const w=R();return w?{identifier:`${w.slice(0,6)}...${w.slice(-4)}`,address:w}:n.email?{identifier:n.email.split("@")[0],address:null}:null},R=()=>{var w;return!r||!i||i.length===0?null:((w=i[0])==null?void 0:w.address)||null};return F.useEffect(()=>{if(s&&s.isWeb2){o({initialized:!1,networkName:s.name,contractAvailable:!1,pendingTransactions:0,totalMovements:0,onChainScore:0});return}v()},[r,n,s]),F.useEffect(()=>{const w=t.current;if(!w)return;const p=w.getContext("2d");let U;p.imageSmoothingEnabled=!1,p.webkitImageSmoothingEnabled=!1,p.mozImageSmoothingEnabled=!1,p.msImageSmoothingEnabled=!1;const b=e.current;Object.assign(b,{scaleRatio:null,previousTime:null,gameSpeed:c,gameOver:!1,hasAddedEventListenersForRestart:!1,waitingToStart:!0});function Xt(){const C=g*b.scaleRatio,_=E*b.scaleRatio,tt=A*b.scaleRatio,lt=S*b.scaleRatio,rt=L*b.scaleRatio,Ks=I*b.scaleRatio;b.player=new lr(p,C,_,tt,lt,b.scaleRatio,s&&!s.isWeb2?st:null),b.ground=new ur(p,rt,Ks,B,b.scaleRatio);const Js=Q.map(ve=>{const ze=new Image;return ze.src=ve.imageSrc,ze.onerror=()=>console.error(`Failed to load ${ve.imageSrc}`),{image:ze,width:ve.width*b.scaleRatio,height:ve.height*b.scaleRatio}});b.carrotController=new dr(p,Js,b.scaleRatio,B),b.score=new fr(p,b.scaleRatio)}function Ot(){b.scaleRatio=Ds(),w.width=d*b.scaleRatio,w.height=f*b.scaleRatio,Xt()}function Ds(){const C=Math.min(window.innerHeight,document.documentElement.clientHeight),_=Math.min(window.innerWidth,document.documentElement.clientWidth);return _/C<d/f?_/d:C/f}function Hs(){const C=Math.floor(b.scaleRatio*32);p.font=`${C}px monospace`,p.fillStyle="#ef5435",p.textAlign="center",p.shadowColor="#ef5435",p.shadowBlur=10,p.fillText("GAME OVER",w.width/2,w.height/2-C),p.shadowBlur=0;const _=Math.floor(b.scaleRatio*16);p.font=`${_}px monospace`,p.fillStyle="#929397",p.fillText("> PRESS ANY KEY TO RESTART",w.width/2,w.height/2+_);const tt=G();if(tt){const lt=Math.floor(b.scaleRatio*12);p.font=`${lt}px monospace`,p.fillStyle="#1391ff",p.fillText(`> PILOT: ${tt.identifier}`,w.width/2,w.height/2+_+lt+20),p.fillStyle="#929397",p.fillText(`> NETWORK: ${a.networkName}`,w.width/2,w.height/2+_+lt*2+25),a.totalMovements>0&&p.fillText(`> ON-CHAIN MOVES: ${a.totalMovements}`,w.width/2,w.height/2+_+lt*3+30)}}function $s(){const C=Math.floor(b.scaleRatio*24);p.font=`${C}px monospace`,p.fillStyle="#929397",p.textAlign="center",p.shadowColor="#929397",p.shadowBlur=5,p.fillText("> PRESS ANY KEY TO START MISSION",w.width/2,w.height/2),p.shadowBlur=0;const _=G(),tt=Math.floor(b.scaleRatio*12);p.font=`${tt}px monospace`,_?(p.fillStyle="#1391ff",p.shadowColor="#1391ff",p.shadowBlur=3,p.fillText(`> PILOT AUTHENTICATED: ${_.identifier}`,w.width/2,w.height/2+C+20),p.shadowBlur=0,p.fillStyle="#929397",p.fillText(`> TARGET NETWORK: ${a.networkName}`,w.width/2,w.height/2+C+tt+25),a.initialized?(p.fillStyle="#28a745",p.fillText("> BLOCKCHAIN CONNECTION: ACTIVE",w.width/2,w.height/2+C+tt*2+30)):(p.fillStyle="#ffc107",p.fillText("> BLOCKCHAIN CONNECTION: SIMULATED MODE",w.width/2,w.height/2+C+tt*2+30))):(p.fillStyle="#ef5435",p.fillText("> WARNING: NO PILOT AUTHENTICATED",w.width/2,w.height/2+C+20))}function Gs(){const C=p.createLinearGradient(0,0,0,w.height);C.addColorStop(0,"#121218"),C.addColorStop(.5,"#1a1a2e"),C.addColorStop(1,"#16213e"),p.fillStyle=C,p.fillRect(0,0,w.width,w.height),p.strokeStyle="rgba(146, 147, 151, 0.1)",p.lineWidth=1;const _=20*b.scaleRatio;for(let rt=0;rt<w.width;rt+=_)p.beginPath(),p.moveTo(rt,0),p.lineTo(rt,w.height),p.stroke();for(let rt=0;rt<w.height;rt+=_)p.beginPath(),p.moveTo(0,rt),p.lineTo(w.width,rt),p.stroke();const tt=Date.now()/20%w.height;p.strokeStyle="rgba(19, 145, 255, 0.3)",p.lineWidth=2,p.beginPath(),p.moveTo(0,tt),p.lineTo(w.width,tt),p.stroke();const lt=p.createLinearGradient(0,0,0,w.height*.3);lt.addColorStop(0,"rgba(19, 145, 255, 0.1)"),lt.addColorStop(1,"transparent"),p.fillStyle=lt,p.fillRect(0,0,w.width,w.height*.3)}function Ws(){b.hasAddedEventListenersForRestart||(b.hasAddedEventListenersForRestart=!0,setTimeout(()=>{const C=()=>{bn(),document.removeEventListener("keyup",C),document.removeEventListener("touchstart",C)};document.addEventListener("keyup",C),document.addEventListener("touchstart",C)},1e3))}function bn(){b.hasAddedEventListenersForRestart=!1,b.gameOver=!1,b.waitingToStart=!1,b.ground.reset(),b.carrotController.reset(),b.score.reset(),b.gameSpeed=c}function zs(C){b.gameSpeed+=C*u}function Vs(){return b.carrotController.collideWith(b.player)}function We(C){if(b.previousTime===null){b.previousTime=C,U=requestAnimationFrame(We);return}const _=C-b.previousTime;b.previousTime=C,Gs(),!b.gameOver&&!b.waitingToStart&&(b.ground.update(b.gameSpeed,_),b.carrotController.update(b.gameSpeed,_),b.player.update(b.gameSpeed,_),b.score.update(_),zs(_),Vs()&&(b.gameOver=!0,Ws()),Math.random()<.01&&st()),b.ground.draw(),b.carrotController.draw(),b.player.draw(),b.score.draw(),b.gameOver&&Hs(),b.waitingToStart&&$s(),U=requestAnimationFrame(We)}Ot();const xn=()=>setTimeout(Ot,500);window.addEventListener("resize",xn),screen.orientation&&screen.orientation.addEventListener("change",Ot);const Qt=()=>{bn(),document.removeEventListener("keyup",Qt),document.removeEventListener("touchstart",Qt)};return document.addEventListener("keyup",Qt),document.addEventListener("touchstart",Qt),U=requestAnimationFrame(We),()=>{U&&cancelAnimationFrame(U),window.removeEventListener("resize",xn),screen.orientation&&screen.orientation.removeEventListener("change",Ot),document.removeEventListener("keyup",Qt),document.removeEventListener("touchstart",Qt)}},[r,n,s]),l.jsxs("div",{className:"game-canvas-container",children:[l.jsx("canvas",{ref:t,id:"game",className:"game-canvas"}),l.jsx("div",{className:"game-ui-overlay"})]})},na=({selectedNetwork:s,onDisconnect:t,disableNetworkControls:e=!1})=>{var G;const{user:n,authenticated:r,ready:i}=Me(),{login:a}=un(),{logout:o}=Qs(),{wallets:c}=Zn(),[u,d]=F.useState(!1),[f,g]=F.useState(!1),E=[{id:6342,name:"MegaETH Testnet",emoji:"⚡"},{id:84532,name:"Base Sepolia",emoji:"🔵"},{id:10143,name:"Monad Testnet",emoji:"🟣"}];F.useEffect(()=>{(async()=>{if(r&&c&&c.length>0&&s&&!f)try{await c[0].getChainId()!==s.id&&(console.log(`Auto-switching to ${s.name}...`),g(!0),await A(s.id))}catch(w){console.warn("Auto network switch failed:",w)}finally{g(!1)}})()},[r,c,s]);const S=()=>{r?(o(),t&&t()):a()},A=async R=>{var w;if(!(!c||c.length===0)){g(!0);try{const p=c[0],U=((w=E.find(b=>b.id===R))==null?void 0:w.name)||"Unknown Network";try{await p.switchChain(R),d(!1),console.log(`Successfully switched to ${U}`);return}catch(b){console.log(`Network ${U} not found, attempting to add it...`,b);const Xt=L(R);if(Xt)console.log(`Adding network ${U} to wallet...`),await I(p,Xt),await new Promise(Ot=>setTimeout(Ot,1e3)),console.log(`Switching to ${U}...`),await p.switchChain(R),d(!1),console.log(`Successfully added and switched to ${U}`);else throw new Error(`Network configuration not found for chain ID ${R}`)}}catch(p){console.error("Failed to switch network:",p);let U="Failed to switch network. ";p.message.includes("rejected")?U+="User cancelled the operation.":p.message.includes("already pending")?U+="Another network operation is in progress. Please wait and try again.":U+="Please try again or add the network manually.",alert(U)}finally{g(!1)}}},L=R=>({6342:{chainId:"0x18C6",chainName:"MegaETH Testnet",rpcUrls:["https://carrot.megaeth.com/rpc"],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorerUrls:["https://carrot.megaeth.com"]},84532:{chainId:"0x14A34",chainName:"Base Sepolia",rpcUrls:["https://sepolia.base.org"],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorerUrls:["https://sepolia.basescan.org"]},10143:{chainId:"0x279F",chainName:"Monad Testnet",rpcUrls:["https://testnet-rpc.monad.xyz"],nativeCurrency:{name:"Monad",symbol:"MON",decimals:18},blockExplorerUrls:["https://testnet.monadexplorer.com"]}})[R],I=async(R,w)=>{try{await(await R.getEthersProvider()).send("wallet_addEthereumChain",[w])}catch(p){if(p.code===4902||p.message.includes("already exists")||p.message.includes("Already added")){console.log("Network already exists in wallet");return}throw p}},B=()=>{if(!c||c.length===0)return null;const R=c[0];return E.find(w=>w.id===R.chainId)},Q=R=>R?`${R.slice(0,6)}...${R.slice(-4)}`:"",v=()=>{var R;if((R=n==null?void 0:n.wallet)!=null&&R.address)return n.wallet.address;if(n!=null&&n.linkedAccounts){const w=n.linkedAccounts.find(p=>p.type==="wallet");return w==null?void 0:w.address}return null},st=()=>{var w,p;if((w=n==null?void 0:n.email)!=null&&w.address)return n.email.address;if((p=n==null?void 0:n.phone)!=null&&p.number)return n.phone.number;const R=v();return R?Q(R):"Unknown User"};return i?l.jsxs("div",{className:"wallet-container",children:[l.jsxs("div",{className:"wallet-controls",children:[l.jsx("button",{className:`wallet-button ${r?"connected":""}`,onClick:S,children:r?"Disconnect":"Connect Wallet"}),r&&c&&c.length>0&&!e&&l.jsxs("div",{className:"network-selector",children:[l.jsx("button",{className:"network-button",onClick:()=>d(!u),disabled:f,children:f?"🔄 Switching...":B()?`${B().emoji} ${B().name}`:"🌐 Select Network"}),u&&l.jsx("div",{className:"network-dropdown",children:E.map(R=>{var w;return l.jsxs("button",{className:`network-option ${((w=B())==null?void 0:w.id)===R.id?"active":""} ${(s==null?void 0:s.id)===R.id?"selected-game-network":""}`,onClick:()=>A(R.id),disabled:f,children:[f?"🔄":R.emoji," ",R.name,(s==null?void 0:s.id)===R.id&&" 🎮"]},R.id)})})]})]}),r&&l.jsxs("div",{className:"wallet-info",children:[l.jsx("div",{className:"wallet-status",children:"Connected"}),l.jsx("div",{className:"wallet-user",children:st()}),l.jsx("div",{className:"wallet-network",children:s?s.name:((G=B())==null?void 0:G.name)||"Unknown Network"})]})]}):l.jsx("div",{className:"wallet-container",children:l.jsx("button",{className:"wallet-button",disabled:!0,children:"Loading..."})})},sa=({onNetworkSelect:s,onStartGame:t})=>{const[e,n]=F.useState(null),[r,i]=F.useState(!0),[a,o]=F.useState(""),[c,u]=F.useState({width:window.innerWidth,height:window.innerHeight}),{user:d,authenticated:f}=Me(),{login:g}=un(),E=[{id:"web2",name:"CLASSIC BROWSER",emoji:"🌐",description:"Pure web2 experience",tech:"No wallet required",color:"#2ecc71",status:"ONLINE",icon:"🦕",isWeb2:!0},{id:6342,name:"MEGAETH TESTNET",emoji:"⚡",description:"Ultra-fast execution layer",tech:"Lightning-fast transactions",color:"#ff6b6b",status:"ONLINE",icon:"🚀"},{id:84532,name:"BASE SEPOLIA",emoji:"🔵",description:"Ethereum L2 testnet",tech:"Reliable scaling solution",color:"#4ecdc4",status:"ONLINE",icon:"🌐"},{id:10143,name:"MONAD TESTNET",emoji:"🟣",description:"Next-gen blockchain",tech:"Advanced consensus",color:"#9b59b6",status:"BETA",icon:"🔮"}];F.useEffect(()=>{const v=["INITIALIZING NETWORK SCANNER...","DETECTING AVAILABLE CHAINS...","ESTABLISHING SECURE CONNECTIONS...","SYSTEM READY FOR NETWORK SELECTION"];let st=0;const G=setInterval(()=>{o(v[st]),st++,st>=v.length&&(clearInterval(G),setTimeout(()=>i(!1),500))},800);return()=>clearInterval(G)},[]),F.useEffect(()=>{const v=()=>{u({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),F.useEffect(()=>{},[c]);const S=()=>{const{width:v,height:st}=c,G=v<=768,R=v>768&&v<=1024,w=v>1024,p=v>1600;let U;G?U=Math.min(v*.98,v-20):R?U=Math.min(v*.92,v-60):p?U=Math.min(v*.85,1400):U=Math.min(v*.88,1200);const b=st*(G?.95:.9),Xt=Math.min(st*(G?.7:.6),G?500:600),Ot=G?Math.max(15,v*.03):Math.max(20,v*.025);return{containerStyle:{width:`${U}px`,maxHeight:`${b}px`,minHeight:`${Xt}px`,transition:"all 0.3s ease"},contentStyle:{padding:`${Ot}px`,transition:"all 0.3s ease"},networkGridStyle:{gridTemplateColumns:G?"1fr":R?"repeat(auto-fit, minmax(280px, 1fr))":"repeat(auto-fit, minmax(300px, 1fr))",gap:`${G?15:w?25:20}px`}}},{containerStyle:A,contentStyle:L,networkGridStyle:I}=S(),B=v=>{n(v),s(v)},Q=()=>{if(e){if(e.isWeb2){t(e);return}f&&d?t(e):(s(e),g())}};return F.useEffect(()=>{f&&d&&e&&t(e)},[f,d,e,t]),r?l.jsx("div",{className:"network-scanner-overlay",children:l.jsx("div",{className:"scanner-container",style:A,children:l.jsxs("div",{className:"scanner-content",style:L,children:[l.jsxs("div",{className:"terminal-header",children:[l.jsx("div",{className:"terminal-title",children:"NETWORK SCANNER PROTOCOL"}),l.jsxs("div",{className:"terminal-buttons",children:[l.jsx("div",{className:"terminal-button red"}),l.jsx("div",{className:"terminal-button yellow"}),l.jsx("div",{className:"terminal-button green"})]})]}),l.jsx("div",{className:"logo-section",children:l.jsx("div",{className:"pixel-logo",children:l.jsxs("div",{className:"logo-text",children:[l.jsx("span",{className:"logo-main",children:"BUDDY"}),l.jsx("span",{className:"logo-accent",children:"RUNNER"})]})})}),l.jsx("div",{className:"scanner-display",children:l.jsxs("div",{className:"radar-container",children:[l.jsx("div",{className:"radar-sweep"}),l.jsx("div",{className:"radar-grid"})]})}),l.jsxs("div",{className:"scanner-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," ",a]})]})})}):l.jsx("div",{className:"network-selection-overlay",children:l.jsx("div",{className:"network-selection-container",style:A,children:l.jsxs("div",{className:"network-selection-content",style:L,children:[l.jsxs("div",{className:"terminal-header",children:[l.jsx("div",{className:"terminal-title",children:"BLOCKCHAIN NETWORK SELECTOR"}),l.jsxs("div",{className:"terminal-buttons",children:[l.jsx("div",{className:"terminal-button red"}),l.jsx("div",{className:"terminal-button yellow"}),l.jsx("div",{className:"terminal-button green"})]})]}),l.jsx("div",{className:"logo-section",children:l.jsxs("div",{className:"pixel-logo",children:[l.jsxs("div",{className:"logo-text",children:[l.jsx("span",{className:"logo-main",children:"BUDDY"}),l.jsx("span",{className:"logo-accent",children:"RUNNER"})]}),l.jsxs("div",{className:"logo-powered",children:["POWERED BY ",l.jsx("strong",{children:"MEGA BUDDIES"})]})]})}),l.jsxs("div",{className:"mission-briefing",children:[l.jsx("div",{className:"briefing-title",children:"MISSION BRIEFING"}),l.jsxs("div",{className:"briefing-content",children:[l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," OBJECTIVE: SURVIVE 60 SECONDS ON EACH NETWORK"]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," ANALYZE BLOCK TIME IMPACT ON USER EXPERIENCE"]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," DISCOVER THE POWER OF REAL-TIME BLOCKCHAIN"]})]})]}),l.jsxs("div",{className:"network-selection",children:[l.jsx("div",{className:"selection-title",children:"SELECT TARGET BLOCKCHAIN NETWORK:"}),l.jsx("div",{className:"network-grid",style:I,children:E.map(v=>l.jsxs("div",{className:`network-card ${(e==null?void 0:e.id)===v.id?"selected":""}`,onClick:()=>B(v),children:[l.jsxs("div",{className:"network-header",children:[l.jsx("div",{className:"network-icon",children:v.icon}),l.jsx("div",{className:"network-status","data-status":v.status,children:v.status})]}),l.jsxs("div",{className:"network-info",children:[l.jsx("div",{className:"network-name",children:v.name}),l.jsx("div",{className:"network-description",children:v.description}),l.jsx("div",{className:"network-tech",children:v.tech})]}),l.jsxs("div",{className:"network-specs",children:[l.jsxs("div",{className:"spec-item",children:[l.jsx("span",{className:"spec-label",children:v.isWeb2?"TYPE:":"CHAIN ID:"}),l.jsx("span",{className:"spec-value",children:v.isWeb2?"WEB2":v.id})]}),l.jsxs("div",{className:"spec-item",children:[l.jsx("span",{className:"spec-label",children:"NETWORK:"}),l.jsx("span",{className:"spec-value",children:v.isWeb2?"BROWSER":"TESTNET"})]})]}),l.jsx("div",{className:"selection-indicator",children:(e==null?void 0:e.id)===v.id&&l.jsx("div",{className:"selected-glow",children:"SELECTED"})})]},v.id))}),e&&l.jsxs("div",{className:"launch-section",children:[l.jsxs("div",{className:"launch-info",children:[l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," TARGET NETWORK: ",e.name]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," MISSION STATUS: READY FOR DEPLOYMENT"]})]}),l.jsxs("button",{className:"launch-button",onClick:Q,children:[l.jsx("span",{className:"button-icon",children:"🚀"}),"LAUNCH MISSION ON ",e.name,l.jsx("div",{className:"button-glow"})]})]})]})]})})})},ra=({onWalletConnected:s})=>{const{user:t,authenticated:e,ready:n}=Me(),{login:r}=un(),[i,a]=F.useState("INITIALIZING"),[o,c]=F.useState("");F.useEffect(()=>{e&&t&&s()},[e,t,s]),F.useEffect(()=>{const d=setInterval(()=>{c(g=>g.length>=3?"":g+".")},500),f=setInterval(()=>{const g=["INITIALIZING","LOADING SYSTEMS","CONNECTING","SYNCING"];a(g[Math.floor(Math.random()*g.length)])},2e3);return()=>{clearInterval(d),clearInterval(f)}},[]);const u=()=>{r()};return n?l.jsx("div",{className:"wallet-connection-overlay",children:l.jsx("div",{className:"wallet-connection-container",children:l.jsxs("div",{className:"wallet-connection-content",children:[l.jsxs("div",{className:"terminal-header",children:[l.jsx("div",{className:"terminal-title",children:"WALLET CONNECTION PROTOCOL"}),l.jsxs("div",{className:"terminal-buttons",children:[l.jsx("div",{className:"terminal-button red"}),l.jsx("div",{className:"terminal-button yellow"}),l.jsx("div",{className:"terminal-button green"})]})]}),l.jsx("div",{className:"logo-section",children:l.jsxs("div",{className:"pixel-logo",children:[l.jsxs("div",{className:"logo-text",children:[l.jsx("span",{className:"logo-main",children:"BUDDY"}),l.jsx("span",{className:"logo-accent",children:"RUNNER"})]}),l.jsxs("div",{className:"logo-powered",children:["POWERED BY ",l.jsx("strong",{children:"MEGA BUDDIES"})]})]})}),l.jsxs("div",{className:"connection-section",children:[l.jsx("div",{className:"connection-icon",children:"🔗"}),l.jsx("h2",{className:"connection-title",children:"AUTHENTICATION REQUIRED"}),l.jsxs("div",{className:"terminal-content",children:[l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," CONNECT YOUR WALLET TO ACCESS THE GAME"]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," ALL SCORES WILL BE STORED ON-CHAIN"]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," SECURE BLOCKCHAIN AUTHENTICATION"]})]}),l.jsxs("button",{className:"connect-wallet-button",onClick:u,children:[l.jsx("span",{className:"button-icon",children:"🔐"}),"CONNECT WALLET",l.jsx("div",{className:"button-glow"})]}),l.jsxs("div",{className:"supported-options",children:[l.jsx("div",{className:"options-title",children:"SUPPORTED AUTHENTICATION METHODS:"}),l.jsxs("div",{className:"options-grid",children:[l.jsxs("div",{className:"option-item",children:[l.jsx("span",{className:"option-icon",children:"📧"}),l.jsx("span",{className:"option-text",children:"EMAIL"})]}),l.jsxs("div",{className:"option-item",children:[l.jsx("span",{className:"option-icon",children:"📱"}),l.jsx("span",{className:"option-text",children:"PHONE"})]}),l.jsxs("div",{className:"option-item",children:[l.jsx("span",{className:"option-icon",children:"🦊"}),l.jsx("span",{className:"option-text",children:"METAMASK"})]}),l.jsxs("div",{className:"option-item",children:[l.jsx("span",{className:"option-icon",children:"💼"}),l.jsx("span",{className:"option-text",children:"OTHER WALLETS"})]})]})]}),l.jsxs("div",{className:"security-info",children:[l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," SECURITY: 256-BIT ENCRYPTION"]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," NETWORK: MEGAETH COMPATIBLE"]})]})]})]})})}):l.jsx("div",{className:"preloader-overlay",children:l.jsx("div",{className:"preloader-container",children:l.jsxs("div",{className:"preloader-content",children:[l.jsxs("div",{className:"terminal-header",children:[l.jsx("div",{className:"terminal-title",children:"BUDDY RUNNER SYSTEM"}),l.jsxs("div",{className:"terminal-buttons",children:[l.jsx("div",{className:"terminal-button red"}),l.jsx("div",{className:"terminal-button yellow"}),l.jsx("div",{className:"terminal-button green"})]})]}),l.jsx("div",{className:"logo-section",children:l.jsx("div",{className:"pixel-logo",children:l.jsxs("div",{className:"logo-text",children:[l.jsx("span",{className:"logo-main",children:"BUDDY"}),l.jsx("span",{className:"logo-accent",children:"RUNNER"})]})})}),l.jsx("div",{className:"loading-bar",children:l.jsx("div",{className:"progress",style:{width:"100%"}})}),l.jsxs("div",{className:"loading-text",children:[i,l.jsx("span",{className:"dots",children:o})]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," System initialization in progress..."]})]})})})},ia=()=>{const s="cme84q0og02aalc0bh9blzwa9",[t,e]=F.useState("network-selection"),[n,r]=F.useState(null),i={appearance:{theme:"light",accentColor:"#7FBC7F",logo:"https://your-logo-url.com/logo.png"},embeddedWallets:{createOnLogin:"users-without-wallets",noPromptOnSignature:!1},loginMethods:["email","wallet"],supportedChains:[{id:6342,name:"MegaETH Testnet",network:"megaeth-testnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://carrot.megaeth.com/rpc"],webSocket:["wss://carrot.megaeth.com/ws"]}},blockExplorers:{default:{name:"MegaETH Explorer",url:"https://carrot.megaeth.com"}}},{id:84532,name:"Base Sepolia",network:"base-sepolia",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Base Sepolia Explorer",url:"https://sepolia.basescan.org"}}},{id:10143,name:"Monad Testnet",network:"monad-testnet",nativeCurrency:{name:"Monad",symbol:"MON",decimals:18},rpcUrls:{default:{http:["https://testnet-rpc.monad.xyz"]}},blockExplorers:{default:{name:"Monad Explorer",url:"https://testnet.monadexplorer.com"}}},{id:1,name:"Ethereum",network:"homestead",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth-mainnet.g.alchemy.com/v2/your-api-key"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io"}}},{id:11155111,name:"Sepolia",network:"sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.infura.io/v3/your-api-key"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io"}}}]},a=f=>{r(f)},o=f=>{r(f),e("game")},c=()=>{e("game")},u=()=>{e("network-selection"),r(null)},d=()=>{e("network-selection"),r(null)};return l.jsx(Zs,{appId:s,config:i,children:l.jsx("div",{className:"app",children:t==="network-selection"?l.jsx(sa,{onNetworkSelect:a,onStartGame:o}):t==="wallet-connection"?l.jsxs("div",{children:[l.jsx("div",{className:"back-to-wallet",children:l.jsx("button",{className:"back-button-small",onClick:u,children:"← Back to Network Selection"})}),l.jsx(ra,{onWalletConnected:c})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"back-to-network-button",children:l.jsx("button",{className:"back-button",onClick:u,children:"← Back to Network Selection"})}),n&&!n.isWeb2&&l.jsx(na,{selectedNetwork:n,onDisconnect:d,disableNetworkControls:!0}),l.jsx("div",{className:"game-layout",children:l.jsx("div",{className:"game-header",children:l.jsx("div",{className:"header-center",children:l.jsxs("div",{className:"title",children:["Buddy Runner",n&&n.isWeb2&&l.jsx("span",{className:"web2-mode",children:" - Classic Mode"})]})})})}),l.jsx(ea,{selectedNetwork:n}),l.jsxs("div",{className:"instructions",children:[l.jsx("p",{className:"main-instruction",children:"📱 Press SPACE or tap to make Buddy jump!"}),l.jsx("p",{className:"help-text",children:"Help our brave bunny Buddy hop over the giant carrots and achieve the highest score!"}),l.jsx("p",{className:"warning-text",children:"Watch out for those sneaky garden carrots!"})]})]})})})};Xe.createRoot(document.getElementById("root")).render(l.jsx(tr.StrictMode,{children:l.jsx(ia,{})}));
