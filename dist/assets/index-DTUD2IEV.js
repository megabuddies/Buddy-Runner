const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ccip-nr80sE49.js","assets/privy-CJey9ZCd.js","assets/vendor-C7A1SLig.js"])))=>i.map(i=>d[i]);
var Gs=Object.defineProperty;var zs=(e,t,n)=>t in e?Gs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var re=(e,t,n)=>zs(e,typeof t!="symbol"?t+"":t,n);import{_ as Us,m as rt,o as rn,j as l,i as sn,a as Hs,X as _s}from"./privy-CJey9ZCd.js";import{b as Ws,r as F,R as qs}from"./vendor-C7A1SLig.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var An={},vr=Ws;An.createRoot=vr.createRoot,An.hydrateRoot=vr.hydrateRoot;function Ks(e,t){const n=e.exec(t);return n==null?void 0:n.groups}const Tr=/^tuple(?<array>(\[(\d*)\])*)$/;function $n(e){let t=e.type;if(Tr.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++){const a=e.components[s];t+=$n(a),s<n-1&&(t+=", ")}const r=Ks(Tr,e.type);return t+=`)${(r==null?void 0:r.array)??""}`,$n({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function ft(e){let t="";const n=e.length;for(let r=0;r<n;r++){const s=e[r];t+=$n(s),r!==n-1&&(t+=", ")}return t}function Js(e){return e.type==="function"?`function ${e.name}(${ft(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs.length?` returns (${ft(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${ft(e.inputs)})`:e.type==="error"?`error ${e.name}(${ft(e.inputs)})`:e.type==="constructor"?`constructor(${ft(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?"fallback()":"receive() external payable"}function _(e,t,n){return r=>{var s;return((s=e[t.name||n])==null?void 0:s.call(e,r))??t(e,r)}}function Me(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new da(e.type);return`${e.name}(${an(e.inputs,{includeName:t})})`}function an(e,{includeName:t=!1}={}){return e?e.map(n=>Ys(n,{includeName:t})).join(t?", ":","):""}function Ys(e,{includeName:t}){return e.type.startsWith("tuple")?`(${an(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}function je(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function ie(e){return je(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const Vs="1.21.3",Xs=e=>e,on=e=>e,Zs=()=>`viem@${Vs}`;class I extends Error{constructor(t,n={}){var a;super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:Zs()});const r=n.cause instanceof I?n.cause.details:(a=n.cause)!=null&&a.message?n.cause.message:n.details,s=n.cause instanceof I&&n.cause.docsPath||n.docsPath;this.message=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://viem.sh${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=t}walk(t){return Lr(this,t)}}function Lr(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e?Lr(e.cause,t):t?null:e}class Qs extends I{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorNotFoundError"})}}class Er extends I{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorParamsNotFoundError"})}}class Xn extends I{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${an(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class cn extends I{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingZeroDataError"})}}class ea extends I{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class ta extends I{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${ie(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class na extends I{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}class Gr extends I{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class ra extends I{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureEmptyTopicsError"})}}class sa extends I{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureNotFoundError"})}}class Pr extends I{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventNotFoundError"})}}class Qt extends I{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class aa extends I{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionOutputsNotFoundError"})}}class oa extends I{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${Me(t.abiItem)}\`, and`,`\`${n.type}\` in \`${Me(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItemAmbiguityError"})}}class ia extends I{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class Je extends I{constructor({abiItem:t,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${an(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=s}}class st extends I{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Me(t,{includeName:!0})}".`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class ca extends I{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class la extends I{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiDecodingType"})}}class ua extends I{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class da extends I{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}class fa extends I{constructor(t){super(`Filter type "${t}" is not supported.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FilterTypeNotSupportedError"})}}class zr extends I{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class Ur extends I{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}function at(e,{dir:t,size:n=32}={}){return typeof e=="string"?Le(e,{dir:t,size:n}):ha(e,{dir:t,size:n})}function Le(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new Ur({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function ha(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Ur({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const a=t==="right";r[a?s:n-s-1]=e[a?s:e.length-s-1]}return r}class ma extends I{constructor({max:t,min:n,signed:r,size:s,value:a}){super(`Number "${a}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class ga extends I{constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidHexBooleanError"})}}class pa extends I{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}function Qe(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let s=0;s<n.length-1&&n[t==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function _e(e,{size:t}){if(ie(e)>t)throw new pa({givenSize:ie(e),maxSize:t})}function ln(e,t={}){const{signed:n}=t;t.size&&_e(e,{size:t.size});const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,a=(1n<<BigInt(s)*8n-1n)-1n;return r<=a?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function ba(e,t={}){let n=e;if(t.size&&(_e(n,{size:t.size}),n=Qe(n)),Qe(n)==="0x00")return!1;if(Qe(n)==="0x01")return!0;throw new ga(n)}function ue(e,t={}){return Number(ln(e,t))}function ya(e,t={}){let n=Qn(e);return t.size&&(_e(n,{size:t.size}),n=Qe(n,{dir:"right"})),new TextDecoder().decode(n)}const wa=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Be(e,t={}){return typeof e=="number"||typeof e=="bigint"?Y(e,t):typeof e=="string"?Zn(e,t):typeof e=="boolean"?Hr(e,t):pt(e,t)}function Hr(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(_e(n,{size:t.size}),at(n,{size:t.size})):n}function pt(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=wa[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(_e(r,{size:t.size}),at(r,{dir:"right",size:t.size})):r}function Y(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let a;r?n?a=(1n<<BigInt(r)*8n-1n)-1n:a=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(a=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof a=="bigint"&&n?-a-1n:0;if(a&&s>a||s<o){const u=typeof e=="bigint"?"n":"";throw new ma({max:a?`${a}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${e}${u}`})}const i=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?at(i,{size:r}):i}const xa=new TextEncoder;function Zn(e,t={}){const n=xa.encode(e);return pt(n,t)}const va=new TextEncoder;function Ge(e,t={}){return typeof e=="number"||typeof e=="bigint"?Ea(e,t):typeof e=="boolean"?Ta(e,t):je(e)?Qn(e,t):ke(e,t)}function Ta(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(_e(n,{size:t.size}),at(n,{size:t.size})):n}const Ie={zero:48,nine:57,A:65,F:70,a:97,f:102};function Nr(e){if(e>=Ie.zero&&e<=Ie.nine)return e-Ie.zero;if(e>=Ie.A&&e<=Ie.F)return e-(Ie.A-10);if(e>=Ie.a&&e<=Ie.f)return e-(Ie.a-10)}function Qn(e,t={}){let n=e;t.size&&(_e(n,{size:t.size}),n=at(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,a=new Uint8Array(s);for(let o=0,i=0;o<s;o++){const u=Nr(r.charCodeAt(i++)),h=Nr(r.charCodeAt(i++));if(u===void 0||h===void 0)throw new I(`Invalid byte sequence ("${r[i-2]}${r[i-1]}" in "${r}").`);a[o]=u*16+h}return a}function Ea(e,t){const n=Y(e,t);return Qn(n)}function ke(e,t={}){const n=va.encode(e);return typeof t.size=="number"?(_e(n,{size:t.size}),at(n,{dir:"right",size:t.size})):n}function Pa(e){let t=!0,n="",r=0,s="",a=!1;for(let o=0;o<e.length;o++){const i=e[o];if(["(",")",","].includes(i)&&(t=!0),i==="("&&r++,i===")"&&r--,!!t){if(r===0){if(i===" "&&["event","function",""].includes(s))s="";else if(s+=i,i===")"){a=!0;break}continue}if(i===" "){e[o-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=i,n+=i}}if(!a)throw new I("Unable to normalize signature.");return s}const _r=e=>{const t=typeof e=="string"?e:Js(e);return Pa(t)},Na=e=>_r(e);function Cr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Wr(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function jr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ca(e,t){Wr(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Yt=BigInt(2**32-1),Sr=BigInt(32);function ja(e,t=!1){return t?{h:Number(e&Yt),l:Number(e>>Sr&Yt)}:{h:Number(e>>Sr&Yt)|0,l:Number(e&Yt)|0}}function Sa(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:a,l:o}=ja(e[s],t);[n[s],r[s]]=[a,o]}return[n,r]}const Aa=(e,t,n)=>e<<n|t>>>32-n,$a=(e,t,n)=>t<<n|e>>>32-n,Ra=(e,t,n)=>t<<n-32|e>>>64-n,Ia=(e,t,n)=>e<<n-32|t>>>64-n;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Oa=e=>e instanceof Uint8Array,ka=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Ma=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ma)throw new Error("Non little-endian hardware is not supported");function Fa(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function qr(e){if(typeof e=="string"&&(e=Fa(e)),!Oa(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}class Ba{clone(){return this._cloneInto()}}function Da(e){const t=r=>e().update(qr(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}const[Kr,Jr,Yr]=[[],[],[]],La=BigInt(0),ht=BigInt(1),Ga=BigInt(2),za=BigInt(7),Ua=BigInt(256),Ha=BigInt(113);for(let e=0,t=ht,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Kr.push(2*(5*r+n)),Jr.push((e+1)*(e+2)/2%64);let s=La;for(let a=0;a<7;a++)t=(t<<ht^(t>>za)*Ha)%Ua,t&Ga&&(s^=ht<<(ht<<BigInt(a))-ht);Yr.push(s)}const[_a,Wa]=Sa(Yr,!0),Ar=(e,t,n)=>n>32?Ra(e,t,n):Aa(e,t,n),$r=(e,t,n)=>n>32?Ia(e,t,n):$a(e,t,n);function qa(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const i=(o+8)%10,u=(o+2)%10,h=n[u],f=n[u+1],p=Ar(h,f,1)^n[i],g=$r(h,f,1)^n[i+1];for(let x=0;x<50;x+=10)e[o+x]^=p,e[o+x+1]^=g}let s=e[2],a=e[3];for(let o=0;o<24;o++){const i=Jr[o],u=Ar(s,a,i),h=$r(s,a,i),f=Kr[o];s=e[f],a=e[f+1],e[f]=u,e[f+1]=h}for(let o=0;o<50;o+=10){for(let i=0;i<10;i++)n[i]=e[o+i];for(let i=0;i<10;i++)e[o+i]^=~n[(i+2)%10]&n[(i+4)%10]}e[0]^=_a[r],e[1]^=Wa[r]}n.fill(0)}class er extends Ba{constructor(t,n,r,s=!1,a=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Cr(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ka(this.state)}keccak(){qa(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){jr(this);const{blockLen:n,state:r}=this;t=qr(t);const s=t.length;for(let a=0;a<s;){const o=Math.min(n-this.pos,s-a);for(let i=0;i<o;i++)r[this.pos++]^=t[a++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,n&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){jr(this,!1),Wr(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,a=t.length;s<a;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,a-s);t.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Cr(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Ca(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:a,enableXOF:o}=this;return t||(t=new er(n,r,s,o,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=r,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const Ka=(e,t,n)=>Da(()=>new er(t,e,n)),Ja=Ka(1,136,256/8);function fe(e,t){const n=t||"hex",r=Ja(je(e,{strict:!1})?Ge(e):e);return n==="bytes"?r:Be(r)}const Ya=e=>fe(Ge(e)),tr=e=>Ya(Na(e));class bt extends I{constructor({address:t}){super(`Address "${t}" is invalid.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}const Va=/^0x[a-fA-F0-9]{40}$/;function ze(e){return Va.test(e)}function Fe(e){return typeof e[0]=="string"?nr(e):Xa(e)}function Xa(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function nr(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function ae(e,t,n,{strict:r}={}){return je(e,{strict:!1})?Qa(e,t,n,{strict:r}):Za(e,t,n,{strict:r})}function Vr(e,t){if(typeof t=="number"&&t>0&&t>ie(e)-1)throw new zr({offset:t,position:"start",size:ie(e)})}function Xr(e,t,n){if(typeof t=="number"&&typeof n=="number"&&ie(e)!==n-t)throw new zr({offset:n,position:"end",size:ie(e)})}function Za(e,t,n,{strict:r}={}){Vr(e,t);const s=e.slice(t,n);return r&&Xr(s,t,n),s}function Qa(e,t,n,{strict:r}={}){Vr(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&Xr(s,t,n),s}function Mt(e,t){if(e.length!==t.length)throw new na({expectedLength:e.length,givenLength:t.length});const n=eo({params:e,values:t}),r=sr(n);return r.length===0?"0x":r}function eo({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(rr({param:e[r],value:t[r]}));return n}function rr({param:e,value:t}){const n=un(e.type);if(n){const[r,s]=n;return no(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return io(t,{param:e});if(e.type==="address")return to(t);if(e.type==="bool")return so(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int");return ao(t,{signed:r})}if(e.type.startsWith("bytes"))return ro(t,{param:e});if(e.type==="string")return oo(t);throw new ca(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function sr(e){let t=0;for(let a=0;a<e.length;a++){const{dynamic:o,encoded:i}=e[a];o?t+=32:t+=ie(i)}const n=[],r=[];let s=0;for(let a=0;a<e.length;a++){const{dynamic:o,encoded:i}=e[a];o?(n.push(Y(t+s,{size:32})),r.push(i),s+=ie(i)):n.push(i)}return Fe([...n,...r])}function to(e){if(!ze(e))throw new bt({address:e});return{dynamic:!1,encoded:Le(e.toLowerCase())}}function no(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new ua(e);if(!r&&e.length!==t)throw new ea({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const a=[];for(let o=0;o<e.length;o++){const i=rr({param:n,value:e[o]});i.dynamic&&(s=!0),a.push(i)}if(r||s){const o=sr(a);if(r){const i=Y(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Fe([i,o]):i}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Fe(a.map(({encoded:o})=>o))}}function ro(e,{param:t}){const[,n]=t.type.split("bytes"),r=ie(e);if(!n){let s=e;return r%32!==0&&(s=Le(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:Fe([Le(Y(r,{size:32})),s])}}if(r!==parseInt(n))throw new ta({expectedSize:parseInt(n),value:e});return{dynamic:!1,encoded:Le(e,{dir:"right"})}}function so(e){return{dynamic:!1,encoded:Le(Hr(e))}}function ao(e,{signed:t}){return{dynamic:!1,encoded:Y(e,{size:32,signed:t})}}function oo(e){const t=Zn(e),n=Math.ceil(ie(t)/32),r=[];for(let s=0;s<n;s++)r.push(Le(ae(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Fe([Le(Y(ie(t),{size:32})),...r])}}function io(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const a=t.components[s],o=Array.isArray(e)?s:a.name,i=rr({param:a,value:e[o]});r.push(i),i.dynamic&&(n=!0)}return{dynamic:n,encoded:n?sr(r):Fe(r.map(({encoded:s})=>s))}}function un(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const co=e=>fe(Ge(e)),ar=e=>ae(co(_r(e)),0,4);function Ft({abi:e,args:t=[],name:n}){const r=je(n,{strict:!1}),s=e.filter(o=>r?o.type==="function"?ar(o)===n:o.type==="event"?tr(o)===n:!1:"name"in o&&o.name===n);if(s.length===0)return;if(s.length===1)return s[0];let a;for(const o of s){if(!("inputs"in o))continue;if(!t||t.length===0){if(!o.inputs||o.inputs.length===0)return o;continue}if(!o.inputs||o.inputs.length===0||o.inputs.length!==t.length)continue;if(t.every((u,h)=>{const f="inputs"in o&&o.inputs[h];return f?Rn(u,f):!1})){if(a&&"inputs"in a&&a.inputs){const u=Zr(o.inputs,a.inputs,t);if(u)throw new oa({abiItem:o,type:u[0]},{abiItem:a,type:u[1]})}a=o}}return a||s[0]}function Rn(e,t){const n=typeof e,r=t.type;switch(r){case"address":return ze(e);case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,a)=>Rn(Object.values(e)[a],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>Rn(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Zr(e,t,n){for(const r in e){const s=e[r],a=t[r];if(s.type==="tuple"&&a.type==="tuple"&&"components"in s&&"components"in a)return Zr(s.components,a.components,n[r]);const o=[s.type,a.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")||o.includes("address")&&o.includes("bytes")?ze(n[r]):!1)return o}}function Bt({abi:e,eventName:t,args:n}){var i;let r=e[0];if(t&&(r=Ft({abi:e,args:n,name:t}),!r))throw new Pr(t,{docsPath:"/docs/contract/encodeEventTopics"});if(r.type!=="event")throw new Pr(void 0,{docsPath:"/docs/contract/encodeEventTopics"});const s=Me(r),a=tr(s);let o=[];if(n&&"inputs"in r){const u=(i=r.inputs)==null?void 0:i.filter(f=>"indexed"in f&&f.indexed),h=Array.isArray(n)?n:Object.values(n).length>0?(u==null?void 0:u.map(f=>n[f.name]))??[]:[];h.length>0&&(o=(u==null?void 0:u.map((f,p)=>Array.isArray(h[p])?h[p].map((g,x)=>Rr({param:f,value:h[p][x]})):h[p]?Rr({param:f,value:h[p]}):null))??[])}return[a,...o]}function Rr({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return fe(Ge(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new fa(e.type);return Mt([e],[t])}function dn(e,{method:t}){var r,s;const n={};return e.transport.type==="fallback"&&((s=(r=e.transport).onResponse)==null||s.call(r,({method:a,response:o,status:i,transport:u})=>{i==="success"&&t===a&&(n[o]=u.request)})),a=>n[a]||e.request}async function Qr(e,{address:t,abi:n,args:r,eventName:s,fromBlock:a,strict:o,toBlock:i}){const u=dn(e,{method:"eth_newFilter"}),h=s?Bt({abi:n,args:r,eventName:s}):void 0,f=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof a=="bigint"?Y(a):a,toBlock:typeof i=="bigint"?Y(i):i,topics:h}]});return{abi:n,args:r,eventName:s,id:f,request:u(f),strict:o,type:"event"}}function Te(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}function We({abi:e,args:t,functionName:n}){let r=e[0];if(n&&(r=Ft({abi:e,args:t,name:n}),!r))throw new Qt(n,{docsPath:"/docs/contract/encodeFunctionData"});if(r.type!=="function")throw new Qt(void 0,{docsPath:"/docs/contract/encodeFunctionData"});const s=Me(r),a=ar(s),o="inputs"in r&&r.inputs?Mt(r.inputs,t??[]):void 0;return nr([a,o??"0x"])}const es={1:"An `assert` condition failed.",17:"Arithmic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},lo={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},uo={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function or(e,t){const n=e.substring(2).toLowerCase(),r=fe(ke(n),"bytes"),s=n.split("");for(let a=0;a<40;a+=2)r[a>>1]>>4>=8&&s[a]&&(s[a]=s[a].toUpperCase()),(r[a>>1]&15)>=8&&s[a+1]&&(s[a+1]=s[a+1].toUpperCase());return`0x${s.join("")}`}function fo(e,t){if(!ze(e))throw new bt({address:e});return or(e)}function fn(e,t){if(t==="0x"&&e.length>0)throw new cn;if(ie(t)&&ie(t)<32)throw new Xn({data:t,params:e,size:ie(t)});return ho({data:t,params:e})}function ho({data:e,params:t}){const n=[];let r=0;for(let s=0;s<t.length;s++){if(r>=ie(e))throw new Xn({data:e,params:t,size:ie(e)});const a=t[s],{consumed:o,value:i}=et({data:e,param:a,position:r});n.push(i),r+=o}return n}function et({data:e,param:t,position:n}){const r=un(t.type);if(r){const[a,o]=r;return go(e,{length:a,param:{...t,type:o},position:n})}if(t.type==="tuple")return xo(e,{param:t,position:n});if(t.type==="string")return wo(e,{position:n});if(t.type.startsWith("bytes"))return bo(e,{param:t,position:n});const s=ae(e,n,n+32,{strict:!0});if(t.type.startsWith("uint")||t.type.startsWith("int"))return yo(s,{param:t});if(t.type==="address")return mo(s);if(t.type==="bool")return po(s);throw new la(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function mo(e){return{consumed:32,value:or(ae(e,-20))}}function go(e,{param:t,length:n,position:r}){if(!n){const o=ue(ae(e,r,r+32,{strict:!0})),i=ue(ae(e,o,o+32,{strict:!0}));let u=0;const h=[];for(let f=0;f<i;++f){const p=et({data:ae(e,o+32),param:t,position:u});u+=p.consumed,h.push(p.value)}return{value:h,consumed:32}}if(en(t)){const o=un(t.type),i=!(o!=null&&o[0]);let u=0;const h=[];for(let f=0;f<n;++f){const p=ue(ae(e,r,r+32,{strict:!0})),g=et({data:ae(e,p),param:t,position:i?u:f*32});u+=g.consumed,h.push(g.value)}return{value:h,consumed:32}}let s=0;const a=[];for(let o=0;o<n;++o){const i=et({data:e,param:t,position:r+s});s+=i.consumed,a.push(i.value)}return{value:a,consumed:s}}function po(e){return{consumed:32,value:ba(e)}}function bo(e,{param:t,position:n}){const[r,s]=t.type.split("bytes");if(!s){const o=ue(ae(e,n,n+32,{strict:!0})),i=ue(ae(e,o,o+32,{strict:!0}));return i===0?{consumed:32,value:"0x"}:{consumed:32,value:ae(e,o+32,o+32+i,{strict:!0})}}return{consumed:32,value:ae(e,n,n+parseInt(s),{strict:!0})}}function yo(e,{param:t}){const n=t.type.startsWith("int");return{consumed:32,value:parseInt(t.type.split("int")[1]||"256")>48?ln(e,{signed:n}):ue(e,{signed:n})}}function wo(e,{position:t}){const n=ue(ae(e,t,t+32,{strict:!0})),r=ue(ae(e,n,n+32,{strict:!0}));return r===0?{consumed:32,value:""}:{consumed:32,value:ya(Qe(ae(e,n+32,n+32+r,{strict:!0})))}}function xo(e,{param:t,position:n}){const r=t.components.length===0||t.components.some(({name:o})=>!o),s=r?[]:{};let a=0;if(en(t)){const o=ue(ae(e,n,n+32,{strict:!0}));for(let i=0;i<t.components.length;++i){const u=t.components[i],h=et({data:ae(e,o),param:u,position:a});a+=h.consumed,s[r?i:u==null?void 0:u.name]=h.value}return{consumed:32,value:s}}for(let o=0;o<t.components.length;++o){const i=t.components[o],u=et({data:e,param:i,position:n+a});a+=u.consumed,s[r?o:i==null?void 0:i.name]=u.value}return{consumed:a,value:s}}function en(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(en);const n=un(e.type);return!!(n&&en({...e,type:n[1]}))}function vo({abi:e,data:t}){const n=ae(t,0,4);if(n==="0x")throw new cn;const s=[...e||[],lo,uo].find(a=>a.type==="error"&&n===ar(Me(a)));if(!s)throw new Gr(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?fn(s.inputs,ae(t,4)):void 0,errorName:s.name}}const he=(e,t,n)=>JSON.stringify(e,(r,s)=>{const a=typeof s=="bigint"?s.toString():s;return typeof t=="function"?t(r,a):a},n);function ts({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((s,a)=>`${r&&s.name?`${s.name}: `:""}${typeof t[a]=="object"?he(t[a]):t[a]}`).join(", ")})`}const To={gwei:9,wei:18},ns={ether:-9,wei:9};function rs(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[s,a]=[n.slice(0,n.length-t),n.slice(n.length-t)];return a=a.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${a?`.${a}`:""}`}function ir(e,t="wei"){return rs(e,To[t])}function me(e,t="wei"){return rs(e,ns[t])}function Dt(e){const t=Object.entries(e).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=t.reduce((r,[s])=>Math.max(r,s.length),0);return t.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class Eo extends I{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeConflictError"})}}class Po extends I{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Dt(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- a Legacy Transaction with `gasPrice`"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSerializableTransactionError"})}}class No extends I{constructor(t,{account:n,docsPath:r,chain:s,data:a,gas:o,gasPrice:i,maxFeePerGas:u,maxPriorityFeePerGas:h,nonce:f,to:p,value:g}){var b;const x=Dt({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:p,value:typeof g<"u"&&`${ir(g)} ${((b=s==null?void 0:s.nativeCurrency)==null?void 0:b.symbol)||"ETH"}`,data:a,gas:o,gasPrice:typeof i<"u"&&`${me(i)} gwei`,maxFeePerGas:typeof u<"u"&&`${me(u)} gwei`,maxPriorityFeePerGas:typeof h<"u"&&`${me(h)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",x].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionExecutionError"}),this.cause=t}}class ss extends I{constructor({blockHash:t,blockNumber:n,blockTag:r,hash:s,index:a}){let o="Transaction";r&&a!==void 0&&(o=`Transaction at block time "${r}" at index "${a}"`),t&&a!==void 0&&(o=`Transaction at block hash "${t}" at index "${a}"`),n&&a!==void 0&&(o=`Transaction at block number "${n}" at index "${a}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionNotFoundError"})}}class as extends I{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionReceiptNotFoundError"})}}class Co extends I{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WaitForTransactionReceiptTimeoutError"})}}class os extends I{constructor(t,{account:n,docsPath:r,chain:s,data:a,gas:o,gasPrice:i,maxFeePerGas:u,maxPriorityFeePerGas:h,nonce:f,to:p,value:g}){var P;const x=n?Te(n):void 0,b=Dt({from:x==null?void 0:x.address,to:p,value:typeof g<"u"&&`${ir(g)} ${((P=s==null?void 0:s.nativeCurrency)==null?void 0:P.symbol)||"ETH"}`,data:a,gas:o,gasPrice:typeof i<"u"&&`${me(i)} gwei`,maxFeePerGas:typeof u<"u"&&`${me(u)} gwei`,maxPriorityFeePerGas:typeof h<"u"&&`${me(h)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",b].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CallExecutionError"}),this.cause=t}}class jo extends I{constructor(t,{abi:n,args:r,contractAddress:s,docsPath:a,functionName:o,sender:i}){const u=Ft({abi:n,args:r,name:o}),h=u?ts({abiItem:u,args:r,includeFunctionName:!1,includeName:!1}):void 0,f=u?Me(u,{includeName:!0}):void 0,p=Dt({address:s&&Xs(s),function:f,args:h&&h!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${h}`,sender:i});super(t.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:t,docsPath:a,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Contract Call:",p].filter(Boolean)}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionExecutionError"}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=s,this.functionName=o,this.sender=i}}class In extends I{constructor({abi:t,data:n,functionName:r,message:s}){let a,o,i,u;if(n&&n!=="0x")try{o=vo({abi:t,data:n});const{abiItem:f,errorName:p,args:g}=o;if(p==="Error")u=g[0];else if(p==="Panic"){const[x]=g;u=es[x]}else{const x=f?Me(f,{includeName:!0}):void 0,b=f&&g?ts({abiItem:f,args:g,includeFunctionName:!1,includeName:!1}):void 0;i=[x?`Error: ${x}`:"",b&&b!=="()"?`       ${[...Array((p==null?void 0:p.length)??0).keys()].map(()=>" ").join("")}${b}`:""]}}catch(f){a=f}else s&&(u=s);let h;a instanceof Gr&&(h=a.signature,i=[`Unable to decode signature "${h}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${h}.`]),super(u&&u!=="execution reverted"||h?[`The contract function "${r}" reverted with the following ${h?"signature":"reason"}:`,u||h].join(`
`):`The contract function "${r}" reverted.`,{cause:a,metaMessages:i}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.reason=u,this.signature=h}}class So extends I{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionZeroDataError"})}}class cr extends I{constructor({data:t,message:n}){super(n||""),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RawContractError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}class gt extends I{constructor({body:t,details:n,headers:r,status:s,url:a}){super("HTTP request failed.",{details:n,metaMessages:[s&&`Status: ${s}`,`URL: ${on(a)}`,t&&`Request body: ${he(t)}`].filter(Boolean)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=r,this.status=s,this.url=a}}class Ao extends I{constructor({body:t,details:n,url:r}){super("WebSocket request failed.",{details:n,metaMessages:[`URL: ${on(r)}`,`Request body: ${he(t)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebSocketRequestError"})}}class is extends I{constructor({body:t,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${on(r)}`,`Request body: ${he(t)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code}}class On extends I{constructor({body:t,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${on(n)}`,`Request body: ${he(t)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TimeoutError"})}}const $o=-1;class ge extends I{constructor(t,{code:n,docsPath:r,metaMessages:s,shortMessage:a}){super(a,{cause:t,docsPath:r,metaMessages:s||(t==null?void 0:t.metaMessages)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=t.name,this.code=t instanceof is?t.code:n??$o}}class ot extends ge{constructor(t,n){super(t,n),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class yt extends ge{constructor(t){super(t,{code:yt.code,shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ParseRpcError"})}}Object.defineProperty(yt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class wt extends ge{constructor(t){super(t,{code:wt.code,shortMessage:"JSON is not a valid request object."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidRequestRpcError"})}}Object.defineProperty(wt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class xt extends ge{constructor(t){super(t,{code:xt.code,shortMessage:"The method does not exist / is not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotFoundRpcError"})}}Object.defineProperty(xt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class vt extends ge{constructor(t){super(t,{code:vt.code,shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParamsRpcError"})}}Object.defineProperty(vt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class nt extends ge{constructor(t){super(t,{code:nt.code,shortMessage:"An internal error was received."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InternalRpcError"})}}Object.defineProperty(nt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Ye extends ge{constructor(t){super(t,{code:Ye.code,shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidInputRpcError"})}}Object.defineProperty(Ye,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Tt extends ge{constructor(t){super(t,{code:Tt.code,shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Tt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Et extends ge{constructor(t){super(t,{code:Et.code,shortMessage:"Requested resource not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceUnavailableRpcError"})}}Object.defineProperty(Et,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Pt extends ge{constructor(t){super(t,{code:Pt.code,shortMessage:"Transaction creation failed."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionRejectedRpcError"})}}Object.defineProperty(Pt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Nt extends ge{constructor(t){super(t,{code:Nt.code,shortMessage:"Method is not implemented."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotSupportedRpcError"})}}Object.defineProperty(Nt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Ct extends ge{constructor(t){super(t,{code:Ct.code,shortMessage:"Request exceeds defined limit."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"LimitExceededRpcError"})}}Object.defineProperty(Ct,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class jt extends ge{constructor(t){super(t,{code:jt.code,shortMessage:"Version of JSON-RPC protocol is not supported."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"JsonRpcVersionUnsupportedError"})}}Object.defineProperty(jt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class tt extends ot{constructor(t){super(t,{code:tt.code,shortMessage:"User rejected the request."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UserRejectedRequestError"})}}Object.defineProperty(tt,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class St extends ot{constructor(t){super(t,{code:St.code,shortMessage:"The requested method and/or account has not been authorized by the user."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnauthorizedProviderError"})}}Object.defineProperty(St,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class At extends ot{constructor(t){super(t,{code:At.code,shortMessage:"The Provider does not support the requested method."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnsupportedProviderMethodError"})}}Object.defineProperty(At,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class $t extends ot{constructor(t){super(t,{code:$t.code,shortMessage:"The Provider is disconnected from all chains."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderDisconnectedError"})}}Object.defineProperty($t,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Rt extends ot{constructor(t){super(t,{code:Rt.code,shortMessage:"The Provider is not connected to the requested chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDisconnectedError"})}}Object.defineProperty(Rt,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class It extends ot{constructor(t){super(t,{code:It.code,shortMessage:"An error occurred when attempting to switch chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainError"})}}Object.defineProperty(It,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Ro extends ge{constructor(t){super(t,{shortMessage:"An unknown RPC error occurred."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownRpcError"})}}const Io=3;function Ot(e,{abi:t,address:n,args:r,docsPath:s,functionName:a,sender:o}){const{code:i,data:u,message:h,shortMessage:f}=e instanceof cr?e:e instanceof I?e.walk(g=>"data"in g)||e.walk():{},p=e instanceof cn?new So({functionName:a}):[Io,nt.code].includes(i)&&(u||h||f)?new In({abi:t,data:typeof u=="object"?u.data:u,functionName:a,message:f??h}):e;return new jo(p,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:a,sender:o})}class it extends I{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the WalletClient."].join(`
`),{docsPath:t,docsSlug:"account"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AccountNotFoundError"})}}class Oo extends I{constructor(t,{account:n,docsPath:r,chain:s,data:a,gas:o,gasPrice:i,maxFeePerGas:u,maxPriorityFeePerGas:h,nonce:f,to:p,value:g}){var b;const x=Dt({from:n==null?void 0:n.address,to:p,value:typeof g<"u"&&`${ir(g)} ${((b=s==null?void 0:s.nativeCurrency)==null?void 0:b.symbol)||"ETH"}`,data:a,gas:o,gasPrice:typeof i<"u"&&`${me(i)} gwei`,maxFeePerGas:typeof u<"u"&&`${me(u)} gwei`,maxPriorityFeePerGas:typeof h<"u"&&`${me(h)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",x].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EstimateGasExecutionError"}),this.cause=t}}class Ze extends I{constructor({cause:t,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ExecutionRevertedError"})}}Object.defineProperty(Ze,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Ze,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class tn extends I{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${me(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooHigh"})}}Object.defineProperty(tn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class kn extends I{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${me(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooLow"})}}Object.defineProperty(kn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Mn extends I{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooHighError"})}}Object.defineProperty(Mn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Fn extends I{constructor({cause:t,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooLowError"})}}Object.defineProperty(Fn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Bn extends I{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceMaxValueError"})}}Object.defineProperty(Bn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Dn extends I{constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InsufficientFundsError"})}}Object.defineProperty(Dn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds/});class Ln extends I{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooHighError"})}}Object.defineProperty(Ln,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Gn extends I{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooLowError"})}}Object.defineProperty(Gn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class zn extends I{constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionTypeNotSupportedError"})}}Object.defineProperty(zn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class nn extends I{constructor({cause:t,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${me(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${me(r)} gwei`:""}).`].join(`
`),{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TipAboveFeeCapError"})}}Object.defineProperty(nn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class hn extends I{constructor({cause:t}){super(`An error occurred while executing: ${t==null?void 0:t.shortMessage}`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownNodeError"})}}function lr(e,t){const n=(e.details||"").toLowerCase(),r=e.walk(s=>s.code===Ze.code);return r instanceof I?new Ze({cause:e,message:r.details}):Ze.nodeMessage.test(n)?new Ze({cause:e,message:e.details}):tn.nodeMessage.test(n)?new tn({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):kn.nodeMessage.test(n)?new kn({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):Mn.nodeMessage.test(n)?new Mn({cause:e,nonce:t==null?void 0:t.nonce}):Fn.nodeMessage.test(n)?new Fn({cause:e,nonce:t==null?void 0:t.nonce}):Bn.nodeMessage.test(n)?new Bn({cause:e,nonce:t==null?void 0:t.nonce}):Dn.nodeMessage.test(n)?new Dn({cause:e}):Ln.nodeMessage.test(n)?new Ln({cause:e,gas:t==null?void 0:t.gas}):Gn.nodeMessage.test(n)?new Gn({cause:e,gas:t==null?void 0:t.gas}):zn.nodeMessage.test(n)?new zn({cause:e}):nn.nodeMessage.test(n)?new nn({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas,maxPriorityFeePerGas:t==null?void 0:t.maxPriorityFeePerGas}):new hn({cause:e})}function ko(e,{docsPath:t,...n}){const r=(()=>{const s=lr(e,n);return s instanceof hn?e:s})();return new Oo(r,{docsPath:t,...n})}function ur(e,{format:t}){if(!t)return{};const n={};function r(a){const o=Object.keys(a);for(const i of o)i in e&&(n[i]=e[i]),a[i]&&typeof a[i]=="object"&&!Array.isArray(a[i])&&r(a[i])}const s=t(e||{});return r(s),n}const Mo={legacy:"0x0",eip2930:"0x1",eip1559:"0x2"};function mn(e){return{...e,gas:typeof e.gas<"u"?Y(e.gas):void 0,gasPrice:typeof e.gasPrice<"u"?Y(e.gasPrice):void 0,maxFeePerGas:typeof e.maxFeePerGas<"u"?Y(e.maxFeePerGas):void 0,maxPriorityFeePerGas:typeof e.maxPriorityFeePerGas<"u"?Y(e.maxPriorityFeePerGas):void 0,nonce:typeof e.nonce<"u"?Y(e.nonce):void 0,type:typeof e.type<"u"?Mo[e.type]:void 0,value:typeof e.value<"u"?Y(e.value):void 0}}function Lt(e){const{account:t,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:a}=e,o=t?Te(t):void 0;if(o&&!ze(o.address))throw new bt({address:o.address});if(a&&!ze(a))throw new bt({address:a});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new Eo;if(r&&r>2n**256n-1n)throw new tn({maxFeePerGas:r});if(s&&r&&s>r)throw new nn({maxFeePerGas:r,maxPriorityFeePerGas:s})}class Fo extends I{constructor(){super("`baseFeeMultiplier` must be greater than 1."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseFeeScalarError"})}}class dr extends I{constructor(){super("Chain does not support EIP-1559 fees."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Eip1559FeesNotSupportedError"})}}class Bo extends I{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${me(t)} gwei).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MaxFeePerGasTooLowError"})}}class cs extends I{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BlockNotFoundError"})}}const ls={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"};function us(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?ue(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?ue(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?ls[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t}function ds(e){var n;const t=(n=e.transactions)==null?void 0:n.map(r=>typeof r=="string"?r:us(r));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,difficulty:e.difficulty?BigInt(e.difficulty):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function Ue(e,{blockHash:t,blockNumber:n,blockTag:r,includeTransactions:s}={}){var f,p,g;const a=r??"latest",o=s??!1,i=n!==void 0?Y(n):void 0;let u=null;if(t?u=await e.request({method:"eth_getBlockByHash",params:[t,o]}):u=await e.request({method:"eth_getBlockByNumber",params:[i||a,o]}),!u)throw new cs({blockHash:t,blockNumber:n});return(((g=(p=(f=e.chain)==null?void 0:f.formatters)==null?void 0:p.block)==null?void 0:g.format)||ds)(u)}async function fr(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function Do(e,t){return fs(e,t)}async function fs(e,t){var a,o,i;const{block:n,chain:r=e.chain,request:s}=t||{};if(typeof((a=r==null?void 0:r.fees)==null?void 0:a.defaultPriorityFee)=="function"){const u=n||await _(e,Ue,"getBlock")({});return r.fees.defaultPriorityFee({block:u,client:e,request:s})}if(typeof((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee)<"u")return(i=r==null?void 0:r.fees)==null?void 0:i.defaultPriorityFee;try{const u=await e.request({method:"eth_maxPriorityFeePerGas"});return ln(u)}catch{const[u,h]=await Promise.all([n?Promise.resolve(n):_(e,Ue,"getBlock")({}),_(e,fr,"getGasPrice")({})]);if(typeof u.baseFeePerGas!="bigint")throw new dr;const f=h-u.baseFeePerGas;return f<0n?0n:f}}async function Lo(e,t){return Un(e,t)}async function Un(e,t){var g,x;const{block:n,chain:r=e.chain,request:s,type:a="eip1559"}=t||{},o=await(async()=>{var b,P;return typeof((b=r==null?void 0:r.fees)==null?void 0:b.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:s}):((P=r==null?void 0:r.fees)==null?void 0:P.baseFeeMultiplier)??1.2})();if(o<1)throw new Fo;const u=10**(((g=o.toString().split(".")[1])==null?void 0:g.length)??0),h=b=>b*BigInt(Math.ceil(o*u))/BigInt(u),f=n||await _(e,Ue,"getBlock")({});if(typeof((x=r==null?void 0:r.fees)==null?void 0:x.estimateFeesPerGas)=="function")return r.fees.estimateFeesPerGas({block:n,client:e,multiply:h,request:s,type:a});if(a==="eip1559"){if(typeof f.baseFeePerGas!="bigint")throw new dr;const b=s!=null&&s.maxPriorityFeePerGas?s.maxPriorityFeePerGas:await fs(e,{block:f,chain:r,request:s}),P=h(f.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??P+b,maxPriorityFeePerGas:b}}return{gasPrice:(s==null?void 0:s.gasPrice)??h(await _(e,fr,"getGasPrice")({}))}}async function hs(e,{address:t,blockTag:n="latest",blockNumber:r}){const s=await e.request({method:"eth_getTransactionCount",params:[t,r?Y(r):n]});return ue(s)}function Go(e){if(e.type)return e.type;if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new Po({transaction:e})}async function gn(e,t){const{account:n=e.account,chain:r,gas:s,nonce:a,type:o}=t;if(!n)throw new it;const i=Te(n),u=await _(e,Ue,"getBlock")({blockTag:"latest"}),h={...t,from:i.address};if(typeof a>"u"&&(h.nonce=await _(e,hs,"getTransactionCount")({address:i.address,blockTag:"pending"})),typeof o>"u")try{h.type=Go(h)}catch{h.type=typeof u.baseFeePerGas=="bigint"?"eip1559":"legacy"}if(h.type==="eip1559"){const{maxFeePerGas:f,maxPriorityFeePerGas:p}=await Un(e,{block:u,chain:r,request:h});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<p)throw new Bo({maxPriorityFeePerGas:p});h.maxPriorityFeePerGas=p,h.maxFeePerGas=f}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new dr;const{gasPrice:f}=await Un(e,{block:u,chain:r,request:h,type:"legacy"});h.gasPrice=f}return typeof s>"u"&&(h.gas=await _(e,hr,"estimateGas")({...h,account:{address:i.address,type:"json-rpc"}})),Lt(h),h}async function hr(e,t){var s,a,o;const n=t.account??e.account;if(!n)throw new it({docsPath:"/docs/actions/public/estimateGas"});const r=Te(n);try{const{accessList:i,blockNumber:u,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerGas:x,maxPriorityFeePerGas:b,nonce:P,to:N,value:E,...v}=r.type==="local"?await gn(e,t):t,C=(u?Y(u):void 0)||h;Lt(t);const B=(o=(a=(s=e.chain)==null?void 0:s.formatters)==null?void 0:a.transactionRequest)==null?void 0:o.format,j=(B||mn)({...ur(v,{format:B}),from:r.address,accessList:i,data:f,gas:p,gasPrice:g,maxFeePerGas:x,maxPriorityFeePerGas:b,nonce:P,to:N,value:E}),W=await e.request({method:"eth_estimateGas",params:C?[j,C]:[j]});return BigInt(W)}catch(i){throw ko(i,{...t,account:r,chain:e.chain})}}async function zo(e,{abi:t,address:n,args:r,functionName:s,...a}){const o=We({abi:t,args:r,functionName:s});try{return await _(e,hr,"estimateGas")({data:o,to:n,...a})}catch(i){const u=a.account?Te(a.account):void 0;throw Ot(i,{abi:t,address:n,args:r,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:u==null?void 0:u.address})}}const Ir="/docs/contract/decodeEventLog";function Gt({abi:e,data:t,strict:n,topics:r}){const s=n??!0,[a,...o]=r;if(!a)throw new ra({docsPath:Ir});const i=e.find(b=>b.type==="event"&&a===tr(Me(b)));if(!(i&&"name"in i)||i.type!=="event")throw new sa(a,{docsPath:Ir});const{name:u,inputs:h}=i,f=h==null?void 0:h.some(b=>!("name"in b&&b.name));let p=f?[]:{};const g=h.filter(b=>"indexed"in b&&b.indexed);for(let b=0;b<g.length;b++){const P=g[b],N=o[b];if(!N)throw new st({abiItem:i,param:P});p[P.name||b]=Uo({param:P,value:N})}const x=h.filter(b=>!("indexed"in b&&b.indexed));if(x.length>0){if(t&&t!=="0x")try{const b=fn(x,t);if(b)if(f)p=[...p,...b];else for(let P=0;P<x.length;P++)p[x[P].name]=b[P]}catch(b){if(s)throw b instanceof Xn?new Je({abiItem:i,data:b.data,params:b.params,size:b.size}):b}else if(s)throw new Je({abiItem:i,data:"0x",params:x,size:0})}return{eventName:u,args:Object.values(p).length>0?p:void 0}}function Uo({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(fn([e],t)||[])[0]}function Ne(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function mr(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:a,events:o,args:i,strict:u}={}){const h=u??!1,f=o??(a?[a]:void 0);let p=[];f&&(p=[f.flatMap(x=>Bt({abi:[x],eventName:x.name,args:i}))],a&&(p=p[0]));let g;return n?g=await e.request({method:"eth_getLogs",params:[{address:t,topics:p,blockHash:n}]}):g=await e.request({method:"eth_getLogs",params:[{address:t,topics:p,fromBlock:typeof r=="bigint"?Y(r):r,toBlock:typeof s=="bigint"?Y(s):s}]}),g.map(x=>{var b;try{const{eventName:P,args:N}=f?Gt({abi:f,data:x.data,topics:x.topics,strict:h}):{eventName:void 0,args:void 0};return Ne(x,{args:N,eventName:P})}catch(P){let N,E;if(P instanceof Je||P instanceof st){if(h)return;N=P.abiItem.name,E=(b=P.abiItem.inputs)==null?void 0:b.some(v=>!("name"in v&&v.name))}return Ne(x,{args:E?[]:{},eventName:N})}}).filter(Boolean)}async function ms(e,{abi:t,address:n,args:r,blockHash:s,eventName:a,fromBlock:o,toBlock:i,strict:u}){const h=a?Ft({abi:t,name:a}):void 0,f=h?void 0:t.filter(p=>p.type==="event");return _(e,mr,"getLogs")({address:n,args:r,blockHash:s,event:h,events:f,fromBlock:o,toBlock:i,strict:u})}const Pn="/docs/contract/decodeFunctionResult";function ct({abi:e,args:t,functionName:n,data:r}){let s=e[0];if(n&&(s=Ft({abi:e,args:t,name:n}),!s))throw new Qt(n,{docsPath:Pn});if(s.type!=="function")throw new Qt(void 0,{docsPath:Pn});if(!s.outputs)throw new aa(s.name,{docsPath:Pn});const a=fn(s.outputs,r);if(a&&a.length>1)return a;if(a&&a.length===1)return a[0]}const Hn=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],gs=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"}],ps=[...gs,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Ho=[...gs,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],Or=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],kr=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],_o=[{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"}],Wo="0x82ad56cb";class _n extends I{constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDoesNotSupportContract"})}}class qo extends I{constructor({chain:t,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${t.id} – ${t.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${t.id} – ${t.name}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainMismatchError"})}}class Ko extends I{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotFoundError"})}}class bs extends I{constructor(){super("No chain was provided to the Client."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ClientChainNotConfiguredError"})}}function lt({blockNumber:e,chain:t,contract:n}){var s;const r=(s=t==null?void 0:t.contracts)==null?void 0:s[n];if(!r)throw new _n({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new _n({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function Jo(e,{docsPath:t,...n}){const r=(()=>{const s=lr(e,n);return s instanceof hn?e:s})();return new os(r,{docsPath:t,...n})}const Nn=new Map;function ys({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:s}){const a=async()=>{const f=u();o();const p=f.map(({args:g})=>g);p.length!==0&&e(p).then(g=>{var x;s&&Array.isArray(g)&&g.sort(s);for(let b=0;b<f.length;b++){const{pendingPromise:P}=f[b];(x=P.resolve)==null||x.call(P,[g[b],g])}}).catch(g=>{var x;for(let b=0;b<f.length;b++){const{pendingPromise:P}=f[b];(x=P.reject)==null||x.call(P,g)}})},o=()=>Nn.delete(t),i=()=>u().map(({args:f})=>f),u=()=>Nn.get(t)||[],h=f=>Nn.set(t,[...u(),f]);return{flush:o,async schedule(f){const p={},g=new Promise((P,N)=>{p.resolve=P,p.reject=N});return(n==null?void 0:n([...i(),f]))&&a(),u().length>0?(h({args:f,pendingPromise:p}),g):(h({args:f,pendingPromise:p}),setTimeout(a,r),g)}}}async function pn(e,t){var E,v,A,C;const{account:n=e.account,batch:r=!!((E=e.batch)!=null&&E.multicall),blockNumber:s,blockTag:a="latest",accessList:o,data:i,gas:u,gasPrice:h,maxFeePerGas:f,maxPriorityFeePerGas:p,nonce:g,to:x,value:b,...P}=t,N=n?Te(n):void 0;try{Lt(t);const R=(s?Y(s):void 0)||a,j=(C=(A=(v=e.chain)==null?void 0:v.formatters)==null?void 0:A.transactionRequest)==null?void 0:C.format,L=(j||mn)({...ur(P,{format:j}),from:N==null?void 0:N.address,accessList:o,data:i,gas:u,gasPrice:h,maxFeePerGas:f,maxPriorityFeePerGas:p,nonce:g,to:x,value:b});if(r&&Yo({request:L}))try{return await Vo(e,{...L,blockNumber:s,blockTag:a})}catch(X){if(!(X instanceof bs)&&!(X instanceof _n))throw X}const U=await e.request({method:"eth_call",params:R?[L,R]:[L]});return U==="0x"?{data:void 0}:{data:U}}catch(B){const R=Xo(B),{offchainLookup:j,offchainLookupSignature:W}=await Us(async()=>{const{offchainLookup:L,offchainLookupSignature:U}=await import("./ccip-nr80sE49.js");return{offchainLookup:L,offchainLookupSignature:U}},__vite__mapDeps([0,1,2]));if((R==null?void 0:R.slice(0,10))===W&&x)return{data:await j(e,{data:R,to:x})};throw Jo(B,{...t,account:N,chain:e.chain})}}function Yo({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(Wo)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Vo(e,t){var P;const{batchSize:n=1024,wait:r=0}=typeof((P=e.batch)==null?void 0:P.multicall)=="object"?e.batch.multicall:{},{blockNumber:s,blockTag:a="latest",data:o,multicallAddress:i,to:u}=t;let h=i;if(!h){if(!e.chain)throw new bs;h=lt({blockNumber:s,chain:e.chain,contract:"multicall3"})}const p=(s?Y(s):void 0)||a,{schedule:g}=ys({id:`${e.uid}.${p}`,wait:r,shouldSplitBatch(N){return N.reduce((v,{data:A})=>v+(A.length-2),0)>n*2},fn:async N=>{const E=N.map(C=>({allowFailure:!0,callData:C.data,target:C.to})),v=We({abi:Hn,args:[E],functionName:"aggregate3"}),A=await e.request({method:"eth_call",params:[{data:v,to:h},p]});return ct({abi:Hn,args:[E],functionName:"aggregate3",data:A||"0x"})}}),[{returnData:x,success:b}]=await g({data:o,to:u});if(!b)throw new cr({data:x});return x==="0x"?{data:void 0}:{data:x}}function Xo(e){if(!(e instanceof I))return;const t=e.walk();return typeof t.data=="object"?t.data.data:t.data}async function He(e,{abi:t,address:n,args:r,functionName:s,...a}){const o=We({abi:t,args:r,functionName:s});try{const{data:i}=await _(e,pn,"call")({data:o,to:n,...a});return ct({abi:t,args:r,functionName:s,data:i||"0x"})}catch(i){throw Ot(i,{abi:t,address:n,args:r,docsPath:"/docs/contract/readContract",functionName:s})}}async function Zo(e,{abi:t,address:n,args:r,dataSuffix:s,functionName:a,...o}){const i=o.account?Te(o.account):void 0,u=We({abi:t,args:r,functionName:a});try{const{data:h}=await _(e,pn,"call")({batch:!1,data:`${u}${s?s.replace("0x",""):""}`,to:n,...o});return{result:ct({abi:t,args:r,functionName:a,data:h||"0x"}),request:{abi:t,address:n,args:r,dataSuffix:s,functionName:a,...o}}}catch(h){throw Ot(h,{abi:t,address:n,args:r,docsPath:"/docs/contract/simulateContract",functionName:a,sender:i==null?void 0:i.address})}}const Cn=new Map,Mr=new Map;let Qo=0;function ut(e,t,n){const r=++Qo,s=()=>Cn.get(e)||[],a=()=>{const f=s();Cn.set(e,f.filter(p=>p.id!==r))},o=()=>{const f=Mr.get(e);s().length===1&&f&&f(),a()},i=s();if(Cn.set(e,[...i,{id:r,fns:t}]),i&&i.length>0)return o;const u={};for(const f in t)u[f]=(...p)=>{var x,b;const g=s();if(g.length!==0)for(const P of g)(b=(x=P.fns)[f])==null||b.call(x,...p)};const h=n(u);return typeof h=="function"&&Mr.set(e,h),o}async function Wn(e){return new Promise(t=>setTimeout(t,e))}function zt(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let s=!0;const a=()=>s=!1;return(async()=>{let i;t&&(i=await e({unpoll:a}));const u=await(n==null?void 0:n(i))??r;await Wn(u);const h=async()=>{s&&(await e({unpoll:a}),await Wn(r),h())};h()})(),a}const ei=new Map,ti=new Map;function ni(e){const t=(s,a)=>({clear:()=>a.delete(s),get:()=>a.get(s),set:o=>a.set(s,o)}),n=t(e,ei),r=t(e,ti);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function ri(e,{cacheKey:t,cacheTime:n=1/0}){const r=ni(t),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let a=r.promise.get();a||(a=e(),r.promise.set(a));try{const o=await a;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const si=e=>`blockNumber.${e}`;async function Ut(e,{cacheTime:t=e.cacheTime,maxAge:n}={}){const r=await ri(()=>e.request({method:"eth_blockNumber"}),{cacheKey:si(e.uid),cacheTime:n??t});return BigInt(r)}async function bn(e,{filter:t}){const n="strict"in t&&t.strict;return(await t.request({method:"eth_getFilterChanges",params:[t.id]})).map(s=>{var a;if(typeof s=="string")return s;try{const{eventName:o,args:i}="abi"in t&&t.abi?Gt({abi:t.abi,data:s.data,topics:s.topics,strict:n}):{eventName:void 0,args:void 0};return Ne(s,{args:i,eventName:o})}catch(o){let i,u;if(o instanceof Je||o instanceof st){if("strict"in t&&t.strict)return;i=o.abiItem.name,u=(a=o.abiItem.inputs)==null?void 0:a.some(h=>!("name"in h&&h.name))}return Ne(s,{args:u?[]:{},eventName:i})}}).filter(Boolean)}async function yn(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function ai(e,{abi:t,address:n,args:r,batch:s=!0,eventName:a,onError:o,onLogs:i,poll:u,pollingInterval:h=e.pollingInterval,strict:f}){return(typeof u<"u"?u:e.transport.type!=="webSocket")?(()=>{const b=he(["watchContractEvent",n,r,s,e.uid,a,h]),P=f??!1;return ut(b,{onLogs:i,onError:o},N=>{let E,v,A=!1;const C=zt(async()=>{var B;if(!A){try{v=await _(e,Qr,"createContractEventFilter")({abi:t,address:n,args:r,eventName:a,strict:P})}catch{}A=!0;return}try{let R;if(v)R=await _(e,bn,"getFilterChanges")({filter:v});else{const j=await _(e,Ut,"getBlockNumber")({});E&&E!==j?R=await _(e,ms,"getContractEvents")({abi:t,address:n,args:r,eventName:a,fromBlock:E+1n,toBlock:j,strict:P}):R=[],E=j}if(R.length===0)return;if(s)N.onLogs(R);else for(const j of R)N.onLogs([j])}catch(R){v&&R instanceof Ye&&(A=!1),(B=N.onError)==null||B.call(N,R)}},{emitOnBegin:!0,interval:h});return async()=>{v&&await _(e,yn,"uninstallFilter")({filter:v}),C()}})})():(()=>{let b=!0,P=()=>b=!1;return(async()=>{try{const N=a?Bt({abi:t,eventName:a,args:r}):[],{unsubscribe:E}=await e.transport.subscribe({params:["logs",{address:n,topics:N}],onData(v){var C;if(!b)return;const A=v.result;try{const{eventName:B,args:R}=Gt({abi:t,data:A.data,topics:A.topics,strict:f}),j=Ne(A,{args:R,eventName:B});i([j])}catch(B){let R,j;if(B instanceof Je||B instanceof st){if(f)return;R=B.abiItem.name,j=(C=B.abiItem.inputs)==null?void 0:C.some(L=>!("name"in L&&L.name))}const W=Ne(A,{args:j?[]:{},eventName:R});i([W])}},onError(v){o==null||o(v)}});P=E,b||P()}catch(N){o==null||o(N)}})(),P})()}function ws({chain:e,currentChainId:t}){if(!e)throw new Ko;if(t!==e.id)throw new qo({chain:e,currentChainId:t})}function oi(e,{docsPath:t,...n}){const r=(()=>{const s=lr(e,n);return s instanceof hn?e:s})();return new No(r,{docsPath:t,...n})}async function kt(e){const t=await e.request({method:"eth_chainId"});return ue(t)}async function gr(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]})}async function pr(e,t){var P,N,E,v;const{account:n=e.account,chain:r=e.chain,accessList:s,data:a,gas:o,gasPrice:i,maxFeePerGas:u,maxPriorityFeePerGas:h,nonce:f,to:p,value:g,...x}=t;if(!n)throw new it({docsPath:"/docs/actions/wallet/sendTransaction"});const b=Te(n);try{Lt(t);let A;if(r!==null&&(A=await _(e,kt,"getChainId")({}),ws({currentChainId:A,chain:r})),b.type==="local"){const j=await _(e,gn,"prepareTransactionRequest")({account:b,accessList:s,chain:r,data:a,gas:o,gasPrice:i,maxFeePerGas:u,maxPriorityFeePerGas:h,nonce:f,to:p,value:g,...x});A||(A=await _(e,kt,"getChainId")({}));const W=(P=r==null?void 0:r.serializers)==null?void 0:P.transaction,L=await b.signTransaction({...j,chainId:A},{serializer:W});return await _(e,gr,"sendRawTransaction")({serializedTransaction:L})}const C=(v=(E=(N=e.chain)==null?void 0:N.formatters)==null?void 0:E.transactionRequest)==null?void 0:v.format,R=(C||mn)({...ur(x,{format:C}),accessList:s,data:a,from:b.address,gas:o,gasPrice:i,maxFeePerGas:u,maxPriorityFeePerGas:h,nonce:f,to:p,value:g});return await e.request({method:"eth_sendTransaction",params:[R]})}catch(A){throw oi(A,{...t,account:b,chain:t.chain||void 0})}}async function ii(e,{abi:t,address:n,args:r,dataSuffix:s,functionName:a,...o}){const i=We({abi:t,args:r,functionName:a});return await _(e,pr,"sendTransaction")({data:`${i}${s?s.replace("0x",""):""}`,to:n,...o})}async function ci(e,{chain:t}){const{id:n,name:r,nativeCurrency:s,rpcUrls:a,blockExplorers:o}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:Y(n),chainName:r,nativeCurrency:s,rpcUrls:a.default.http,blockExplorerUrls:o?Object.values(o).map(({url:i})=>i):void 0}]})}const qn=256;let Vt=qn,Xt;function li(e=11){if(!Xt||Vt+e>qn*2){Xt="",Vt=0;for(let t=0;t<qn;t++)Xt+=(256+Math.random()*256|0).toString(16).substring(1)}return Xt.substring(Vt,Vt+++e)}function xs(e){const{batch:t,cacheTime:n=e.pollingInterval??4e3,key:r="base",name:s="Base Client",pollingInterval:a=4e3,type:o="base"}=e,i=e.chain,u=e.account?Te(e.account):void 0,{config:h,request:f,value:p}=e.transport({chain:i,pollingInterval:a}),g={...h,...p},x={account:u,batch:t,cacheTime:n,chain:i,key:r,name:s,pollingInterval:a,request:f,transport:g,type:o,uid:li()};function b(P){return N=>{const E=N(P);for(const A in x)delete E[A];const v={...P,...E};return Object.assign(v,{extend:b(v)})}}return Object.assign(x,{extend:b(x)})}function Kn(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,a)=>{const o=async({count:i=0}={})=>{const u=async({error:h})=>{const f=typeof t=="function"?t({count:i,error:h}):t;f&&await Wn(f),o({count:i+1})};try{const h=await e();s(h)}catch(h){if(i<n&&await r({count:i,error:h}))return u({error:h});a(h)}};o()})}const ui=e=>"code"in e?e.code!==-1&&e.code!==-32004&&e.code!==-32005&&e.code!==-32042&&e.code!==-32603:e instanceof gt&&e.status?e.status!==403&&e.status!==408&&e.status!==413&&e.status!==429&&e.status!==500&&e.status!==502&&e.status!==503&&e.status!==504:!1;function di(e,{retryDelay:t=150,retryCount:n=3}={}){return async r=>Kn(async()=>{try{return await e(r)}catch(s){const a=s;switch(a.code){case yt.code:throw new yt(a);case wt.code:throw new wt(a);case xt.code:throw new xt(a);case vt.code:throw new vt(a);case nt.code:throw new nt(a);case Ye.code:throw new Ye(a);case Tt.code:throw new Tt(a);case Et.code:throw new Et(a);case Pt.code:throw new Pt(a);case Nt.code:throw new Nt(a);case Ct.code:throw new Ct(a);case jt.code:throw new jt(a);case tt.code:throw new tt(a);case St.code:throw new St(a);case At.code:throw new At(a);case $t.code:throw new $t(a);case Rt.code:throw new Rt(a);case It.code:throw new It(a);case 5e3:throw new tt(a);default:throw s instanceof I?s:new Ro(a)}}},{delay:({count:s,error:a})=>{var o;if(a&&a instanceof gt){const i=(o=a==null?void 0:a.headers)==null?void 0:o.get("Retry-After");if(i!=null&&i.match(/\d/))return parseInt(i)*1e3}return~~(1<<s)*t},retryCount:n,shouldRetry:({error:s})=>!ui(s)})}function vs({key:e,name:t,request:n,retryCount:r=3,retryDelay:s=150,timeout:a,type:o},i){return{config:{key:e,name:t,request:n,retryCount:r,retryDelay:s,timeout:a,type:o},request:di(n,{retryCount:r,retryDelay:s}),value:i}}function fi(e,t={}){const{key:n="custom",name:r="Custom Provider",retryDelay:s}=t;return({retryCount:a})=>vs({key:n,name:r,request:e.request.bind(e),retryCount:t.retryCount??a,retryDelay:s,type:"custom"})}class hi extends I{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro"})}}function Ts(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,a)=>{(async()=>{let o;try{const i=new AbortController;n>0&&(o=setTimeout(()=>{r?i.abort():a(t)},n)),s(await e({signal:i==null?void 0:i.signal}))}catch(i){i.name==="AbortError"&&a(t),a(i)}finally{clearTimeout(o)}})()})}let Jn=0;async function mi(e,{body:t,fetchOptions:n={},timeout:r=1e4}){var i;const{headers:s,method:a,signal:o}=n;try{const u=await Ts(async({signal:f})=>await fetch(e,{...n,body:Array.isArray(t)?he(t.map(g=>({jsonrpc:"2.0",id:g.id??Jn++,...g}))):he({jsonrpc:"2.0",id:t.id??Jn++,...t}),headers:{...s,"Content-Type":"application/json"},method:a||"POST",signal:o||(r>0?f:void 0)}),{errorInstance:new On({body:t,url:e}),timeout:r,signal:!0});let h;if((i=u.headers.get("Content-Type"))!=null&&i.startsWith("application/json")?h=await u.json():h=await u.text(),!u.ok)throw new gt({body:t,details:he(h.error)||u.statusText,headers:u.headers,status:u.status,url:e});return h}catch(u){throw u instanceof gt||u instanceof On?u:new gt({body:t,details:u.message,url:e})}}function gi(e,{body:t,onResponse:n}){if(e.readyState===e.CLOSED||e.readyState===e.CLOSING)throw new Ao({body:t,url:e.url,details:"Socket is closed."});const r=Jn++,s=({data:a})=>{var i;const o=JSON.parse(a);typeof o.id=="number"&&r!==o.id||(n==null||n(o),t.method==="eth_subscribe"&&typeof o.result=="string"&&e.subscriptions.set(o.result,s),t.method==="eth_unsubscribe"&&e.subscriptions.delete((i=t.params)==null?void 0:i[0]))};return e.requests.set(r,s),e.send(JSON.stringify({jsonrpc:"2.0",...t,id:r})),e}async function pi(e,{body:t,timeout:n=1e4}){return Ts(()=>new Promise(r=>Yn.webSocket(e,{body:t,onResponse:r})),{errorInstance:new On({body:t,url:e.url}),timeout:n})}const Yn={http:mi,webSocket:gi,webSocketAsync:pi};function Fr(e,t={}){const{batch:n,fetchOptions:r,key:s="http",name:a="HTTP JSON-RPC",retryDelay:o}=t;return({chain:i,retryCount:u,timeout:h})=>{const{batchSize:f=1e3,wait:p=0}=typeof n=="object"?n:{},g=t.retryCount??u,x=h??t.timeout??1e4,b=e||(i==null?void 0:i.rpcUrls.default.http[0]);if(!b)throw new hi;return vs({key:s,name:a,async request({method:P,params:N}){const E={method:P,params:N},{schedule:v}=ys({id:`${e}`,wait:p,shouldSplitBatch(R){return R.length>f},fn:R=>Yn.http(b,{body:R,fetchOptions:r,timeout:x}),sort:(R,j)=>R.id-j.id}),A=async R=>n?v(R):[await Yn.http(b,{body:R,fetchOptions:r,timeout:x})],[{error:C,result:B}]=await A(E);if(C)throw new is({body:E,error:C,url:b});return B},retryCount:g,retryDelay:o,timeout:x,type:"http"},{fetchOptions:r,url:e})}}function br(e,t){var r,s,a;if(!(e instanceof I))return!1;const n=e.walk(o=>o instanceof In);return n instanceof In?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||(a=n.reason)!=null&&a.includes("Wildcard on non-extended resolvers is not supported")||t==="reverse"&&n.reason===es[50]):!1}function Es(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return je(t)?t:null}function Zt(e){let t=new Uint8Array(32).fill(0);if(!e)return pt(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const s=Es(n[r]),a=s?Ge(s):fe(ke(n[r]),"bytes");t=fe(Fe([t,a]),"bytes")}return pt(t)}function bi(e){return`[${e.slice(2)}]`}function yi(e){const t=new Uint8Array(32).fill(0);return e?Es(e)||fe(ke(e)):pt(t)}function wn(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(ke(t).byteLength+2);let r=0;const s=t.split(".");for(let a=0;a<s.length;a++){let o=ke(s[a]);o.byteLength>255&&(o=ke(bi(yi(s[a])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function wi(e,{blockNumber:t,blockTag:n,coinType:r,name:s,universalResolverAddress:a}){let o=a;if(!o){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=lt({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const i=We({abi:kr,functionName:"addr",...r!=null?{args:[Zt(s),BigInt(r)]}:{args:[Zt(s)]}}),u=await _(e,He,"readContract")({address:o,abi:ps,functionName:"resolve",args:[Be(wn(s)),i],blockNumber:t,blockTag:n});if(u[0]==="0x")return null;const h=ct({abi:kr,args:r!=null?[Zt(s),BigInt(r)]:void 0,functionName:"addr",data:u[0]});return h==="0x"||Qe(h)==="0x00"?null:h}catch(i){if(br(i,"resolve"))return null;throw i}}class xi extends I{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidMetadataError"})}}class mt extends I{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidNftUriError"})}}class yr extends I{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUriResolutionError"})}}class vi extends I{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUnsupportedNamespaceError"})}}const Ti=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Ei=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Pi=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Ni=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Ci(e){try{const t=await fetch(e,{method:"HEAD"});if(t.status===200){const n=t.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function Br(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function Ps({uri:e,gatewayUrls:t}){const n=Pi.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=Br(t==null?void 0:t.ipfs,"https://ipfs.io"),s=Br(t==null?void 0:t.arweave,"https://arweave.net"),a=e.match(Ti),{protocol:o,subpath:i,target:u,subtarget:h=""}=(a==null?void 0:a.groups)||{},f=o==="ipns:/"||i==="ipns/",p=o==="ipfs:/"||i==="ipfs/"||Ei.test(e);if(e.startsWith("http")&&!f&&!p){let x=e;return t!=null&&t.arweave&&(x=e.replace(/https:\/\/arweave.net/g,t==null?void 0:t.arweave)),{uri:x,isOnChain:!1,isEncoded:!1}}if((f||p)&&u)return{uri:`${r}/${f?"ipns":"ipfs"}/${u}${h}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&u)return{uri:`${s}/${u}${h||""}`,isOnChain:!1,isEncoded:!1};let g=e.replace(Ni,"");if(g.startsWith("<svg")&&(g=`data:image/svg+xml;base64,${btoa(g)}`),g.startsWith("data:")||g.startsWith("{"))return{uri:g,isOnChain:!0,isEncoded:!1};throw new yr({uri:e})}function Ns(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new xi({data:e});return e.image||e.image_url||e.image_data}async function ji({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(s=>s.json());return await wr({gatewayUrls:e,uri:Ns(n)})}catch{throw new yr({uri:t})}}async function wr({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=Ps({uri:t,gatewayUrls:e});if(r||await Ci(n))return n;throw new yr({uri:t})}function Si(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[a,o]=n.split(":"),[i,u]=r.split(":");if(!a||a.toLowerCase()!=="eip155")throw new mt({reason:"Only EIP-155 supported"});if(!o)throw new mt({reason:"Chain ID not found"});if(!u)throw new mt({reason:"Contract address not found"});if(!s)throw new mt({reason:"Token ID not found"});if(!i)throw new mt({reason:"ERC namespace not found"});return{chainID:parseInt(o),namespace:i.toLowerCase(),contractAddress:u,tokenID:s}}async function Ai(e,{nft:t}){if(t.namespace==="erc721")return He(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return He(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new vi({namespace:t.namespace})}async function $i(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?Ri(e,{gatewayUrls:t,record:n}):wr({uri:n,gatewayUrls:t})}async function Ri(e,{gatewayUrls:t,record:n}){const r=Si(n),s=await Ai(e,{nft:r}),{uri:a,isOnChain:o,isEncoded:i}=Ps({uri:s,gatewayUrls:t});if(o&&(a.includes("data:application/json;base64,")||a.startsWith("{"))){const h=i?atob(a.replace("data:application/json;base64,","")):a,f=JSON.parse(h);return wr({uri:Ns(f),gatewayUrls:t})}let u=r.tokenID;return r.namespace==="erc1155"&&(u=u.replace("0x","").padStart(64,"0")),ji({gatewayUrls:t,uri:a.replace(/(?:0x)?{id}/,u)})}async function Cs(e,{blockNumber:t,blockTag:n,name:r,key:s,universalResolverAddress:a}){let o=a;if(!o){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=lt({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const i=await _(e,He,"readContract")({address:o,abi:ps,functionName:"resolve",args:[Be(wn(r)),We({abi:Or,functionName:"text",args:[Zt(r),s]})],blockNumber:t,blockTag:n});if(i[0]==="0x")return null;const u=ct({abi:Or,functionName:"text",data:i[0]});return u===""?null:u}catch(i){if(br(i,"resolve"))return null;throw i}}async function Ii(e,{blockNumber:t,blockTag:n,gatewayUrls:r,name:s,universalResolverAddress:a}){const o=await _(e,Cs,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:a});if(!o)return null;try{return await $i(e,{record:o,gatewayUrls:r})}catch{return null}}async function Oi(e,{address:t,blockNumber:n,blockTag:r,universalResolverAddress:s}){let a=s;if(!a){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=lt({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const o=`${t.toLowerCase().substring(2)}.addr.reverse`;try{const[i,u]=await _(e,He,"readContract")({address:a,abi:Ho,functionName:"reverse",args:[Be(wn(o))],blockNumber:n,blockTag:r});return t.toLowerCase()!==u.toLowerCase()?null:i}catch(i){if(br(i,"reverse"))return null;throw i}}async function ki(e,{blockNumber:t,blockTag:n,name:r,universalResolverAddress:s}){let a=s;if(!a){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=lt({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}const[o]=await _(e,He,"readContract")({address:a,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Be(wn(r))],blockNumber:t,blockTag:n});return o}async function Mi(e){const t=dn(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function js(e,{address:t,args:n,event:r,events:s,fromBlock:a,strict:o,toBlock:i}={}){const u=s??(r?[r]:void 0),h=dn(e,{method:"eth_newFilter"});let f=[];u&&(f=[u.flatMap(g=>Bt({abi:[g],eventName:g.name,args:n}))],r&&(f=f[0]));const p=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof a=="bigint"?Y(a):a,toBlock:typeof i=="bigint"?Y(i):i,...f.length?{topics:f}:{}}]});return{abi:u,args:n,eventName:r?r.name:void 0,fromBlock:a,id:p,request:h(p),strict:o,toBlock:i,type:"event"}}async function Ss(e){const t=dn(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function Fi(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n?Y(n):void 0,a=await e.request({method:"eth_getBalance",params:[t,s||r]});return BigInt(a)}async function Bi(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?Y(n):void 0;let a;return t?a=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]}):a=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]}),ue(a)}async function Di(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?Y(n):void 0,a=await e.request({method:"eth_getCode",params:[t,s||r]});if(a!=="0x")return a}function Li(e){var t;return{baseFeePerGas:e.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:(t=e.reward)==null?void 0:t.map(n=>n.map(r=>BigInt(r)))}}async function Gi(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const a=n?Y(n):void 0,o=await e.request({method:"eth_feeHistory",params:[Y(t),a||r,s]});return Li(o)}async function zi(e,{filter:t}){const n=t.strict??!1;return(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(s=>{var a;try{const{eventName:o,args:i}="abi"in t&&t.abi?Gt({abi:t.abi,data:s.data,topics:s.topics,strict:n}):{eventName:void 0,args:void 0};return Ne(s,{args:i,eventName:o})}catch(o){let i,u;if(o instanceof Je||o instanceof st){if("strict"in t&&t.strict)return;i=o.abiItem.name,u=(a=o.abiItem.inputs)==null?void 0:a.some(h=>!("name"in h&&h.name))}return Ne(s,{args:u?[]:{},eventName:i})}}).filter(Boolean)}const Ui=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Hi=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function _i({domain:e,message:t,primaryType:n,types:r}){const s=typeof e>"u"?{}:e,a={EIP712Domain:ks({domain:s}),...r};Os({domain:s,message:t,primaryType:n,types:a});const o=["0x1901"];return s&&o.push(Wi({domain:s,types:a})),n!=="EIP712Domain"&&o.push(As({data:t,primaryType:n,types:a})),fe(Fe(o))}function Wi({domain:e,types:t}){return As({data:e,primaryType:"EIP712Domain",types:t})}function As({data:e,primaryType:t,types:n}){const r=$s({data:e,primaryType:t,types:n});return fe(r)}function $s({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],s=[qi({primaryType:t,types:n})];for(const a of n[t]){const[o,i]=Is({types:n,name:a.name,type:a.type,value:e[a.name]});r.push(o),s.push(i)}return Mt(r,s)}function qi({primaryType:e,types:t}){const n=Be(Ki({primaryType:e,types:t}));return fe(n)}function Ki({primaryType:e,types:t}){let n="";const r=Rs({primaryType:e,types:t});r.delete(e);const s=[e,...Array.from(r).sort()];for(const a of s)n+=`${a}(${t[a].map(({name:o,type:i})=>`${i} ${o}`).join(",")})`;return n}function Rs({primaryType:e,types:t},n=new Set){const r=e.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||t[s]===void 0)return n;n.add(s);for(const a of t[s])Rs({primaryType:a.type,types:t},n);return n}function Is({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},fe($s({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},fe(r)];if(n==="string")return[{type:"bytes32"},fe(Be(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),a=r.map(o=>Is({name:t,type:s,types:e,value:o}));return[{type:"bytes32"},fe(Mt(a.map(([o])=>o),a.map(([,o])=>o)))]}return[{type:n},r]}function Os({domain:e,message:t,primaryType:n,types:r}){const s=r,a=(o,i)=>{for(const u of o){const{name:h,type:f}=u,p=f,g=i[h],x=p.match(Hi);if(x&&(typeof g=="number"||typeof g=="bigint")){const[N,E,v]=x;Y(g,{signed:E==="int",size:parseInt(v)/8})}if(p==="address"&&typeof g=="string"&&!ze(g))throw new bt({address:g});const b=p.match(Ui);if(b){const[N,E]=b;if(E&&ie(g)!==parseInt(E))throw new ia({expectedSize:parseInt(E),givenSize:ie(g)})}const P=s[p];P&&a(P,g)}};if(s.EIP712Domain&&e&&a(s.EIP712Domain,e),n!=="EIP712Domain"){const o=s[n];a(o,t)}}function ks({domain:e}){return[typeof(e==null?void 0:e.name)=="string"&&{name:"name",type:"string"},(e==null?void 0:e.version)&&{name:"version",type:"string"},typeof(e==null?void 0:e.chainId)=="number"&&{name:"chainId",type:"uint256"},(e==null?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(e==null?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}const jn="/docs/contract/encodeDeployData";function Ms({abi:e,args:t,bytecode:n}){if(!t||t.length===0)return n;const r=e.find(a=>"type"in a&&a.type==="constructor");if(!r)throw new Qs({docsPath:jn});if(!("inputs"in r))throw new Er({docsPath:jn});if(!r.inputs||r.inputs.length===0)throw new Er({docsPath:jn});const s=Mt(r.inputs,t);return nr([n,s])}const Ji={"0x0":"reverted","0x1":"success"};function Yi(e){return{...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(t=>Ne(t)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?ue(e.transactionIndex):null,status:e.status?Ji[e.status]:null,type:e.type?ls[e.type]||e.type:null}}const Vi=`Ethereum Signed Message:
`;function Xi(e,t){const n=typeof e=="string"?ke(e):e.raw instanceof Uint8Array?e.raw:Ge(e.raw),r=ke(`${Vi}${n.length}`);return fe(Fe([r,n]),t)}function Zi(e,t){let[n,r="0"]=e.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),t===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){const[a,o,i]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],u=Math.round(+`${o}.${i}`);u>9?r=`${BigInt(a)+BigInt(1)}0`.padStart(a.length+1,"0"):r=`${a}${u}`,r.length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${s?"-":""}${n}${r}`)}function Oe(e,t="wei"){return Zi(e,ns[t])}function Qi(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function ec(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?ue(e.nonce):void 0,storageProof:e.storageProof?Qi(e.storageProof):void 0}}async function tc(e,{address:t,blockNumber:n,blockTag:r,storageKeys:s}){const a=r??"latest",o=n!==void 0?Y(n):void 0,i=await e.request({method:"eth_getProof",params:[t,s,o||a]});return ec(i)}async function nc(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const a=n!==void 0?Y(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,a||r]})}async function xr(e,{blockHash:t,blockNumber:n,blockTag:r,hash:s,index:a}){var f,p,g;const o=r||"latest",i=n!==void 0?Y(n):void 0;let u=null;if(s?u=await e.request({method:"eth_getTransactionByHash",params:[s]}):t?u=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,Y(a)]}):u=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[i||o,Y(a)]}),!u)throw new ss({blockHash:t,blockNumber:n,blockTag:o,hash:s,index:a});return(((g=(p=(f=e.chain)==null?void 0:f.formatters)==null?void 0:p.transaction)==null?void 0:g.format)||us)(u)}async function rc(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([_(e,Ut,"getBlockNumber")({}),t?_(e,xr,"getBlockNumber")({hash:t}):void 0]),a=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return a?r-a+1n:0n}async function Vn(e,{hash:t}){var s,a,o;const n=await e.request({method:"eth_getTransactionReceipt",params:[t]});if(!n)throw new as({hash:t});return(((o=(a=(s=e.chain)==null?void 0:s.formatters)==null?void 0:a.transactionReceipt)==null?void 0:o.format)||Yi)(n)}async function sc(e,t){var P;const{allowFailure:n=!0,batchSize:r,blockNumber:s,blockTag:a,contracts:o,multicallAddress:i}=t,u=r??(typeof((P=e.batch)==null?void 0:P.multicall)=="object"&&e.batch.multicall.batchSize||1024);let h=i;if(!h){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");h=lt({blockNumber:s,chain:e.chain,contract:"multicall3"})}const f=[[]];let p=0,g=0;for(let N=0;N<o.length;N++){const{abi:E,address:v,args:A,functionName:C}=o[N];try{const B=We({abi:E,args:A,functionName:C});g+=(B.length-2)/2,u>0&&g>u&&f[p].length>0&&(p++,g=(B.length-2)/2,f[p]=[]),f[p]=[...f[p],{allowFailure:!0,callData:B,target:v}]}catch(B){const R=Ot(B,{abi:E,address:v,args:A,docsPath:"/docs/contract/multicall",functionName:C});if(!n)throw R;f[p]=[...f[p],{allowFailure:!0,callData:"0x",target:v}]}}const x=await Promise.allSettled(f.map(N=>_(e,He,"readContract")({abi:Hn,address:h,args:[N],blockNumber:s,blockTag:a,functionName:"aggregate3"}))),b=[];for(let N=0;N<x.length;N++){const E=x[N];if(E.status==="rejected"){if(!n)throw E.reason;for(let A=0;A<f[N].length;A++)b.push({status:"failure",error:E.reason,result:void 0});continue}const v=E.value;for(let A=0;A<v.length;A++){const{returnData:C,success:B}=v[A],{callData:R}=f[N][A],{abi:j,address:W,functionName:L,args:U}=o[b.length];try{if(R==="0x")throw new cn;if(!B)throw new cr({data:C});const X=ct({abi:j,args:U,data:C,functionName:L});b.push(n?{result:X,status:"success"}:X)}catch(X){const ee=Ot(X,{abi:j,address:W,args:U,docsPath:"/docs/contract/multicall",functionName:L});if(!n)throw ee;b.push({error:ee,result:void 0,status:"failure"})}}}if(b.length!==o.length)throw new I("multicall results mismatch");return b}const ac="0x60806040523480156200001157600080fd5b50604051620007003803806200070083398101604081905262000034916200056f565b6000620000438484846200004f565b9050806000526001601ff35b600080846001600160a01b0316803b806020016040519081016040528181526000908060200190933c90507f6492649264926492649264926492649264926492649264926492649264926492620000a68462000451565b036200021f57600060608085806020019051810190620000c79190620005ce565b8651929550909350915060000362000192576000836001600160a01b031683604051620000f5919062000643565b6000604051808303816000865af19150503d806000811462000134576040519150601f19603f3d011682016040523d82523d6000602084013e62000139565b606091505b5050905080620001905760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b505b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90620001c4908b90869060040162000661565b602060405180830381865afa158015620001e2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200020891906200069d565b6001600160e01b031916149450505050506200044a565b805115620002b157604051630b135d3f60e11b808252906001600160a01b03871690631626ba7e9062000259908890889060040162000661565b602060405180830381865afa15801562000277573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200029d91906200069d565b6001600160e01b031916149150506200044a565b8251604114620003195760405162461bcd60e51b815260206004820152603a6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e677468000000000000606482015260840162000187565b620003236200046b565b506020830151604080850151855186939260009185919081106200034b576200034b620006c9565b016020015160f81c9050601b81148015906200036b57508060ff16601c14155b15620003cf5760405162461bcd60e51b815260206004820152603b6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c75650000000000606482015260840162000187565b6040805160008152602081018083528a905260ff83169181019190915260608101849052608081018390526001600160a01b038a169060019060a0016020604051602081039080840390855afa1580156200042e573d6000803e3d6000fd5b505050602060405103516001600160a01b031614955050505050505b9392505050565b60006020825110156200046357600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b03811681146200049f57600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b83811015620004d5578181015183820152602001620004bb565b50506000910152565b600082601f830112620004f057600080fd5b81516001600160401b03808211156200050d576200050d620004a2565b604051601f8301601f19908116603f01168101908282118183101715620005385762000538620004a2565b816040528381528660208588010111156200055257600080fd5b62000565846020830160208901620004b8565b9695505050505050565b6000806000606084860312156200058557600080fd5b8351620005928162000489565b6020850151604086015191945092506001600160401b03811115620005b657600080fd5b620005c486828701620004de565b9150509250925092565b600080600060608486031215620005e457600080fd5b8351620005f18162000489565b60208501519093506001600160401b03808211156200060f57600080fd5b6200061d87838801620004de565b935060408601519150808211156200063457600080fd5b50620005c486828701620004de565b6000825162000657818460208701620004b8565b9190910192915050565b828152604060208201526000825180604084015262000688816060850160208701620004b8565b601f01601f1916919091016060019392505050565b600060208284031215620006b057600080fd5b81516001600160e01b0319811681146200044a57600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);BigInt(1);BigInt(2);function oc(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ic(e,t){const n=je(e)?Ge(e):e,r=je(t)?Ge(t):t;return oc(n,r)}async function Fs(e,{address:t,hash:n,signature:r,...s}){const a=je(r)?r:Be(r);try{const{data:o}=await _(e,pn,"call")({data:Ms({abi:_o,args:[t,n,a],bytecode:ac}),...s});return ic(o??"0x0","0x1")}catch(o){if(o instanceof os)return!1;throw o}}async function cc(e,{address:t,message:n,signature:r,...s}){const a=Xi(n);return Fs(e,{address:t,hash:a,signature:r,...s})}async function lc(e,{address:t,signature:n,message:r,primaryType:s,types:a,domain:o,...i}){const u=_i({message:r,primaryType:s,types:a,domain:o});return Fs(e,{address:t,hash:u,signature:n,...i})}function Bs(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:a,pollingInterval:o=e.pollingInterval}){const i=typeof a<"u"?a:e.transport.type!=="webSocket";let u;return i?(()=>{const p=he(["watchBlockNumber",e.uid,t,n,o]);return ut(p,{onBlockNumber:r,onError:s},g=>zt(async()=>{var x;try{const b=await _(e,Ut,"getBlockNumber")({cacheTime:0});if(u){if(b===u)return;if(b-u>1&&n)for(let P=u+1n;P<b;P++)g.onBlockNumber(P,u),u=P}(!u||b>u)&&(g.onBlockNumber(b,u),u=b)}catch(b){(x=g.onError)==null||x.call(g,b)}},{emitOnBegin:t,interval:o}))})():(()=>{let p=!0,g=()=>p=!1;return(async()=>{try{const{unsubscribe:x}=await e.transport.subscribe({params:["newHeads"],onData(b){var N;if(!p)return;const P=ln((N=b.result)==null?void 0:N.number);r(P,u),u=P},onError(b){s==null||s(b)}});g=x,p||g()}catch(x){s==null||s(x)}})(),g})()}async function uc(e,{confirmations:t=1,hash:n,onReplaced:r,pollingInterval:s=e.pollingInterval,timeout:a}){const o=he(["waitForTransactionReceipt",e.uid,n]);let i,u,h,f=!1;return new Promise((p,g)=>{a&&setTimeout(()=>g(new Co({hash:n})),a);const x=ut(o,{onReplaced:r,resolve:p,reject:g},b=>{const P=_(e,Bs,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(N){if(f)return;let E=N;const v=A=>{P(),A(),x()};try{if(h){if(t>1&&(!h.blockNumber||E-h.blockNumber+1n<t))return;v(()=>b.resolve(h));return}if(i||(f=!0,await Kn(async()=>{i=await _(e,xr,"getTransaction")({hash:n}),i.blockNumber&&(E=i.blockNumber)},{delay:({count:A})=>~~(1<<A)*200,retryCount:6}),f=!1),h=await _(e,Vn,"getTransactionReceipt")({hash:n}),t>1&&(!h.blockNumber||E-h.blockNumber+1n<t))return;v(()=>b.resolve(h))}catch(A){if(i&&(A instanceof ss||A instanceof as))try{u=i,f=!0;const C=await Kn(()=>_(e,Ue,"getBlock")({blockNumber:E,includeTransactions:!0}),{delay:({count:j})=>~~(1<<j)*200,retryCount:6,shouldRetry:({error:j})=>j instanceof cs});f=!1;const B=C.transactions.find(({from:j,nonce:W})=>j===u.from&&W===u.nonce);if(!B||(h=await _(e,Vn,"getTransactionReceipt")({hash:B.hash}),t>1&&(!h.blockNumber||E-h.blockNumber+1n<t)))return;let R="replaced";B.to===u.to&&B.value===u.value?R="repriced":B.from===B.to&&B.value===0n&&(R="cancelled"),v(()=>{var j;(j=b.onReplaced)==null||j.call(b,{reason:R,replacedTransaction:u,transaction:B,transactionReceipt:h}),b.resolve(h)})}catch(C){v(()=>b.reject(C))}else v(()=>b.reject(A))}}})})})}function dc(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:a,includeTransactions:o,poll:i,pollingInterval:u=e.pollingInterval}){const h=typeof i<"u"?i:e.transport.type!=="webSocket",f=o??!1;let p;return h?(()=>{const b=he(["watchBlocks",e.uid,n,r,f,u]);return ut(b,{onBlock:s,onError:a},P=>zt(async()=>{var N;try{const E=await _(e,Ue,"getBlock")({blockTag:t,includeTransactions:f});if(E.number&&(p!=null&&p.number)){if(E.number===p.number)return;if(E.number-p.number>1&&n)for(let v=(p==null?void 0:p.number)+1n;v<E.number;v++){const A=await _(e,Ue,"getBlock")({blockNumber:v,includeTransactions:f});P.onBlock(A,p),p=A}}(!(p!=null&&p.number)||t==="pending"&&!(E!=null&&E.number)||E.number&&E.number>p.number)&&(P.onBlock(E,p),p=E)}catch(E){(N=P.onError)==null||N.call(P,E)}},{emitOnBegin:r,interval:u}))})():(()=>{let b=!0,P=()=>b=!1;return(async()=>{try{const{unsubscribe:N}=await e.transport.subscribe({params:["newHeads"],onData(E){var C,B,R;if(!b)return;const A=(((R=(B=(C=e.chain)==null?void 0:C.formatters)==null?void 0:B.block)==null?void 0:R.format)||ds)(E.result);s(A,p),p=A},onError(E){a==null||a(E)}});P=N,b||P()}catch(N){a==null||a(N)}})(),P})()}function fc(e,{address:t,args:n,batch:r=!0,event:s,events:a,onError:o,onLogs:i,poll:u,pollingInterval:h=e.pollingInterval,strict:f}){const p=typeof u<"u"?u:e.transport.type!=="webSocket",g=f??!1;return p?(()=>{const P=he(["watchEvent",t,n,r,e.uid,s,h]);return ut(P,{onLogs:i,onError:o},N=>{let E,v,A=!1;const C=zt(async()=>{var B;if(!A){try{v=await _(e,js,"createEventFilter")({address:t,args:n,event:s,events:a,strict:g})}catch{}A=!0;return}try{let R;if(v)R=await _(e,bn,"getFilterChanges")({filter:v});else{const j=await _(e,Ut,"getBlockNumber")({});E&&E!==j?R=await _(e,mr,"getLogs")({address:t,args:n,event:s,events:a,fromBlock:E+1n,toBlock:j}):R=[],E=j}if(R.length===0)return;if(r)N.onLogs(R);else for(const j of R)N.onLogs([j])}catch(R){v&&R instanceof Ye&&(A=!1),(B=N.onError)==null||B.call(N,R)}},{emitOnBegin:!0,interval:h});return async()=>{v&&await _(e,yn,"uninstallFilter")({filter:v}),C()}})})():(()=>{let P=!0,N=()=>P=!1;return(async()=>{try{const E=a??(s?[s]:void 0);let v=[];E&&(v=[E.flatMap(C=>Bt({abi:[C],eventName:C.name,args:n}))],s&&(v=v[0]));const{unsubscribe:A}=await e.transport.subscribe({params:["logs",{address:t,topics:v}],onData(C){var R;if(!P)return;const B=C.result;try{const{eventName:j,args:W}=Gt({abi:E,data:B.data,topics:B.topics,strict:g}),L=Ne(B,{args:W,eventName:j});i([L])}catch(j){let W,L;if(j instanceof Je||j instanceof st){if(f)return;W=j.abiItem.name,L=(R=j.abiItem.inputs)==null?void 0:R.some(X=>!("name"in X&&X.name))}const U=Ne(B,{args:L?[]:{},eventName:W});i([U])}},onError(C){o==null||o(C)}});N=A,P||N()}catch(E){o==null||o(E)}})(),N})()}function hc(e,{batch:t=!0,onError:n,onTransactions:r,poll:s,pollingInterval:a=e.pollingInterval}){return(typeof s<"u"?s:e.transport.type!=="webSocket")?(()=>{const h=he(["watchPendingTransactions",e.uid,t,a]);return ut(h,{onTransactions:r,onError:n},f=>{let p;const g=zt(async()=>{var x;try{if(!p)try{p=await _(e,Ss,"createPendingTransactionFilter")({});return}catch(P){throw g(),P}const b=await _(e,bn,"getFilterChanges")({filter:p});if(b.length===0)return;if(t)f.onTransactions(b);else for(const P of b)f.onTransactions([P])}catch(b){(x=f.onError)==null||x.call(f,b)}},{emitOnBegin:!0,interval:a});return async()=>{p&&await _(e,yn,"uninstallFilter")({filter:p}),g()}})})():(()=>{let h=!0,f=()=>h=!1;return(async()=>{try{const{unsubscribe:p}=await e.transport.subscribe({params:["newPendingTransactions"],onData(g){if(!h)return;const x=g.result;r([x])},onError(g){n==null||n(g)}});f=p,h||f()}catch(p){n==null||n(p)}})(),f})()}function mc(e){return{call:t=>pn(e,t),createBlockFilter:()=>Mi(e),createContractEventFilter:t=>Qr(e,t),createEventFilter:t=>js(e,t),createPendingTransactionFilter:()=>Ss(e),estimateContractGas:t=>zo(e,t),estimateGas:t=>hr(e,t),getBalance:t=>Fi(e,t),getBlock:t=>Ue(e,t),getBlockNumber:t=>Ut(e,t),getBlockTransactionCount:t=>Bi(e,t),getBytecode:t=>Di(e,t),getChainId:()=>kt(e),getContractEvents:t=>ms(e,t),getEnsAddress:t=>wi(e,t),getEnsAvatar:t=>Ii(e,t),getEnsName:t=>Oi(e,t),getEnsResolver:t=>ki(e,t),getEnsText:t=>Cs(e,t),getFeeHistory:t=>Gi(e,t),estimateFeesPerGas:t=>Lo(e,t),getFilterChanges:t=>bn(e,t),getFilterLogs:t=>zi(e,t),getGasPrice:()=>fr(e),getLogs:t=>mr(e,t),getProof:t=>tc(e,t),estimateMaxPriorityFeePerGas:t=>Do(e,t),getStorageAt:t=>nc(e,t),getTransaction:t=>xr(e,t),getTransactionConfirmations:t=>rc(e,t),getTransactionCount:t=>hs(e,t),getTransactionReceipt:t=>Vn(e,t),multicall:t=>sc(e,t),prepareTransactionRequest:t=>gn(e,t),readContract:t=>He(e,t),sendRawTransaction:t=>gr(e,t),simulateContract:t=>Zo(e,t),verifyMessage:t=>cc(e,t),verifyTypedData:t=>lc(e,t),uninstallFilter:t=>yn(e,t),waitForTransactionReceipt:t=>uc(e,t),watchBlocks:t=>dc(e,t),watchBlockNumber:t=>Bs(e,t),watchContractEvent:t=>ai(e,t),watchEvent:t=>fc(e,t),watchPendingTransactions:t=>hc(e,t)}}function gc(e){const{key:t="public",name:n="Public Client"}=e;return xs({...e,key:t,name:n,type:"publicClient"}).extend(mc)}function pc(e,{abi:t,args:n,bytecode:r,...s}){const a=Ms({abi:t,args:n,bytecode:r});return pr(e,{...s,data:a})}async function bc(e){var n;return((n=e.account)==null?void 0:n.type)==="local"?[e.account.address]:(await e.request({method:"eth_accounts"})).map(r=>or(r))}async function yc(e){return await e.request({method:"wallet_getPermissions"})}async function wc(e){return(await e.request({method:"eth_requestAccounts"})).map(n=>fo(n))}async function xc(e,t){return e.request({method:"wallet_requestPermissions",params:[t]})}async function vc(e,{account:t=e.account,message:n}){if(!t)throw new it({docsPath:"/docs/actions/wallet/signMessage"});const r=Te(t);if(r.type==="local")return r.signMessage({message:n});const s=typeof n=="string"?Zn(n):n.raw instanceof Uint8Array?Be(n.raw):n.raw;return e.request({method:"personal_sign",params:[s,r.address]})}async function Tc(e,t){var h,f,p,g;const{account:n=e.account,chain:r=e.chain,...s}=t;if(!n)throw new it({docsPath:"/docs/actions/wallet/signTransaction"});const a=Te(n);Lt({account:a,...t});const o=await _(e,kt,"getChainId")({});r!==null&&ws({currentChainId:o,chain:r});const i=(r==null?void 0:r.formatters)||((h=e.chain)==null?void 0:h.formatters),u=((f=i==null?void 0:i.transactionRequest)==null?void 0:f.format)||mn;return a.type==="local"?a.signTransaction({...s,chainId:o},{serializer:(g=(p=e.chain)==null?void 0:p.serializers)==null?void 0:g.transaction}):await e.request({method:"eth_signTransaction",params:[{...u(s),chainId:Y(o),from:a.address}]})}async function Ec(e,{account:t=e.account,domain:n,message:r,primaryType:s,types:a}){if(!t)throw new it({docsPath:"/docs/actions/wallet/signTypedData"});const o=Te(t),i={EIP712Domain:ks({domain:n}),...a};if(Os({domain:n,message:r,primaryType:s,types:i}),o.type==="local")return o.signTypedData({domain:n,primaryType:s,types:i,message:r});const u=he({domain:n??{},primaryType:s,types:i,message:r},(h,f)=>je(f)?f.toLowerCase():f);return e.request({method:"eth_signTypedData_v4",params:[o.address,u]})}async function Pc(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:Y(t)}]})}async function Nc(e,t){return await e.request({method:"wallet_watchAsset",params:t})}function Cc(e){return{addChain:t=>ci(e,t),deployContract:t=>pc(e,t),getAddresses:()=>bc(e),getChainId:()=>kt(e),getPermissions:()=>yc(e),prepareTransactionRequest:t=>gn(e,t),requestAddresses:()=>wc(e),requestPermissions:t=>xc(e,t),sendRawTransaction:t=>gr(e,t),sendTransaction:t=>pr(e,t),signMessage:t=>vc(e,t),signTransaction:t=>Tc(e,t),signTypedData:t=>Ec(e,t),switchChain:t=>Pc(e,t),watchAsset:t=>Nc(e,t),writeContract:t=>ii(e,t)}}function Dr(e){const{key:t="wallet",name:n="Wallet Client",transport:r}=e;return xs({...e,key:t,name:n,transport:a=>r({...a,retryCount:0}),type:"walletClient"}).extend(Cc)}const Ce={6342:{name:"MegaETH Testnet",rpcUrl:"https://carrot.megaeth.com/rpc",fallbackRpcUrls:["https://carrot.megaeth.com/rpc"],wsUrl:"wss://carrot.megaeth.com/ws",contractAddress:"0xb34cac1135c27ec810e7e6880325085783c1a7e0",faucetAddress:"0x76b71a17d82232fd29aca475d14ed596c67c4b85",chainId:6342,sendMethod:"realtime_sendRawTransaction",connectionTimeouts:{initial:1e4,retry:3e3,request:5e3},maxConnections:3},31337:{name:"Foundry Local",rpcUrl:"http://127.0.0.1:8545",fallbackRpcUrls:["http://127.0.0.1:8545"],contractAddress:"0xb34cac1135c27ec810e7e6880325085783c1a7e0",faucetAddress:"0x76b71a17d82232fd29aca475d14ed596c67c4b85",chainId:31337,sendMethod:"eth_sendRawTransaction",connectionTimeouts:{initial:1e4,retry:5e3,request:15e3},maxConnections:2},50311:{name:"Somnia Testnet",rpcUrl:"https://testnet.somnia.network",fallbackRpcUrls:["https://testnet.somnia.network"],contractAddress:"0xb34cac1135c27ec810e7e6880325085783c1a7e0",faucetAddress:"0x76b71a17d82232fd29aca475d14ed596c67c4b85",chainId:50311,sendMethod:"eth_sendRawTransaction",connectionTimeouts:{initial:2e4,retry:1e4,request:3e4},maxConnections:2},1313161556:{name:"RISE Testnet",rpcUrl:"https://testnet-rpc.rise.com",fallbackRpcUrls:["https://testnet-rpc.rise.com"],contractAddress:"0xb34cac1135c27ec810e7e6880325085783c1a7e0",faucetAddress:"0x76b71a17d82232fd29aca475d14ed596c67c4b85",chainId:1313161556,sendMethod:"eth_sendRawTransactionSync",connectionTimeouts:{initial:2e4,retry:1e4,request:3e4},maxConnections:2}},jc=[{inputs:[],name:"update",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"number",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Sn=e=>{try{if(typeof e=="string"){const t=e.replace(/^cadesplugin_loaded/,"").replace(/^EnableInte.*?$/,"").trim();return t.length===0?null:JSON.parse(t)}return e}catch(t){return console.warn("Failed to parse JSON response:",t.message,"Data:",e),null}},Ds=()=>{const{authenticated:e}=rt(),{wallets:t}=rn(),[n,r]=F.useState(!1),[s,a]=F.useState(!1),[o,i]=F.useState("0"),[u,h]=F.useState(0),f=F.useRef({}),p=F.useRef({}),g="megaBuddies_globalCache",x={gasParams:5*60*1e3,chainParams:30*1e3,rpcHealth:2*60*1e3,clients:10*60*1e3,nonce:30*1e3},b=()=>{try{const d={gasParams:{data:(m=>JSON.parse(JSON.stringify(m,(w,y)=>typeof y=="bigint"?y.toString()+"n":y)))(p.current),timestamp:Date.now()},chainParams:{data:L.current,timestamp:Date.now()},rpcHealth:{data:N.current,timestamp:Date.now()},nonceCache:{data:A.current,timestamp:Date.now()}};localStorage.setItem(g,JSON.stringify(d))}catch(c){console.warn("Failed to save global cache:",c)}},P=()=>{try{const c=localStorage.getItem(g);if(c){const d=JSON.parse(c),m=Date.now(),w=y=>{if(typeof y=="string"&&y.endsWith("n"))return BigInt(y.slice(0,-1));if(typeof y=="object"&&y!==null){const T=Array.isArray(y)?[]:{};for(const[$,z]of Object.entries(y))T[$]=w(z);return T}return y};d.gasParams&&m-d.gasParams.timestamp<x.gasParams&&(p.current=w(d.gasParams.data),console.log("🎯 Loaded cached gas parameters from storage")),d.chainParams&&m-d.chainParams.timestamp<x.chainParams&&(L.current=d.chainParams.data,console.log("🎯 Loaded cached chain parameters from storage")),d.rpcHealth&&m-d.rpcHealth.timestamp<x.rpcHealth&&(N.current=d.rpcHealth.data,console.log("🎯 Loaded cached RPC health from storage")),d.nonceCache&&m-d.nonceCache.timestamp<x.nonce&&(Object.entries(d.nonceCache.data).forEach(([y,T])=>{T&&typeof T.currentNonce=="number"&&(A.current[y]={...T,isUpdating:!1,lastUpdate:T.lastUpdate||0})}),console.log("🎯 Loaded cached nonce data from storage"))}}catch(c){console.warn("Failed to load global cache:",c)}};F.useEffect(()=>{P();const c=setInterval(b,3e4),d=()=>b();window.addEventListener("beforeunload",d);const m=setInterval(()=>{Object.keys(de.current).forEach(w=>{const y=de.current[w];y&&y.state==="OPEN"&&Date.now()-y.lastFailureTime>y.timeout&&(y.state="HALF_OPEN",y.failures=0,console.log(`🔄 Auto-reset circuit breaker for chain ${w} - trying again`))})},1e4);return()=>{clearInterval(c),clearInterval(m),window.removeEventListener("beforeunload",d),b()}},[]),F.useRef({});const N=F.useRef({}),E=F.useRef({}),v=F.useRef({}),A=F.useRef({}),C=F.useRef({}),B=F.useRef(0),R=F.useRef({}),j=c=>(R.current[c]||(R.current[c]={recentTransactions:[],averageBlockchainTime:0,successRate:0,totalTransactions:0,successfulTransactions:0,lastUpdate:Date.now()}),R.current[c]),W=(c,d,m)=>{const w=j(c);w.recentTransactions.push({blockchainTime:d,success:m,timestamp:Date.now()}),w.recentTransactions.length>50&&w.recentTransactions.shift(),w.totalTransactions++,m&&w.successfulTransactions++;const y=w.recentTransactions.filter(T=>T.success);return y.length>0&&(w.averageBlockchainTime=y.reduce((T,$)=>T+$.blockchainTime,0)/y.length),w.successRate=w.successfulTransactions/w.totalTransactions*100,w.lastUpdate=Date.now(),w},L=F.useRef({}),U={6342:{poolSize:100,refillAt:.2,batchSize:25,maxRetries:3,retryDelay:200,burstMode:!0,maxBurstSize:5,burstCooldown:500},31337:{poolSize:80,refillAt:.25,batchSize:20,maxRetries:3,retryDelay:150,burstMode:!0,maxBurstSize:4,burstCooldown:300},50311:{poolSize:60,refillAt:.3,batchSize:15,maxRetries:3,retryDelay:300,burstMode:!0,maxBurstSize:3,burstCooldown:800},1313161556:{poolSize:50,refillAt:.4,batchSize:12,maxRetries:2,retryDelay:400,burstMode:!1,maxBurstSize:2,burstCooldown:1500},default:{poolSize:60,refillAt:.3,batchSize:15,maxRetries:3,retryDelay:300,burstMode:!1,maxBurstSize:2,burstCooldown:1e3}},X={reducedBatchSize:1,increasedDelay:1e3,degradedMode:!1},ee=F.useRef({6342:{...X}}),se=F.useRef({}),Ee=c=>(se.current[c]||(se.current[c]={lastBurstTime:0,burstCount:0,inCooldown:!1,pendingTransactions:[],processingBurst:!1}),se.current[c]),Se=c=>{const d=U[c]||U.default;if(!d.burstMode)return!1;const m=Ee(c),w=Date.now();return m.inCooldown&&w-m.lastBurstTime<d.burstCooldown?!1:(m.inCooldown&&w-m.lastBurstTime>=d.burstCooldown&&(m.inCooldown=!1,m.burstCount=0),m.burstCount<d.maxBurstSize)},Ht=(c,d)=>{const m=U[c]||U.default;if(!m.burstMode)return;const w=Ee(c),y=Date.now();d&&(w.burstCount++,w.lastBurstTime=y,w.burstCount>=m.maxBurstSize&&(w.inCooldown=!0,console.log(`Burst mode cooldown activated for chain ${c} (${m.burstCooldown}ms)`)))},xn=async(c,d)=>{const m=Ee(c);return new Promise((w,y)=>{m.pendingTransactions.push({fn:d,resolve:w,reject:y,timestamp:Date.now()}),m.processingBurst||vn(c)})},vn=async c=>{const d=Ee(c);for(d.processingBurst=!0;d.pendingTransactions.length>0;){if(!Se(c)){const y=U[c]||U.default,T=Math.max(100,y.burstCooldown/10);await new Promise($=>setTimeout($,T));continue}const w=d.pendingTransactions.shift();if(!w)break;try{const y=await w.fn();Ht(c,!0),w.resolve(y)}catch(y){Ht(c,!1),w.reject(y)}}d.processingBurst=!1},_t=c=>{const d=Ce[c];d&&(N.current[c]||(N.current[c]={endpoints:d.fallbackRpcUrls.map(m=>({url:m,healthy:!0,lastChecked:0,consecutiveFailures:0,responseTime:0})),currentEndpointIndex:0,lastHealthCheck:0}))},Wt=async c=>{const d=N.current[c];if(!d)return _t(c),Ce[c].rpcUrl;for(let m=0;m<d.endpoints.length;m++){const w=d.endpoints[d.currentEndpointIndex];if(w.healthy||w.consecutiveFailures<3)return w.url;d.currentEndpointIndex=(d.currentEndpointIndex+1)%d.endpoints.length}return console.warn(`All RPC endpoints for chain ${c} appear unhealthy, using primary`),d.endpoints[0].url},Tn=(c,d,m,w=0)=>{const y=N.current[c];if(!y)return;const T=y.endpoints.find($=>$.url===d);T&&(T.lastChecked=Date.now(),T.responseTime=w,m?(T.healthy=!0,T.consecutiveFailures=0):(T.consecutiveFailures++,T.consecutiveFailures>=3&&(T.healthy=!1,console.warn(`Marking RPC endpoint as unhealthy: ${d} (${T.consecutiveFailures} failures)`))))},qt=(c,d)=>{const m=`${c}-${d}`,w=Ce[c];if(E.current[m]||(E.current[m]=0),E.current[m]>=w.maxConnections)throw new Error(`Maximum connections (${w.maxConnections}) reached for ${m}`);return E.current[m]++,()=>{E.current[m]>0&&E.current[m]--}},Kt=c=>{const d=ee.current[c];d&&(d.degradedMode=!0,console.log(`Enabled fallback mode for chain ${c}`))},Jt=c=>{const d=ee.current[c];return d!=null&&d.degradedMode?d:null},le=()=>{if(!e||!t.length)return console.log("Not authenticated or no wallets available"),null;console.log("Available wallets:",t.map(d=>({address:d.address,walletClientType:d.walletClientType,connectorType:d.connectorType})));const c=t.find(d=>d.walletClientType==="privy"||d.connectorType==="embedded"||d.connectorType==="privy");return c?(console.log("Found embedded wallet:",c.address),c):t.length>0?(console.log("No embedded wallet found, using first available wallet:",t[0].address),t[0]):(console.log("No wallets available"),null)},be=async c=>{const d=`${c}`;if(f.current[d])return f.current[d];const m=Ce[c];if(!m)throw new Error(`Unsupported network: ${c}`);const w=le();if(!w)throw new Error("No embedded wallet found");_t(c);try{const y=await Wt(c);console.log(`Using RPC endpoint for chain ${c}: ${y}`);const T=qt(c,y),$=gc({chain:{id:c,name:m.name,network:m.name.toLowerCase().replace(/\s+/g,"-"),nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:[y]},public:{http:[y]}}},transport:Fr(y,{timeout:m.connectionTimeouts.initial,retryCount:4,retryDelay:({count:S})=>Math.min(1e3*Math.pow(2,S),8e3)})});let z;c===6342?z=Dr({account:w.address,chain:$.chain,transport:fi({async request({method:S,params:D}){var q,H;if(S==="eth_signTransaction"){const K=le();if(!K)throw new Error("No embedded wallet found for signing");const J=await((q=K.getProvider)==null?void 0:q.call(K))||await((H=K.getEthereumProvider)==null?void 0:H.call(K))||K;if(J!=null&&J.request)return await J.request({method:S,params:D});throw new Error("Unable to get provider for signing")}return await $.request({method:S,params:D})}})}):z=Dr({account:w.address,chain:$.chain,transport:Fr(y,{timeout:m.connectionTimeouts.retry,retryCount:4,retryDelay:({count:S})=>Math.min(1e3*Math.pow(2,S),5e3)})});const k={publicClient:$,walletClient:z,config:m,rpcUrl:y,releaseConnection:T};return f.current[d]=k,console.log(`Created clients for chain ${c}:`,{publicRPC:y,signingMethod:c===6342?"Local Privy":"RPC"}),k}catch(y){throw console.error(`Error creating clients for chain ${c}:`,y),y}},ye=(c,d)=>{const m=`${c}-${d}`;return A.current[m]||(A.current[m]={currentNonce:null,pendingNonce:null,lastUpdate:0,isUpdating:!1}),A.current[m]},dt=async(c,d,m=!1)=>{const w=ye(c,d),y=Date.now(),T=c.toString(),$=v.current[T];if($&&$.isReady&&!m){const k=$.baseNonce+$.currentIndex;return console.log(`🎯 Using pool-based nonce ${k} for ${d} on chain ${c} (pool: ${$.currentIndex}/${$.transactions.length})`),k}if(!w.currentNonce||m||y-w.lastUpdate>3e4){if(w.isUpdating){let k=0;for(;w.isUpdating&&k<5e3;)await new Promise(S=>setTimeout(S,100)),k+=100;w.isUpdating&&(console.warn("⚠️ Nonce update timeout, forcing reset"),w.isUpdating=!1)}if(!w.isUpdating){w.isUpdating=!0;try{const{publicClient:k}=await be(c),[S,D]=await Promise.all([k.getTransactionCount({address:d,blockTag:"latest"}),k.getTransactionCount({address:d,blockTag:"pending"})]),q=Math.max(S,D),H=w.currentNonce||0;m?(w.currentNonce=q,w.pendingNonce=q,console.log(`🔄 Force refresh: nonce updated for ${d} on chain ${c}: ${H} → ${q}`)):q>H?(w.currentNonce=q,w.pendingNonce=q,console.log(`🔄 Nonce updated for ${d} on chain ${c}: ${H} → ${q}`)):(w.pendingNonce=w.currentNonce,console.log(`🔄 Keeping local nonce for ${d} on chain ${c}: ${w.currentNonce} (network: ${q})`)),w.lastUpdate=y}catch(k){console.error("❌ Error updating nonce:",k),w.currentNonce!==null?(console.warn(`⚠️ Using cached nonce ${w.currentNonce} due to network error`),w.pendingNonce=w.currentNonce):(w.currentNonce=0,w.pendingNonce=0,console.warn("⚠️ Initializing nonce to 0 due to network error"))}finally{w.isUpdating=!1}}}const z=w.pendingNonce;return w.pendingNonce+=1,console.log(`🎯 Allocated nonce ${z} for ${d} on chain ${c}`),z},M=async c=>{const d=c.toString();if(p.current[d]){const m=p.current[d],w=Date.now()-(m.timestamp||0),y=c===6342?2*60*1e3:x.gasParams;if(w<y)return console.log(`🎯 Using cached gas params for chain ${c} (age: ${Math.round(w/1e3)}s)`),m}try{const{publicClient:m}=await be(c);let w,y;if(c===6342)console.log("⚡ Using ultra-optimized gas parameters for MegaETH real-time gaming"),w=Oe("0.001"),y=Oe("0.0005");else if(c===31337)w=Oe("0.01"),y=Oe("0.001");else try{w=await m.getGasPrice()*2n,y=Oe("1")}catch($){console.warn("Failed to get dynamic gas price, using fallback:",$),w=Oe("20"),y=Oe("2")}const T={maxFeePerGas:w,maxPriorityFeePerGas:y,timestamp:Date.now()};return p.current[d]=T,console.log(`⚡ Gas params for chain ${c}: {maxFeePerGas: ${Number(w)/1e9} gwei, maxPriorityFeePerGas: ${Number(y)/1e9} gwei}`),setTimeout(b,100),T}catch(m){if(console.error("Error getting gas params:",m),p.current[d])return console.log("🔄 Using stale cached gas params due to error"),p.current[d];const w={maxFeePerGas:Oe("20"),maxPriorityFeePerGas:Oe("2"),timestamp:Date.now()};return p.current[d]=w,w}},O=async c=>{const d=c.toString();if(L.current[d])return L.current[d];try{const{publicClient:m}=await be(c),[w,y]=await Promise.all([Re(()=>m.getChainId(),2,500,c),Re(()=>m.getBlockNumber(),2,500,c)]),T={chainId:w,blockNumber:Number(y)},$=c===6342?3e4:6e4;return L.current[d]=T,setTimeout(()=>{delete L.current[d]},$),console.log(`Cached chain params for ${c}:`,T),T}catch(m){return console.error("Error getting chain params:",m),{chainId:c,blockNumber:0}}},Q=async(c,d,m)=>{var Z,xe;const w=c.toString(),y=U[c]||U.default,T=Jt(c);let $=Math.min(m,y.poolSize);T&&($=Math.min($,T.reducedBatchSize),console.log(`Using fallback mode for chain ${c}: batch size ${$}`)),console.log(`Pre-signing ${$} transactions for chain ${c} starting from nonce ${d}`),v.current[w]||(v.current[w]={transactions:[],currentIndex:0,baseNonce:d,hasTriggeredRefill:!1,isRefilling:!1,isReady:!1});const z=v.current[w],{walletClient:k}=await be(c),S=await M(c);console.log(`Using gas parameters: {maxFeePerGasGwei: ${Number(S.maxFeePerGas)/10**9}, maxPriorityFeePerGasGwei: ${Number(S.maxPriorityFeePerGas)/10**9}}`);const D=Ce[c],q=le();let H=0;const K=3;for(let ne=0;ne<$;ne++)try{const V=T?T.increasedDelay:y.retryDelay;V>0&&ne>0&&await new Promise(Xe=>setTimeout(Xe,V));const Ke=d+ne,ve={account:q.address,to:D.contractAddress,data:"0xa2e62045",nonce:Ke,maxFeePerGas:S.maxFeePerGas,maxPriorityFeePerGas:S.maxPriorityFeePerGas,value:0n,type:"eip1559",gas:100000n};let De;c===6342?(console.log(`Signing transaction ${ne+1} locally for MegaETH`),De=await Re(async()=>await k.signTransaction(ve),T?1:y.maxRetries,y.retryDelay,c)):(console.log(`Signing transaction ${ne+1} via RPC for chain ${c}`),De=await Re(()=>k.signTransaction(ve),T?1:y.maxRetries,y.retryDelay,c));const pe={signedTx:De,_reservedNonce:Ke,timestamp:Date.now()};z.transactions.push(pe),ne===0&&(z.isReady=!0,console.log("🎮 First transaction ready - gaming can begin!"),console.log(`✅ Pre-signed transaction pool is now ACTIVE with ${z.transactions.length} transactions`),oe(c)),H=0,console.log(`Signed transaction ${z.transactions.length}/${$}`)}catch(V){if(console.error(`Error signing transaction ${ne+1}:`,V),H++,(Z=V.message)!=null&&Z.includes("rate limit")||V.status===429||V.status===403||(xe=V.message)!=null&&xe.includes("not whitelisted")){console.log("Rate limit/403/not whitelisted detected during pre-signing, continuing with next transaction");continue}if(H>=K){console.log(`Too many consecutive errors (${H}), stopping batch signing but keeping realtime mode available`);break}continue}console.log(`Successfully pre-signed ${z.transactions.length} transactions`),T&&z.transactions.length>0&&console.log("Fallback mode: minimum transactions ready for gaming");const J=ye(c,q.address);J&&(J.pendingNonce=Math.max(J.pendingNonce||0,d+z.transactions.length))},G=async(c,d,m)=>{const w=c.toString(),y=v.current[w];if(!y||y.isRefilling){console.log("Pool extension already in progress, skipping");return}try{y.isRefilling=!0,console.log(`Extending pool for chain ${c} from nonce ${d} with ${m} transactions`);const T=[],{walletClient:$}=await be(c),z=await M(c),k=Ce[c],S=le();for(let D=0;D<m;D++)try{const q=d+D,H={account:S.address,to:k.contractAddress,data:"0xa2e62045",nonce:q,maxFeePerGas:z.maxFeePerGas,maxPriorityFeePerGas:z.maxPriorityFeePerGas,value:0n,type:"eip1559",gas:100000n};let K;c===6342?K=await $.signTransaction(H):K=await $.signTransaction(H);const J={signedTx:K,_reservedNonce:q,timestamp:Date.now()};T.push(J),console.log(`Extended pool: signed ${T.length}/${m}`)}catch(q){console.error(`Error signing extension transaction ${D+1}:`,q);break}if(y&&T.length>0){y.transactions.push(...T),y.hasTriggeredRefill=!1,console.log(`Pool extended successfully. Total transactions: ${y.transactions.length}`);const D=ye(c,S.address);D&&(D.pendingNonce=Math.max(D.pendingNonce||0,d+T.length))}}catch(T){console.error("Error extending transaction pool:",T)}finally{y&&(y.isRefilling=!1)}},Ve=async c=>{const d=c.toString(),m=v.current[d],w=U[c]||U.default;if(m&&m.isReady&&m.transactions.length>m.currentIndex){const y=m.transactions[m.currentIndex];return m.currentIndex++,console.log(`🎯 Using pre-signed transaction ${m.currentIndex}/${m.transactions.length} (nonce: ${y._reservedNonce})`),m.currentIndex%5===0&&!m.hasTriggeredRefill&&(console.log(`🔄 Refilling at ${m.currentIndex} transactions used (infinite pool strategy)`),m.hasTriggeredRefill=!0,setTimeout(async()=>{try{const T=le();if(T){const z=ye(c,T.address).pendingNonce,k=Math.max(15,w.batchSize);console.log(`🚀 Infinite pool: adding ${k} transactions (consumed 5, net growth +${k-5})`),await G(c,z,k)}}catch(T){console.error("❌ Error in infinite pool refill:",T),m.hasTriggeredRefill=!1}},0)),y.signedTx}else if(m)if(m.isReady){if(m.transactions.length<=m.currentIndex)throw console.log(`📭 Transaction pool empty for chain ${c} (used ${m.currentIndex}/${m.transactions.length})`),new Error(`Pre-signed transaction pool exhausted for chain ${c}. Only pre-signed transactions are allowed.`)}else throw console.log(`⏳ Transaction pool not ready yet for chain ${c} (${m.transactions.length} transactions in progress)`),new Error(`Pre-signed transaction pool not ready for chain ${c}. Wait for initialization to complete.`);else throw console.log(`❌ No transaction pool exists for chain ${c}`),new Error(`No pre-signed transaction pool available for chain ${c}. Only pre-signed transactions are allowed.`);try{console.error("🚨 CRITICAL: Pre-signed pool empty! Attempting emergency refill...");const y=le();if(y){const T=ye(c,y.address),$=U[c]||U.default,z=Math.min(5,$.batchSize),k=T.pendingNonce;console.log(`🚨 Emergency pre-signing ${z} transactions from nonce ${k}`),await Q(c,k,z);const S=v.current[c.toString()];if(S&&S.isReady&&S.transactions.length>S.currentIndex){const D=S.transactions[S.currentIndex];return S.currentIndex++,console.log(`✅ Emergency transaction obtained: ${S.currentIndex}/${S.transactions.length}`),D.signedTx}}}catch(y){console.error("❌ Emergency refill failed:",y)}throw new Error("CRITICAL ERROR: Pre-signed transaction pool exhausted and emergency refill failed. Only pre-signed transactions are allowed in this game.")},oe=c=>{const d=c.toString(),m=setInterval(()=>{const w=v.current[d];if(!w||!w.isReady)return;const y=w.transactions.length-w.currentIndex,T=w.transactions.length,$=w.currentIndex,z=Math.floor($/5),k=z*10;$%10===0&&$>0&&(console.log(`📊 Infinite Pool Stats for chain ${c}:`),console.log(`  • Consumed: ${$} transactions`),console.log(`  • Remaining: ${y} transactions`),console.log(`  • Total pool size: ${T} transactions`),console.log(`  • Growth cycles: ${z} (+${k} net growth)`),console.log(`  • Pool trend: ${y>20?"📈 GROWING":y>10?"➡️ STABLE":"📉 NEEDS ATTENTION"}`)),y<=3&&!w.isRefilling&&(console.error(`🚨 INFINITE POOL VIOLATION: Only ${y} transactions left!`),console.error("  • This should never happen with infinite pool logic"),console.error(`  • Consumed: ${$}, Total: ${T}, Cycles: ${z}`),w.hasTriggeredRefill||(w.hasTriggeredRefill=!0,console.log("🚨 EMERGENCY: Force-refilling infinite pool..."),setTimeout(async()=>{try{const S=le();if(S){const D=ye(c,S.address);await G(c,D.pendingNonce,25)}}catch(S){console.error("❌ Emergency infinite pool refill failed:",S)}},0))),y<=8&&$>10&&console.warn(`⚠️ INFINITE POOL: Low remaining transactions (${y}) - check refill mechanism`)},3e3);return console.log(`👁️ Started INFINITE pool monitoring for chain ${c}`),console.log("📊 Pool will grow by +10 transactions every 5 consumed (mathematical infinity)"),m},te=async c=>{try{const{publicClient:d}=await be(c),m=le();if(!m)return console.error("No embedded wallet available for balance check"),"0";const w=await d.getBalance({address:m.address}),y=(Number(w)/10**18).toFixed(4);return i(y),console.log(`Balance for ${m.address}: ${y} ETH`),y}catch(d){return console.error("Error checking balance:",d),i("0"),"0"}},ce=async(c,d)=>{const m=`faucet_${d}_${c}`,w=5*60*1e3;try{const y=localStorage.getItem(m);if(y){const S=Date.now()-parseInt(y);if(S<w){const D=Math.ceil((w-S)/1e3);throw console.log(`⏱️ Faucet cooldown: ${D}s remaining`),new Error(`Faucet is on cooldown. Try again in ${D} seconds.`)}}console.log("💰 Calling optimized faucet for address:",c);const T=new AbortController,$=setTimeout(()=>T.abort(),3e4),z=await fetch("/api/faucet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:c,chainId:d,timestamp:Date.now(),clientVersion:"1.0"}),signal:T.signal,mode:"cors"});if(clearTimeout($),!z.ok){let S="Faucet request failed";try{const D=await z.json();if(S=D.error||S,D.code==="INSUFFICIENT_BALANCE")S="Faucet is temporarily empty. Please try again later.";else if(D.code==="RATE_LIMIT")S=`Rate limit exceeded. Try again in ${D.retryAfter||300} seconds.`;else if(D.code==="ALREADY_SUFFICIENT")return console.log("💰 Balance already sufficient, skipping faucet"),{success:!0,message:"Sufficient balance already available",skipped:!0}}catch(D){console.error("Failed to parse faucet error response:",D),z.status===429?S="Too many requests. Please wait a few minutes and try again.":z.status===503?S="Faucet service is temporarily unavailable. Please try again later.":S=`HTTP ${z.status}: ${z.statusText}`}throw new Error(S)}const k=await z.json();return localStorage.setItem(m,Date.now().toString()),console.log("💰 Faucet success:",k),k.txHash&&(console.log("⏳ Waiting for faucet transaction to be processed..."),setTimeout(async()=>{try{await te(d),console.log("✅ Balance updated after faucet transaction")}catch(S){console.warn("Failed to update balance after faucet:",S)}},3e3)),{success:!0,...k,timestamp:Date.now()}}catch(y){throw console.error("❌ Faucet error:",y),y.name==="AbortError"?new Error("Faucet request timed out. Please check your connection and try again."):y.message.includes("Failed to fetch")||y.message.includes("NetworkError")?new Error("Network error. Please check your connection and try again."):y.message.includes("cooldown")||y.message.includes("Rate limit")||y.message.includes("temporarily unavailable")?y:new Error(`Faucet error: ${y.message}`)}},Ae=async(c,d)=>{var z,k,S;const m=Ce[c],w=U[c]||U.default,y=await Wt(c),T=Date.now();let $=!1;try{let D,q;if(m.sendMethod==="realtime_sendRawTransaction"){if(console.log("🚀 Using MegaETH realtime_sendRawTransaction for instant execution..."),D=await Re(async()=>{var Z,xe,ne,V,Ke;const K=new AbortController,J=setTimeout(()=>K.abort(),m.connectionTimeouts.request);try{const ve=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"realtime_sendRawTransaction",params:[d],id:Date.now()}),signal:K.signal,mode:"cors"});if(clearTimeout(J),!ve.ok){const Xe=await ve.text();throw new Error(`HTTP ${ve.status}: ${Xe}`)}const De=await ve.text(),pe=Sn(De);if(!pe)throw new Error("Invalid response format from MegaETH RPC");if(pe.error){if((Z=pe.error.message)!=null&&Z.includes("nonce too low"))throw console.log("🔄 MegaETH nonce too low, triggering refresh"),new Error("nonce too low");if((xe=pe.error.message)!=null&&xe.includes("rate limit"))throw console.log("⏱️ MegaETH rate limit hit, will retry"),new Error("rate limit exceeded");if((ne=pe.error.message)!=null&&ne.includes("already known"))return console.log("🔄 Transaction already known by network - likely duplicate, treating as success"),{result:{transactionHash:"duplicate_tx_"+Date.now(),status:"0x1",gasUsed:"0x66f9",blockNumber:"0x"+Date.now().toString(16),from:((V=pe.error.data)==null?void 0:V.from)||"0x0",to:((Ke=pe.error.data)==null?void 0:Ke.to)||"0x0"}};throw new Error(`MegaETH RPC Error: ${pe.error.message}`)}return pe}catch(ve){throw clearTimeout(J),ve.name==="AbortError"?new Error("MegaETH RPC timeout - real-time deadline exceeded"):ve}},w.maxRetries,100,c),D.error)throw new Error(`MegaETH Real-time Error: ${D.error.message}`);return q=D.result,console.log("⚡ MegaETH instant transaction hash:",q),$=!0,{hash:q,receipt:D.result,isInstant:!0,network:"MegaETH"}}else if(m.sendMethod==="eth_sendRawTransactionSync"){console.log("📦 Using RISE eth_sendRawTransactionSync for fast execution...");const H=new AbortController,K=setTimeout(()=>H.abort(),m.connectionTimeouts.retry);try{D=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_sendRawTransactionSync",params:[d],id:Date.now()}),signal:H.signal,mode:"cors"}),clearTimeout(K);const J=await D.text(),Z=Sn(J);if(!Z)throw new Error("Invalid response format from RISE RPC");if(Z.error)throw(z=Z.error.message)!=null&&z.includes("nonce too low")?(console.log("🔄 RISE nonce too low detected"),new Error("nonce too low")):new Error(Z.error.message||"RISE transaction failed");return $=!0,{hash:Z.result,receipt:Z.result,isInstant:!0,network:"RISE"}}catch(J){throw clearTimeout(K),J.name==="AbortError"?new Error("RISE RPC timeout"):J}}else{console.log("🔗 Using standard eth_sendRawTransaction...");const H=new AbortController,K=setTimeout(()=>H.abort(),m.connectionTimeouts.retry);try{D=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_sendRawTransaction",params:[d],id:Date.now()}),signal:H.signal,mode:"cors"}),clearTimeout(K);const J=await D.text(),Z=Sn(J);if(!Z)throw new Error("Invalid response format from RPC");if(Z.error)throw(k=Z.error.message)!=null&&k.includes("nonce too low")?(console.log("🔄 Standard RPC nonce too low detected"),new Error("nonce too low")):new Error(Z.error.message||"Transaction failed");return $=!0,{hash:Z.result,isInstant:!1,network:m.name}}catch(J){throw clearTimeout(K),J.name==="AbortError"?new Error("Standard RPC timeout"):J}}}catch(D){if(console.error("❌ Send transaction error:",D),(S=D.message)!=null&&S.includes("nonce too low")){const q=le();if(q){console.log('🔄 Refreshing nonce due to "nonce too low" error');try{await dt(c,q.address,!0);const H=c.toString(),K=v.current[H];K&&(console.log("🗑️ Clearing invalid pre-signed transaction pool"),K.transactions=[],K.currentIndex=0,K.isReady=!1,K.hasTriggeredRefill=!1,setTimeout(async()=>{try{const{publicClient:J}=await be(c),Z=await J.getTransactionCount({address:q.address,blockTag:"pending"});console.log(`🔄 Recreating pool with actual network nonce: ${Z}`);const xe=ye(c,q.address);xe.currentNonce=Z,xe.pendingNonce=Z,xe.lastUpdate=Date.now();const ne=U[c]||U.default;await Q(c,Z,ne.batchSize),console.log(`✅ Pre-signed transaction pool recreated with correct nonces starting from ${Z}`)}catch(J){console.error("❌ Failed to recreate transaction pool:",J)}},100))}catch(H){console.error("Failed to refresh nonce:",H)}}}throw D}finally{const D=Date.now()-T;Tn(c,y,$,D),$&&console.log(`✅ Transaction sent successfully in ${D}ms via ${m.sendMethod}`)}},we=async c=>{if(!le())throw new Error("No embedded wallet available");if(c===6342){const y=c.toString(),T=v.current[y];if(T&&T.isReady&&T.transactions.length>T.currentIndex){if(B.current>10)throw console.log("🚫 Maximum MegaETH throughput reached, throttling"),new Error("Transaction throughput limit reached")}else if(B.current>2)throw console.log("🚫 Too many concurrent realtime transactions"),new Error("Realtime transaction limit reached")}else if(s)throw new Error("Transaction already pending, blocking jump");j(c);const m=performance.now();return(U[c]||U.default).burstMode&&Se(c)?(console.log("🚀 Using burst mode for transaction"),await xn(c,async()=>await Pe(c,m))):await Pe(c,m)},Pe=async(c,d)=>{var T,$,z;let m=null,w=0,y=!1;try{if(c!==6342&&a(!0),B.current++,m=await Ve(c),!m)throw new Error("Failed to get transaction for sending");console.log("⚡ Sending instant on-chain jump transaction...");const k=await Ae(c,m);console.log("📡 Transaction sent:",k);const S=Ce[c];let D=k;if(S.sendMethod==="realtime_sendRawTransaction")console.log("✅ MegaETH instant confirmation:",k),D=k.receipt||k,y=!0;else if(S.sendMethod==="eth_sendRawTransactionSync")console.log("✅ RISE sync confirmation:",k),D=k.receipt||k,y=!0;else{console.log("⏳ Waiting for transaction confirmation...");try{const{publicClient:H}=await be(c),K=await Promise.race([H.waitForTransactionReceipt({hash:k.hash,timeout:3e4}),new Promise((J,Z)=>setTimeout(()=>Z(new Error("Transaction confirmation timeout")),35e3))]);console.log("✅ Transaction confirmed:",K),D=K,y=!0}catch(H){console.warn("⚠️ Transaction confirmation failed, but transaction may still be valid:",H),D=k,y=!0}}w=performance.now()-d,console.log(`🎮 Jump transaction completed in ${Math.round(w)}ms:`,D);const q=W(c,w,y);return console.log(`📊 Performance: Avg ${Math.round(q.averageBlockchainTime)}ms, Success Rate ${q.successRate.toFixed(1)}%`),{...D,blockchainTime:Math.round(w),reactionTime:0,performanceMetrics:{averageBlockchainTime:Math.round(q.averageBlockchainTime),successRate:q.successRate,totalTransactions:q.totalTransactions}}}catch(k){if(console.error("❌ Error sending on-chain movement:",k),w=performance.now()-d,W(c,w,!1),(T=k.message)!=null&&T.includes("nonce too low")){console.log("🔄 Nonce too low detected, refreshing nonce and retrying...");try{const S=le();if(S){await dt(c,S.address,!0);const D=c.toString(),q=v.current[D];q&&(console.log("🗑️ Clearing invalid pre-signed transaction pool due to nonce error"),q.transactions=[],q.currentIndex=0,q.isReady=!1,q.hasTriggeredRefill=!1),console.log("✅ Nonce refreshed, please try again")}else console.error("❌ No wallet available for nonce refresh")}catch(S){console.error("❌ Failed to refresh nonce:",S)}}else($=k.message)!=null&&$.includes("context deadline exceeded")?console.log("⏰ Network timeout detected, transaction may still be processing..."):(z=k.message)!=null&&z.includes("insufficient funds")&&console.log("💰 Insufficient funds detected, consider calling faucet...");throw new Error(`Blockchain transaction error: ${k.message}`)}finally{c!==6342&&a(!1),B.current=Math.max(0,B.current-1)}},qe=async c=>{const d=c.toString();if(!(C.current[d]||n))try{r(!0),console.log("🚀 Starting instant blockchain initialization for chain:",c);let m=null,w=0;const y=10;for(;!m&&w<y;)m=le(),m||(console.log(`Waiting for embedded wallet creation... (attempt ${w+1}/${y})`),await new Promise(H=>setTimeout(H,1e3)),w++);if(!m)throw new Error("No embedded wallet available");console.log("✅ Using embedded wallet address:",m.address),m.walletClientType==="privy"&&console.log("⚡ INSTANT GAMING MODE ENABLED - игра готова!"),await O(c);const T=ye(c,m.address),$=[],z=Promise.all([te(c),Re(async()=>{const{publicClient:H}=await be(c);return await H.getTransactionCount({address:m.address,blockTag:"pending"})},3,1e3,c)]).then(([H,K])=>(T.currentNonce=K,T.pendingNonce=K,T.lastUpdate=Date.now(),console.log("💰 Current balance:",H),console.log("🎯 Starting nonce:",K),parseFloat(H)<5e-5&&(console.log(`💰 Balance is ${H} ETH (< 0.00005), calling faucet in background...`),ce(m.address,c).then(()=>(console.log("✅ Background faucet completed"),setTimeout(()=>te(c),5e3),dt(c,m.address,!0))).catch(J=>{console.warn("⚠️ Background faucet failed (non-blocking):",J)})),{currentBalance:H,initialNonce:K}));$.push(z),C.current[d]=!0,console.log("⚡ INSTANT GAMING MODE ENABLED - игра готова!");const k=U[c]||U.default,S=Jt(c);let D=k.poolSize;S&&(D=S.reducedBatchSize,console.log(`Using fallback batch size: ${D}`)),z.then(({initialNonce:H})=>{console.log(`🔄 Background pre-signing ${D} transactions starting from nonce ${H}`);const K=ye(c,m.address);return K&&(K.pendingNonce=Math.max(K.pendingNonce||H,H+D)),Q(c,H,D).then(()=>{const J=v.current[d];J&&J.transactions.length>0?console.log(`✅ Background pre-signed ${J.transactions.length} transactions - performance boost ready!`):console.log("⚠️ Pre-signing completed with 0 transactions - using realtime mode")}).catch(J=>{console.warn("⚠️ Background pre-signing failed (non-blocking):",J),Kt(c),console.log("🔄 Enabled realtime fallback mode - game continues smoothly")})}).catch(H=>{console.warn("Background pre-signing error (non-critical):",H)}),await z,console.log("🎮 Blockchain ready for instant gaming on chain:",c),console.log(S?"⚠️ Running in fallback mode - reduced performance expected":"🚀 Full performance mode activating in background..."),Promise.all($.slice(1)).then(()=>{console.log("✅ Full blockchain optimization complete")}).catch(H=>{console.warn("⚠️ Some background optimizations failed (non-critical):",H)})}catch(m){console.error("❌ Critical initialization error:",m),C.current[d]=!0,Kt(c),console.log("🔄 Emergency fallback mode enabled - game will work with realtime signing")}finally{r(!1)}},En=async c=>{try{const{publicClient:d,config:m}=await be(c),w=await d.readContract({address:m.contractAddress,abi:jc,functionName:"number"});return h(Number(w)),Number(w)}catch(d){return console.error("Error reading contract number:",d),0}},de=F.useRef({}),$e=c=>(de.current[c]||(de.current[c]={failures:0,lastFailureTime:0,state:"CLOSED",threshold:5,timeout:6e4}),de.current[c]),Re=async(c,d=3,m=1e3,w=null)=>{var $,z,k,S,D,q,H,K,J,Z,xe;let y,T=null;if(w&&(T=$e(w),T.state==="OPEN")){const ne=Date.now()-T.lastFailureTime;if(ne<T.timeout)throw new Error(`Circuit breaker is OPEN for chain ${w}. Try again in ${Math.round((T.timeout-ne)/1e3)} seconds.`);T.state="HALF_OPEN",console.log(`Circuit breaker for chain ${w} entering HALF_OPEN state`)}for(let ne=0;ne<d;ne++)try{const V=await c();return T&&(T.failures=0,T.state="CLOSED"),V}catch(V){y=V;const Ke=ne===d-1;T&&(T.failures++,T.lastFailureTime=Date.now(),T.failures>=T.threshold&&(T.state="OPEN",console.warn(`Circuit breaker OPENED for chain ${w} after ${T.failures} failures`)));const ve=V.status===429||V.status===403||V.status===500||V.status===502||V.status===503||V.status===504||(($=V.message)==null?void 0:$.includes("rate limit"))||((z=V.message)==null?void 0:z.includes("timeout"))||((k=V.message)==null?void 0:k.includes("context deadline exceeded"))||((S=V.message)==null?void 0:S.includes("connection"))||((D=V.message)==null?void 0:D.includes("network"))||((q=V.message)==null?void 0:q.includes("fetch"))||V.name==="AbortError"||V.name==="TypeError",De=((H=V.message)==null?void 0:H.includes("nonce too low"))||((K=V.message)==null?void 0:K.includes("insufficient funds"))||((J=V.message)==null?void 0:J.includes("gas too low"))||((Z=V.message)==null?void 0:Z.includes("invalid signature"))||((xe=V.message)==null?void 0:xe.includes("execution reverted"));if(Ke||De||!ve)throw De&&console.log(`Non-retryable error encountered: ${V.message}`),V;if(T&&T.state==="OPEN"){console.log(`Circuit breaker is OPEN, stopping retries for chain ${w}`);break}const pe=Math.random()*1e3,Xe=Math.min(m*Math.pow(2,ne)+pe,3e4);console.log(`Retry attempt ${ne+1}/${d} after ${Math.round(Xe)}ms delay due to:`,V.message),await new Promise(Ls=>setTimeout(Ls,Xe))}throw y};return F.useEffect(()=>{window.location.hostname==="localhost"&&(window.blockchainDebug={getRPCHealth:c=>N.current[c],getCircuitBreaker:c=>de.current[c],getTransactionPool:c=>v.current[c],getBurstState:c=>se.current[c],getConnectionPool:()=>E.current,getNonceManager:(c,d)=>A.current[`${c}-${d}`],forceCircuitBreakerOpen:c=>{const d=$e(c);d.state="OPEN",d.failures=d.threshold,d.lastFailureTime=Date.now(),console.log(`Force opened circuit breaker for chain ${c}`)},resetCircuitBreaker:c=>{const d=$e(c);d.state="CLOSED",d.failures=0,console.log(`Reset circuit breaker for chain ${c}`)},clearTransactionPool:c=>{const d=c.toString();v.current[d]&&(v.current[d].transactions=[],v.current[d].currentIndex=0,console.log(`Cleared transaction pool for chain ${c}`))},generateHealthReport:c=>{const d=N.current[c],m=v.current[c==null?void 0:c.toString()],w=de.current[c],y={timestamp:new Date().toISOString(),chainId:c,rpcEndpoints:d,transactionPool:m?{totalTransactions:m.transactions.length,currentIndex:m.currentIndex,availableTransactions:m.transactions.length-m.currentIndex,isRefilling:m.isRefilling}:null,circuitBreaker:w,connections:E.current,burstState:se.current[c]};return console.table(y),y}},console.log("🔧 Blockchain debug utilities loaded. Use window.blockchainDebug for monitoring."),console.log("📊 Example: window.blockchainDebug.generateHealthReport(6342)"))},[]),F.useEffect(()=>{window.location.hostname==="localhost"&&(window.blockchainDebug={getRPCHealth:c=>N.current[c],getCircuitBreaker:c=>de.current[c],getTransactionPool:c=>v.current[c],getBurstState:c=>se.current[c],getConnectionPool:()=>E.current,getNonceManager:(c,d)=>A.current[`${c}-${d}`],getPerformanceMetrics:c=>R.current[c],getGlobalCache:()=>{try{const c=localStorage.getItem(g);return c?JSON.parse(c):null}catch{return null}},forceCircuitBreakerOpen:c=>{const d=$e(c);d.state="OPEN",d.failures=d.threshold,d.lastFailureTime=Date.now(),console.log(`Force opened circuit breaker for chain ${c}`)},resetCircuitBreaker:c=>{const d=$e(c);d.state="CLOSED",d.failures=0,console.log(`Reset circuit breaker for chain ${c}`)},clearTransactionPool:c=>{const d=c.toString();v.current[d]&&(v.current[d].transactions=[],v.current[d].currentIndex=0,console.log(`Cleared transaction pool for chain ${c}`))},generatePerformanceReport:c=>{var z,k;const d=N.current[c],m=v.current[c==null?void 0:c.toString()],w=de.current[c],y=R.current[c],T=window.blockchainDebug.getGlobalCache(),$={timestamp:new Date().toISOString(),chainId:c,network:((z=Ce[c])==null?void 0:z.name)||"Unknown",rpcEndpoints:d?{current:(k=d.endpoints[d.currentEndpointIndex])==null?void 0:k.url,healthyCount:d.endpoints.filter(S=>S.healthy).length,totalCount:d.endpoints.length,endpoints:d.endpoints.map(S=>({url:S.url,healthy:S.healthy,failures:S.consecutiveFailures,responseTime:S.responseTime}))}:null,transactionPool:m?{totalTransactions:m.transactions.length,currentIndex:m.currentIndex,availableTransactions:m.transactions.length-m.currentIndex,poolUtilization:`${Math.round(m.currentIndex/m.transactions.length*100)}%`,isRefilling:m.isRefilling,hasTriggeredRefill:m.hasTriggeredRefill}:null,circuitBreaker:w?{state:w.state,failures:w.failures,threshold:w.threshold,lastFailure:w.lastFailureTime?new Date(w.lastFailureTime).toISOString():null}:null,performance:y?{totalTransactions:y.totalTransactions,successfulTransactions:y.successfulTransactions,successRate:`${y.successRate.toFixed(1)}%`,averageBlockchainTime:`${Math.round(y.averageBlockchainTime)}ms`,recentTransactions:y.recentTransactions.slice(-10).map(S=>({blockchainTime:`${S.blockchainTime}ms`,success:S.success,timestamp:new Date(S.timestamp).toISOString()})),performanceGrade:y.averageBlockchainTime<1e3?"🚀 INSTANT":y.averageBlockchainTime<3e3?"⚡ FAST":y.averageBlockchainTime<5e3?"🔥 GOOD":"🐌 SLOW"}:null,connections:E.current,burstState:se.current[c]?{lastBurstTime:new Date(se.current[c].lastBurstTime).toISOString(),burstCount:se.current[c].burstCount,inCooldown:se.current[c].inCooldown,pendingTransactions:se.current[c].pendingTransactions.length}:null,globalCache:T?{gasParamsAge:T.gasParams?`${Math.round((Date.now()-T.gasParams.timestamp)/1e3)}s ago`:"None",chainParamsAge:T.chainParams?`${Math.round((Date.now()-T.chainParams.timestamp)/1e3)}s ago`:"None",rpcHealthAge:T.rpcHealth?`${Math.round((Date.now()-T.rpcHealth.timestamp)/1e3)}s ago`:"None"}:null};return console.group(`📊 Performance Report - ${$.network} (Chain ${c})`),console.table($.performance),console.log("🔗 RPC Health:",$.rpcEndpoints),console.log("🎯 Transaction Pool:",$.transactionPool),console.log("⚡ Circuit Breaker:",$.circuitBreaker),console.log("🚀 Burst State:",$.burstState),console.log("💾 Global Cache:",$.globalCache),console.groupEnd(),$},quickStats:c=>{var w;const d=R.current[c],m=v.current[c==null?void 0:c.toString()];if(d&&m){const y=m.currentIndex,T=m.transactions.length-m.currentIndex,$=Math.floor(y/5),z=$*10;console.log(`🎮 ${((w=Ce[c])==null?void 0:w.name)||"Chain "+c}:`),console.log(`  ⚡ Avg Speed: ${Math.round(d.averageBlockchainTime)}ms`),console.log(`  📊 Success Rate: ${d.successRate.toFixed(1)}%`),console.log(`  🎯 Pool Status: ${T}/${m.transactions.length} ready`),console.log(`  ♾️  Infinite Pool: ${y} used, +${z} growth (${$} cycles)`),console.log(`  📈 Next refill: ${5-y%5} transactions`),console.log(`  🚀 Performance: ${d.averageBlockchainTime<1e3?"INSTANT":d.averageBlockchainTime<3e3?"FAST":"SLOW"}`)}else console.log("📊 No performance data available yet")},infinitePoolStats:c=>{const d=v.current[c==null?void 0:c.toString()];if(!d){console.log("❌ No pool found for chain",c);return}const m=d.currentIndex,w=d.transactions.length-d.currentIndex,y=d.transactions.length,T=Math.floor(m/5),$=T*10,z=(Math.floor(m/5)+1)*5,k=z-m;if(console.group(`♾️ Infinite Pool Analysis - Chain ${c}`),console.log("📊 Current Status:"),console.log(`  • Total transactions: ${y}`),console.log(`  • Consumed: ${m}`),console.log(`  • Remaining: ${w}`),console.log(`  • Pool ready: ${d.isReady?"✅":"❌"}`),console.log(`  • Refilling: ${d.isRefilling?"🔄":"⏸️"}`),console.log("🔄 Growth Cycles:"),console.log(`  • Completed cycles: ${T}`),console.log(`  • Net growth: +${$} transactions`),console.log(`  • Growth rate: ${m>0?($/m*100).toFixed(1):0}%`),console.log("📈 Next Refill:"),console.log(`  • Refill trigger at: ${z} consumed`),console.log(`  • Transactions until refill: ${k}`),console.log("  • Will add: +15 transactions"),console.log("🎯 Pool Efficiency:"),console.log(`  • Efficiency: ${(w/y*100).toFixed(1)}%`),console.log(`  • Trend: ${w>20?"📈 Growing":w>10?"➡️ Stable":"📉 Needs attention"}`),console.log(`  • Is infinite: ${y>50?"✅ Yes":"❌ Not yet"}`),m>0){const S=m+$;console.log("🧮 Mathematical Verification:"),console.log(`  • Theoretical pool size: ${S}`),console.log(`  • Actual pool size: ${y}`),console.log(`  • Difference: ${y-S} (should be positive)`)}console.groupEnd()},forceResetAllCircuitBreakers:()=>{Object.keys(de.current).forEach(c=>{const d=de.current[c];d&&(d.state="CLOSED",d.failures=0,d.lastFailureTime=0,console.log(`✅ Force reset circuit breaker for chain ${c}`))}),console.log("🚀 All circuit breakers reset - ready for gaming!")}},console.log("🔧 Blockchain debug utilities loaded. Use window.blockchainDebug for monitoring."),console.log("📊 Examples:"),console.log("  • window.blockchainDebug.generatePerformanceReport(6342)"),console.log("  • window.blockchainDebug.quickStats(6342)"),console.log("  • window.blockchainDebug.infinitePoolStats(6342) // 🆕 Infinite pool analysis"),console.log("  • window.blockchainDebug.getPerformanceMetrics(6342)"),console.log("  • window.blockchainDebug.forceResetAllCircuitBreakers() // Экстренный сброс"),setTimeout(()=>{Object.keys(de.current).forEach(c=>{const d=de.current[c];d&&d.state==="OPEN"&&(d.state="CLOSED",d.failures=0,console.log(`🔄 Auto-reset circuit breaker for chain ${c} on page load`))})},2e3))},[]),{isInitializing:n,transactionPending:s,balance:o,contractNumber:u,initData:qe,sendUpdate:we,checkBalance:te,callFaucet:ce,getContractNumber:En,getEmbeddedWallet:le,isAuthenticated:e,isReady:e&&t.length>0,getPoolStatus:c=>{const d=v.current[c==null?void 0:c.toString()];if(!d)return null;const m=Math.floor(d.currentIndex/5),w=m*10;return{total:d.transactions.length,used:d.currentIndex,remaining:d.transactions.length-d.currentIndex,isReady:d.isReady,isRefilling:d.isRefilling,cyclesCompleted:m,netGrowth:w,isInfinite:d.transactions.length>50,trend:d.transactions.length-d.currentIndex>20?"growing":d.transactions.length-d.currentIndex>10?"stable":"attention"}},getInfinitePoolStats:c=>{const d=v.current[c==null?void 0:c.toString()];if(!d)return null;const m=d.currentIndex,w=d.transactions.length-d.currentIndex,y=d.transactions.length,T=Math.floor(m/5),$=T*10,z=(Math.floor(m/5)+1)*5,k=z-m;return{consumed:m,remaining:w,total:y,cyclesCompleted:T,netGrowth:$,nextRefillAt:z,transactionsToNextRefill:k,isInfinite:y>50,growthRate:m>0?($/m*100).toFixed(1)+"%":"0%",poolEfficiency:y>0?(w/y*100).toFixed(1)+"%":"0%"}},startPoolMonitoring:oe}},Sc=({selectedNetwork:e,className:t=""})=>{const{authenticated:n}=rt(),{wallets:r}=rn(),{balance:s,getEmbeddedWallet:a,getPoolStatus:o,getInfinitePoolStats:i}=Ds(),[u,h]=F.useState(null),[f,p]=F.useState(null),[g,x]=F.useState(!1);if(F.useEffect(()=>{if(n&&r.length>0){const E=a();E&&p({address:E.address,type:E.walletClientType,isEmbedded:E.walletClientType==="privy"})}},[n,r,a]),F.useEffect(()=>{if(e&&e.id!=="select"){const E=()=>{try{const A=o(e.id),C=i(e.id);h({...A,infiniteStats:C})}catch(A){console.warn("Failed to get pool status:",A)}};E();const v=setInterval(E,1e3);return()=>clearInterval(v)}},[e,o,i]),!n||!f)return null;const b=E=>E?`${E.slice(0,6)}...${E.slice(-4)}`:"",P=E=>E?E.isReady&&E.totalTransactions>10?"text-green-400":E.isReady&&E.totalTransactions>5?"text-yellow-400":E.isReady?"text-orange-400":"text-red-400":"text-gray-400",N=E=>E?E.isReady&&E.totalTransactions>10?"🚀":E.isReady&&E.totalTransactions>5?"⚡":E.isReady?"⚠️":"❌":"⏳";return l.jsxs("div",{className:`privy-wallet-status ${t}`,children:[l.jsxs("div",{className:"status-header",onClick:()=>x(!g),style:{cursor:"pointer"},children:[l.jsxs("div",{className:"wallet-info",children:[l.jsx("span",{className:"wallet-icon",children:"👛"}),l.jsx("span",{className:"wallet-address",children:b(f.address)}),f.isEmbedded&&l.jsx("span",{className:"embedded-badge",children:"Privy"})]}),e&&e.id!=="select"&&u&&l.jsxs("div",{className:"pool-status",children:[l.jsx("span",{className:`status-icon ${P(u)}`,children:N(u)}),l.jsx("span",{className:`pool-count ${P(u)}`,children:u.totalTransactions-u.consumedTransactions})]}),l.jsx("span",{className:`expand-icon ${g?"expanded":""}`,children:"▼"})]}),g&&l.jsxs("div",{className:"status-details",children:[l.jsxs("div",{className:"detail-section",children:[l.jsx("h4",{children:"💰 Wallet Details"}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{children:"Address:"}),l.jsx("span",{className:"monospace",children:f.address})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{children:"Type:"}),l.jsx("span",{children:f.isEmbedded?"Privy Embedded":"External"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{children:"Balance:"}),l.jsxs("span",{children:[s||"0.0000"," ETH"]})]})]}),e&&e.id!=="select"&&u&&l.jsxs("div",{className:"detail-section",children:[l.jsx("h4",{children:"⚡ Pre-signed Pool Status"}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{children:"Network:"}),l.jsx("span",{children:e.name})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{children:"Status:"}),l.jsx("span",{className:P(u),children:u.isReady?"Ready":"Initializing"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{children:"Available:"}),l.jsx("span",{className:P(u),children:u.totalTransactions-u.consumedTransactions})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{children:"Total Signed:"}),l.jsx("span",{children:u.totalTransactions})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{children:"Used:"}),l.jsx("span",{children:u.consumedTransactions})]}),u.infiniteStats&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{children:"Refill Cycles:"}),l.jsx("span",{children:u.infiniteStats.cycles})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{children:"Growth Rate:"}),l.jsxs("span",{children:["+",u.infiniteStats.netGrowthPerCycle,"/cycle"]})]})]})]}),e&&e.id!=="select"&&l.jsxs("div",{className:"detail-section",children:[l.jsx("h4",{children:"🎮 Gaming Performance"}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{children:"Instant Mode:"}),l.jsx("span",{className:"text-green-400",children:u!=null&&u.isReady?"Active":"Preparing"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{children:"Burst Mode:"}),l.jsx("span",{className:"text-blue-400",children:"Enabled"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{children:"Auto-refill:"}),l.jsx("span",{className:"text-purple-400",children:"Infinite"})]})]})]})]})},Ac=({transactionPending:e,balance:t,blockchainStatus:n,selectedNetwork:r,authenticated:s})=>{const[a,o]=F.useState([]),[i,u]=F.useState(1);F.useEffect(()=>{if(e&&s&&r&&!r.isWeb2){const g={id:i,type:"transaction",title:"Transaction Pending",message:`Processing jump on ${r.name}`,status:"pending",timestamp:Date.now()};o(x=>[...x,g]),u(x=>x+1)}},[e,s,r,i]),F.useEffect(()=>{n!=null&&n.lastTransactionTime&&s&&r&&!r.isWeb2&&o(g=>g.map(x=>x.status==="pending"&&x.type==="transaction"?{...x,status:"completed",message:`Jump completed in ${n.lastTransactionTime}ms`,completedAt:Date.now()}:x))},[n==null?void 0:n.lastTransactionTime,s,r]),F.useEffect(()=>{var g;if(n!=null&&n.lastError&&s&&r&&!r.isWeb2){const x={id:i,type:"error",title:"Transaction Error",message:`${n.lastError.type}: ${(g=n.lastError.message)==null?void 0:g.slice(0,50)}...`,status:"error",timestamp:Date.now()};o(b=>[...b,x]),u(b=>b+1)}},[n==null?void 0:n.lastError,s,r,i]),F.useEffect(()=>{if(n!=null&&n.averageTransactionTime&&n.averageTransactionTime<1e3&&s&&r&&!r.isWeb2&&!a.some(x=>x.type==="performance"&&Date.now()-x.timestamp<3e4)){const x={id:i,type:"performance",title:"Excellent Performance!",message:`Average speed: ${Math.round(n.averageTransactionTime)}ms - Gaming Mode Active! 🚀`,status:"success",timestamp:Date.now()};o(b=>[...b,x]),u(b=>b+1)}},[n==null?void 0:n.averageTransactionTime,s,r,a,i]),F.useEffect(()=>{if(t&&parseFloat(t)<5e-5&&s&&r&&!r.isWeb2&&!a.some(x=>x.type==="low-balance"&&x.status!=="dismissed")){const x={id:i,type:"low-balance",title:"Low Balance",message:`Balance: ${t} ETH - Get test tokens`,status:"warning",timestamp:Date.now()};o(b=>[...b,x]),u(b=>b+1)}},[t,s,r,a,i]),F.useEffect(()=>{const g=setInterval(()=>{const x=Date.now();o(b=>b.filter(P=>!(P.status==="completed"&&P.completedAt&&x-P.completedAt>3e3||x-P.timestamp>1e4)))},1e3);return()=>clearInterval(g)},[]);const h=g=>{o(x=>x.filter(b=>b.id!==g))},f=(g,x)=>g==="transaction"?x==="pending"?"⏳":x==="completed"?"✅":"🔄":g==="low-balance"?"⚠️":g==="error"?"❌":g==="performance"?"🚀":"📢",p=(g,x)=>g==="transaction"?x==="pending"?"pending":x==="completed"?"success":"info":g==="low-balance"?"warning":g==="error"?"error":g==="performance"?"success":"info";return!s||!r||r.isWeb2||a.length===0?null:l.jsx("div",{className:"transaction-notifications",children:a.map(g=>l.jsx("div",{className:`notification ${p(g.type,g.status)}`,children:l.jsxs("div",{className:"notification-content",children:[l.jsxs("div",{className:"notification-header",children:[l.jsx("span",{className:"notification-icon",children:f(g.type,g.status)}),l.jsx("span",{className:"notification-title",children:g.title}),l.jsx("button",{className:"notification-close",onClick:()=>h(g.id),children:"×"})]}),l.jsx("div",{className:"notification-message",children:g.message}),g.type==="transaction"&&g.status==="pending"&&l.jsx("div",{className:"notification-progress",children:l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:"progress-fill"})})})]})},g.id))})};class $c{constructor(t,n,r,s,a,o,i=null){re(this,"WALK_ANIMATION_TIMER",180);re(this,"walkAnimationTimer",this.WALK_ANIMATION_TIMER);re(this,"buddyRunImages",[]);re(this,"jumpPressed",!1);re(this,"jumpInProgress",!1);re(this,"falling",!1);re(this,"JUMP_SPEED",.65);re(this,"GRAVITY",.38);re(this,"dustParticles",[]);re(this,"showDust",!1);re(this,"dustTimer",0);re(this,"touchstart",()=>{this.jumpPressed=!0});re(this,"touchend",()=>{this.jumpPressed=!1});re(this,"keydown",t=>{t.code==="Space"&&(this.jumpPressed=!0)});re(this,"keyup",t=>{t.code==="Space"&&(this.jumpPressed=!1)});this.ctx=t,this.canvas=t.canvas,this.width=n,this.height=r,this.minJumpHeight=s,this.maxJumpHeight=a,this.scaleRatio=o,this.onMovementCallback=i,this.x=10*o,this.y=this.canvas.height-this.height,this.yStandingPosition=this.y,this.standingStillImage=new Image,this.standingStillImage.src="assets/buddy_standing_still.png",this.standingStillImage.onerror=()=>console.error("Failed to load buddy_standing_still.png"),this.image=this.standingStillImage,this.jumpingImage=new Image,this.jumpingImage.src="assets/buddy_standing_still_eye_closed.png",this.jumpingImage.onerror=()=>console.error("Failed to load buddy_standing_still_eye_closed.png");const u=new Image;u.src="assets/buddy_run1.png",u.onerror=()=>console.error("Failed to load buddy_run1.png");const h=new Image;h.src="assets/buddy_run2.png",h.onerror=()=>console.error("Failed to load buddy_run2.png"),this.buddyRunImages.push(u),this.buddyRunImages.push(h),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),window.removeEventListener("touchstart",this.touchstart),window.removeEventListener("touchend",this.touchend),window.addEventListener("touchstart",this.touchstart),window.addEventListener("touchend",this.touchend)}update(t,n){this.run(t,n),this.jumpInProgress&&(this.image=this.jumpingImage),this.jump(n),this.updateDust(n)}jump(t){this.jumpPressed&&(this.jumpInProgress||this.onMovementCallback&&this.onMovementCallback(),this.jumpInProgress=!0),this.jumpInProgress&&!this.falling?this.y>this.canvas.height-this.minJumpHeight||this.y>this.canvas.height-this.maxJumpHeight&&this.jumpPressed?this.y-=this.JUMP_SPEED*t*this.scaleRatio:this.falling=!0:this.y<this.yStandingPosition?(this.y+=this.GRAVITY*t*this.scaleRatio,this.y+this.height>this.canvas.height&&(this.y=this.yStandingPosition,this.createDustEffect())):(this.falling=!1,this.jumpInProgress=!1)}createDustEffect(){this.showDust=!0,this.dustTimer=300}updateDust(t){this.showDust&&(this.dustTimer-=t,this.dustTimer<=0&&(this.showDust=!1))}run(t,n){this.walkAnimationTimer<=0&&(this.image===this.buddyRunImages[0]?this.image=this.buddyRunImages[1]:this.image=this.buddyRunImages[0],this.walkAnimationTimer=this.WALK_ANIMATION_TIMER),this.walkAnimationTimer-=n*t}draw(){if(this.image&&this.image.complete&&this.image.naturalWidth>0&&this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height),this.showDust){this.ctx.fillStyle="rgba(139, 69, 19, 0.6)";const t=this.yStandingPosition+this.height;for(let n=0;n<5;n++){const r=this.x+this.width*.2+n*8*this.scaleRatio,s=(3-n*.5)*this.scaleRatio;this.ctx.beginPath(),this.ctx.arc(r,t-s,s,0,Math.PI*2),this.ctx.fill()}}}}class Rc{constructor(t,n,r,s,a){this.ctx=t,this.canvas=t.canvas,this.width=n,this.height=r,this.speed=s,this.scaleRatio=a,this.x=0,this.y=this.canvas.height-this.height,this.groundImage=new Image,this.groundImage.src="assets/ground.png",this.groundImage.onerror=()=>console.error("Failed to load ground.png")}update(t,n){this.x-=t*n*this.speed*this.scaleRatio}draw(){this.ctx.fillStyle="#7BA428",this.ctx.fillRect(0,this.y,this.canvas.width,this.height),this.ctx.fillStyle="#6B9420";for(let t=0;t<this.canvas.width;t+=3)this.ctx.fillRect(t,this.y,1,this.height);this.ctx.fillStyle="#8B4513",this.ctx.fillRect(0,this.y+this.height*.7,this.canvas.width,this.height*.3),this.x<-this.width&&(this.x=0)}reset(){this.x=0}}class Ic{constructor(t,n,r,s,a,o){this.ctx=t,this.x=n,this.y=r,this.width=s,this.height=a,this.image=o}update(t,n,r,s){this.x-=t*n*r*s}draw(){this.image&&this.image.complete&&this.image.naturalWidth>0&&this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height)}collideWith(t){return t.x<this.x+this.width/1.4&&t.x+t.width/1.4>this.x&&t.y<this.y+this.height/1.4&&t.height+t.y/1.4>this.y}}class Oc{constructor(t,n,r,s){re(this,"CARROT_INTERVAL_MIN",500);re(this,"CARROT_INTERVAL_MAX",2e3);re(this,"nextCarrotInterval",null);re(this,"carrots",[]);this.ctx=t,this.canvas=t.canvas,this.carrotImages=n,this.scaleRatio=r,this.speed=s,this.setNextCarrotTime()}setNextCarrotTime(){const t=this.getRandomNumber(this.CARROT_INTERVAL_MIN,this.CARROT_INTERVAL_MAX);this.nextCarrotInterval=t}getRandomNumber(t,n){return Math.floor(Math.random()*(n-t+1)+t)}createCarrot(){const t=this.getRandomNumber(0,this.carrotImages.length-1),n=this.carrotImages[t],r=this.canvas.width*1.5,s=this.canvas.height-n.height,a=new Ic(this.ctx,r,s,n.width,n.height,n.image);this.carrots.push(a)}update(t,n){this.nextCarrotInterval<=0&&(this.createCarrot(),this.setNextCarrotTime()),this.nextCarrotInterval-=n,this.carrots.forEach(r=>{r.update(this.speed,t,n,this.scaleRatio)}),this.carrots=this.carrots.filter(r=>r.x>-r.width)}draw(){this.carrots.forEach(t=>t.draw())}collideWith(t){return this.carrots.some(n=>n.collideWith(t))}reset(){this.carrots=[]}}class kc{constructor(t,n,r=null){re(this,"score",0);re(this,"HIGH_SCORE_KEY","highScore");this.ctx=t,this.canvas=t.canvas,this.scaleRatio=n,this.blockchainStatus=r}update(t){this.score+=t*.01}reset(){this.score=0}setHighScore(){const t=Number(localStorage.getItem(this.HIGH_SCORE_KEY));this.score>t&&localStorage.setItem(this.HIGH_SCORE_KEY,Math.floor(this.score))}draw(){const t=Number(localStorage.getItem(this.HIGH_SCORE_KEY)),n=20*this.scaleRatio,r=20*this.scaleRatio;this.ctx.font=`${r}px serif`,this.ctx.fillStyle="#6B8E6B";const s=this.canvas.width-75*this.scaleRatio,a=s-125*this.scaleRatio,o=Math.floor(this.score).toString().padStart(6,0),i=t.toString().padStart(6,0);if(this.ctx.fillText(o,s,n),this.ctx.fillText(`HI ${i}`,a,n),this.blockchainStatus){const u=n+30*this.scaleRatio,h=12*this.scaleRatio;if(this.ctx.font=`${h}px monospace`,this.ctx.fillStyle=this.blockchainStatus.contractAvailable?"#7FBC7F":"#FFA500",this.ctx.fillText(`⛓️ ${this.blockchainStatus.networkName}`,10*this.scaleRatio,u),this.ctx.fillStyle="#4169E1",this.ctx.fillText(`Moves: ${this.blockchainStatus.totalMovements}`,10*this.scaleRatio,u+20*this.scaleRatio),this.blockchainStatus.pendingTransactions>0&&(this.ctx.fillStyle="#FF6347",this.ctx.fillText(`Pending: ${this.blockchainStatus.pendingTransactions}`,10*this.scaleRatio,u+40*this.scaleRatio)),this.blockchainStatus.poolStatus){const f=this.blockchainStatus.poolStatus,p=Math.floor(f.used/5),g=p*10,x=f.remaining>20?"#32CD32":f.remaining>10?"#7FBC7F":f.remaining>3?"#FFA500":"#FF6347";this.ctx.fillStyle=x;const b=f.total>50?"∞":"";this.ctx.fillText(`Pool: ${f.remaining}/${f.total}${b}`,10*this.scaleRatio,u+40*this.scaleRatio),f.used>0&&(this.ctx.fillStyle="#4169E1",this.ctx.fillText(`Growth: +${g} (${p} cycles)`,10*this.scaleRatio,u+60*this.scaleRatio)),f.isReady?f.isRefilling?(this.ctx.fillStyle="#32CD32",this.ctx.fillText("🔄 Growing pool...",10*this.scaleRatio,u+80*this.scaleRatio)):f.total>50&&(this.ctx.fillStyle="#7FBC7F",this.ctx.fillText("♾️ Infinite mode",10*this.scaleRatio,u+80*this.scaleRatio)):(this.ctx.fillStyle="#FF6347",this.ctx.fillText("⏳ Initializing...",10*this.scaleRatio,u+80*this.scaleRatio))}this.blockchainStatus.onChainScore>0&&(this.ctx.fillStyle="#32CD32",this.ctx.fillText(`On-chain: ${this.blockchainStatus.onChainScore}`,10*this.scaleRatio,u+100*this.scaleRatio))}}}const Mc=({selectedNetwork:e})=>{const t=F.useRef(null),n=F.useRef({}),{user:r,authenticated:s}=rt(),{wallets:a}=rn();sn();const{isInitializing:o,transactionPending:i,balance:u,contractNumber:h,initData:f,sendUpdate:p,checkBalance:g,getContractNumber:x,isReady:b,getEmbeddedWallet:P,callFaucet:N,getPoolStatus:E}=Ds(),[v,A]=F.useState({initialized:!1,networkName:(e==null?void 0:e.name)||"Unknown",contractAvailable:!1,pendingTransactions:0,totalMovements:0,onChainScore:0,poolStatus:null}),[C,B]=F.useState(!1),[R,j]=F.useState(!1),W=F.useRef(!1);F.useRef(null);const L=F.useRef(0),U=F.useRef(0),X=F.useRef({});F.useEffect(()=>{X.current={sendUpdate:p,getContractNumber:x,selectedNetwork:e,blockchainInitialized:v.initialized}},[p,x,e,v.initialized]);const ee=1,se=1e-5,Ee=800,Se=200,Ht=88/1.5,xn=94/1.5,vn=Se,_t=150,Wt=2400,Tn=24,qt=.5,Kt=[{width:48/1.5,height:100/1.5,imageSrc:"assets/carrot_1.png"},{width:98/1.5,height:100/1.5,imageSrc:"assets/carrot_2.png"},{width:68/1.5,height:70/1.5,imageSrc:"assets/carrot_3.png"}],Jt=async()=>{if(!b||!e||e.isWeb2){console.log("Skipping blockchain initialization - Web2 mode or not ready"),A(M=>({...M,initialized:!1,networkName:(e==null?void 0:e.name)||"Web2 Mode"}));return}try{console.log("Initializing blockchain for network:",e.name),await f(e.id);const M=await x(e.id);A({initialized:!0,networkName:e.name,contractAvailable:!0,pendingTransactions:0,totalMovements:M,onChainScore:M}),console.log("Blockchain initialization complete")}catch(M){console.error("Failed to initialize blockchain:",M),A(O=>({...O,initialized:!1,contractAvailable:!1}))}},le=F.useCallback(async()=>{const{sendUpdate:M,getContractNumber:O,selectedNetwork:Q,blockchainInitialized:G}=X.current;if(!Q||Q.isWeb2||!G){console.log("Skipping on-chain movement - Web2 mode or not initialized");return}if((Q==null?void 0:Q.chainId)===6342){if(L.current>8){console.log("🚫 Maximum MegaETH transaction throughput reached:",L.current);return}const oe=Date.now();U.current&&oe-U.current>1e4&&(console.log("🔄 Resetting pending count due to timeout, was:",L.current),L.current=0)}else if(W.current){console.log("🚫 Transaction already pending, blocking jump");return}const Ve=Date.now();if(U.current&&Ve-U.current<100){console.log("🚫 Transaction rate limit: minimum 100ms between transactions");return}U.current=Ve;try{(Q==null?void 0:Q.chainId)!==6342&&(W.current=!0),L.current++,B(!0);const oe=performance.now();console.log("⚡ Sending instant on-chain jump transaction...");const te=await M(Q.id),ce=performance.now()-oe,Ae=te.blockchainTime||Math.round(ce),we={reactionTime:Math.round(ce-Ae),blockchainTime:Ae,totalTime:Math.round(ce),network:Q.name,isInstant:te.isInstant||!1,txHash:te.hash||te.transactionHash,performanceMetrics:te.performanceMetrics};return console.log("🎮 Real-Time Gaming Result:",we),console.log(`🎯 Jump completed: ${we.blockchainTime}ms blockchain time, ${we.isInstant?"INSTANT":"PENDING"} confirmation`),A(Pe=>{var qe;return{...Pe,totalMovements:Pe.totalMovements+1,onChainScore:Pe.onChainScore+1,lastTransactionTime:we.blockchainTime,averageTransactionTime:((qe=we.performanceMetrics)==null?void 0:qe.averageBlockchainTime)||Pe.averageTransactionTime}}),setTimeout(async()=>{try{await O(Q.id)}catch(Pe){console.error("Error updating contract number:",Pe)}},1e3),we}catch(oe){console.error("❌ Error sending on-chain movement:",oe);let te="Transaction failed",ce="UNKNOWN";oe.message.includes("insufficient funds")?(te="Insufficient funds for transaction. Please check your balance.",ce="INSUFFICIENT_FUNDS"):oe.message.includes("nonce")?(te="Transaction nonce error. Please try again.",ce="NONCE_ERROR",console.log("🔄 Nonce error detected, applying recovery cooldown and resetting pending count"),U.current=Date.now()+1e3,L.current>0&&(console.log(`🔄 Resetting pending count from ${L.current} to 0 due to nonce error`),L.current=0)):oe.message.includes("timeout")?(te="Transaction timeout. Please try again.",ce="TIMEOUT"):oe.message.includes("rejected")?(te="Transaction was rejected by the network.",ce="REJECTED"):oe.message.includes("rate limit")?(te="Rate limit exceeded. Please wait a moment.",ce="RATE_LIMIT"):(te=`Transaction failed: ${oe.message}`,ce="BLOCKCHAIN_ERROR"),console.error(`🚨 Blockchain Error [${ce}]:`,te),A(we=>({...we,lastError:{type:ce,message:te,timestamp:Date.now()}}));const Ae=new Error(te);throw Ae.type=ce,Ae}finally{(Q==null?void 0:Q.chainId)!==6342&&(W.current=!1),L.current=Math.max(0,L.current-1),B(!1)}},[]),be=async()=>{if(!(!e||e.isWeb2||!b))try{j(!0);const M=P();if(!M){alert("Please connect your wallet first");return}console.log("Manual faucet request for:",M.address),await N(M.address,e.id),setTimeout(async()=>{await g(e.id)},3e3),alert("Faucet request successful! Funds should arrive shortly.")}catch(M){console.error("Manual faucet error:",M),alert(`Faucet request failed: ${M.message}`)}finally{j(!1)}},ye=()=>{if(e&&e.isWeb2)return{identifier:"CLASSIC PLAYER",address:null,isWeb2:!0};if(!s||!r)return null;const M=dt();return M?{identifier:`${M.slice(0,6)}...${M.slice(-4)}`,address:M}:r.email?{identifier:r.email.split("@")[0],address:null}:null},dt=()=>{var M;return!s||!a||a.length===0?null:((M=a[0])==null?void 0:M.address)||null};return F.useEffect(()=>{if(e&&e.isWeb2){console.log("Web2 mode selected, skipping blockchain initialization"),A({initialized:!1,networkName:e.name,contractAvailable:!1,pendingTransactions:0,totalMovements:0,onChainScore:0});return}e&&b&&s&&a.length>0?(console.log("Initializing blockchain for:",e.name),console.log("Authentication status:",{authenticated:s,wallets:a.length,isReady:b}),Jt()):console.log("Waiting for authentication and embedded wallet creation...",{selectedNetwork:!!e,isReady:b,authenticated:s,wallets:a.length})},[e,b,s,a]),F.useEffect(()=>{if(e&&!e.isWeb2){const M=E(e.id);A(O=>({...O,pendingTransactions:i?1:0,poolStatus:M}))}},[i,e,E]),F.useEffect(()=>{const M=t.current;if(!M)return;const O=M.getContext("2d");let Q;O.imageSmoothingEnabled=!1,O.webkitImageSmoothingEnabled=!1,O.mozImageSmoothingEnabled=!1,O.msImageSmoothingEnabled=!1;const G=n.current;Object.assign(G,{scaleRatio:null,previousTime:null,gameSpeed:ee,gameOver:!1,hasAddedEventListenersForRestart:!1,waitingToStart:!0});function Ve(){const d=Ht*G.scaleRatio,m=xn*G.scaleRatio,w=_t*G.scaleRatio,y=vn*G.scaleRatio,T=Wt*G.scaleRatio,$=Tn*G.scaleRatio;G.player=new $c(O,d,m,w,y,G.scaleRatio,e&&!e.isWeb2?le:null),G.ground=new Rc(O,T,$,qt,G.scaleRatio);const z=Kt.map(k=>{const S=new Image;return S.src=k.imageSrc,S.onerror=()=>console.error(`Failed to load ${k.imageSrc}`),{image:S,width:k.width*G.scaleRatio,height:k.height*G.scaleRatio}});G.carrotController=new Oc(O,z,G.scaleRatio,qt),G.score=new kc(O,G.scaleRatio)}function oe(){G.scaleRatio=te(),M.width=Ee*G.scaleRatio,M.height=Se*G.scaleRatio,Ve()}function te(){const d=Math.min(window.innerHeight,document.documentElement.clientHeight),m=Math.min(window.innerWidth,document.documentElement.clientWidth);return m/d<Ee/Se?m/Ee:d/Se}function ce(){const d=Math.floor(G.scaleRatio*32);O.font=`${d}px monospace`,O.fillStyle="#ef5435",O.textAlign="center",O.shadowColor="#ef5435",O.shadowBlur=10,O.fillText("GAME OVER",M.width/2,M.height/2-d),O.shadowBlur=0;const m=Math.floor(G.scaleRatio*16);O.font=`${m}px monospace`,O.fillStyle="#929397",O.fillText("> PRESS ANY KEY TO RESTART",M.width/2,M.height/2+m);const w=ye();if(w){const y=Math.floor(G.scaleRatio*12);O.font=`${y}px monospace`,O.fillStyle="#1391ff",O.fillText(`> PILOT: ${w.identifier}`,M.width/2,M.height/2+m+y+20),O.fillStyle="#929397",O.fillText(`> NETWORK: ${v.networkName}`,M.width/2,M.height/2+m+y*2+25),v.totalMovements>0&&O.fillText(`> ON-CHAIN MOVES: ${v.totalMovements}`,M.width/2,M.height/2+m+y*3+30)}}function Ae(){const d=Math.floor(G.scaleRatio*24);O.font=`${d}px monospace`,O.fillStyle="#929397",O.textAlign="center",O.shadowColor="#929397",O.shadowBlur=5,O.fillText("> PRESS ANY KEY TO START MISSION",M.width/2,M.height/2),O.shadowBlur=0;const m=ye(),w=Math.floor(G.scaleRatio*12);O.font=`${w}px monospace`,m?(O.fillStyle="#1391ff",O.shadowColor="#1391ff",O.shadowBlur=3,O.fillText(`> PILOT AUTHENTICATED: ${m.identifier}`,M.width/2,M.height/2+d+20),O.shadowBlur=0,O.fillStyle="#929397",O.fillText(`> TARGET NETWORK: ${v.networkName}`,M.width/2,M.height/2+d+w+25),v.initialized?(O.fillStyle="#28a745",O.fillText("> BLOCKCHAIN CONNECTION: ACTIVE",M.width/2,M.height/2+d+w*2+30)):(O.fillStyle="#ffc107",O.fillText("> BLOCKCHAIN CONNECTION: SIMULATED MODE",M.width/2,M.height/2+d+w*2+30))):(O.fillStyle="#ef5435",O.fillText("> WARNING: NO PILOT AUTHENTICATED",M.width/2,M.height/2+d+20))}function we(){const d=O.createLinearGradient(0,0,0,M.height);d.addColorStop(0,"#121218"),d.addColorStop(.5,"#1a1a2e"),d.addColorStop(1,"#16213e"),O.fillStyle=d,O.fillRect(0,0,M.width,M.height),O.strokeStyle="rgba(146, 147, 151, 0.1)",O.lineWidth=1;const m=20*G.scaleRatio;for(let T=0;T<M.width;T+=m)O.beginPath(),O.moveTo(T,0),O.lineTo(T,M.height),O.stroke();for(let T=0;T<M.height;T+=m)O.beginPath(),O.moveTo(0,T),O.lineTo(M.width,T),O.stroke();const w=Date.now()/20%M.height;O.strokeStyle="rgba(19, 145, 255, 0.3)",O.lineWidth=2,O.beginPath(),O.moveTo(0,w),O.lineTo(M.width,w),O.stroke();const y=O.createLinearGradient(0,0,0,M.height*.3);y.addColorStop(0,"rgba(19, 145, 255, 0.1)"),y.addColorStop(1,"transparent"),O.fillStyle=y,O.fillRect(0,0,M.width,M.height*.3)}function Pe(){G.hasAddedEventListenersForRestart||(G.hasAddedEventListenersForRestart=!0,setTimeout(()=>{const d=()=>{qe(),document.removeEventListener("keyup",d),document.removeEventListener("touchstart",d)};document.addEventListener("keyup",d),document.addEventListener("touchstart",d)},1e3))}function qe(){G.hasAddedEventListenersForRestart=!1,G.gameOver=!1,G.waitingToStart=!1,G.ground.reset(),G.carrotController.reset(),G.score.reset(),G.gameSpeed=ee}function En(d){G.gameSpeed+=d*se}function de(){return G.carrotController.collideWith(G.player)}function $e(d){if(G.previousTime===null){G.previousTime=d,Q=requestAnimationFrame($e);return}const m=d-G.previousTime;G.previousTime=d,we(),!G.gameOver&&!G.waitingToStart&&(G.ground.update(G.gameSpeed,m),G.carrotController.update(G.gameSpeed,m),G.player.update(G.gameSpeed,m),G.score.update(m),En(m),de()&&(G.gameOver=!0,Pe())),G.ground.draw(),G.carrotController.draw(),G.player.draw(),G.score.draw(),G.gameOver&&ce(),G.waitingToStart&&Ae(),Q=requestAnimationFrame($e)}oe();const Re=()=>setTimeout(oe,500);window.addEventListener("resize",Re),screen.orientation&&screen.orientation.addEventListener("change",oe);const c=()=>{qe(),document.removeEventListener("keyup",c),document.removeEventListener("touchstart",c)};return document.addEventListener("keyup",c),document.addEventListener("touchstart",c),Q=requestAnimationFrame($e),()=>{Q&&cancelAnimationFrame(Q),window.removeEventListener("resize",Re),screen.orientation&&screen.orientation.removeEventListener("change",oe),document.removeEventListener("keyup",c),document.removeEventListener("touchstart",c)}},[e,le]),l.jsxs("div",{className:"game-container",children:[l.jsx("canvas",{ref:t}),s&&e&&!e.isWeb2&&l.jsx(Sc,{selectedNetwork:e,className:"wallet-status-overlay"}),C&&l.jsx("div",{className:"transaction-toast",children:l.jsxs("div",{className:"toast-content",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("span",{children:"Sending on-chain jump..."})]})}),e&&!e.isWeb2&&l.jsxs("div",{className:"blockchain-status-panel",children:[l.jsxs("div",{className:"status-header",children:[l.jsx("span",{className:"network-name",children:v.networkName}),l.jsx("span",{className:`status-indicator ${v.initialized?"connected":"disconnected"}`,children:v.initialized?"🟢":"🔴"})]}),v.initialized&&l.jsxs("div",{className:"status-details",children:[l.jsxs("div",{className:"status-item",children:[l.jsx("span",{className:"label",children:"Balance:"}),l.jsxs("span",{className:"value",children:[u," ETH"]})]}),l.jsxs("div",{className:"status-item",children:[l.jsx("span",{className:"label",children:"Contract #:"}),l.jsx("span",{className:"value",children:h})]}),l.jsxs("div",{className:"status-item",children:[l.jsx("span",{className:"label",children:"Jumps:"}),l.jsx("span",{className:"value",children:v.totalMovements})]}),v.lastTransactionTime&&l.jsxs("div",{className:"status-item",children:[l.jsx("span",{className:"label",children:"Last TX:"}),l.jsxs("span",{className:"value performance-metric",children:[v.lastTransactionTime,"ms"]})]}),v.averageTransactionTime&&l.jsxs("div",{className:"status-item",children:[l.jsx("span",{className:"label",children:"Avg Speed:"}),l.jsxs("span",{className:"value performance-metric",children:[Math.round(v.averageTransactionTime),"ms"]})]}),v.averageTransactionTime&&l.jsxs("div",{className:"status-item",children:[l.jsx("span",{className:"label",children:"Performance:"}),l.jsx("span",{className:`value performance-indicator ${v.averageTransactionTime<1e3?"excellent":v.averageTransactionTime<3e3?"good":v.averageTransactionTime<5e3?"fair":"slow"}`,children:v.averageTransactionTime<1e3?"🚀 INSTANT":v.averageTransactionTime<3e3?"⚡ FAST":v.averageTransactionTime<5e3?"🔥 GOOD":"🐌 SLOW"})]}),v.lastError&&l.jsxs("div",{className:"status-item error",children:[l.jsx("span",{className:"label",children:"Last Error:"}),l.jsx("span",{className:"value error-text",title:v.lastError.message,children:v.lastError.type})]}),parseFloat(u)<5e-5&&l.jsx("div",{className:"status-item",children:l.jsx("button",{className:"faucet-button",onClick:be,disabled:R,children:R?"Requesting...":"Get Test ETH"})}),i&&l.jsxs("div",{className:"status-item",children:[l.jsx("span",{className:"label",children:"Status:"}),l.jsx("span",{className:"value pending",children:"⚡ Processing TX..."})]})]}),o&&l.jsxs("div",{className:"initialization-status",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("span",{children:"🚀 Initializing blockchain..."})]})]}),l.jsx(Ac,{transactionPending:i,balance:u,blockchainStatus:v,selectedNetwork:e,authenticated:s})]})},Fc=({selectedNetwork:e,onDisconnect:t,disableNetworkControls:n=!1})=>{var R;const{user:r,authenticated:s,ready:a}=rt(),{login:o}=sn(),{logout:i}=Hs(),{wallets:u}=rn(),[h,f]=F.useState(!1),[p,g]=F.useState(!1),x=[{id:6342,name:"MegaETH Testnet",emoji:"⚡"},{id:84532,name:"Base Sepolia",emoji:"🔵"},{id:10143,name:"Monad Testnet",emoji:"🟣"}];F.useEffect(()=>{(async()=>{var W;if(s&&u&&u.length>0&&e&&!p)try{const L=u[0];if(L.walletClientType==="privy"){console.log(`Auto-switching to ${e.name}...`),console.log("⚡ INSTANT GAMING MODE ENABLED - игра готова!");return}let X;try{if(typeof L.getChainId=="function")X=await L.getChainId();else if(L.chainId)X=L.chainId;else{const ee=await((W=L.getEthereumProvider)==null?void 0:W.call(L));if(ee&&ee.request){const se=await ee.request({method:"eth_chainId"});X=parseInt(se,16)}else{console.warn("Cannot determine current chain ID, skipping auto-switch");return}}}catch(ee){console.warn("Failed to get current chain ID:",ee);return}X!==e.id&&(console.log(`Auto-switching to ${e.name}...`),g(!0),await P(e.id))}catch(L){console.warn("Auto network switch failed:",L)}finally{g(!1)}})()},[s,u,e]);const b=()=>{s?(i(),t&&t()):o()},P=async j=>{var W,L;if(!(!u||u.length===0)){g(!0);try{const U=u[0],X=((W=x.find(se=>se.id===j))==null?void 0:W.name)||"Unknown Network";if(U.walletClientType==="privy"){console.log("⚡ INSTANT GAMING MODE ENABLED - игра готова!"),console.log(`Privy embedded wallet automatically configured for ${X}`),f(!1);return}if(typeof U.switchChain!="function"){console.warn("Wallet does not support network switching"),alert("This wallet does not support automatic network switching. Please switch manually.");return}try{await U.switchChain(j),f(!1),console.log(`Successfully switched to ${X}`);return}catch(se){console.log(`Network ${X} not found, attempting to add it...`,se);const Ee=N(j);if(Ee)console.log(`Adding network ${X} to wallet...`),await E(U,Ee),await new Promise(Se=>setTimeout(Se,1e3)),console.log(`Switching to ${X}...`),await U.switchChain(j),f(!1),console.log(`Successfully added and switched to ${X}`);else throw new Error(`Network configuration not found for chain ID ${j}`)}}catch(U){if(console.error("Failed to switch network:",U),((L=u[0])==null?void 0:L.walletClientType)==="privy"&&U.message.includes("Unsupported chainId")){console.log("⚡ Privy embedded wallet: Network switching handled automatically"),f(!1);return}let ee="Failed to switch network. ";U.message.includes("rejected")?ee+="User cancelled the operation.":U.message.includes("already pending")?ee+="Another network operation is in progress. Please wait and try again.":ee+="Please try again or add the network manually.",alert(ee)}finally{g(!1)}}},N=j=>({6342:{chainId:"0x18C6",chainName:"MegaETH Testnet",rpcUrls:["https://carrot.megaeth.com/rpc"],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorerUrls:["https://carrot.megaeth.com"]},84532:{chainId:"0x14A34",chainName:"Base Sepolia",rpcUrls:["https://sepolia.base.org"],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorerUrls:["https://sepolia.basescan.org"]},10143:{chainId:"0x279F",chainName:"Monad Testnet",rpcUrls:["https://testnet-rpc.monad.xyz"],nativeCurrency:{name:"Monad",symbol:"MON",decimals:18},blockExplorerUrls:["https://testnet.monadexplorer.com"]}})[j],E=async(j,W)=>{try{await(await j.getEthersProvider()).send("wallet_addEthereumChain",[W])}catch(L){if(L.code===4902||L.message.includes("already exists")||L.message.includes("Already added")){console.log("Network already exists in wallet");return}throw L}},v=()=>{if(!u||u.length===0)return null;const j=u[0];return x.find(W=>W.id===j.chainId)},A=j=>j?`${j.slice(0,6)}...${j.slice(-4)}`:"",C=()=>{var j;if((j=r==null?void 0:r.wallet)!=null&&j.address)return r.wallet.address;if(r!=null&&r.linkedAccounts){const W=r.linkedAccounts.find(L=>L.type==="wallet");return W==null?void 0:W.address}return null},B=()=>{var W,L;if((W=r==null?void 0:r.email)!=null&&W.address)return r.email.address;if((L=r==null?void 0:r.phone)!=null&&L.number)return r.phone.number;const j=C();return j?A(j):"Unknown User"};return a?l.jsxs("div",{className:"wallet-container",children:[l.jsxs("div",{className:"wallet-controls",children:[l.jsx("button",{className:`wallet-button ${s?"connected":""}`,onClick:b,children:s?"Disconnect":"Connect Wallet"}),s&&u&&u.length>0&&!n&&l.jsxs("div",{className:"network-selector",children:[l.jsx("button",{className:"network-button",onClick:()=>f(!h),disabled:p,children:p?"🔄 Switching...":v()?`${v().emoji} ${v().name}`:"🌐 Select Network"}),h&&l.jsx("div",{className:"network-dropdown",children:x.map(j=>{var W;return l.jsxs("button",{className:`network-option ${((W=v())==null?void 0:W.id)===j.id?"active":""} ${(e==null?void 0:e.id)===j.id?"selected-game-network":""}`,onClick:()=>P(j.id),disabled:p,children:[p?"🔄":j.emoji," ",j.name,(e==null?void 0:e.id)===j.id&&" 🎮"]},j.id)})})]})]}),s&&l.jsxs("div",{className:"wallet-info",children:[l.jsx("div",{className:"wallet-status",children:"Connected"}),l.jsx("div",{className:"wallet-user",children:B()}),l.jsx("div",{className:"wallet-network",children:e?e.name:((R=v())==null?void 0:R.name)||"Unknown Network"})]})]}):l.jsx("div",{className:"wallet-container",children:l.jsx("button",{className:"wallet-button",disabled:!0,children:"Loading..."})})},Bc=({onNetworkSelect:e,onStartGame:t})=>{const[n,r]=F.useState(null),[s,a]=F.useState(!0),[o,i]=F.useState(""),[u,h]=F.useState({width:window.innerWidth,height:window.innerHeight}),{user:f,authenticated:p}=rt(),{login:g}=sn(),x=[{id:"web2",name:"CLASSIC BROWSER",emoji:"🌐",description:"Pure web2 experience",tech:"No wallet required",color:"#2ecc71",status:"ONLINE",icon:"🦕",isWeb2:!0},{id:6342,name:"MEGAETH TESTNET",emoji:"⚡",description:"Ultra-fast execution layer",tech:"Lightning-fast transactions",color:"#ff6b6b",status:"ONLINE",icon:"🚀"},{id:84532,name:"BASE SEPOLIA",emoji:"🔵",description:"Ethereum L2 testnet",tech:"Reliable scaling solution",color:"#4ecdc4",status:"ONLINE",icon:"🌐"},{id:10143,name:"MONAD TESTNET",emoji:"🟣",description:"Next-gen blockchain",tech:"Advanced consensus",color:"#9b59b6",status:"BETA",icon:"🔮"}];F.useEffect(()=>{const C=["INITIALIZING NETWORK SCANNER...","DETECTING AVAILABLE CHAINS...","ESTABLISHING SECURE CONNECTIONS...","SYSTEM READY FOR NETWORK SELECTION"];let B=0;const R=setInterval(()=>{i(C[B]),B++,B>=C.length&&(clearInterval(R),setTimeout(()=>a(!1),500))},800);return()=>clearInterval(R)},[]),F.useEffect(()=>{const C=()=>{h({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]),F.useEffect(()=>{},[u]);const b=()=>{const{width:C,height:B}=u,R=C<=768,j=C>768&&C<=1024,W=C>1024,L=C>1600;let U;R?U=Math.min(C*.98,C-20):j?U=Math.min(C*.92,C-60):L?U=Math.min(C*.85,1400):U=Math.min(C*.88,1200);const X=B*(R?.95:.9),ee=Math.min(B*(R?.7:.6),R?500:600),se=R?Math.max(15,C*.03):Math.max(20,C*.025);return{containerStyle:{width:`${U}px`,maxHeight:`${X}px`,minHeight:`${ee}px`,transition:"all 0.3s ease"},contentStyle:{padding:`${se}px`,transition:"all 0.3s ease"},networkGridStyle:{gridTemplateColumns:R?"1fr":j?"repeat(auto-fit, minmax(280px, 1fr))":"repeat(auto-fit, minmax(300px, 1fr))",gap:`${R?15:W?25:20}px`}}},{containerStyle:P,contentStyle:N,networkGridStyle:E}=b(),v=C=>{r(C),e(C)},A=()=>{if(n){if(n.isWeb2){t(n);return}p&&f?t(n):(e(n),g())}};return F.useEffect(()=>{p&&f&&n&&t(n)},[p,f,n,t]),s?l.jsx("div",{className:"network-scanner-overlay",children:l.jsx("div",{className:"scanner-container",style:P,children:l.jsxs("div",{className:"scanner-content",style:N,children:[l.jsxs("div",{className:"terminal-header",children:[l.jsx("div",{className:"terminal-title",children:"NETWORK SCANNER PROTOCOL"}),l.jsxs("div",{className:"terminal-buttons",children:[l.jsx("div",{className:"terminal-button red"}),l.jsx("div",{className:"terminal-button yellow"}),l.jsx("div",{className:"terminal-button green"})]})]}),l.jsx("div",{className:"logo-section",children:l.jsx("div",{className:"pixel-logo",children:l.jsxs("div",{className:"logo-text",children:[l.jsx("span",{className:"logo-main",children:"BUDDY"}),l.jsx("span",{className:"logo-accent",children:"RUNNER"})]})})}),l.jsx("div",{className:"scanner-display",children:l.jsxs("div",{className:"radar-container",children:[l.jsx("div",{className:"radar-sweep"}),l.jsx("div",{className:"radar-grid"})]})}),l.jsxs("div",{className:"scanner-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," ",o]})]})})}):l.jsx("div",{className:"network-selection-overlay",children:l.jsx("div",{className:"network-selection-container",style:P,children:l.jsxs("div",{className:"network-selection-content",style:N,children:[l.jsxs("div",{className:"terminal-header",children:[l.jsx("div",{className:"terminal-title",children:"BLOCKCHAIN NETWORK SELECTOR"}),l.jsxs("div",{className:"terminal-buttons",children:[l.jsx("div",{className:"terminal-button red"}),l.jsx("div",{className:"terminal-button yellow"}),l.jsx("div",{className:"terminal-button green"})]})]}),l.jsx("div",{className:"logo-section",children:l.jsxs("div",{className:"pixel-logo",children:[l.jsxs("div",{className:"logo-text",children:[l.jsx("span",{className:"logo-main",children:"BUDDY"}),l.jsx("span",{className:"logo-accent",children:"RUNNER"})]}),l.jsxs("div",{className:"logo-powered",children:["POWERED BY ",l.jsx("strong",{children:"MEGA BUDDIES"})]})]})}),l.jsxs("div",{className:"mission-briefing",children:[l.jsx("div",{className:"briefing-title",children:"MISSION BRIEFING"}),l.jsxs("div",{className:"briefing-content",children:[l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," OBJECTIVE: SURVIVE 60 SECONDS ON EACH NETWORK"]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," ANALYZE BLOCK TIME IMPACT ON USER EXPERIENCE"]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," DISCOVER THE POWER OF REAL-TIME BLOCKCHAIN"]})]})]}),l.jsxs("div",{className:"network-selection",children:[l.jsx("div",{className:"selection-title",children:"SELECT TARGET BLOCKCHAIN NETWORK:"}),l.jsx("div",{className:"network-grid",style:E,children:x.map(C=>l.jsxs("div",{className:`network-card ${(n==null?void 0:n.id)===C.id?"selected":""}`,onClick:()=>v(C),children:[l.jsxs("div",{className:"network-header",children:[l.jsx("div",{className:"network-icon",children:C.icon}),l.jsx("div",{className:"network-status","data-status":C.status,children:C.status})]}),l.jsxs("div",{className:"network-info",children:[l.jsx("div",{className:"network-name",children:C.name}),l.jsx("div",{className:"network-description",children:C.description}),l.jsx("div",{className:"network-tech",children:C.tech})]}),l.jsxs("div",{className:"network-specs",children:[l.jsxs("div",{className:"spec-item",children:[l.jsx("span",{className:"spec-label",children:C.isWeb2?"TYPE:":"CHAIN ID:"}),l.jsx("span",{className:"spec-value",children:C.isWeb2?"WEB2":C.id})]}),l.jsxs("div",{className:"spec-item",children:[l.jsx("span",{className:"spec-label",children:"NETWORK:"}),l.jsx("span",{className:"spec-value",children:C.isWeb2?"BROWSER":"TESTNET"})]})]}),l.jsx("div",{className:"selection-indicator",children:(n==null?void 0:n.id)===C.id&&l.jsx("div",{className:"selected-glow",children:"SELECTED"})})]},C.id))}),n&&l.jsxs("div",{className:"launch-section",children:[l.jsxs("div",{className:"launch-info",children:[l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," TARGET NETWORK: ",n.name]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," MISSION STATUS: READY FOR DEPLOYMENT"]})]}),l.jsxs("button",{className:"launch-button",onClick:A,children:[l.jsx("span",{className:"button-icon",children:"🚀"}),"LAUNCH MISSION ON ",n.name,l.jsx("div",{className:"button-glow"})]})]})]})]})})})},Dc=({onWalletConnected:e})=>{const{user:t,authenticated:n,ready:r}=rt(),{login:s}=sn(),[a,o]=F.useState("INITIALIZING"),[i,u]=F.useState("");F.useEffect(()=>{n&&t&&e()},[n,t,e]),F.useEffect(()=>{const f=setInterval(()=>{u(g=>g.length>=3?"":g+".")},500),p=setInterval(()=>{const g=["INITIALIZING","LOADING SYSTEMS","CONNECTING","SYNCING"];o(g[Math.floor(Math.random()*g.length)])},2e3);return()=>{clearInterval(f),clearInterval(p)}},[]);const h=()=>{s()};return r?l.jsx("div",{className:"wallet-connection-overlay",children:l.jsx("div",{className:"wallet-connection-container",children:l.jsxs("div",{className:"wallet-connection-content",children:[l.jsxs("div",{className:"terminal-header",children:[l.jsx("div",{className:"terminal-title",children:"WALLET CONNECTION PROTOCOL"}),l.jsxs("div",{className:"terminal-buttons",children:[l.jsx("div",{className:"terminal-button red"}),l.jsx("div",{className:"terminal-button yellow"}),l.jsx("div",{className:"terminal-button green"})]})]}),l.jsx("div",{className:"logo-section",children:l.jsxs("div",{className:"pixel-logo",children:[l.jsxs("div",{className:"logo-text",children:[l.jsx("span",{className:"logo-main",children:"BUDDY"}),l.jsx("span",{className:"logo-accent",children:"RUNNER"})]}),l.jsxs("div",{className:"logo-powered",children:["POWERED BY ",l.jsx("strong",{children:"MEGA BUDDIES"})]})]})}),l.jsxs("div",{className:"connection-section",children:[l.jsx("div",{className:"connection-icon",children:"🔗"}),l.jsx("h2",{className:"connection-title",children:"AUTHENTICATION REQUIRED"}),l.jsxs("div",{className:"terminal-content",children:[l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," CONNECT YOUR WALLET TO ACCESS THE GAME"]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," ALL SCORES WILL BE STORED ON-CHAIN"]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," SECURE BLOCKCHAIN AUTHENTICATION"]})]}),l.jsxs("button",{className:"connect-wallet-button",onClick:h,children:[l.jsx("span",{className:"button-icon",children:"🔐"}),"CONNECT WALLET",l.jsx("div",{className:"button-glow"})]}),l.jsxs("div",{className:"supported-options",children:[l.jsx("div",{className:"options-title",children:"SUPPORTED AUTHENTICATION METHODS:"}),l.jsxs("div",{className:"options-grid",children:[l.jsxs("div",{className:"option-item",children:[l.jsx("span",{className:"option-icon",children:"📧"}),l.jsx("span",{className:"option-text",children:"EMAIL"})]}),l.jsxs("div",{className:"option-item",children:[l.jsx("span",{className:"option-icon",children:"📱"}),l.jsx("span",{className:"option-text",children:"PHONE"})]}),l.jsxs("div",{className:"option-item",children:[l.jsx("span",{className:"option-icon",children:"🦊"}),l.jsx("span",{className:"option-text",children:"METAMASK"})]}),l.jsxs("div",{className:"option-item",children:[l.jsx("span",{className:"option-icon",children:"💼"}),l.jsx("span",{className:"option-text",children:"OTHER WALLETS"})]})]})]}),l.jsxs("div",{className:"security-info",children:[l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," SECURITY: 256-BIT ENCRYPTION"]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," NETWORK: MEGAETH COMPATIBLE"]})]})]})]})})}):l.jsx("div",{className:"preloader-overlay",children:l.jsx("div",{className:"preloader-container",children:l.jsxs("div",{className:"preloader-content",children:[l.jsxs("div",{className:"terminal-header",children:[l.jsx("div",{className:"terminal-title",children:"BUDDY RUNNER SYSTEM"}),l.jsxs("div",{className:"terminal-buttons",children:[l.jsx("div",{className:"terminal-button red"}),l.jsx("div",{className:"terminal-button yellow"}),l.jsx("div",{className:"terminal-button green"})]})]}),l.jsx("div",{className:"logo-section",children:l.jsx("div",{className:"pixel-logo",children:l.jsxs("div",{className:"logo-text",children:[l.jsx("span",{className:"logo-main",children:"BUDDY"}),l.jsx("span",{className:"logo-accent",children:"RUNNER"})]})})}),l.jsx("div",{className:"loading-bar",children:l.jsx("div",{className:"progress",style:{width:"100%"}})}),l.jsxs("div",{className:"loading-text",children:[a,l.jsx("span",{className:"dots",children:i})]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," System initialization in progress..."]})]})})})};var Lc={};const Gc=()=>{const e="cme84q0og02aalc0bh9blzwa9",[t,n]=F.useState("network-selection"),[r,s]=F.useState(null),a={id:6342,name:"MegaETH Testnet",network:"megaeth-testnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://carrot.megaeth.com/rpc"],webSocket:["wss://carrot.megaeth.com/ws"]}},blockExplorers:{default:{name:"MegaETH Explorer",url:"https://carrot.megaeth.com"}}},h={appId:"cm25q62mj00nks8j5lxk4qyly",config:{appearance:{theme:"dark",accentColor:"#1391ff",logo:"https://images.unsplash.com/photo-1614680376573-df3480f0c6ff?w=100&h=100&fit=crop&crop=center",walletChainType:"ethereum-and-solana",showWalletLoginFirst:!1},embeddedWallets:{createOnLogin:"all-users",requireUserPasswordOnCreate:!1,prependWithWalletUi:!1,noPromptOnSignature:!0,showWalletUiOnNotConnected:!1},loginMethods:["email","wallet","google","discord","twitter"],defaultChain:a,supportedChains:[a,{id:31337,name:"Foundry Local",network:"foundry",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["http://127.0.0.1:8545"]}}},{id:50311,name:"Somnia Testnet",network:"somnia-testnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://testnet.somnia.network"]}}},{id:1313161556,name:"RISE Testnet",network:"rise-testnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://testnet-rpc.rise.com"]}}},{id:84532,name:"Base Sepolia",network:"base-sepolia",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Base Sepolia Explorer",url:"https://sepolia.basescan.org"}}},{id:10143,name:"Monad Testnet",network:"monad-testnet",nativeCurrency:{name:"Monad",symbol:"MON",decimals:18},rpcUrls:{default:{http:["https://testnet-rpc.monad.xyz"]}},blockExplorers:{default:{name:"Monad Explorer",url:"https://testnet.monadexplorer.com"}}},{id:1,name:"Ethereum",network:"homestead",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth-mainnet.g.alchemy.com/v2/your-api-key"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io"}}},{id:11155111,name:"Sepolia",network:"sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.infura.io/v3/your-api-key"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io"}}}],walletConnectCloudProjectId:Lc.REACT_APP_WALLETCONNECT_PROJECT_ID||"default",legal:{termsAndConditionsUrl:"/terms",privacyPolicyUrl:"/privacy"},mfa:{noPromptOnMfaRequired:!1}}},f=P=>{s(P)},p=P=>{s(P),P.isWeb2?n("game"):n("wallet-connection")},g=()=>{n("game")},x=()=>{n("network-selection"),s(null)},b=()=>{n("network-selection"),s(null)};return l.jsx(_s,{appId:e,config:h,children:l.jsx("div",{className:"app",children:t==="network-selection"?l.jsx(Bc,{onNetworkSelect:f,onStartGame:p}):t==="wallet-connection"?l.jsxs("div",{children:[l.jsx("div",{className:"back-to-wallet",children:l.jsx("button",{className:"back-button-small",onClick:x,children:"← Back to Network Selection"})}),l.jsx(Dc,{onWalletConnected:g})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"back-to-network-button",children:l.jsx("button",{className:"back-button",onClick:x,children:"← Back to Network Selection"})}),r&&!r.isWeb2&&l.jsx(Fc,{selectedNetwork:r,onDisconnect:b,disableNetworkControls:!0}),l.jsx("div",{className:"game-layout",children:l.jsx("div",{className:"game-header",children:l.jsx("div",{className:"header-center",children:l.jsxs("div",{className:"title",children:["Buddy Runner",r&&r.isWeb2&&l.jsx("span",{className:"web2-mode",children:" - Classic Mode"})]})})})}),l.jsx(Mc,{selectedNetwork:r}),l.jsxs("div",{className:"instructions",children:[l.jsx("p",{className:"main-instruction",children:"📱 Press SPACE or tap to make Buddy jump!"}),l.jsx("p",{className:"help-text",children:"Help our brave bunny Buddy hop over the giant carrots and achieve the highest score!"}),l.jsx("p",{className:"warning-text",children:"Watch out for those sneaky garden carrots!"})]})]})})})};An.createRoot(document.getElementById("root")).render(l.jsx(qs.StrictMode,{children:l.jsx(Gc,{})}));export{I as B,gt as H,bt as I,Fe as a,je as b,pn as c,vo as d,Mt as e,on as g,ze as i,he as s};
