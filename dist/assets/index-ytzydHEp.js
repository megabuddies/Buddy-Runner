const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ccip-d7If2SM1.js","assets/privy-CJey9ZCd.js","assets/vendor-C7A1SLig.js"])))=>i.map(i=>d[i]);
var _r=Object.defineProperty;var Hr=(t,e,n)=>e in t?_r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ne=(t,e,n)=>Hr(t,typeof e!="symbol"?e+"":e,n);import{_ as Wr,m as ot,o as rn,j as o,i as an,a as qr,X as Kr}from"./privy-CJey9ZCd.js";import{b as Jr,r as O,R as Yr}from"./vendor-C7A1SLig.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var An={},Ns=Jr;An.createRoot=Ns.createRoot,An.hydrateRoot=Ns.hydrateRoot;function Vr(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const Ps=/^tuple(?<array>(\[(\d*)\])*)$/;function Mn(t){let e=t.type;if(Ps.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let r=0;r<n;r++){const a=t.components[r];e+=Mn(a),r<n-1&&(e+=", ")}const s=Vr(Ps,t.type);return e+=`)${(s==null?void 0:s.array)??""}`,Mn({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function gt(t){let e="";const n=t.length;for(let s=0;s<n;s++){const r=t[s];e+=Mn(r),s!==n-1&&(e+=", ")}return e}function Xr(t){return t.type==="function"?`function ${t.name}(${gt(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${t.outputs.length?` returns (${gt(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${gt(t.inputs)})`:t.type==="error"?`error ${t.name}(${gt(t.inputs)})`:t.type==="constructor"?`constructor(${gt(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?"fallback()":"receive() external payable"}function q(t,e,n){return s=>{var r;return((r=t[e.name||n])==null?void 0:r.call(t,s))??e(t,s)}}function Fe(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new ha(t.type);return`${t.name}(${on(t.inputs,{includeName:e})})`}function on(t,{includeName:e=!1}={}){return t?t.map(n=>Zr(n,{includeName:e})).join(e?", ":","):""}function Zr(t,{includeName:e}){return t.type.startsWith("tuple")?`(${on(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function Ce(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function ie(t){return Ce(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Qr="1.21.3",ea=t=>t,cn=t=>t,ta=()=>`viem@${Qr}`;class M extends Error{constructor(e,n={}){var a;super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:ta()});const s=n.cause instanceof M?n.cause.details:(a=n.cause)!=null&&a.message?n.cause.message:n.details,r=n.cause instanceof M&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...r?[`Docs: https://viem.sh${r}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...s?[`Details: ${s}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=s,this.docsPath=r,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return Us(this,e)}}function Us(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t?Us(t.cause,e):e?null:t}class na extends M{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorNotFoundError"})}}class Es extends M{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorParamsNotFoundError"})}}class Qn extends M{constructor({data:e,params:n,size:s}){super([`Data size of ${s} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${on(n,{includeName:!0})})`,`Data:   ${e} (${s} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=s}}class ln extends M{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingZeroDataError"})}}class sa extends M{constructor({expectedLength:e,givenLength:n,type:s}){super([`ABI encoding array length mismatch for type ${s}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class ra extends M{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${ie(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class aa extends M{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}class _s extends M{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class oa extends M{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureEmptyTopicsError"})}}class ia extends M{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureNotFoundError"})}}class js extends M{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventNotFoundError"})}}class en extends M{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class ca extends M{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionOutputsNotFoundError"})}}class la extends M{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Fe(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Fe(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItemAmbiguityError"})}}class ua extends M{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class Ze extends M{constructor({abiItem:e,data:n,params:s,size:r}){super([`Data size of ${r} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${on(s,{includeName:!0})})`,`Data:   ${n} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=s,this.size=r}}class it extends M{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Fe(e,{includeName:!0})}".`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class da extends M{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class fa extends M{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiDecodingType"})}}class ma extends M{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class ha extends M{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}class ga extends M{constructor(e){super(`Filter type "${e}" is not supported.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FilterTypeNotSupportedError"})}}class Hs extends M{constructor({offset:e,position:n,size:s}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${s}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class Ws extends M{constructor({size:e,targetSize:n,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}function ct(t,{dir:e,size:n=32}={}){return typeof t=="string"?Le(t,{dir:e,size:n}):pa(t,{dir:e,size:n})}function Le(t,{dir:e,size:n=32}={}){if(n===null)return t;const s=t.replace("0x","");if(s.length>n*2)throw new Ws({size:Math.ceil(s.length/2),targetSize:n,type:"hex"});return`0x${s[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function pa(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new Ws({size:t.length,targetSize:n,type:"bytes"});const s=new Uint8Array(n);for(let r=0;r<n;r++){const a=e==="right";s[a?r:n-r-1]=t[a?r:t.length-r-1]}return s}class ba extends M{constructor({max:e,min:n,signed:s,size:r,value:a}){super(`Number "${a}" is not in safe ${r?`${r*8}-bit ${s?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class ya extends M{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidHexBooleanError"})}}class wa extends M{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}function nt(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,s=0;for(let r=0;r<n.length-1&&n[e==="left"?r:n.length-r-1].toString()==="0";r++)s++;return n=e==="left"?n.slice(s):n.slice(0,n.length-s),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function qe(t,{size:e}){if(ie(t)>e)throw new wa({givenSize:ie(t),maxSize:e})}function un(t,e={}){const{signed:n}=e;e.size&&qe(t,{size:e.size});const s=BigInt(t);if(!n)return s;const r=(t.length-2)/2,a=(1n<<BigInt(r)*8n-1n)-1n;return s<=a?s:s-BigInt(`0x${"f".padStart(r*2,"f")}`)-1n}function xa(t,e={}){let n=t;if(e.size&&(qe(n,{size:e.size}),n=nt(n)),nt(n)==="0x00")return!1;if(nt(n)==="0x01")return!0;throw new ya(n)}function le(t,e={}){return Number(un(t,e))}function va(t,e={}){let n=ts(t);return e.size&&(qe(n,{size:e.size}),n=nt(n,{dir:"right"})),new TextDecoder().decode(n)}const Ta=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ze(t,e={}){return typeof t=="number"||typeof t=="bigint"?X(t,e):typeof t=="string"?es(t,e):typeof t=="boolean"?qs(t,e):wt(t,e)}function qs(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(qe(n,{size:e.size}),ct(n,{size:e.size})):n}function wt(t,e={}){let n="";for(let r=0;r<t.length;r++)n+=Ta[t[r]];const s=`0x${n}`;return typeof e.size=="number"?(qe(s,{size:e.size}),ct(s,{dir:"right",size:e.size})):s}function X(t,e={}){const{signed:n,size:s}=e,r=BigInt(t);let a;s?n?a=(1n<<BigInt(s)*8n-1n)-1n:a=2n**(BigInt(s)*8n)-1n:typeof t=="number"&&(a=BigInt(Number.MAX_SAFE_INTEGER));const i=typeof a=="bigint"&&n?-a-1n:0;if(a&&r>a||r<i){const l=typeof t=="bigint"?"n":"";throw new ba({max:a?`${a}${l}`:void 0,min:`${i}${l}`,signed:n,size:s,value:`${t}${l}`})}const c=`0x${(n&&r<0?(1n<<BigInt(s*8))+BigInt(r):r).toString(16)}`;return s?ct(c,{size:s}):c}const Na=new TextEncoder;function es(t,e={}){const n=Na.encode(t);return wt(n,e)}const Pa=new TextEncoder;function Ue(t,e={}){return typeof t=="number"||typeof t=="bigint"?ja(t,e):typeof t=="boolean"?Ea(t,e):Ce(t)?ts(t,e):ke(t,e)}function Ea(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(qe(n,{size:e.size}),ct(n,{size:e.size})):n}const Me={zero:48,nine:57,A:65,F:70,a:97,f:102};function Ss(t){if(t>=Me.zero&&t<=Me.nine)return t-Me.zero;if(t>=Me.A&&t<=Me.F)return t-(Me.A-10);if(t>=Me.a&&t<=Me.f)return t-(Me.a-10)}function ts(t,e={}){let n=t;e.size&&(qe(n,{size:e.size}),n=ct(n,{dir:"right",size:e.size}));let s=n.slice(2);s.length%2&&(s=`0${s}`);const r=s.length/2,a=new Uint8Array(r);for(let i=0,c=0;i<r;i++){const l=Ss(s.charCodeAt(c++)),f=Ss(s.charCodeAt(c++));if(l===void 0||f===void 0)throw new M(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);a[i]=l*16+f}return a}function ja(t,e){const n=X(t,e);return ts(n)}function ke(t,e={}){const n=Pa.encode(t);return typeof e.size=="number"?(qe(n,{size:e.size}),ct(n,{dir:"right",size:e.size})):n}function Sa(t){let e=!0,n="",s=0,r="",a=!1;for(let i=0;i<t.length;i++){const c=t[i];if(["(",")",","].includes(c)&&(e=!0),c==="("&&s++,c===")"&&s--,!!e){if(s===0){if(c===" "&&["event","function",""].includes(r))r="";else if(r+=c,c===")"){a=!0;break}continue}if(c===" "){t[i-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}r+=c,n+=c}}if(!a)throw new M("Unable to normalize signature.");return r}const Ks=t=>{const e=typeof t=="string"?t:Xr(t);return Sa(e)},Ca=t=>Ks(t);function Cs(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Js(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Rs(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ra(t,e){Js(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Vt=BigInt(2**32-1),$s=BigInt(32);function $a(t,e=!1){return e?{h:Number(t&Vt),l:Number(t>>$s&Vt)}:{h:Number(t>>$s&Vt)|0,l:Number(t&Vt)|0}}function Aa(t,e=!1){let n=new Uint32Array(t.length),s=new Uint32Array(t.length);for(let r=0;r<t.length;r++){const{h:a,l:i}=$a(t[r],e);[n[r],s[r]]=[a,i]}return[n,s]}const Ma=(t,e,n)=>t<<n|e>>>32-n,Oa=(t,e,n)=>e<<n|t>>>32-n,ka=(t,e,n)=>e<<n-32|t>>>64-n,Fa=(t,e,n)=>t<<n-32|e>>>64-n;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ia=t=>t instanceof Uint8Array,za=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Ba=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ba)throw new Error("Non little-endian hardware is not supported");function Ga(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Ys(t){if(typeof t=="string"&&(t=Ga(t)),!Ia(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}class Da{clone(){return this._cloneInto()}}function La(t){const e=s=>t().update(Ys(s)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const[Vs,Xs,Zs]=[[],[],[]],Ua=BigInt(0),pt=BigInt(1),_a=BigInt(2),Ha=BigInt(7),Wa=BigInt(256),qa=BigInt(113);for(let t=0,e=pt,n=1,s=0;t<24;t++){[n,s]=[s,(2*n+3*s)%5],Vs.push(2*(5*s+n)),Xs.push((t+1)*(t+2)/2%64);let r=Ua;for(let a=0;a<7;a++)e=(e<<pt^(e>>Ha)*qa)%Wa,e&_a&&(r^=pt<<(pt<<BigInt(a))-pt);Zs.push(r)}const[Ka,Ja]=Aa(Zs,!0),As=(t,e,n)=>n>32?ka(t,e,n):Ma(t,e,n),Ms=(t,e,n)=>n>32?Fa(t,e,n):Oa(t,e,n);function Ya(t,e=24){const n=new Uint32Array(10);for(let s=24-e;s<24;s++){for(let i=0;i<10;i++)n[i]=t[i]^t[i+10]^t[i+20]^t[i+30]^t[i+40];for(let i=0;i<10;i+=2){const c=(i+8)%10,l=(i+2)%10,f=n[l],d=n[l+1],g=As(f,d,1)^n[c],y=Ms(f,d,1)^n[c+1];for(let N=0;N<50;N+=10)t[i+N]^=g,t[i+N+1]^=y}let r=t[2],a=t[3];for(let i=0;i<24;i++){const c=Xs[i],l=As(r,a,c),f=Ms(r,a,c),d=Vs[i];r=t[d],a=t[d+1],t[d]=l,t[d+1]=f}for(let i=0;i<50;i+=10){for(let c=0;c<10;c++)n[c]=t[i+c];for(let c=0;c<10;c++)t[i+c]^=~n[(c+2)%10]&n[(c+4)%10]}t[0]^=Ka[s],t[1]^=Ja[s]}n.fill(0)}class ns extends Da{constructor(e,n,s,r=!1,a=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=s,this.enableXOF=r,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Cs(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=za(this.state)}keccak(){Ya(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Rs(this);const{blockLen:n,state:s}=this;e=Ys(e);const r=e.length;for(let a=0;a<r;){const i=Math.min(n-this.pos,r-a);for(let c=0;c<i;c++)s[this.pos++]^=e[a++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:s,blockLen:r}=this;e[s]^=n,n&128&&s===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){Rs(this,!1),Js(e),this.finish();const n=this.state,{blockLen:s}=this;for(let r=0,a=e.length;r<a;){this.posOut>=s&&this.keccak();const i=Math.min(s-this.posOut,a-r);e.set(n.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Cs(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Ra(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:s,outputLen:r,rounds:a,enableXOF:i}=this;return e||(e=new ns(n,s,r,i,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=s,e.outputLen=r,e.enableXOF=i,e.destroyed=this.destroyed,e}}const Va=(t,e,n)=>La(()=>new ns(e,t,n)),Xa=Va(1,136,256/8);function me(t,e){const n=e||"hex",s=Xa(Ce(t,{strict:!1})?Ue(t):t);return n==="bytes"?s:ze(s)}const Za=t=>me(Ue(t)),ss=t=>Za(Ca(t));class xt extends M{constructor({address:e}){super(`Address "${e}" is invalid.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}const Qa=/^0x[a-fA-F0-9]{40}$/;function _e(t){return Qa.test(t)}function Ie(t){return typeof t[0]=="string"?rs(t):eo(t)}function eo(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let s=0;for(const r of t)n.set(r,s),s+=r.length;return n}function rs(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function oe(t,e,n,{strict:s}={}){return Ce(t,{strict:!1})?no(t,e,n,{strict:s}):to(t,e,n,{strict:s})}function Qs(t,e){if(typeof e=="number"&&e>0&&e>ie(t)-1)throw new Hs({offset:e,position:"start",size:ie(t)})}function er(t,e,n){if(typeof e=="number"&&typeof n=="number"&&ie(t)!==n-e)throw new Hs({offset:n,position:"end",size:ie(t)})}function to(t,e,n,{strict:s}={}){Qs(t,e);const r=t.slice(e,n);return s&&er(r,e,n),r}function no(t,e,n,{strict:s}={}){Qs(t,e);const r=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&er(r,e,n),r}function Bt(t,e){if(t.length!==e.length)throw new aa({expectedLength:t.length,givenLength:e.length});const n=so({params:t,values:e}),s=os(n);return s.length===0?"0x":s}function so({params:t,values:e}){const n=[];for(let s=0;s<t.length;s++)n.push(as({param:t[s],value:e[s]}));return n}function as({param:t,value:e}){const n=dn(t.type);if(n){const[s,r]=n;return ao(e,{length:s,param:{...t,type:r}})}if(t.type==="tuple")return uo(e,{param:t});if(t.type==="address")return ro(e);if(t.type==="bool")return io(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const s=t.type.startsWith("int");return co(e,{signed:s})}if(t.type.startsWith("bytes"))return oo(e,{param:t});if(t.type==="string")return lo(e);throw new da(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function os(t){let e=0;for(let a=0;a<t.length;a++){const{dynamic:i,encoded:c}=t[a];i?e+=32:e+=ie(c)}const n=[],s=[];let r=0;for(let a=0;a<t.length;a++){const{dynamic:i,encoded:c}=t[a];i?(n.push(X(e+r,{size:32})),s.push(c),r+=ie(c)):n.push(c)}return Ie([...n,...s])}function ro(t){if(!_e(t))throw new xt({address:t});return{dynamic:!1,encoded:Le(t.toLowerCase())}}function ao(t,{length:e,param:n}){const s=e===null;if(!Array.isArray(t))throw new ma(t);if(!s&&t.length!==e)throw new sa({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let r=!1;const a=[];for(let i=0;i<t.length;i++){const c=as({param:n,value:t[i]});c.dynamic&&(r=!0),a.push(c)}if(s||r){const i=os(a);if(s){const c=X(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Ie([c,i]):c}}if(r)return{dynamic:!0,encoded:i}}return{dynamic:!1,encoded:Ie(a.map(({encoded:i})=>i))}}function oo(t,{param:e}){const[,n]=e.type.split("bytes"),s=ie(t);if(!n){let r=t;return s%32!==0&&(r=Le(r,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Ie([Le(X(s,{size:32})),r])}}if(s!==parseInt(n))throw new ra({expectedSize:parseInt(n),value:t});return{dynamic:!1,encoded:Le(t,{dir:"right"})}}function io(t){return{dynamic:!1,encoded:Le(qs(t))}}function co(t,{signed:e}){return{dynamic:!1,encoded:X(t,{size:32,signed:e})}}function lo(t){const e=es(t),n=Math.ceil(ie(e)/32),s=[];for(let r=0;r<n;r++)s.push(Le(oe(e,r*32,(r+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Ie([Le(X(ie(e),{size:32})),...s])}}function uo(t,{param:e}){let n=!1;const s=[];for(let r=0;r<e.components.length;r++){const a=e.components[r],i=Array.isArray(t)?r:a.name,c=as({param:a,value:t[i]});s.push(c),c.dynamic&&(n=!0)}return{dynamic:n,encoded:n?os(s):Ie(s.map(({encoded:r})=>r))}}function dn(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const fo=t=>me(Ue(t)),is=t=>oe(fo(Ks(t)),0,4);function Gt({abi:t,args:e=[],name:n}){const s=Ce(n,{strict:!1}),r=t.filter(i=>s?i.type==="function"?is(i)===n:i.type==="event"?ss(i)===n:!1:"name"in i&&i.name===n);if(r.length===0)return;if(r.length===1)return r[0];let a;for(const i of r){if(!("inputs"in i))continue;if(!e||e.length===0){if(!i.inputs||i.inputs.length===0)return i;continue}if(!i.inputs||i.inputs.length===0||i.inputs.length!==e.length)continue;if(e.every((l,f)=>{const d="inputs"in i&&i.inputs[f];return d?On(l,d):!1})){if(a&&"inputs"in a&&a.inputs){const l=tr(i.inputs,a.inputs,e);if(l)throw new la({abiItem:i,type:l[0]},{abiItem:a,type:l[1]})}a=i}}return a||r[0]}function On(t,e){const n=typeof t,s=e.type;switch(s){case"address":return _e(t);case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return s==="tuple"&&"components"in e?Object.values(e.components).every((r,a)=>On(Object.values(t)[a],r)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(s)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(s)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(s)?Array.isArray(t)&&t.every(r=>On(r,{...e,type:s.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function tr(t,e,n){for(const s in t){const r=t[s],a=e[s];if(r.type==="tuple"&&a.type==="tuple"&&"components"in r&&"components"in a)return tr(r.components,a.components,n[s]);const i=[r.type,a.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")||i.includes("address")&&i.includes("bytes")?_e(n[s]):!1)return i}}function Dt({abi:t,eventName:e,args:n}){var c;let s=t[0];if(e&&(s=Gt({abi:t,args:n,name:e}),!s))throw new js(e,{docsPath:"/docs/contract/encodeEventTopics"});if(s.type!=="event")throw new js(void 0,{docsPath:"/docs/contract/encodeEventTopics"});const r=Fe(s),a=ss(r);let i=[];if(n&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),f=Array.isArray(n)?n:Object.values(n).length>0?(l==null?void 0:l.map(d=>n[d.name]))??[]:[];f.length>0&&(i=(l==null?void 0:l.map((d,g)=>Array.isArray(f[g])?f[g].map((y,N)=>Os({param:d,value:f[g][N]})):f[g]?Os({param:d,value:f[g]}):null))??[])}return[a,...i]}function Os({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return me(Ue(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new ga(t.type);return Bt([t],[e])}function fn(t,{method:e}){var s,r;const n={};return t.transport.type==="fallback"&&((r=(s=t.transport).onResponse)==null||r.call(s,({method:a,response:i,status:c,transport:l})=>{c==="success"&&e===a&&(n[i]=l.request)})),a=>n[a]||t.request}async function nr(t,{address:e,abi:n,args:s,eventName:r,fromBlock:a,strict:i,toBlock:c}){const l=fn(t,{method:"eth_newFilter"}),f=r?Dt({abi:n,args:s,eventName:r}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof a=="bigint"?X(a):a,toBlock:typeof c=="bigint"?X(c):c,topics:f}]});return{abi:n,args:s,eventName:r,id:d,request:l(d),strict:i,type:"event"}}function ve(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}function Ke({abi:t,args:e,functionName:n}){let s=t[0];if(n&&(s=Gt({abi:t,args:e,name:n}),!s))throw new en(n,{docsPath:"/docs/contract/encodeFunctionData"});if(s.type!=="function")throw new en(void 0,{docsPath:"/docs/contract/encodeFunctionData"});const r=Fe(s),a=is(r),i="inputs"in s&&s.inputs?Bt(s.inputs,e??[]):void 0;return rs([a,i??"0x"])}const sr={1:"An `assert` condition failed.",17:"Arithmic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},mo={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},ho={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function cs(t,e){const n=t.substring(2).toLowerCase(),s=me(ke(n),"bytes"),r=n.split("");for(let a=0;a<40;a+=2)s[a>>1]>>4>=8&&r[a]&&(r[a]=r[a].toUpperCase()),(s[a>>1]&15)>=8&&r[a+1]&&(r[a+1]=r[a+1].toUpperCase());return`0x${r.join("")}`}function go(t,e){if(!_e(t))throw new xt({address:t});return cs(t)}function mn(t,e){if(e==="0x"&&t.length>0)throw new ln;if(ie(e)&&ie(e)<32)throw new Qn({data:e,params:t,size:ie(e)});return po({data:e,params:t})}function po({data:t,params:e}){const n=[];let s=0;for(let r=0;r<e.length;r++){if(s>=ie(t))throw new Qn({data:t,params:e,size:ie(t)});const a=e[r],{consumed:i,value:c}=st({data:t,param:a,position:s});n.push(c),s+=i}return n}function st({data:t,param:e,position:n}){const s=dn(e.type);if(s){const[a,i]=s;return yo(t,{length:a,param:{...e,type:i},position:n})}if(e.type==="tuple")return No(t,{param:e,position:n});if(e.type==="string")return To(t,{position:n});if(e.type.startsWith("bytes"))return xo(t,{param:e,position:n});const r=oe(t,n,n+32,{strict:!0});if(e.type.startsWith("uint")||e.type.startsWith("int"))return vo(r,{param:e});if(e.type==="address")return bo(r);if(e.type==="bool")return wo(r);throw new fa(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function bo(t){return{consumed:32,value:cs(oe(t,-20))}}function yo(t,{param:e,length:n,position:s}){if(!n){const i=le(oe(t,s,s+32,{strict:!0})),c=le(oe(t,i,i+32,{strict:!0}));let l=0;const f=[];for(let d=0;d<c;++d){const g=st({data:oe(t,i+32),param:e,position:l});l+=g.consumed,f.push(g.value)}return{value:f,consumed:32}}if(tn(e)){const i=dn(e.type),c=!(i!=null&&i[0]);let l=0;const f=[];for(let d=0;d<n;++d){const g=le(oe(t,s,s+32,{strict:!0})),y=st({data:oe(t,g),param:e,position:c?l:d*32});l+=y.consumed,f.push(y.value)}return{value:f,consumed:32}}let r=0;const a=[];for(let i=0;i<n;++i){const c=st({data:t,param:e,position:s+r});r+=c.consumed,a.push(c.value)}return{value:a,consumed:r}}function wo(t){return{consumed:32,value:xa(t)}}function xo(t,{param:e,position:n}){const[s,r]=e.type.split("bytes");if(!r){const i=le(oe(t,n,n+32,{strict:!0})),c=le(oe(t,i,i+32,{strict:!0}));return c===0?{consumed:32,value:"0x"}:{consumed:32,value:oe(t,i+32,i+32+c,{strict:!0})}}return{consumed:32,value:oe(t,n,n+parseInt(r),{strict:!0})}}function vo(t,{param:e}){const n=e.type.startsWith("int");return{consumed:32,value:parseInt(e.type.split("int")[1]||"256")>48?un(t,{signed:n}):le(t,{signed:n})}}function To(t,{position:e}){const n=le(oe(t,e,e+32,{strict:!0})),s=le(oe(t,n,n+32,{strict:!0}));return s===0?{consumed:32,value:""}:{consumed:32,value:va(nt(oe(t,n+32,n+32+s,{strict:!0})))}}function No(t,{param:e,position:n}){const s=e.components.length===0||e.components.some(({name:i})=>!i),r=s?[]:{};let a=0;if(tn(e)){const i=le(oe(t,n,n+32,{strict:!0}));for(let c=0;c<e.components.length;++c){const l=e.components[c],f=st({data:oe(t,i),param:l,position:a});a+=f.consumed,r[s?c:l==null?void 0:l.name]=f.value}return{consumed:32,value:r}}for(let i=0;i<e.components.length;++i){const c=e.components[i],l=st({data:t,param:c,position:n+a});a+=l.consumed,r[s?i:c==null?void 0:c.name]=l.value}return{consumed:a,value:r}}function tn(t){var s;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(s=t.components)==null?void 0:s.some(tn);const n=dn(t.type);return!!(n&&tn({...t,type:n[1]}))}function Po({abi:t,data:e}){const n=oe(e,0,4);if(n==="0x")throw new ln;const r=[...t||[],mo,ho].find(a=>a.type==="error"&&n===is(Fe(a)));if(!r)throw new _s(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:r,args:"inputs"in r&&r.inputs&&r.inputs.length>0?mn(r.inputs,oe(e,4)):void 0,errorName:r.name}}const he=(t,e,n)=>JSON.stringify(t,(s,r)=>{const a=typeof r=="bigint"?r.toString():r;return typeof e=="function"?e(s,a):a},n);function rr({abiItem:t,args:e,includeFunctionName:n=!0,includeName:s=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((r,a)=>`${s&&r.name?`${r.name}: `:""}${typeof e[a]=="object"?he(e[a]):e[a]}`).join(", ")})`}const Eo={gwei:9,wei:18},ar={ether:-9,wei:9};function or(t,e){let n=t.toString();const s=n.startsWith("-");s&&(n=n.slice(1)),n=n.padStart(e,"0");let[r,a]=[n.slice(0,n.length-e),n.slice(n.length-e)];return a=a.replace(/(0+)$/,""),`${s?"-":""}${r||"0"}${a?`.${a}`:""}`}function ls(t,e="wei"){return or(t,Eo[e])}function pe(t,e="wei"){return or(t,ar[e])}function Lt(t){const e=Object.entries(t).map(([s,r])=>r===void 0||r===!1?null:[s,r]).filter(Boolean),n=e.reduce((s,[r])=>Math.max(s,r.length),0);return e.map(([s,r])=>`  ${`${s}:`.padEnd(n+1)}  ${r}`).join(`
`)}class jo extends M{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeConflictError"})}}class So extends M{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Lt(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- a Legacy Transaction with `gasPrice`"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSerializableTransactionError"})}}class Co extends M{constructor(e,{account:n,docsPath:s,chain:r,data:a,gas:i,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:d,to:g,value:y}){var w;const N=Lt({chain:r&&`${r==null?void 0:r.name} (id: ${r==null?void 0:r.id})`,from:n==null?void 0:n.address,to:g,value:typeof y<"u"&&`${ls(y)} ${((w=r==null?void 0:r.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:a,gas:i,gasPrice:typeof c<"u"&&`${pe(c)} gwei`,maxFeePerGas:typeof l<"u"&&`${pe(l)} gwei`,maxPriorityFeePerGas:typeof f<"u"&&`${pe(f)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",N].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionExecutionError"}),this.cause=e}}class ir extends M{constructor({blockHash:e,blockNumber:n,blockTag:s,hash:r,index:a}){let i="Transaction";s&&a!==void 0&&(i=`Transaction at block time "${s}" at index "${a}"`),e&&a!==void 0&&(i=`Transaction at block hash "${e}" at index "${a}"`),n&&a!==void 0&&(i=`Transaction at block number "${n}" at index "${a}"`),r&&(i=`Transaction with hash "${r}"`),super(`${i} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionNotFoundError"})}}class cr extends M{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionReceiptNotFoundError"})}}class Ro extends M{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WaitForTransactionReceiptTimeoutError"})}}class lr extends M{constructor(e,{account:n,docsPath:s,chain:r,data:a,gas:i,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:d,to:g,value:y}){var P;const N=n?ve(n):void 0,w=Lt({from:N==null?void 0:N.address,to:g,value:typeof y<"u"&&`${ls(y)} ${((P=r==null?void 0:r.nativeCurrency)==null?void 0:P.symbol)||"ETH"}`,data:a,gas:i,gasPrice:typeof c<"u"&&`${pe(c)} gwei`,maxFeePerGas:typeof l<"u"&&`${pe(l)} gwei`,maxPriorityFeePerGas:typeof f<"u"&&`${pe(f)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",w].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CallExecutionError"}),this.cause=e}}class $o extends M{constructor(e,{abi:n,args:s,contractAddress:r,docsPath:a,functionName:i,sender:c}){const l=Gt({abi:n,args:s,name:i}),f=l?rr({abiItem:l,args:s,includeFunctionName:!1,includeName:!1}):void 0,d=l?Fe(l,{includeName:!0}):void 0,g=Lt({address:r&&ea(r),function:d,args:f&&f!=="()"&&`${[...Array((i==null?void 0:i.length)??0).keys()].map(()=>" ").join("")}${f}`,sender:c});super(e.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:e,docsPath:a,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Contract Call:",g].filter(Boolean)}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionExecutionError"}),this.abi=n,this.args=s,this.cause=e,this.contractAddress=r,this.functionName=i,this.sender=c}}class kn extends M{constructor({abi:e,data:n,functionName:s,message:r}){let a,i,c,l;if(n&&n!=="0x")try{i=Po({abi:e,data:n});const{abiItem:d,errorName:g,args:y}=i;if(g==="Error")l=y[0];else if(g==="Panic"){const[N]=y;l=sr[N]}else{const N=d?Fe(d,{includeName:!0}):void 0,w=d&&y?rr({abiItem:d,args:y,includeFunctionName:!1,includeName:!1}):void 0;c=[N?`Error: ${N}`:"",w&&w!=="()"?`       ${[...Array((g==null?void 0:g.length)??0).keys()].map(()=>" ").join("")}${w}`:""]}}catch(d){a=d}else r&&(l=r);let f;a instanceof _s&&(f=a.signature,c=[`Unable to decode signature "${f}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${f}.`]),super(l&&l!=="execution reverted"||f?[`The contract function "${s}" reverted with the following ${f?"signature":"reason"}:`,l||f].join(`
`):`The contract function "${s}" reverted.`,{cause:a,metaMessages:c}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=i,this.reason=l,this.signature=f}}class Ao extends M{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionZeroDataError"})}}class us extends M{constructor({data:e,message:n}){super(n||""),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RawContractError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class yt extends M{constructor({body:e,details:n,headers:s,status:r,url:a}){super("HTTP request failed.",{details:n,metaMessages:[r&&`Status: ${r}`,`URL: ${cn(a)}`,e&&`Request body: ${he(e)}`].filter(Boolean)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=r,this.url=a}}class Mo extends M{constructor({body:e,details:n,url:s}){super("WebSocket request failed.",{details:n,metaMessages:[`URL: ${cn(s)}`,`Request body: ${he(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebSocketRequestError"})}}class ur extends M{constructor({body:e,error:n,url:s}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${cn(s)}`,`Request body: ${he(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code}}class Fn extends M{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${cn(n)}`,`Request body: ${he(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TimeoutError"})}}const Oo=-1;class be extends M{constructor(e,{code:n,docsPath:s,metaMessages:r,shortMessage:a}){super(a,{cause:e,docsPath:s,metaMessages:r||(e==null?void 0:e.metaMessages)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.code=e instanceof ur?e.code:n??Oo}}class lt extends be{constructor(e,n){super(e,n),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class vt extends be{constructor(e){super(e,{code:vt.code,shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ParseRpcError"})}}Object.defineProperty(vt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Tt extends be{constructor(e){super(e,{code:Tt.code,shortMessage:"JSON is not a valid request object."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidRequestRpcError"})}}Object.defineProperty(Tt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Nt extends be{constructor(e){super(e,{code:Nt.code,shortMessage:"The method does not exist / is not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotFoundRpcError"})}}Object.defineProperty(Nt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Pt extends be{constructor(e){super(e,{code:Pt.code,shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParamsRpcError"})}}Object.defineProperty(Pt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class at extends be{constructor(e){super(e,{code:at.code,shortMessage:"An internal error was received."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InternalRpcError"})}}Object.defineProperty(at,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Qe extends be{constructor(e){super(e,{code:Qe.code,shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidInputRpcError"})}}Object.defineProperty(Qe,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Et extends be{constructor(e){super(e,{code:Et.code,shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Et,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class jt extends be{constructor(e){super(e,{code:jt.code,shortMessage:"Requested resource not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceUnavailableRpcError"})}}Object.defineProperty(jt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class St extends be{constructor(e){super(e,{code:St.code,shortMessage:"Transaction creation failed."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionRejectedRpcError"})}}Object.defineProperty(St,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Ct extends be{constructor(e){super(e,{code:Ct.code,shortMessage:"Method is not implemented."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotSupportedRpcError"})}}Object.defineProperty(Ct,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Rt extends be{constructor(e){super(e,{code:Rt.code,shortMessage:"Request exceeds defined limit."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"LimitExceededRpcError"})}}Object.defineProperty(Rt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class $t extends be{constructor(e){super(e,{code:$t.code,shortMessage:"Version of JSON-RPC protocol is not supported."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"JsonRpcVersionUnsupportedError"})}}Object.defineProperty($t,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class rt extends lt{constructor(e){super(e,{code:rt.code,shortMessage:"User rejected the request."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UserRejectedRequestError"})}}Object.defineProperty(rt,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class At extends lt{constructor(e){super(e,{code:At.code,shortMessage:"The requested method and/or account has not been authorized by the user."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnauthorizedProviderError"})}}Object.defineProperty(At,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Mt extends lt{constructor(e){super(e,{code:Mt.code,shortMessage:"The Provider does not support the requested method."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnsupportedProviderMethodError"})}}Object.defineProperty(Mt,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Ot extends lt{constructor(e){super(e,{code:Ot.code,shortMessage:"The Provider is disconnected from all chains."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderDisconnectedError"})}}Object.defineProperty(Ot,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class kt extends lt{constructor(e){super(e,{code:kt.code,shortMessage:"The Provider is not connected to the requested chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDisconnectedError"})}}Object.defineProperty(kt,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ft extends lt{constructor(e){super(e,{code:Ft.code,shortMessage:"An error occurred when attempting to switch chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainError"})}}Object.defineProperty(Ft,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class ko extends be{constructor(e){super(e,{shortMessage:"An unknown RPC error occurred."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownRpcError"})}}const Fo=3;function It(t,{abi:e,address:n,args:s,docsPath:r,functionName:a,sender:i}){const{code:c,data:l,message:f,shortMessage:d}=t instanceof us?t:t instanceof M?t.walk(y=>"data"in y)||t.walk():{},g=t instanceof ln?new Ao({functionName:a}):[Fo,at.code].includes(c)&&(l||f||d)?new kn({abi:e,data:typeof l=="object"?l.data:l,functionName:a,message:d??f}):t;return new $o(g,{abi:e,args:s,contractAddress:n,docsPath:r,functionName:a,sender:i})}class ut extends M{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the WalletClient."].join(`
`),{docsPath:e,docsSlug:"account"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AccountNotFoundError"})}}class Io extends M{constructor(e,{account:n,docsPath:s,chain:r,data:a,gas:i,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:d,to:g,value:y}){var w;const N=Lt({from:n==null?void 0:n.address,to:g,value:typeof y<"u"&&`${ls(y)} ${((w=r==null?void 0:r.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:a,gas:i,gasPrice:typeof c<"u"&&`${pe(c)} gwei`,maxFeePerGas:typeof l<"u"&&`${pe(l)} gwei`,maxPriorityFeePerGas:typeof f<"u"&&`${pe(f)} gwei`,nonce:d});super(e.shortMessage,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",N].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EstimateGasExecutionError"}),this.cause=e}}class tt extends M{constructor({cause:e,message:n}={}){var r;const s=(r=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:r.replace("execution reverted","");super(`Execution reverted ${s?`with reason: ${s}`:"for an unknown reason"}.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ExecutionRevertedError"})}}Object.defineProperty(tt,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(tt,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class nn extends M{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${pe(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooHigh"})}}Object.defineProperty(nn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class In extends M{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${pe(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooLow"})}}Object.defineProperty(In,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class zn extends M{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooHighError"})}}Object.defineProperty(zn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Bn extends M{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooLowError"})}}Object.defineProperty(Bn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Gn extends M{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceMaxValueError"})}}Object.defineProperty(Gn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Dn extends M{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InsufficientFundsError"})}}Object.defineProperty(Dn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds/});class Ln extends M{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooHighError"})}}Object.defineProperty(Ln,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Un extends M{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooLowError"})}}Object.defineProperty(Un,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class _n extends M{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionTypeNotSupportedError"})}}Object.defineProperty(_n,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class sn extends M{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:s}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${pe(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${s?` = ${pe(s)} gwei`:""}).`].join(`
`),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TipAboveFeeCapError"})}}Object.defineProperty(sn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class hn extends M{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownNodeError"})}}function ds(t,e){const n=(t.details||"").toLowerCase(),s=t.walk(r=>r.code===tt.code);return s instanceof M?new tt({cause:t,message:s.details}):tt.nodeMessage.test(n)?new tt({cause:t,message:t.details}):nn.nodeMessage.test(n)?new nn({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):In.nodeMessage.test(n)?new In({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):zn.nodeMessage.test(n)?new zn({cause:t,nonce:e==null?void 0:e.nonce}):Bn.nodeMessage.test(n)?new Bn({cause:t,nonce:e==null?void 0:e.nonce}):Gn.nodeMessage.test(n)?new Gn({cause:t,nonce:e==null?void 0:e.nonce}):Dn.nodeMessage.test(n)?new Dn({cause:t}):Ln.nodeMessage.test(n)?new Ln({cause:t,gas:e==null?void 0:e.gas}):Un.nodeMessage.test(n)?new Un({cause:t,gas:e==null?void 0:e.gas}):_n.nodeMessage.test(n)?new _n({cause:t}):sn.nodeMessage.test(n)?new sn({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new hn({cause:t})}function zo(t,{docsPath:e,...n}){const s=(()=>{const r=ds(t,n);return r instanceof hn?t:r})();return new Io(s,{docsPath:e,...n})}function fs(t,{format:e}){if(!e)return{};const n={};function s(a){const i=Object.keys(a);for(const c of i)c in t&&(n[c]=t[c]),a[c]&&typeof a[c]=="object"&&!Array.isArray(a[c])&&s(a[c])}const r=e(t||{});return s(r),n}const Bo={legacy:"0x0",eip2930:"0x1",eip1559:"0x2"};function gn(t){return{...t,gas:typeof t.gas<"u"?X(t.gas):void 0,gasPrice:typeof t.gasPrice<"u"?X(t.gasPrice):void 0,maxFeePerGas:typeof t.maxFeePerGas<"u"?X(t.maxFeePerGas):void 0,maxPriorityFeePerGas:typeof t.maxPriorityFeePerGas<"u"?X(t.maxPriorityFeePerGas):void 0,nonce:typeof t.nonce<"u"?X(t.nonce):void 0,type:typeof t.type<"u"?Bo[t.type]:void 0,value:typeof t.value<"u"?X(t.value):void 0}}function Ut(t){const{account:e,gasPrice:n,maxFeePerGas:s,maxPriorityFeePerGas:r,to:a}=t,i=e?ve(e):void 0;if(i&&!_e(i.address))throw new xt({address:i.address});if(a&&!_e(a))throw new xt({address:a});if(typeof n<"u"&&(typeof s<"u"||typeof r<"u"))throw new jo;if(s&&s>2n**256n-1n)throw new nn({maxFeePerGas:s});if(r&&s&&r>s)throw new sn({maxFeePerGas:s,maxPriorityFeePerGas:r})}class Go extends M{constructor(){super("`baseFeeMultiplier` must be greater than 1."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseFeeScalarError"})}}class ms extends M{constructor(){super("Chain does not support EIP-1559 fees."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Eip1559FeesNotSupportedError"})}}class Do extends M{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${pe(e)} gwei).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MaxFeePerGasTooLowError"})}}class dr extends M{constructor({blockHash:e,blockNumber:n}){let s="Block";e&&(s=`Block at hash "${e}"`),n&&(s=`Block at number "${n}"`),super(`${s} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BlockNotFoundError"})}}const fr={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"};function mr(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?le(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?le(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?fr[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e}function hr(t){var n;const e=(n=t.transactions)==null?void 0:n.map(s=>typeof s=="string"?s:mr(s));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,difficulty:t.difficulty?BigInt(t.difficulty):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function He(t,{blockHash:e,blockNumber:n,blockTag:s,includeTransactions:r}={}){var d,g,y;const a=s??"latest",i=r??!1,c=n!==void 0?X(n):void 0;let l=null;if(e?l=await t.request({method:"eth_getBlockByHash",params:[e,i]}):l=await t.request({method:"eth_getBlockByNumber",params:[c||a,i]}),!l)throw new dr({blockHash:e,blockNumber:n});return(((y=(g=(d=t.chain)==null?void 0:d.formatters)==null?void 0:g.block)==null?void 0:y.format)||hr)(l)}async function hs(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function Lo(t,e){return gr(t,e)}async function gr(t,e){var a,i,c;const{block:n,chain:s=t.chain,request:r}=e||{};if(typeof((a=s==null?void 0:s.fees)==null?void 0:a.defaultPriorityFee)=="function"){const l=n||await q(t,He,"getBlock")({});return s.fees.defaultPriorityFee({block:l,client:t,request:r})}if(typeof((i=s==null?void 0:s.fees)==null?void 0:i.defaultPriorityFee)<"u")return(c=s==null?void 0:s.fees)==null?void 0:c.defaultPriorityFee;try{const l=await t.request({method:"eth_maxPriorityFeePerGas"});return un(l)}catch{const[l,f]=await Promise.all([n?Promise.resolve(n):q(t,He,"getBlock")({}),q(t,hs,"getGasPrice")({})]);if(typeof l.baseFeePerGas!="bigint")throw new ms;const d=f-l.baseFeePerGas;return d<0n?0n:d}}async function Uo(t,e){return Hn(t,e)}async function Hn(t,e){var y,N;const{block:n,chain:s=t.chain,request:r,type:a="eip1559"}=e||{},i=await(async()=>{var w,P;return typeof((w=s==null?void 0:s.fees)==null?void 0:w.baseFeeMultiplier)=="function"?s.fees.baseFeeMultiplier({block:n,client:t,request:r}):((P=s==null?void 0:s.fees)==null?void 0:P.baseFeeMultiplier)??1.2})();if(i<1)throw new Go;const l=10**(((y=i.toString().split(".")[1])==null?void 0:y.length)??0),f=w=>w*BigInt(Math.ceil(i*l))/BigInt(l),d=n||await q(t,He,"getBlock")({});if(typeof((N=s==null?void 0:s.fees)==null?void 0:N.estimateFeesPerGas)=="function")return s.fees.estimateFeesPerGas({block:n,client:t,multiply:f,request:r,type:a});if(a==="eip1559"){if(typeof d.baseFeePerGas!="bigint")throw new ms;const w=r!=null&&r.maxPriorityFeePerGas?r.maxPriorityFeePerGas:await gr(t,{block:d,chain:s,request:r}),P=f(d.baseFeePerGas);return{maxFeePerGas:(r==null?void 0:r.maxFeePerGas)??P+w,maxPriorityFeePerGas:w}}return{gasPrice:(r==null?void 0:r.gasPrice)??f(await q(t,hs,"getGasPrice")({}))}}async function pr(t,{address:e,blockTag:n="latest",blockNumber:s}){const r=await t.request({method:"eth_getTransactionCount",params:[e,s?X(s):n]});return le(r)}function _o(t){if(t.type)return t.type;if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new So({transaction:t})}async function pn(t,e){const{account:n=t.account,chain:s,gas:r,nonce:a,type:i}=e;if(!n)throw new ut;const c=ve(n),l=await q(t,He,"getBlock")({blockTag:"latest"}),f={...e,from:c.address};if(typeof a>"u"&&(f.nonce=await q(t,pr,"getTransactionCount")({address:c.address,blockTag:"pending"})),typeof i>"u")try{f.type=_o(f)}catch{f.type=typeof l.baseFeePerGas=="bigint"?"eip1559":"legacy"}if(f.type==="eip1559"){const{maxFeePerGas:d,maxPriorityFeePerGas:g}=await Hn(t,{block:l,chain:s,request:f});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<g)throw new Do({maxPriorityFeePerGas:g});f.maxPriorityFeePerGas=g,f.maxFeePerGas=d}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new ms;const{gasPrice:d}=await Hn(t,{block:l,chain:s,request:f,type:"legacy"});f.gasPrice=d}return typeof r>"u"&&(f.gas=await q(t,gs,"estimateGas")({...f,account:{address:c.address,type:"json-rpc"}})),Ut(f),f}async function gs(t,e){var r,a,i;const n=e.account??t.account;if(!n)throw new ut({docsPath:"/docs/actions/public/estimateGas"});const s=ve(n);try{const{accessList:c,blockNumber:l,blockTag:f,data:d,gas:g,gasPrice:y,maxFeePerGas:N,maxPriorityFeePerGas:w,nonce:P,to:j,value:x,...T}=s.type==="local"?await pn(t,e):e,S=(l?X(l):void 0)||f;Ut(e);const k=(i=(a=(r=t.chain)==null?void 0:r.formatters)==null?void 0:a.transactionRequest)==null?void 0:i.format,A=(k||gn)({...fs(T,{format:k}),from:s.address,accessList:c,data:d,gas:g,gasPrice:y,maxFeePerGas:N,maxPriorityFeePerGas:w,nonce:P,to:j,value:x}),K=await t.request({method:"eth_estimateGas",params:S?[A,S]:[A]});return BigInt(K)}catch(c){throw zo(c,{...e,account:s,chain:t.chain})}}async function Ho(t,{abi:e,address:n,args:s,functionName:r,...a}){const i=Ke({abi:e,args:s,functionName:r});try{return await q(t,gs,"estimateGas")({data:i,to:n,...a})}catch(c){const l=a.account?ve(a.account):void 0;throw It(c,{abi:e,address:n,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:r,sender:l==null?void 0:l.address})}}const ks="/docs/contract/decodeEventLog";function _t({abi:t,data:e,strict:n,topics:s}){const r=n??!0,[a,...i]=s;if(!a)throw new oa({docsPath:ks});const c=t.find(w=>w.type==="event"&&a===ss(Fe(w)));if(!(c&&"name"in c)||c.type!=="event")throw new ia(a,{docsPath:ks});const{name:l,inputs:f}=c,d=f==null?void 0:f.some(w=>!("name"in w&&w.name));let g=d?[]:{};const y=f.filter(w=>"indexed"in w&&w.indexed);for(let w=0;w<y.length;w++){const P=y[w],j=i[w];if(!j)throw new it({abiItem:c,param:P});g[P.name||w]=Wo({param:P,value:j})}const N=f.filter(w=>!("indexed"in w&&w.indexed));if(N.length>0){if(e&&e!=="0x")try{const w=mn(N,e);if(w)if(d)g=[...g,...w];else for(let P=0;P<N.length;P++)g[N[P].name]=w[P]}catch(w){if(r)throw w instanceof Qn?new Ze({abiItem:c,data:w.data,params:w.params,size:w.size}):w}else if(r)throw new Ze({abiItem:c,data:"0x",params:N,size:0})}return{eventName:l,args:Object.values(g).length>0?g:void 0}}function Wo({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(mn([t],e)||[])[0]}function Pe(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function ps(t,{address:e,blockHash:n,fromBlock:s,toBlock:r,event:a,events:i,args:c,strict:l}={}){const f=l??!1,d=i??(a?[a]:void 0);let g=[];d&&(g=[d.flatMap(N=>Dt({abi:[N],eventName:N.name,args:c}))],a&&(g=g[0]));let y;return n?y=await t.request({method:"eth_getLogs",params:[{address:e,topics:g,blockHash:n}]}):y=await t.request({method:"eth_getLogs",params:[{address:e,topics:g,fromBlock:typeof s=="bigint"?X(s):s,toBlock:typeof r=="bigint"?X(r):r}]}),y.map(N=>{var w;try{const{eventName:P,args:j}=d?_t({abi:d,data:N.data,topics:N.topics,strict:f}):{eventName:void 0,args:void 0};return Pe(N,{args:j,eventName:P})}catch(P){let j,x;if(P instanceof Ze||P instanceof it){if(f)return;j=P.abiItem.name,x=(w=P.abiItem.inputs)==null?void 0:w.some(T=>!("name"in T&&T.name))}return Pe(N,{args:x?[]:{},eventName:j})}}).filter(Boolean)}async function br(t,{abi:e,address:n,args:s,blockHash:r,eventName:a,fromBlock:i,toBlock:c,strict:l}){const f=a?Gt({abi:e,name:a}):void 0,d=f?void 0:e.filter(g=>g.type==="event");return q(t,ps,"getLogs")({address:n,args:s,blockHash:r,event:f,events:d,fromBlock:i,toBlock:c,strict:l})}const jn="/docs/contract/decodeFunctionResult";function dt({abi:t,args:e,functionName:n,data:s}){let r=t[0];if(n&&(r=Gt({abi:t,args:e,name:n}),!r))throw new en(n,{docsPath:jn});if(r.type!=="function")throw new en(void 0,{docsPath:jn});if(!r.outputs)throw new ca(r.name,{docsPath:jn});const a=mn(r.outputs,s);if(a&&a.length>1)return a;if(a&&a.length===1)return a[0]}const Wn=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],yr=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"}],wr=[...yr,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],qo=[...yr,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],Fs=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],Is=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Ko=[{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"}],Jo="0x82ad56cb";class qn extends M{constructor({blockNumber:e,chain:n,contract:s}){super(`Chain "${n.name}" does not support contract "${s.name}".`,{metaMessages:["This could be due to any of the following:",...e&&s.blockCreated&&s.blockCreated>e?[`- The contract "${s.name}" was not deployed until block ${s.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${s.name}" configured.`]]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDoesNotSupportContract"})}}class Yo extends M{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainMismatchError"})}}class Vo extends M{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotFoundError"})}}class xr extends M{constructor(){super("No chain was provided to the Client."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ClientChainNotConfiguredError"})}}function ft({blockNumber:t,chain:e,contract:n}){var r;const s=(r=e==null?void 0:e.contracts)==null?void 0:r[n];if(!s)throw new qn({chain:e,contract:{name:n}});if(t&&s.blockCreated&&s.blockCreated>t)throw new qn({blockNumber:t,chain:e,contract:{name:n,blockCreated:s.blockCreated}});return s.address}function Xo(t,{docsPath:e,...n}){const s=(()=>{const r=ds(t,n);return r instanceof hn?t:r})();return new lr(s,{docsPath:e,...n})}const Sn=new Map;function vr({fn:t,id:e,shouldSplitBatch:n,wait:s=0,sort:r}){const a=async()=>{const d=l();i();const g=d.map(({args:y})=>y);g.length!==0&&t(g).then(y=>{var N;r&&Array.isArray(y)&&y.sort(r);for(let w=0;w<d.length;w++){const{pendingPromise:P}=d[w];(N=P.resolve)==null||N.call(P,[y[w],y])}}).catch(y=>{var N;for(let w=0;w<d.length;w++){const{pendingPromise:P}=d[w];(N=P.reject)==null||N.call(P,y)}})},i=()=>Sn.delete(e),c=()=>l().map(({args:d})=>d),l=()=>Sn.get(e)||[],f=d=>Sn.set(e,[...l(),d]);return{flush:i,async schedule(d){const g={},y=new Promise((P,j)=>{g.resolve=P,g.reject=j});return(n==null?void 0:n([...c(),d]))&&a(),l().length>0?(f({args:d,pendingPromise:g}),y):(f({args:d,pendingPromise:g}),setTimeout(a,s),y)}}}async function bn(t,e){var x,T,v,S;const{account:n=t.account,batch:s=!!((x=t.batch)!=null&&x.multicall),blockNumber:r,blockTag:a="latest",accessList:i,data:c,gas:l,gasPrice:f,maxFeePerGas:d,maxPriorityFeePerGas:g,nonce:y,to:N,value:w,...P}=e,j=n?ve(n):void 0;try{Ut(e);const $=(r?X(r):void 0)||a,A=(S=(v=(T=t.chain)==null?void 0:T.formatters)==null?void 0:v.transactionRequest)==null?void 0:S.format,U=(A||gn)({...fs(P,{format:A}),from:j==null?void 0:j.address,accessList:i,data:c,gas:l,gasPrice:f,maxFeePerGas:d,maxPriorityFeePerGas:g,nonce:y,to:N,value:w});if(s&&Zo({request:U}))try{return await Qo(t,{...U,blockNumber:r,blockTag:a})}catch(Z){if(!(Z instanceof xr)&&!(Z instanceof qn))throw Z}const L=await t.request({method:"eth_call",params:$?[U,$]:[U]});return L==="0x"?{data:void 0}:{data:L}}catch(k){const $=ei(k),{offchainLookup:A,offchainLookupSignature:K}=await Wr(async()=>{const{offchainLookup:U,offchainLookupSignature:L}=await import("./ccip-d7If2SM1.js");return{offchainLookup:U,offchainLookupSignature:L}},__vite__mapDeps([0,1,2]));if(($==null?void 0:$.slice(0,10))===K&&N)return{data:await A(t,{data:$,to:N})};throw Xo(k,{...e,account:j,chain:t.chain})}}function Zo({request:t}){const{data:e,to:n,...s}=t;return!(!e||e.startsWith(Jo)||!n||Object.values(s).filter(r=>typeof r<"u").length>0)}async function Qo(t,e){var P;const{batchSize:n=1024,wait:s=0}=typeof((P=t.batch)==null?void 0:P.multicall)=="object"?t.batch.multicall:{},{blockNumber:r,blockTag:a="latest",data:i,multicallAddress:c,to:l}=e;let f=c;if(!f){if(!t.chain)throw new xr;f=ft({blockNumber:r,chain:t.chain,contract:"multicall3"})}const g=(r?X(r):void 0)||a,{schedule:y}=vr({id:`${t.uid}.${g}`,wait:s,shouldSplitBatch(j){return j.reduce((T,{data:v})=>T+(v.length-2),0)>n*2},fn:async j=>{const x=j.map(S=>({allowFailure:!0,callData:S.data,target:S.to})),T=Ke({abi:Wn,args:[x],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:T,to:f},g]});return dt({abi:Wn,args:[x],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:N,success:w}]=await y({data:i,to:l});if(!w)throw new us({data:N});return N==="0x"?{data:void 0}:{data:N}}function ei(t){if(!(t instanceof M))return;const e=t.walk();return typeof e.data=="object"?e.data.data:e.data}async function We(t,{abi:e,address:n,args:s,functionName:r,...a}){const i=Ke({abi:e,args:s,functionName:r});try{const{data:c}=await q(t,bn,"call")({data:i,to:n,...a});return dt({abi:e,args:s,functionName:r,data:c||"0x"})}catch(c){throw It(c,{abi:e,address:n,args:s,docsPath:"/docs/contract/readContract",functionName:r})}}async function ti(t,{abi:e,address:n,args:s,dataSuffix:r,functionName:a,...i}){const c=i.account?ve(i.account):void 0,l=Ke({abi:e,args:s,functionName:a});try{const{data:f}=await q(t,bn,"call")({batch:!1,data:`${l}${r?r.replace("0x",""):""}`,to:n,...i});return{result:dt({abi:e,args:s,functionName:a,data:f||"0x"}),request:{abi:e,address:n,args:s,dataSuffix:r,functionName:a,...i}}}catch(f){throw It(f,{abi:e,address:n,args:s,docsPath:"/docs/contract/simulateContract",functionName:a,sender:c==null?void 0:c.address})}}const Cn=new Map,zs=new Map;let ni=0;function mt(t,e,n){const s=++ni,r=()=>Cn.get(t)||[],a=()=>{const d=r();Cn.set(t,d.filter(g=>g.id!==s))},i=()=>{const d=zs.get(t);r().length===1&&d&&d(),a()},c=r();if(Cn.set(t,[...c,{id:s,fns:e}]),c&&c.length>0)return i;const l={};for(const d in e)l[d]=(...g)=>{var N,w;const y=r();if(y.length!==0)for(const P of y)(w=(N=P.fns)[d])==null||w.call(N,...g)};const f=n(l);return typeof f=="function"&&zs.set(t,f),i}async function Kn(t){return new Promise(e=>setTimeout(e,t))}function Ht(t,{emitOnBegin:e,initialWaitTime:n,interval:s}){let r=!0;const a=()=>r=!1;return(async()=>{let c;e&&(c=await t({unpoll:a}));const l=await(n==null?void 0:n(c))??s;await Kn(l);const f=async()=>{r&&(await t({unpoll:a}),await Kn(s),f())};f()})(),a}const si=new Map,ri=new Map;function ai(t){const e=(r,a)=>({clear:()=>a.delete(r),get:()=>a.get(r),set:i=>a.set(r,i)}),n=e(t,si),s=e(t,ri);return{clear:()=>{n.clear(),s.clear()},promise:n,response:s}}async function oi(t,{cacheKey:e,cacheTime:n=1/0}){const s=ai(e),r=s.response.get();if(r&&n>0&&new Date().getTime()-r.created.getTime()<n)return r.data;let a=s.promise.get();a||(a=t(),s.promise.set(a));try{const i=await a;return s.response.set({created:new Date,data:i}),i}finally{s.promise.clear()}}const ii=t=>`blockNumber.${t}`;async function Wt(t,{cacheTime:e=t.cacheTime,maxAge:n}={}){const s=await oi(()=>t.request({method:"eth_blockNumber"}),{cacheKey:ii(t.uid),cacheTime:n??e});return BigInt(s)}async function yn(t,{filter:e}){const n="strict"in e&&e.strict;return(await e.request({method:"eth_getFilterChanges",params:[e.id]})).map(r=>{var a;if(typeof r=="string")return r;try{const{eventName:i,args:c}="abi"in e&&e.abi?_t({abi:e.abi,data:r.data,topics:r.topics,strict:n}):{eventName:void 0,args:void 0};return Pe(r,{args:c,eventName:i})}catch(i){let c,l;if(i instanceof Ze||i instanceof it){if("strict"in e&&e.strict)return;c=i.abiItem.name,l=(a=i.abiItem.inputs)==null?void 0:a.some(f=>!("name"in f&&f.name))}return Pe(r,{args:l?[]:{},eventName:c})}}).filter(Boolean)}async function wn(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function ci(t,{abi:e,address:n,args:s,batch:r=!0,eventName:a,onError:i,onLogs:c,poll:l,pollingInterval:f=t.pollingInterval,strict:d}){return(typeof l<"u"?l:t.transport.type!=="webSocket")?(()=>{const w=he(["watchContractEvent",n,s,r,t.uid,a,f]),P=d??!1;return mt(w,{onLogs:c,onError:i},j=>{let x,T,v=!1;const S=Ht(async()=>{var k;if(!v){try{T=await q(t,nr,"createContractEventFilter")({abi:e,address:n,args:s,eventName:a,strict:P})}catch{}v=!0;return}try{let $;if(T)$=await q(t,yn,"getFilterChanges")({filter:T});else{const A=await q(t,Wt,"getBlockNumber")({});x&&x!==A?$=await q(t,br,"getContractEvents")({abi:e,address:n,args:s,eventName:a,fromBlock:x+1n,toBlock:A,strict:P}):$=[],x=A}if($.length===0)return;if(r)j.onLogs($);else for(const A of $)j.onLogs([A])}catch($){T&&$ instanceof Qe&&(v=!1),(k=j.onError)==null||k.call(j,$)}},{emitOnBegin:!0,interval:f});return async()=>{T&&await q(t,wn,"uninstallFilter")({filter:T}),S()}})})():(()=>{let w=!0,P=()=>w=!1;return(async()=>{try{const j=a?Dt({abi:e,eventName:a,args:s}):[],{unsubscribe:x}=await t.transport.subscribe({params:["logs",{address:n,topics:j}],onData(T){var S;if(!w)return;const v=T.result;try{const{eventName:k,args:$}=_t({abi:e,data:v.data,topics:v.topics,strict:d}),A=Pe(v,{args:$,eventName:k});c([A])}catch(k){let $,A;if(k instanceof Ze||k instanceof it){if(d)return;$=k.abiItem.name,A=(S=k.abiItem.inputs)==null?void 0:S.some(U=>!("name"in U&&U.name))}const K=Pe(v,{args:A?[]:{},eventName:$});c([K])}},onError(T){i==null||i(T)}});P=x,w||P()}catch(j){i==null||i(j)}})(),P})()}function Tr({chain:t,currentChainId:e}){if(!t)throw new Vo;if(e!==t.id)throw new Yo({chain:t,currentChainId:e})}function li(t,{docsPath:e,...n}){const s=(()=>{const r=ds(t,n);return r instanceof hn?t:r})();return new Co(s,{docsPath:e,...n})}async function zt(t){const e=await t.request({method:"eth_chainId"});return le(e)}async function bs(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]})}async function ys(t,e){var P,j,x,T;const{account:n=t.account,chain:s=t.chain,accessList:r,data:a,gas:i,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:d,to:g,value:y,...N}=e;if(!n)throw new ut({docsPath:"/docs/actions/wallet/sendTransaction"});const w=ve(n);try{Ut(e);let v;if(s!==null&&(v=await q(t,zt,"getChainId")({}),Tr({currentChainId:v,chain:s})),w.type==="local"){const A=await q(t,pn,"prepareTransactionRequest")({account:w,accessList:r,chain:s,data:a,gas:i,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:d,to:g,value:y,...N});v||(v=await q(t,zt,"getChainId")({}));const K=(P=s==null?void 0:s.serializers)==null?void 0:P.transaction,U=await w.signTransaction({...A,chainId:v},{serializer:K});return await q(t,bs,"sendRawTransaction")({serializedTransaction:U})}const S=(T=(x=(j=t.chain)==null?void 0:j.formatters)==null?void 0:x.transactionRequest)==null?void 0:T.format,$=(S||gn)({...fs(N,{format:S}),accessList:r,data:a,from:w.address,gas:i,gasPrice:c,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:d,to:g,value:y});return await t.request({method:"eth_sendTransaction",params:[$]})}catch(v){throw li(v,{...e,account:w,chain:e.chain||void 0})}}async function ui(t,{abi:e,address:n,args:s,dataSuffix:r,functionName:a,...i}){const c=Ke({abi:e,args:s,functionName:a});return await q(t,ys,"sendTransaction")({data:`${c}${r?r.replace("0x",""):""}`,to:n,...i})}async function di(t,{chain:e}){const{id:n,name:s,nativeCurrency:r,rpcUrls:a,blockExplorers:i}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:X(n),chainName:s,nativeCurrency:r,rpcUrls:a.default.http,blockExplorerUrls:i?Object.values(i).map(({url:c})=>c):void 0}]})}const Jn=256;let Xt=Jn,Zt;function fi(t=11){if(!Zt||Xt+t>Jn*2){Zt="",Xt=0;for(let e=0;e<Jn;e++)Zt+=(256+Math.random()*256|0).toString(16).substring(1)}return Zt.substring(Xt,Xt+++t)}function Nr(t){const{batch:e,cacheTime:n=t.pollingInterval??4e3,key:s="base",name:r="Base Client",pollingInterval:a=4e3,type:i="base"}=t,c=t.chain,l=t.account?ve(t.account):void 0,{config:f,request:d,value:g}=t.transport({chain:c,pollingInterval:a}),y={...f,...g},N={account:l,batch:e,cacheTime:n,chain:c,key:s,name:r,pollingInterval:a,request:d,transport:y,type:i,uid:fi()};function w(P){return j=>{const x=j(P);for(const v in N)delete x[v];const T={...P,...x};return Object.assign(T,{extend:w(T)})}}return Object.assign(N,{extend:w(N)})}function Yn(t,{delay:e=100,retryCount:n=2,shouldRetry:s=()=>!0}={}){return new Promise((r,a)=>{const i=async({count:c=0}={})=>{const l=async({error:f})=>{const d=typeof e=="function"?e({count:c,error:f}):e;d&&await Kn(d),i({count:c+1})};try{const f=await t();r(f)}catch(f){if(c<n&&await s({count:c,error:f}))return l({error:f});a(f)}};i()})}const mi=t=>"code"in t?t.code!==-1&&t.code!==-32004&&t.code!==-32005&&t.code!==-32042&&t.code!==-32603:t instanceof yt&&t.status?t.status!==403&&t.status!==408&&t.status!==413&&t.status!==429&&t.status!==500&&t.status!==502&&t.status!==503&&t.status!==504:!1;function hi(t,{retryDelay:e=150,retryCount:n=3}={}){return async s=>Yn(async()=>{try{return await t(s)}catch(r){const a=r;switch(a.code){case vt.code:throw new vt(a);case Tt.code:throw new Tt(a);case Nt.code:throw new Nt(a);case Pt.code:throw new Pt(a);case at.code:throw new at(a);case Qe.code:throw new Qe(a);case Et.code:throw new Et(a);case jt.code:throw new jt(a);case St.code:throw new St(a);case Ct.code:throw new Ct(a);case Rt.code:throw new Rt(a);case $t.code:throw new $t(a);case rt.code:throw new rt(a);case At.code:throw new At(a);case Mt.code:throw new Mt(a);case Ot.code:throw new Ot(a);case kt.code:throw new kt(a);case Ft.code:throw new Ft(a);case 5e3:throw new rt(a);default:throw r instanceof M?r:new ko(a)}}},{delay:({count:r,error:a})=>{var i;if(a&&a instanceof yt){const c=(i=a==null?void 0:a.headers)==null?void 0:i.get("Retry-After");if(c!=null&&c.match(/\d/))return parseInt(c)*1e3}return~~(1<<r)*e},retryCount:n,shouldRetry:({error:r})=>!mi(r)})}function Pr({key:t,name:e,request:n,retryCount:s=3,retryDelay:r=150,timeout:a,type:i},c){return{config:{key:t,name:e,request:n,retryCount:s,retryDelay:r,timeout:a,type:i},request:hi(n,{retryCount:s,retryDelay:r}),value:c}}function gi(t,e={}){const{key:n="custom",name:s="Custom Provider",retryDelay:r}=e;return({retryCount:a})=>Pr({key:n,name:s,request:t.request.bind(t),retryCount:e.retryCount??a,retryDelay:r,type:"custom"})}class pi extends M{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro"})}}function Er(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:s}){return new Promise((r,a)=>{(async()=>{let i;try{const c=new AbortController;n>0&&(i=setTimeout(()=>{s?c.abort():a(e)},n)),r(await t({signal:c==null?void 0:c.signal}))}catch(c){c.name==="AbortError"&&a(e),a(c)}finally{clearTimeout(i)}})()})}let Vn=0;async function bi(t,{body:e,fetchOptions:n={},timeout:s=1e4}){var c;const{headers:r,method:a,signal:i}=n;try{const l=await Er(async({signal:d})=>await fetch(t,{...n,body:Array.isArray(e)?he(e.map(y=>({jsonrpc:"2.0",id:y.id??Vn++,...y}))):he({jsonrpc:"2.0",id:e.id??Vn++,...e}),headers:{...r,"Content-Type":"application/json"},method:a||"POST",signal:i||(s>0?d:void 0)}),{errorInstance:new Fn({body:e,url:t}),timeout:s,signal:!0});let f;if((c=l.headers.get("Content-Type"))!=null&&c.startsWith("application/json")?f=await l.json():f=await l.text(),!l.ok)throw new yt({body:e,details:he(f.error)||l.statusText,headers:l.headers,status:l.status,url:t});return f}catch(l){throw l instanceof yt||l instanceof Fn?l:new yt({body:e,details:l.message,url:t})}}function yi(t,{body:e,onResponse:n}){if(t.readyState===t.CLOSED||t.readyState===t.CLOSING)throw new Mo({body:e,url:t.url,details:"Socket is closed."});const s=Vn++,r=({data:a})=>{var c;const i=JSON.parse(a);typeof i.id=="number"&&s!==i.id||(n==null||n(i),e.method==="eth_subscribe"&&typeof i.result=="string"&&t.subscriptions.set(i.result,r),e.method==="eth_unsubscribe"&&t.subscriptions.delete((c=e.params)==null?void 0:c[0]))};return t.requests.set(s,r),t.send(JSON.stringify({jsonrpc:"2.0",...e,id:s})),t}async function wi(t,{body:e,timeout:n=1e4}){return Er(()=>new Promise(s=>Xn.webSocket(t,{body:e,onResponse:s})),{errorInstance:new Fn({body:e,url:t.url}),timeout:n})}const Xn={http:bi,webSocket:yi,webSocketAsync:wi};function Bs(t,e={}){const{batch:n,fetchOptions:s,key:r="http",name:a="HTTP JSON-RPC",retryDelay:i}=e;return({chain:c,retryCount:l,timeout:f})=>{const{batchSize:d=1e3,wait:g=0}=typeof n=="object"?n:{},y=e.retryCount??l,N=f??e.timeout??1e4,w=t||(c==null?void 0:c.rpcUrls.default.http[0]);if(!w)throw new pi;return Pr({key:r,name:a,async request({method:P,params:j}){const x={method:P,params:j},{schedule:T}=vr({id:`${t}`,wait:g,shouldSplitBatch($){return $.length>d},fn:$=>Xn.http(w,{body:$,fetchOptions:s,timeout:N}),sort:($,A)=>$.id-A.id}),v=async $=>n?T($):[await Xn.http(w,{body:$,fetchOptions:s,timeout:N})],[{error:S,result:k}]=await v(x);if(S)throw new ur({body:x,error:S,url:w});return k},retryCount:y,retryDelay:i,timeout:N,type:"http"},{fetchOptions:s,url:t})}}function ws(t,e){var s,r,a;if(!(t instanceof M))return!1;const n=t.walk(i=>i instanceof kn);return n instanceof kn?!!(((s=n.data)==null?void 0:s.errorName)==="ResolverNotFound"||((r=n.data)==null?void 0:r.errorName)==="ResolverWildcardNotSupported"||(a=n.reason)!=null&&a.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===sr[50]):!1}function jr(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Ce(e)?e:null}function Qt(t){let e=new Uint8Array(32).fill(0);if(!t)return wt(e);const n=t.split(".");for(let s=n.length-1;s>=0;s-=1){const r=jr(n[s]),a=r?Ue(r):me(ke(n[s]),"bytes");e=me(Ie([e,a]),"bytes")}return wt(e)}function xi(t){return`[${t.slice(2)}]`}function vi(t){const e=new Uint8Array(32).fill(0);return t?jr(t)||me(ke(t)):wt(e)}function xn(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(ke(e).byteLength+2);let s=0;const r=e.split(".");for(let a=0;a<r.length;a++){let i=ke(r[a]);i.byteLength>255&&(i=ke(xi(vi(r[a])))),n[s]=i.length,n.set(i,s+1),s+=i.length+1}return n.byteLength!==s+1?n.slice(0,s+1):n}async function Ti(t,{blockNumber:e,blockTag:n,coinType:s,name:r,universalResolverAddress:a}){let i=a;if(!i){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=ft({blockNumber:e,chain:t.chain,contract:"ensUniversalResolver"})}try{const c=Ke({abi:Is,functionName:"addr",...s!=null?{args:[Qt(r),BigInt(s)]}:{args:[Qt(r)]}}),l=await q(t,We,"readContract")({address:i,abi:wr,functionName:"resolve",args:[ze(xn(r)),c],blockNumber:e,blockTag:n});if(l[0]==="0x")return null;const f=dt({abi:Is,args:s!=null?[Qt(r),BigInt(s)]:void 0,functionName:"addr",data:l[0]});return f==="0x"||nt(f)==="0x00"?null:f}catch(c){if(ws(c,"resolve"))return null;throw c}}class Ni extends M{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidMetadataError"})}}class bt extends M{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidNftUriError"})}}class xs extends M{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUriResolutionError"})}}class Pi extends M{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUnsupportedNamespaceError"})}}const Ei=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,ji=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Si=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Ci=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Ri(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const s=new Image;s.onload=()=>{n(!0)},s.onerror=()=>{n(!1)},s.src=t})}}function Gs(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function Sr({uri:t,gatewayUrls:e}){const n=Si.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const s=Gs(e==null?void 0:e.ipfs,"https://ipfs.io"),r=Gs(e==null?void 0:e.arweave,"https://arweave.net"),a=t.match(Ei),{protocol:i,subpath:c,target:l,subtarget:f=""}=(a==null?void 0:a.groups)||{},d=i==="ipns:/"||c==="ipns/",g=i==="ipfs:/"||c==="ipfs/"||ji.test(t);if(t.startsWith("http")&&!d&&!g){let N=t;return e!=null&&e.arweave&&(N=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:N,isOnChain:!1,isEncoded:!1}}if((d||g)&&l)return{uri:`${s}/${d?"ipns":"ipfs"}/${l}${f}`,isOnChain:!1,isEncoded:!1};if(i==="ar:/"&&l)return{uri:`${r}/${l}${f||""}`,isOnChain:!1,isEncoded:!1};let y=t.replace(Ci,"");if(y.startsWith("<svg")&&(y=`data:image/svg+xml;base64,${btoa(y)}`),y.startsWith("data:")||y.startsWith("{"))return{uri:y,isOnChain:!0,isEncoded:!1};throw new xs({uri:t})}function Cr(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Ni({data:t});return t.image||t.image_url||t.image_data}async function $i({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(r=>r.json());return await vs({gatewayUrls:t,uri:Cr(n)})}catch{throw new xs({uri:e})}}async function vs({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:s}=Sr({uri:e,gatewayUrls:t});if(s||await Ri(n))return n;throw new xs({uri:e})}function Ai(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,s,r]=e.split("/"),[a,i]=n.split(":"),[c,l]=s.split(":");if(!a||a.toLowerCase()!=="eip155")throw new bt({reason:"Only EIP-155 supported"});if(!i)throw new bt({reason:"Chain ID not found"});if(!l)throw new bt({reason:"Contract address not found"});if(!r)throw new bt({reason:"Token ID not found"});if(!c)throw new bt({reason:"ERC namespace not found"});return{chainID:parseInt(i),namespace:c.toLowerCase(),contractAddress:l,tokenID:r}}async function Mi(t,{nft:e}){if(e.namespace==="erc721")return We(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return We(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Pi({namespace:e.namespace})}async function Oi(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?ki(t,{gatewayUrls:e,record:n}):vs({uri:n,gatewayUrls:e})}async function ki(t,{gatewayUrls:e,record:n}){const s=Ai(n),r=await Mi(t,{nft:s}),{uri:a,isOnChain:i,isEncoded:c}=Sr({uri:r,gatewayUrls:e});if(i&&(a.includes("data:application/json;base64,")||a.startsWith("{"))){const f=c?atob(a.replace("data:application/json;base64,","")):a,d=JSON.parse(f);return vs({uri:Cr(d),gatewayUrls:e})}let l=s.tokenID;return s.namespace==="erc1155"&&(l=l.replace("0x","").padStart(64,"0")),$i({gatewayUrls:e,uri:a.replace(/(?:0x)?{id}/,l)})}async function Rr(t,{blockNumber:e,blockTag:n,name:s,key:r,universalResolverAddress:a}){let i=a;if(!i){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=ft({blockNumber:e,chain:t.chain,contract:"ensUniversalResolver"})}try{const c=await q(t,We,"readContract")({address:i,abi:wr,functionName:"resolve",args:[ze(xn(s)),Ke({abi:Fs,functionName:"text",args:[Qt(s),r]})],blockNumber:e,blockTag:n});if(c[0]==="0x")return null;const l=dt({abi:Fs,functionName:"text",data:c[0]});return l===""?null:l}catch(c){if(ws(c,"resolve"))return null;throw c}}async function Fi(t,{blockNumber:e,blockTag:n,gatewayUrls:s,name:r,universalResolverAddress:a}){const i=await q(t,Rr,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:r,universalResolverAddress:a});if(!i)return null;try{return await Oi(t,{record:i,gatewayUrls:s})}catch{return null}}async function Ii(t,{address:e,blockNumber:n,blockTag:s,universalResolverAddress:r}){let a=r;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=ft({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const i=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const[c,l]=await q(t,We,"readContract")({address:a,abi:qo,functionName:"reverse",args:[ze(xn(i))],blockNumber:n,blockTag:s});return e.toLowerCase()!==l.toLowerCase()?null:c}catch(c){if(ws(c,"reverse"))return null;throw c}}async function zi(t,{blockNumber:e,blockTag:n,name:s,universalResolverAddress:r}){let a=r;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=ft({blockNumber:e,chain:t.chain,contract:"ensUniversalResolver"})}const[i]=await q(t,We,"readContract")({address:a,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[ze(xn(s))],blockNumber:e,blockTag:n});return i}async function Bi(t){const e=fn(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}async function $r(t,{address:e,args:n,event:s,events:r,fromBlock:a,strict:i,toBlock:c}={}){const l=r??(s?[s]:void 0),f=fn(t,{method:"eth_newFilter"});let d=[];l&&(d=[l.flatMap(y=>Dt({abi:[y],eventName:y.name,args:n}))],s&&(d=d[0]));const g=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof a=="bigint"?X(a):a,toBlock:typeof c=="bigint"?X(c):c,...d.length?{topics:d}:{}}]});return{abi:l,args:n,eventName:s?s.name:void 0,fromBlock:a,id:g,request:f(g),strict:i,toBlock:c,type:"event"}}async function Ar(t){const e=fn(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Gi(t,{address:e,blockNumber:n,blockTag:s="latest"}){const r=n?X(n):void 0,a=await t.request({method:"eth_getBalance",params:[e,r||s]});return BigInt(a)}async function Di(t,{blockHash:e,blockNumber:n,blockTag:s="latest"}={}){const r=n!==void 0?X(n):void 0;let a;return e?a=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]}):a=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[r||s]}),le(a)}async function Li(t,{address:e,blockNumber:n,blockTag:s="latest"}){const r=n!==void 0?X(n):void 0,a=await t.request({method:"eth_getCode",params:[e,r||s]});if(a!=="0x")return a}function Ui(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(s=>BigInt(s)))}}async function _i(t,{blockCount:e,blockNumber:n,blockTag:s="latest",rewardPercentiles:r}){const a=n?X(n):void 0,i=await t.request({method:"eth_feeHistory",params:[X(e),a||s,r]});return Ui(i)}async function Hi(t,{filter:e}){const n=e.strict??!1;return(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(r=>{var a;try{const{eventName:i,args:c}="abi"in e&&e.abi?_t({abi:e.abi,data:r.data,topics:r.topics,strict:n}):{eventName:void 0,args:void 0};return Pe(r,{args:c,eventName:i})}catch(i){let c,l;if(i instanceof Ze||i instanceof it){if("strict"in e&&e.strict)return;c=i.abiItem.name,l=(a=i.abiItem.inputs)==null?void 0:a.some(f=>!("name"in f&&f.name))}return Pe(r,{args:l?[]:{},eventName:c})}}).filter(Boolean)}const Wi=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,qi=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Ki({domain:t,message:e,primaryType:n,types:s}){const r=typeof t>"u"?{}:t,a={EIP712Domain:zr({domain:r}),...s};Ir({domain:r,message:e,primaryType:n,types:a});const i=["0x1901"];return r&&i.push(Ji({domain:r,types:a})),n!=="EIP712Domain"&&i.push(Mr({data:e,primaryType:n,types:a})),me(Ie(i))}function Ji({domain:t,types:e}){return Mr({data:t,primaryType:"EIP712Domain",types:e})}function Mr({data:t,primaryType:e,types:n}){const s=Or({data:t,primaryType:e,types:n});return me(s)}function Or({data:t,primaryType:e,types:n}){const s=[{type:"bytes32"}],r=[Yi({primaryType:e,types:n})];for(const a of n[e]){const[i,c]=Fr({types:n,name:a.name,type:a.type,value:t[a.name]});s.push(i),r.push(c)}return Bt(s,r)}function Yi({primaryType:t,types:e}){const n=ze(Vi({primaryType:t,types:e}));return me(n)}function Vi({primaryType:t,types:e}){let n="";const s=kr({primaryType:t,types:e});s.delete(t);const r=[t,...Array.from(s).sort()];for(const a of r)n+=`${a}(${e[a].map(({name:i,type:c})=>`${c} ${i}`).join(",")})`;return n}function kr({primaryType:t,types:e},n=new Set){const s=t.match(/^\w*/u),r=s==null?void 0:s[0];if(n.has(r)||e[r]===void 0)return n;n.add(r);for(const a of e[r])kr({primaryType:a.type,types:e},n);return n}function Fr({types:t,name:e,type:n,value:s}){if(t[n]!==void 0)return[{type:"bytes32"},me(Or({data:s,primaryType:n,types:t}))];if(n==="bytes")return s=`0x${(s.length%2?"0":"")+s.slice(2)}`,[{type:"bytes32"},me(s)];if(n==="string")return[{type:"bytes32"},me(ze(s))];if(n.lastIndexOf("]")===n.length-1){const r=n.slice(0,n.lastIndexOf("[")),a=s.map(i=>Fr({name:e,type:r,types:t,value:i}));return[{type:"bytes32"},me(Bt(a.map(([i])=>i),a.map(([,i])=>i)))]}return[{type:n},s]}function Ir({domain:t,message:e,primaryType:n,types:s}){const r=s,a=(i,c)=>{for(const l of i){const{name:f,type:d}=l,g=d,y=c[f],N=g.match(qi);if(N&&(typeof y=="number"||typeof y=="bigint")){const[j,x,T]=N;X(y,{signed:x==="int",size:parseInt(T)/8})}if(g==="address"&&typeof y=="string"&&!_e(y))throw new xt({address:y});const w=g.match(Wi);if(w){const[j,x]=w;if(x&&ie(y)!==parseInt(x))throw new ua({expectedSize:parseInt(x),givenSize:ie(y)})}const P=r[g];P&&a(P,y)}};if(r.EIP712Domain&&t&&a(r.EIP712Domain,t),n!=="EIP712Domain"){const i=r[n];a(i,e)}}function zr({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},typeof(t==null?void 0:t.chainId)=="number"&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}const Rn="/docs/contract/encodeDeployData";function Br({abi:t,args:e,bytecode:n}){if(!e||e.length===0)return n;const s=t.find(a=>"type"in a&&a.type==="constructor");if(!s)throw new na({docsPath:Rn});if(!("inputs"in s))throw new Es({docsPath:Rn});if(!s.inputs||s.inputs.length===0)throw new Es({docsPath:Rn});const r=Bt(s.inputs,e);return rs([n,r])}const Xi={"0x0":"reverted","0x1":"success"};function Zi(t){return{...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(e=>Pe(e)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?le(t.transactionIndex):null,status:t.status?Xi[t.status]:null,type:t.type?fr[t.type]||t.type:null}}const Qi=`Ethereum Signed Message:
`;function ec(t,e){const n=typeof t=="string"?ke(t):t.raw instanceof Uint8Array?t.raw:Ue(t.raw),s=ke(`${Qi}${n.length}`);return me(Ie([s,n]),e)}function tc(t,e){let[n,s="0"]=t.split(".");const r=n.startsWith("-");if(r&&(n=n.slice(1)),s=s.replace(/(0+)$/,""),e===0)Math.round(+`.${s}`)===1&&(n=`${BigInt(n)+1n}`),s="";else if(s.length>e){const[a,i,c]=[s.slice(0,e-1),s.slice(e-1,e),s.slice(e)],l=Math.round(+`${i}.${c}`);l>9?s=`${BigInt(a)+BigInt(1)}0`.padStart(a.length+1,"0"):s=`${a}${l}`,s.length>e&&(s=s.slice(1),n=`${BigInt(n)+1n}`),s=s.slice(0,e)}else s=s.padEnd(e,"0");return BigInt(`${r?"-":""}${n}${s}`)}function Oe(t,e="wei"){return tc(t,ar[e])}function nc(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function sc(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?le(t.nonce):void 0,storageProof:t.storageProof?nc(t.storageProof):void 0}}async function rc(t,{address:e,blockNumber:n,blockTag:s,storageKeys:r}){const a=s??"latest",i=n!==void 0?X(n):void 0,c=await t.request({method:"eth_getProof",params:[e,r,i||a]});return sc(c)}async function ac(t,{address:e,blockNumber:n,blockTag:s="latest",slot:r}){const a=n!==void 0?X(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,r,a||s]})}async function Ts(t,{blockHash:e,blockNumber:n,blockTag:s,hash:r,index:a}){var d,g,y;const i=s||"latest",c=n!==void 0?X(n):void 0;let l=null;if(r?l=await t.request({method:"eth_getTransactionByHash",params:[r]}):e?l=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,X(a)]}):l=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[c||i,X(a)]}),!l)throw new ir({blockHash:e,blockNumber:n,blockTag:i,hash:r,index:a});return(((y=(g=(d=t.chain)==null?void 0:d.formatters)==null?void 0:g.transaction)==null?void 0:y.format)||mr)(l)}async function oc(t,{hash:e,transactionReceipt:n}){const[s,r]=await Promise.all([q(t,Wt,"getBlockNumber")({}),e?q(t,Ts,"getBlockNumber")({hash:e}):void 0]),a=(n==null?void 0:n.blockNumber)||(r==null?void 0:r.blockNumber);return a?s-a+1n:0n}async function Zn(t,{hash:e}){var r,a,i;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]});if(!n)throw new cr({hash:e});return(((i=(a=(r=t.chain)==null?void 0:r.formatters)==null?void 0:a.transactionReceipt)==null?void 0:i.format)||Zi)(n)}async function ic(t,e){var P;const{allowFailure:n=!0,batchSize:s,blockNumber:r,blockTag:a,contracts:i,multicallAddress:c}=e,l=s??(typeof((P=t.batch)==null?void 0:P.multicall)=="object"&&t.batch.multicall.batchSize||1024);let f=c;if(!f){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");f=ft({blockNumber:r,chain:t.chain,contract:"multicall3"})}const d=[[]];let g=0,y=0;for(let j=0;j<i.length;j++){const{abi:x,address:T,args:v,functionName:S}=i[j];try{const k=Ke({abi:x,args:v,functionName:S});y+=(k.length-2)/2,l>0&&y>l&&d[g].length>0&&(g++,y=(k.length-2)/2,d[g]=[]),d[g]=[...d[g],{allowFailure:!0,callData:k,target:T}]}catch(k){const $=It(k,{abi:x,address:T,args:v,docsPath:"/docs/contract/multicall",functionName:S});if(!n)throw $;d[g]=[...d[g],{allowFailure:!0,callData:"0x",target:T}]}}const N=await Promise.allSettled(d.map(j=>q(t,We,"readContract")({abi:Wn,address:f,args:[j],blockNumber:r,blockTag:a,functionName:"aggregate3"}))),w=[];for(let j=0;j<N.length;j++){const x=N[j];if(x.status==="rejected"){if(!n)throw x.reason;for(let v=0;v<d[j].length;v++)w.push({status:"failure",error:x.reason,result:void 0});continue}const T=x.value;for(let v=0;v<T.length;v++){const{returnData:S,success:k}=T[v],{callData:$}=d[j][v],{abi:A,address:K,functionName:U,args:L}=i[w.length];try{if($==="0x")throw new ln;if(!k)throw new us({data:S});const Z=dt({abi:A,args:L,data:S,functionName:U});w.push(n?{result:Z,status:"success"}:Z)}catch(Z){const ee=It(Z,{abi:A,address:K,args:L,docsPath:"/docs/contract/multicall",functionName:U});if(!n)throw ee;w.push({error:ee,result:void 0,status:"failure"})}}}if(w.length!==i.length)throw new M("multicall results mismatch");return w}const cc="0x60806040523480156200001157600080fd5b50604051620007003803806200070083398101604081905262000034916200056f565b6000620000438484846200004f565b9050806000526001601ff35b600080846001600160a01b0316803b806020016040519081016040528181526000908060200190933c90507f6492649264926492649264926492649264926492649264926492649264926492620000a68462000451565b036200021f57600060608085806020019051810190620000c79190620005ce565b8651929550909350915060000362000192576000836001600160a01b031683604051620000f5919062000643565b6000604051808303816000865af19150503d806000811462000134576040519150601f19603f3d011682016040523d82523d6000602084013e62000139565b606091505b5050905080620001905760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b505b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90620001c4908b90869060040162000661565b602060405180830381865afa158015620001e2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200020891906200069d565b6001600160e01b031916149450505050506200044a565b805115620002b157604051630b135d3f60e11b808252906001600160a01b03871690631626ba7e9062000259908890889060040162000661565b602060405180830381865afa15801562000277573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200029d91906200069d565b6001600160e01b031916149150506200044a565b8251604114620003195760405162461bcd60e51b815260206004820152603a6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e677468000000000000606482015260840162000187565b620003236200046b565b506020830151604080850151855186939260009185919081106200034b576200034b620006c9565b016020015160f81c9050601b81148015906200036b57508060ff16601c14155b15620003cf5760405162461bcd60e51b815260206004820152603b6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c75650000000000606482015260840162000187565b6040805160008152602081018083528a905260ff83169181019190915260608101849052608081018390526001600160a01b038a169060019060a0016020604051602081039080840390855afa1580156200042e573d6000803e3d6000fd5b505050602060405103516001600160a01b031614955050505050505b9392505050565b60006020825110156200046357600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b03811681146200049f57600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b83811015620004d5578181015183820152602001620004bb565b50506000910152565b600082601f830112620004f057600080fd5b81516001600160401b03808211156200050d576200050d620004a2565b604051601f8301601f19908116603f01168101908282118183101715620005385762000538620004a2565b816040528381528660208588010111156200055257600080fd5b62000565846020830160208901620004b8565b9695505050505050565b6000806000606084860312156200058557600080fd5b8351620005928162000489565b6020850151604086015191945092506001600160401b03811115620005b657600080fd5b620005c486828701620004de565b9150509250925092565b600080600060608486031215620005e457600080fd5b8351620005f18162000489565b60208501519093506001600160401b03808211156200060f57600080fd5b6200061d87838801620004de565b935060408601519150808211156200063457600080fd5b50620005c486828701620004de565b6000825162000657818460208701620004b8565b9190910192915050565b828152604060208201526000825180604084015262000688816060850160208701620004b8565b601f01601f1916919091016060019392505050565b600060208284031215620006b057600080fd5b81516001600160e01b0319811681146200044a57600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);BigInt(1);BigInt(2);function lc(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function uc(t,e){const n=Ce(t)?Ue(t):t,s=Ce(e)?Ue(e):e;return lc(n,s)}async function Gr(t,{address:e,hash:n,signature:s,...r}){const a=Ce(s)?s:ze(s);try{const{data:i}=await q(t,bn,"call")({data:Br({abi:Ko,args:[e,n,a],bytecode:cc}),...r});return uc(i??"0x0","0x1")}catch(i){if(i instanceof lr)return!1;throw i}}async function dc(t,{address:e,message:n,signature:s,...r}){const a=ec(n);return Gr(t,{address:e,hash:a,signature:s,...r})}async function fc(t,{address:e,signature:n,message:s,primaryType:r,types:a,domain:i,...c}){const l=Ki({message:s,primaryType:r,types:a,domain:i});return Gr(t,{address:e,hash:l,signature:n,...c})}function Dr(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:s,onError:r,poll:a,pollingInterval:i=t.pollingInterval}){const c=typeof a<"u"?a:t.transport.type!=="webSocket";let l;return c?(()=>{const g=he(["watchBlockNumber",t.uid,e,n,i]);return mt(g,{onBlockNumber:s,onError:r},y=>Ht(async()=>{var N;try{const w=await q(t,Wt,"getBlockNumber")({cacheTime:0});if(l){if(w===l)return;if(w-l>1&&n)for(let P=l+1n;P<w;P++)y.onBlockNumber(P,l),l=P}(!l||w>l)&&(y.onBlockNumber(w,l),l=w)}catch(w){(N=y.onError)==null||N.call(y,w)}},{emitOnBegin:e,interval:i}))})():(()=>{let g=!0,y=()=>g=!1;return(async()=>{try{const{unsubscribe:N}=await t.transport.subscribe({params:["newHeads"],onData(w){var j;if(!g)return;const P=un((j=w.result)==null?void 0:j.number);s(P,l),l=P},onError(w){r==null||r(w)}});y=N,g||y()}catch(N){r==null||r(N)}})(),y})()}async function mc(t,{confirmations:e=1,hash:n,onReplaced:s,pollingInterval:r=t.pollingInterval,timeout:a}){const i=he(["waitForTransactionReceipt",t.uid,n]);let c,l,f,d=!1;return new Promise((g,y)=>{a&&setTimeout(()=>y(new Ro({hash:n})),a);const N=mt(i,{onReplaced:s,resolve:g,reject:y},w=>{const P=q(t,Dr,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:r,async onBlockNumber(j){if(d)return;let x=j;const T=v=>{P(),v(),N()};try{if(f){if(e>1&&(!f.blockNumber||x-f.blockNumber+1n<e))return;T(()=>w.resolve(f));return}if(c||(d=!0,await Yn(async()=>{c=await q(t,Ts,"getTransaction")({hash:n}),c.blockNumber&&(x=c.blockNumber)},{delay:({count:v})=>~~(1<<v)*200,retryCount:6}),d=!1),f=await q(t,Zn,"getTransactionReceipt")({hash:n}),e>1&&(!f.blockNumber||x-f.blockNumber+1n<e))return;T(()=>w.resolve(f))}catch(v){if(c&&(v instanceof ir||v instanceof cr))try{l=c,d=!0;const S=await Yn(()=>q(t,He,"getBlock")({blockNumber:x,includeTransactions:!0}),{delay:({count:A})=>~~(1<<A)*200,retryCount:6,shouldRetry:({error:A})=>A instanceof dr});d=!1;const k=S.transactions.find(({from:A,nonce:K})=>A===l.from&&K===l.nonce);if(!k||(f=await q(t,Zn,"getTransactionReceipt")({hash:k.hash}),e>1&&(!f.blockNumber||x-f.blockNumber+1n<e)))return;let $="replaced";k.to===l.to&&k.value===l.value?$="repriced":k.from===k.to&&k.value===0n&&($="cancelled"),T(()=>{var A;(A=w.onReplaced)==null||A.call(w,{reason:$,replacedTransaction:l,transaction:k,transactionReceipt:f}),w.resolve(f)})}catch(S){T(()=>w.reject(S))}else T(()=>w.reject(v))}}})})})}function hc(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:s=!1,onBlock:r,onError:a,includeTransactions:i,poll:c,pollingInterval:l=t.pollingInterval}){const f=typeof c<"u"?c:t.transport.type!=="webSocket",d=i??!1;let g;return f?(()=>{const w=he(["watchBlocks",t.uid,n,s,d,l]);return mt(w,{onBlock:r,onError:a},P=>Ht(async()=>{var j;try{const x=await q(t,He,"getBlock")({blockTag:e,includeTransactions:d});if(x.number&&(g!=null&&g.number)){if(x.number===g.number)return;if(x.number-g.number>1&&n)for(let T=(g==null?void 0:g.number)+1n;T<x.number;T++){const v=await q(t,He,"getBlock")({blockNumber:T,includeTransactions:d});P.onBlock(v,g),g=v}}(!(g!=null&&g.number)||e==="pending"&&!(x!=null&&x.number)||x.number&&x.number>g.number)&&(P.onBlock(x,g),g=x)}catch(x){(j=P.onError)==null||j.call(P,x)}},{emitOnBegin:s,interval:l}))})():(()=>{let w=!0,P=()=>w=!1;return(async()=>{try{const{unsubscribe:j}=await t.transport.subscribe({params:["newHeads"],onData(x){var S,k,$;if(!w)return;const v=((($=(k=(S=t.chain)==null?void 0:S.formatters)==null?void 0:k.block)==null?void 0:$.format)||hr)(x.result);r(v,g),g=v},onError(x){a==null||a(x)}});P=j,w||P()}catch(j){a==null||a(j)}})(),P})()}function gc(t,{address:e,args:n,batch:s=!0,event:r,events:a,onError:i,onLogs:c,poll:l,pollingInterval:f=t.pollingInterval,strict:d}){const g=typeof l<"u"?l:t.transport.type!=="webSocket",y=d??!1;return g?(()=>{const P=he(["watchEvent",e,n,s,t.uid,r,f]);return mt(P,{onLogs:c,onError:i},j=>{let x,T,v=!1;const S=Ht(async()=>{var k;if(!v){try{T=await q(t,$r,"createEventFilter")({address:e,args:n,event:r,events:a,strict:y})}catch{}v=!0;return}try{let $;if(T)$=await q(t,yn,"getFilterChanges")({filter:T});else{const A=await q(t,Wt,"getBlockNumber")({});x&&x!==A?$=await q(t,ps,"getLogs")({address:e,args:n,event:r,events:a,fromBlock:x+1n,toBlock:A}):$=[],x=A}if($.length===0)return;if(s)j.onLogs($);else for(const A of $)j.onLogs([A])}catch($){T&&$ instanceof Qe&&(v=!1),(k=j.onError)==null||k.call(j,$)}},{emitOnBegin:!0,interval:f});return async()=>{T&&await q(t,wn,"uninstallFilter")({filter:T}),S()}})})():(()=>{let P=!0,j=()=>P=!1;return(async()=>{try{const x=a??(r?[r]:void 0);let T=[];x&&(T=[x.flatMap(S=>Dt({abi:[S],eventName:S.name,args:n}))],r&&(T=T[0]));const{unsubscribe:v}=await t.transport.subscribe({params:["logs",{address:e,topics:T}],onData(S){var $;if(!P)return;const k=S.result;try{const{eventName:A,args:K}=_t({abi:x,data:k.data,topics:k.topics,strict:y}),U=Pe(k,{args:K,eventName:A});c([U])}catch(A){let K,U;if(A instanceof Ze||A instanceof it){if(d)return;K=A.abiItem.name,U=($=A.abiItem.inputs)==null?void 0:$.some(Z=>!("name"in Z&&Z.name))}const L=Pe(k,{args:U?[]:{},eventName:K});c([L])}},onError(S){i==null||i(S)}});j=v,P||j()}catch(x){i==null||i(x)}})(),j})()}function pc(t,{batch:e=!0,onError:n,onTransactions:s,poll:r,pollingInterval:a=t.pollingInterval}){return(typeof r<"u"?r:t.transport.type!=="webSocket")?(()=>{const f=he(["watchPendingTransactions",t.uid,e,a]);return mt(f,{onTransactions:s,onError:n},d=>{let g;const y=Ht(async()=>{var N;try{if(!g)try{g=await q(t,Ar,"createPendingTransactionFilter")({});return}catch(P){throw y(),P}const w=await q(t,yn,"getFilterChanges")({filter:g});if(w.length===0)return;if(e)d.onTransactions(w);else for(const P of w)d.onTransactions([P])}catch(w){(N=d.onError)==null||N.call(d,w)}},{emitOnBegin:!0,interval:a});return async()=>{g&&await q(t,wn,"uninstallFilter")({filter:g}),y()}})})():(()=>{let f=!0,d=()=>f=!1;return(async()=>{try{const{unsubscribe:g}=await t.transport.subscribe({params:["newPendingTransactions"],onData(y){if(!f)return;const N=y.result;s([N])},onError(y){n==null||n(y)}});d=g,f||d()}catch(g){n==null||n(g)}})(),d})()}function bc(t){return{call:e=>bn(t,e),createBlockFilter:()=>Bi(t),createContractEventFilter:e=>nr(t,e),createEventFilter:e=>$r(t,e),createPendingTransactionFilter:()=>Ar(t),estimateContractGas:e=>Ho(t,e),estimateGas:e=>gs(t,e),getBalance:e=>Gi(t,e),getBlock:e=>He(t,e),getBlockNumber:e=>Wt(t,e),getBlockTransactionCount:e=>Di(t,e),getBytecode:e=>Li(t,e),getChainId:()=>zt(t),getContractEvents:e=>br(t,e),getEnsAddress:e=>Ti(t,e),getEnsAvatar:e=>Fi(t,e),getEnsName:e=>Ii(t,e),getEnsResolver:e=>zi(t,e),getEnsText:e=>Rr(t,e),getFeeHistory:e=>_i(t,e),estimateFeesPerGas:e=>Uo(t,e),getFilterChanges:e=>yn(t,e),getFilterLogs:e=>Hi(t,e),getGasPrice:()=>hs(t),getLogs:e=>ps(t,e),getProof:e=>rc(t,e),estimateMaxPriorityFeePerGas:e=>Lo(t,e),getStorageAt:e=>ac(t,e),getTransaction:e=>Ts(t,e),getTransactionConfirmations:e=>oc(t,e),getTransactionCount:e=>pr(t,e),getTransactionReceipt:e=>Zn(t,e),multicall:e=>ic(t,e),prepareTransactionRequest:e=>pn(t,e),readContract:e=>We(t,e),sendRawTransaction:e=>bs(t,e),simulateContract:e=>ti(t,e),verifyMessage:e=>dc(t,e),verifyTypedData:e=>fc(t,e),uninstallFilter:e=>wn(t,e),waitForTransactionReceipt:e=>mc(t,e),watchBlocks:e=>hc(t,e),watchBlockNumber:e=>Dr(t,e),watchContractEvent:e=>ci(t,e),watchEvent:e=>gc(t,e),watchPendingTransactions:e=>pc(t,e)}}function yc(t){const{key:e="public",name:n="Public Client"}=t;return Nr({...t,key:e,name:n,type:"publicClient"}).extend(bc)}function wc(t,{abi:e,args:n,bytecode:s,...r}){const a=Br({abi:e,args:n,bytecode:s});return ys(t,{...r,data:a})}async function xc(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"})).map(s=>cs(s))}async function vc(t){return await t.request({method:"wallet_getPermissions"})}async function Tc(t){return(await t.request({method:"eth_requestAccounts"})).map(n=>go(n))}async function Nc(t,e){return t.request({method:"wallet_requestPermissions",params:[e]})}async function Pc(t,{account:e=t.account,message:n}){if(!e)throw new ut({docsPath:"/docs/actions/wallet/signMessage"});const s=ve(e);if(s.type==="local")return s.signMessage({message:n});const r=typeof n=="string"?es(n):n.raw instanceof Uint8Array?ze(n.raw):n.raw;return t.request({method:"personal_sign",params:[r,s.address]})}async function Ec(t,e){var f,d,g,y;const{account:n=t.account,chain:s=t.chain,...r}=e;if(!n)throw new ut({docsPath:"/docs/actions/wallet/signTransaction"});const a=ve(n);Ut({account:a,...e});const i=await q(t,zt,"getChainId")({});s!==null&&Tr({currentChainId:i,chain:s});const c=(s==null?void 0:s.formatters)||((f=t.chain)==null?void 0:f.formatters),l=((d=c==null?void 0:c.transactionRequest)==null?void 0:d.format)||gn;return a.type==="local"?a.signTransaction({...r,chainId:i},{serializer:(y=(g=t.chain)==null?void 0:g.serializers)==null?void 0:y.transaction}):await t.request({method:"eth_signTransaction",params:[{...l(r),chainId:X(i),from:a.address}]})}async function jc(t,{account:e=t.account,domain:n,message:s,primaryType:r,types:a}){if(!e)throw new ut({docsPath:"/docs/actions/wallet/signTypedData"});const i=ve(e),c={EIP712Domain:zr({domain:n}),...a};if(Ir({domain:n,message:s,primaryType:r,types:c}),i.type==="local")return i.signTypedData({domain:n,primaryType:r,types:c,message:s});const l=he({domain:n??{},primaryType:r,types:c,message:s},(f,d)=>Ce(d)?d.toLowerCase():d);return t.request({method:"eth_signTypedData_v4",params:[i.address,l]})}async function Sc(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:X(e)}]})}async function Cc(t,e){return await t.request({method:"wallet_watchAsset",params:e})}function Rc(t){return{addChain:e=>di(t,e),deployContract:e=>wc(t,e),getAddresses:()=>xc(t),getChainId:()=>zt(t),getPermissions:()=>vc(t),prepareTransactionRequest:e=>pn(t,e),requestAddresses:()=>Tc(t),requestPermissions:e=>Nc(t,e),sendRawTransaction:e=>bs(t,e),sendTransaction:e=>ys(t,e),signMessage:e=>Pc(t,e),signTransaction:e=>Ec(t,e),signTypedData:e=>jc(t,e),switchChain:e=>Sc(t,e),watchAsset:e=>Cc(t,e),writeContract:e=>ui(t,e)}}function Ds(t){const{key:e="wallet",name:n="Wallet Client",transport:s}=t;return Nr({...t,key:e,name:n,transport:a=>s({...a,retryCount:0}),type:"walletClient"}).extend(Rc)}const Se={6342:{name:"MegaETH Testnet",rpcUrl:"https://carrot.megaeth.com/rpc",fallbackRpcUrls:["https://carrot.megaeth.com/rpc"],wsUrl:"wss://carrot.megaeth.com/ws",contractAddress:"0xb34cac1135c27ec810e7e6880325085783c1a7e0",faucetAddress:"0x76b71a17d82232fd29aca475d14ed596c67c4b85",chainId:6342,sendMethod:"realtime_sendRawTransaction",connectionTimeouts:{initial:1e4,retry:3e3,request:5e3},maxConnections:3},31337:{name:"Foundry Local",rpcUrl:"http://127.0.0.1:8545",fallbackRpcUrls:["http://127.0.0.1:8545"],contractAddress:"0xb34cac1135c27ec810e7e6880325085783c1a7e0",faucetAddress:"0x76b71a17d82232fd29aca475d14ed596c67c4b85",chainId:31337,sendMethod:"eth_sendRawTransaction",connectionTimeouts:{initial:1e4,retry:5e3,request:15e3},maxConnections:2},50311:{name:"Somnia Testnet",rpcUrl:"https://testnet.somnia.network",fallbackRpcUrls:["https://testnet.somnia.network"],contractAddress:"0xb34cac1135c27ec810e7e6880325085783c1a7e0",faucetAddress:"0x76b71a17d82232fd29aca475d14ed596c67c4b85",chainId:50311,sendMethod:"eth_sendRawTransaction",connectionTimeouts:{initial:2e4,retry:1e4,request:3e4},maxConnections:2},1313161556:{name:"RISE Testnet",rpcUrl:"https://testnet-rpc.rise.com",fallbackRpcUrls:["https://testnet-rpc.rise.com"],contractAddress:"0xb34cac1135c27ec810e7e6880325085783c1a7e0",faucetAddress:"0x76b71a17d82232fd29aca475d14ed596c67c4b85",chainId:1313161556,sendMethod:"eth_sendRawTransactionSync",connectionTimeouts:{initial:2e4,retry:1e4,request:3e4},maxConnections:2}},$c=[{inputs:[],name:"update",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"number",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],$n=t=>{try{if(typeof t=="string"){const e=t.replace(/^cadesplugin_loaded/,"").replace(/^EnableInte.*?$/,"").trim();return e.length===0?null:JSON.parse(e)}return t}catch(e){return console.warn("Failed to parse JSON response:",e.message,"Data:",t),null}},Lr=()=>{const{authenticated:t}=ot(),{wallets:e}=rn(),[n,s]=O.useState(!1),[r,a]=O.useState(!1),[i,c]=O.useState("0"),[l,f]=O.useState(0),d=O.useRef({}),g=O.useRef({}),y="megaBuddies_globalCache",N={gasParams:5*60*1e3,chainParams:30*1e3,rpcHealth:2*60*1e3,clients:10*60*1e3,nonce:30*1e3},w=()=>{try{const h={gasParams:{data:(m=>JSON.parse(JSON.stringify(m,(p,b)=>typeof b=="bigint"?b.toString()+"n":b)))(g.current),timestamp:Date.now()},chainParams:{data:U.current,timestamp:Date.now()},rpcHealth:{data:j.current,timestamp:Date.now()},nonceCache:{data:v.current,timestamp:Date.now()}};localStorage.setItem(y,JSON.stringify(h))}catch(u){console.warn("Failed to save global cache:",u)}},P=()=>{try{const u=localStorage.getItem(y);if(u){const h=JSON.parse(u),m=Date.now(),p=b=>{if(typeof b=="string"&&b.endsWith("n"))return BigInt(b.slice(0,-1));if(typeof b=="object"&&b!==null){const E=Array.isArray(b)?[]:{};for(const[C,I]of Object.entries(b))E[C]=p(I);return E}return b};h.gasParams&&m-h.gasParams.timestamp<N.gasParams&&(g.current=p(h.gasParams.data),console.log("🎯 Loaded cached gas parameters from storage")),h.chainParams&&m-h.chainParams.timestamp<N.chainParams&&(U.current=h.chainParams.data,console.log("🎯 Loaded cached chain parameters from storage")),h.rpcHealth&&m-h.rpcHealth.timestamp<N.rpcHealth&&(j.current=h.rpcHealth.data,console.log("🎯 Loaded cached RPC health from storage")),h.nonceCache&&m-h.nonceCache.timestamp<N.nonce&&(Object.entries(h.nonceCache.data).forEach(([b,E])=>{E&&typeof E.currentNonce=="number"&&(v.current[b]={...E,isUpdating:!1,lastUpdate:E.lastUpdate||0})}),console.log("🎯 Loaded cached nonce data from storage"))}}catch(u){console.warn("Failed to load global cache:",u)}};O.useEffect(()=>{P();const u=setInterval(w,3e4),h=()=>w();window.addEventListener("beforeunload",h);const m=setInterval(()=>{Object.keys(ge.current).forEach(p=>{const b=ge.current[p];b&&b.state==="OPEN"&&Date.now()-b.lastFailureTime>b.timeout&&(b.state="HALF_OPEN",b.failures=0,console.log(`🔄 Auto-reset circuit breaker for chain ${p} - trying again`))})},1e4);return()=>{clearInterval(u),clearInterval(m),window.removeEventListener("beforeunload",h),w()}},[]),O.useRef({});const j=O.useRef({}),x=O.useRef({}),T=O.useRef({}),v=O.useRef({}),S=O.useRef({}),k=O.useRef(0),$=O.useRef({}),A=u=>($.current[u]||($.current[u]={recentTransactions:[],averageBlockchainTime:0,successRate:0,totalTransactions:0,successfulTransactions:0,lastUpdate:Date.now()}),$.current[u]),K=(u,h,m)=>{const p=A(u);p.recentTransactions.push({blockchainTime:h,success:m,timestamp:Date.now()}),p.recentTransactions.length>50&&p.recentTransactions.shift(),p.totalTransactions++,m&&p.successfulTransactions++;const b=p.recentTransactions.filter(E=>E.success);return b.length>0&&(p.averageBlockchainTime=b.reduce((E,C)=>E+C.blockchainTime,0)/b.length),p.successRate=p.successfulTransactions/p.totalTransactions*100,p.lastUpdate=Date.now(),p},U=O.useRef({}),L={6342:{poolSize:50,refillAt:.3,batchSize:10,maxRetries:2,retryDelay:500,burstMode:!1,maxBurstSize:2,burstCooldown:1e3,sequentialFallback:!0},31337:{poolSize:80,refillAt:.25,batchSize:20,maxRetries:3,retryDelay:150,burstMode:!0,maxBurstSize:4,burstCooldown:300},50311:{poolSize:60,refillAt:.3,batchSize:15,maxRetries:3,retryDelay:300,burstMode:!0,maxBurstSize:3,burstCooldown:800},1313161556:{poolSize:50,refillAt:.4,batchSize:12,maxRetries:2,retryDelay:400,burstMode:!1,maxBurstSize:2,burstCooldown:1500},default:{poolSize:60,refillAt:.3,batchSize:15,maxRetries:3,retryDelay:300,burstMode:!1,maxBurstSize:2,burstCooldown:1e3}},Z={reducedBatchSize:3,increasedDelay:2e3,degradedMode:!1,rateLimitProtection:{maxConcurrentSignings:2,delayBetweenBatches:3e3,backoffMultiplier:2}},ee=O.useRef({6342:{...Z}}),re=O.useRef({}),Re=u=>(re.current[u]||(re.current[u]={lastBurstTime:0,burstCount:0,inCooldown:!1,pendingTransactions:[],processingBurst:!1}),re.current[u]),Be=u=>{const h=L[u]||L.default;if(!h.burstMode)return!1;const m=Re(u),p=Date.now();return m.inCooldown&&p-m.lastBurstTime<h.burstCooldown?!1:(m.inCooldown&&p-m.lastBurstTime>=h.burstCooldown&&(m.inCooldown=!1,m.burstCount=0),m.burstCount<h.maxBurstSize)},Je=(u,h)=>{const m=L[u]||L.default;if(!m.burstMode)return;const p=Re(u),b=Date.now();h&&(p.burstCount++,p.lastBurstTime=b,p.burstCount>=m.maxBurstSize&&(p.inCooldown=!0,console.log(`Burst mode cooldown activated for chain ${u} (${m.burstCooldown}ms)`)))},vn=async(u,h)=>{const m=Re(u);return new Promise((p,b)=>{m.pendingTransactions.push({fn:h,resolve:p,reject:b,timestamp:Date.now()}),m.processingBurst||Tn(u)})},Tn=async u=>{const h=Re(u);for(h.processingBurst=!0;h.pendingTransactions.length>0;){if(!Be(u)){const b=L[u]||L.default,E=Math.max(100,b.burstCooldown/10);await new Promise(C=>setTimeout(C,E));continue}const p=h.pendingTransactions.shift();if(!p)break;try{const b=await p.fn();Je(u,!0),p.resolve(b)}catch(b){Je(u,!1),p.reject(b)}}h.processingBurst=!1},qt=u=>{const h=Se[u];h&&(j.current[u]||(j.current[u]={endpoints:h.fallbackRpcUrls.map(m=>({url:m,healthy:!0,lastChecked:0,consecutiveFailures:0,responseTime:0})),currentEndpointIndex:0,lastHealthCheck:0}))},Kt=async u=>{const h=j.current[u];if(!h)return qt(u),Se[u].rpcUrl;for(let m=0;m<h.endpoints.length;m++){const p=h.endpoints[h.currentEndpointIndex];if(p.healthy||p.consecutiveFailures<3)return p.url;h.currentEndpointIndex=(h.currentEndpointIndex+1)%h.endpoints.length}return console.warn(`All RPC endpoints for chain ${u} appear unhealthy, using primary`),h.endpoints[0].url},Nn=(u,h,m,p=0)=>{const b=j.current[u];if(!b)return;const E=b.endpoints.find(C=>C.url===h);E&&(E.lastChecked=Date.now(),E.responseTime=p,m?(E.healthy=!0,E.consecutiveFailures=0):(E.consecutiveFailures++,E.consecutiveFailures>=3&&(E.healthy=!1,console.warn(`Marking RPC endpoint as unhealthy: ${h} (${E.consecutiveFailures} failures)`))))},Pn=(u,h)=>{const m=`${u}-${h}`,p=Se[u];if(x.current[m]||(x.current[m]=0),x.current[m]>=p.maxConnections)throw new Error(`Maximum connections (${p.maxConnections}) reached for ${m}`);return x.current[m]++,()=>{x.current[m]>0&&x.current[m]--}},Ye=(u,h="unknown")=>{const m=ee.current[u];m&&(m.degradedMode=!0,console.log(`🔄 Enabled fallback mode for chain ${u} (reason: ${h})`),(h.includes("rate limit")||h.includes("429"))&&(console.log("📉 Rate limiting detected - activating conservative mode"),m.rateLimitProtection.maxConcurrentSignings=1,m.rateLimitProtection.delayBetweenBatches=5e3),setTimeout(()=>{m.degradedMode&&(m.degradedMode=!1,console.log(`🔄 Auto-disabled fallback mode for chain ${u} after 5 minutes`))},5*60*1e3))},Jt=u=>{const h=ee.current[u];return h!=null&&h.degradedMode?h:null},ue=()=>{if(!t||!e.length)return console.log("Not authenticated or no wallets available"),null;console.log("Available wallets:",e.map(h=>({address:h.address,walletClientType:h.walletClientType,connectorType:h.connectorType})));const u=e.find(h=>h.walletClientType==="privy"||h.connectorType==="embedded"||h.connectorType==="privy");return u?(console.log("Found embedded wallet:",u.address),u):e.length>0?(console.log("No embedded wallet found, using first available wallet:",e[0].address),e[0]):(console.log("No wallets available"),null)},ye=async u=>{const h=`${u}`;if(d.current[h])return d.current[h];const m=Se[u];if(!m)throw new Error(`Unsupported network: ${u}`);const p=ue();if(!p)throw new Error("No embedded wallet found");qt(u);try{const b=await Kt(u);console.log(`Using RPC endpoint for chain ${u}: ${b}`);const E=Pn(u,b),C=yc({chain:{id:u,name:m.name,network:m.name.toLowerCase().replace(/\s+/g,"-"),nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:[b]},public:{http:[b]}}},transport:Bs(b,{timeout:m.connectionTimeouts.initial,retryCount:4,retryDelay:({count:R})=>Math.min(1e3*Math.pow(2,R),8e3)})});let I;u===6342?I=Ds({account:p.address,chain:C.chain,transport:gi({async request({method:R,params:z}){var J,H;if(R==="eth_signTransaction"){const W=ue();if(!W)throw new Error("No embedded wallet found for signing");let _=0;const Y=5;for(;_<Y;)try{const V=await((J=W.getProvider)==null?void 0:J.call(W))||await((H=W.getEthereumProvider)==null?void 0:H.call(W))||W;if(V!=null&&V.request)return await V.request({method:R,params:z});throw new Error("Provider not ready")}catch(V){if(((V==null?void 0:V.message)||(V==null?void 0:V.toString())||"Unknown error").includes("iframe not initialized")&&_<Y-1){console.log(`⏳ Iframe not ready, waiting... (attempt ${_+1}/${Y})`),await new Promise(de=>setTimeout(de,1e3)),_++;continue}throw V}throw new Error("Unable to get provider for signing after retries")}return await C.request({method:R,params:z})}})}):I=Ds({account:p.address,chain:C.chain,transport:Bs(b,{timeout:m.connectionTimeouts.retry,retryCount:4,retryDelay:({count:R})=>Math.min(1e3*Math.pow(2,R),5e3)})});const G={publicClient:C,walletClient:I,config:m,rpcUrl:b,releaseConnection:E};return d.current[h]=G,console.log(`Created clients for chain ${u}:`,{publicRPC:b,signingMethod:u===6342?"Local Privy":"RPC"}),G}catch(b){throw console.error(`Error creating clients for chain ${u}:`,b),b}},Te=(u,h)=>{const m=`${u}-${h}`;return v.current[m]||(v.current[m]={currentNonce:null,pendingNonce:null,lastUpdate:0,isUpdating:!1}),v.current[m]},et=async(u,h,m=!1)=>{const p=Te(u,h),b=Date.now(),E=u.toString(),C=T.current[E];if(C&&C.isReady&&!m){const G=C.baseNonce+C.currentIndex;return console.log(`🎯 Using pool-based nonce ${G} for ${h} on chain ${u} (pool: ${C.currentIndex}/${C.transactions.length})`),G}if(!p.currentNonce||m||b-p.lastUpdate>3e4){if(p.isUpdating){let G=0;for(;p.isUpdating&&G<5e3;)await new Promise(R=>setTimeout(R,100)),G+=100;p.isUpdating&&(console.warn("⚠️ Nonce update timeout, forcing reset"),p.isUpdating=!1)}if(!p.isUpdating){p.isUpdating=!0;try{const{publicClient:G}=await ye(u),[R,z]=await Promise.all([G.getTransactionCount({address:h,blockTag:"latest"}),G.getTransactionCount({address:h,blockTag:"pending"})]),J=Math.max(R,z),H=p.currentNonce||0;m?(p.currentNonce=J,p.pendingNonce=J,console.log(`🔄 Force refresh: nonce updated for ${h} on chain ${u}: ${H} → ${J}`)):J>H?(p.currentNonce=J,p.pendingNonce=J,console.log(`🔄 Nonce updated for ${h} on chain ${u}: ${H} → ${J}`)):(p.pendingNonce=p.currentNonce,console.log(`🔄 Keeping local nonce for ${h} on chain ${u}: ${p.currentNonce} (network: ${J})`)),p.lastUpdate=b}catch(G){console.error("❌ Error updating nonce:",G),p.currentNonce!==null?(console.warn(`⚠️ Using cached nonce ${p.currentNonce} due to network error`),p.pendingNonce=p.currentNonce):(p.currentNonce=0,p.pendingNonce=0,console.warn("⚠️ Initializing nonce to 0 due to network error"))}finally{p.isUpdating=!1}}}const I=p.pendingNonce;return p.pendingNonce+=1,console.log(`🎯 Allocated nonce ${I} for ${h} on chain ${u}`),I},Yt=async u=>{const h=u.toString();if(g.current[h]){const m=g.current[h],p=Date.now()-(m.timestamp||0),b=u===6342?2*60*1e3:N.gasParams;if(p<b)return console.log(`🎯 Using cached gas params for chain ${u} (age: ${Math.round(p/1e3)}s)`),m}try{const{publicClient:m}=await ye(u);let p,b;if(u===6342)console.log("⚡ Using ultra-optimized gas parameters for MegaETH real-time gaming"),p=Oe("0.001"),b=Oe("0.0005");else if(u===31337)p=Oe("0.01"),b=Oe("0.001");else try{p=await m.getGasPrice()*2n,b=Oe("1")}catch(C){console.warn("Failed to get dynamic gas price, using fallback:",C),p=Oe("20"),b=Oe("2")}const E={maxFeePerGas:p,maxPriorityFeePerGas:b,timestamp:Date.now()};return g.current[h]=E,console.log(`⚡ Gas params for chain ${u}: {maxFeePerGas: ${Number(p)/1e9} gwei, maxPriorityFeePerGas: ${Number(b)/1e9} gwei}`),setTimeout(w,100),E}catch(m){if(console.error("Error getting gas params:",m),g.current[h])return console.log("🔄 Using stale cached gas params due to error"),g.current[h];const p={maxFeePerGas:Oe("20"),maxPriorityFeePerGas:Oe("2"),timestamp:Date.now()};return g.current[h]=p,p}},B=async u=>{const h=u.toString();if(U.current[h])return U.current[h];try{const{publicClient:m}=await ye(u),[p,b]=await Promise.all([je(()=>m.getChainId(),2,500,u),je(()=>m.getBlockNumber(),2,500,u)]),E={chainId:p,blockNumber:Number(b)},C=u===6342?3e4:6e4;return U.current[h]=E,setTimeout(()=>{delete U.current[h]},C),console.log(`Cached chain params for ${u}:`,E),E}catch(m){return console.error("Error getting chain params:",m),{chainId:u,blockNumber:0}}},F=async(u,h,m)=>{const p=u.toString(),b=L[u]||L.default,E=Jt(u);let C=Math.min(m,b.poolSize);E&&(C=Math.min(C,E.reducedBatchSize),console.log(`Using fallback mode for chain ${u}: batch size ${C}`)),console.log(`🚀 Pre-signing ${C} transactions for chain ${u} starting from nonce ${h} (PARALLEL MODE)`),T.current[p]||(T.current[p]={transactions:[],currentIndex:0,baseNonce:h,hasTriggeredRefill:!1,isRefilling:!1,isReady:!1});const I=T.current[p],{walletClient:G}=await ye(u),R=await Yt(u);console.log(`⚡ Using cached gas parameters: {maxFeePerGasGwei: ${Number(R.maxFeePerGas)/10**9}, maxPriorityFeePerGasGwei: ${Number(R.maxPriorityFeePerGas)/10**9}}`);const z=Se[u],J=ue(),H=Array.from({length:C},async(Y,V)=>{try{if(V>0){const xe=u===6342?V*100:V*50;await new Promise(En=>setTimeout(En,xe))}V===0&&await new Promise(xe=>setTimeout(xe,500));const Q=h+V,de={account:J.address,to:z.contractAddress,data:"0xa2e62045",nonce:Q,maxFeePerGas:R.maxFeePerGas,maxPriorityFeePerGas:R.maxPriorityFeePerGas,value:0n,type:"eip1559",gas:100000n};let Ge;return u===6342?Ge=await je(async()=>await G.signTransaction(de),E?1:b.maxRetries,b.retryDelay,u):Ge=await je(()=>G.signTransaction(de),E?1:b.maxRetries,b.retryDelay,u),{signedTx:Ge,_reservedNonce:Q,timestamp:Date.now()}}catch(Q){console.error(`Error signing transaction ${V+1}:`,Q);const de=(Q==null?void 0:Q.message)||(Q==null?void 0:Q.toString())||"Unknown error";return(de.includes("rate limit")||Q.status===429||Q.status===403||de.includes("not whitelisted")||de.includes("iframe not initialized"))&&console.log("Rate limit/403/iframe error detected during parallel pre-signing, skipping transaction:",de),null}});let W=[];try{W=(await Promise.all(H)).filter(V=>V!==null),console.log(`⚡ Parallel signing completed: ${W.length}/${C} successful`)}catch(Y){console.warn("⚠️ Parallel signing failed, falling back to sequential mode:",Y);for(let V=0;V<Math.min(C,10);V++)try{await new Promise(xe=>setTimeout(xe,200));const Q=h+V,de={account:J.address,to:z.contractAddress,data:"0xa2e62045",nonce:Q,maxFeePerGas:R.maxFeePerGas,maxPriorityFeePerGas:R.maxPriorityFeePerGas,value:0n,type:"eip1559",gas:100000n},Ge=await G.signTransaction(de);W.push({signedTx:Ge,_reservedNonce:Q,timestamp:Date.now()}),console.log(`✅ Sequential signing: ${W.length}/${Math.min(C,10)}`)}catch(Q){if(console.error(`Sequential signing error for transaction ${V+1}:`,Q),((Q==null?void 0:Q.message)||(Q==null?void 0:Q.toString())||"Unknown error").includes("rate limit")||Q.status===429){console.log("Rate limit in sequential mode, stopping");break}}console.log(`🔄 Sequential fallback completed: ${W.length} transactions`)}I.transactions.push(...W),W.length>0&&(I.isReady=!0,console.log(`🎮 ${W.length} transactions ready - gaming can begin!`),console.log(`✅ Pre-signed transaction pool is now ACTIVE with ${I.transactions.length} transactions`),Ve(u)),E&&I.transactions.length>0&&console.log("Fallback mode: minimum transactions ready for gaming");const _=Te(u,J.address);_&&(_.pendingNonce=Math.max(_.pendingNonce||0,h+I.transactions.length))},te=async(u,h,m)=>{const p=u.toString(),b=T.current[p];if(!b||b.isRefilling){console.log("Pool extension already in progress, skipping");return}try{b.isRefilling=!0,console.log(`🚀 Extending pool for chain ${u} from nonce ${h} with ${m} transactions (PARALLEL SIGNING)`);const{walletClient:E}=await ye(u),C=await Yt(u),I=Se[u],G=ue(),R=Array.from({length:m},async(H,W)=>{try{const _=h+W,Y={account:G.address,to:I.contractAddress,data:"0xa2e62045",nonce:_,maxFeePerGas:C.maxFeePerGas,maxPriorityFeePerGas:C.maxPriorityFeePerGas,value:0n,type:"eip1559",gas:100000n};let V;return u===6342?V=await E.signTransaction(Y):V=await E.signTransaction(Y),{signedTx:V,_reservedNonce:_,timestamp:Date.now()}}catch(_){return console.error(`Error signing extension transaction ${W+1}:`,_),((_==null?void 0:_.message)||(_==null?void 0:_.toString())||"Unknown error").includes("iframe not initialized")&&console.log("Iframe not initialized, skipping transaction in extension"),null}}),J=(await Promise.all(R)).filter(H=>H!==null);if(console.log(`⚡ Parallel signing completed: ${J.length}/${m} successful`),b&&J.length>0){b.transactions.push(...J),b.hasTriggeredRefill=!1,console.log(`✅ Pool extended successfully. Total transactions: ${b.transactions.length}`);const H=Te(u,G.address);H&&(H.pendingNonce=Math.max(H.pendingNonce||0,h+J.length))}}catch(E){console.error("❌ Error extending transaction pool:",E)}finally{b&&(b.isRefilling=!1)}},D=async u=>{const h=u.toString(),m=T.current[h],p=L[u]||L.default;if(m&&m.isReady&&m.transactions.length>m.currentIndex){const b=m.transactions[m.currentIndex];return m.currentIndex++,console.log(`🎯 Using pre-signed transaction ${m.currentIndex}/${m.transactions.length} (nonce: ${b._reservedNonce})`),m.currentIndex%5===0&&!m.hasTriggeredRefill&&(console.log(`🔄 Refilling at ${m.currentIndex} transactions used (infinite pool strategy)`),m.hasTriggeredRefill=!0,setTimeout(async()=>{try{const E=ue();if(E){const I=Te(u,E.address).pendingNonce,G=Math.max(15,p.batchSize);console.log(`🚀 Infinite pool: adding ${G} transactions (consumed 5, net growth +${G-5})`),await te(u,I,G)}}catch(E){console.error("❌ Error in infinite pool refill:",E),m.hasTriggeredRefill=!1}},0)),b.signedTx}else if(m)if(m.isReady){if(m.transactions.length<=m.currentIndex)throw console.log(`📭 Transaction pool empty for chain ${u} (used ${m.currentIndex}/${m.transactions.length})`),new Error(`Pre-signed transaction pool exhausted for chain ${u}. Only pre-signed transactions are allowed.`)}else throw console.log(`⏳ Transaction pool not ready yet for chain ${u} (${m.transactions.length} transactions in progress)`),new Error(`Pre-signed transaction pool not ready for chain ${u}. Wait for initialization to complete.`);else throw console.log(`❌ No transaction pool exists for chain ${u}`),new Error(`No pre-signed transaction pool available for chain ${u}. Only pre-signed transactions are allowed.`);try{console.error("🚨 CRITICAL: Pre-signed pool empty! Attempting emergency refill...");const b=ue();if(b){const E=Te(u,b.address),C=L[u]||L.default,I=Math.min(5,C.batchSize),G=E.pendingNonce;console.log(`🚨 Emergency pre-signing ${I} transactions from nonce ${G}`),await F(u,G,I);const R=T.current[u.toString()];if(R&&R.isReady&&R.transactions.length>R.currentIndex){const z=R.transactions[R.currentIndex];return R.currentIndex++,console.log(`✅ Emergency transaction obtained: ${R.currentIndex}/${R.transactions.length}`),z.signedTx}}}catch(b){console.error("❌ Emergency refill failed:",b)}throw new Error("CRITICAL ERROR: Pre-signed transaction pool exhausted and emergency refill failed. Only pre-signed transactions are allowed in this game.")},Ve=u=>{const h=u.toString(),m=setInterval(()=>{const p=T.current[h];if(!p||!p.isReady)return;const b=p.transactions.length-p.currentIndex,E=p.transactions.length,C=p.currentIndex,I=Math.floor(C/5),G=I*10;C%10===0&&C>0&&(console.log(`📊 Infinite Pool Stats for chain ${u}:`),console.log(`  • Consumed: ${C} transactions`),console.log(`  • Remaining: ${b} transactions`),console.log(`  • Total pool size: ${E} transactions`),console.log(`  • Growth cycles: ${I} (+${G} net growth)`),console.log(`  • Pool trend: ${b>20?"📈 GROWING":b>10?"➡️ STABLE":"📉 NEEDS ATTENTION"}`)),b<=3&&!p.isRefilling&&(console.error(`🚨 INFINITE POOL VIOLATION: Only ${b} transactions left!`),console.error("  • This should never happen with infinite pool logic"),console.error(`  • Consumed: ${C}, Total: ${E}, Cycles: ${I}`),p.hasTriggeredRefill||(p.hasTriggeredRefill=!0,console.log("🚨 EMERGENCY: Force-refilling infinite pool..."),setTimeout(async()=>{try{const R=ue();if(R){const z=Te(u,R.address);await te(u,z.pendingNonce,25)}}catch(R){console.error("❌ Emergency infinite pool refill failed:",R)}},0))),b<=8&&C>10&&console.warn(`⚠️ INFINITE POOL: Low remaining transactions (${b}) - check refill mechanism`)},3e3);return console.log(`👁️ Started INFINITE pool monitoring for chain ${u}`),console.log("📊 Pool will grow by +10 transactions every 5 consumed (mathematical infinity)"),m},se=async u=>{try{const{publicClient:h}=await ye(u),m=ue();if(!m)return console.error("No embedded wallet available for balance check"),"0";const p=await h.getBalance({address:m.address}),b=(Number(p)/10**18).toFixed(4);return c(b),console.log(`Balance for ${m.address}: ${b} ETH`),b}catch(h){return console.error("Error checking balance:",h),c("0"),"0"}},ae=async(u,h)=>{const m=`faucet_${h}_${u}`,p=5*60*1e3;try{const b=localStorage.getItem(m);if(b){const R=Date.now()-parseInt(b);if(R<p){const z=Math.ceil((p-R)/1e3);throw console.log(`⏱️ Faucet cooldown: ${z}s remaining`),new Error(`Faucet is on cooldown. Try again in ${z} seconds.`)}}console.log("💰 Calling optimized faucet for address:",u);const E=new AbortController,C=setTimeout(()=>E.abort(),3e4),I=await fetch("/api/faucet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:u,chainId:h,timestamp:Date.now(),clientVersion:"1.0"}),signal:E.signal,mode:"cors"});if(clearTimeout(C),!I.ok){let R="Faucet request failed";try{const z=await I.json();if(R=z.error||R,z.code==="INSUFFICIENT_BALANCE")R="Faucet is temporarily empty. Please try again later.";else if(z.code==="RATE_LIMIT")R=`Rate limit exceeded. Try again in ${z.retryAfter||300} seconds.`;else if(z.code==="ALREADY_SUFFICIENT")return console.log("💰 Balance already sufficient, skipping faucet"),{success:!0,message:"Sufficient balance already available",skipped:!0}}catch(z){console.error("Failed to parse faucet error response:",z),I.status===429?R="Too many requests. Please wait a few minutes and try again.":I.status===503?R="Faucet service is temporarily unavailable. Please try again later.":R=`HTTP ${I.status}: ${I.statusText}`}throw new Error(R)}const G=await I.json();return localStorage.setItem(m,Date.now().toString()),console.log("💰 Faucet success:",G),G.txHash&&(console.log("⏳ Waiting for faucet transaction to be processed..."),setTimeout(async()=>{try{await se(h),console.log("✅ Balance updated after faucet transaction")}catch(R){console.warn("Failed to update balance after faucet:",R)}},3e3)),{success:!0,...G,timestamp:Date.now()}}catch(b){throw console.error("❌ Faucet error:",b),b.name==="AbortError"?new Error("Faucet request timed out. Please check your connection and try again."):b.message.includes("Failed to fetch")||b.message.includes("NetworkError")?new Error("Network error. Please check your connection and try again."):b.message.includes("cooldown")||b.message.includes("Rate limit")||b.message.includes("temporarily unavailable")?b:new Error(`Faucet error: ${b.message}`)}},ce=async(u,h)=>{var I,G,R;const m=Se[u],p=L[u]||L.default,b=await Kt(u),E=Date.now();let C=!1;try{let z,J;if(m.sendMethod==="realtime_sendRawTransaction"){if(console.log("🚀 Using MegaETH realtime_sendRawTransaction for instant execution..."),z=await je(async()=>{var Y,V,Q,de,Ge;const W=new AbortController,_=setTimeout(()=>W.abort(),m.connectionTimeouts.request);try{const xe=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"realtime_sendRawTransaction",params:[h],id:Date.now()}),signal:W.signal,mode:"cors"});if(clearTimeout(_),!xe.ok){const Ur=await xe.text();throw new Error(`HTTP ${xe.status}: ${Ur}`)}const En=await xe.text(),Ae=$n(En);if(!Ae)throw new Error("Invalid response format from MegaETH RPC");if(Ae.error){if((Y=Ae.error.message)!=null&&Y.includes("nonce too low"))throw console.log("🔄 MegaETH nonce too low, triggering refresh"),new Error("nonce too low");if((V=Ae.error.message)!=null&&V.includes("rate limit"))throw console.log("⏱️ MegaETH rate limit hit, will retry"),new Error("rate limit exceeded");if((Q=Ae.error.message)!=null&&Q.includes("already known"))return console.log("🔄 Transaction already known by network - likely duplicate, treating as success"),{result:{transactionHash:"duplicate_tx_"+Date.now(),status:"0x1",gasUsed:"0x66f9",blockNumber:"0x"+Date.now().toString(16),from:((de=Ae.error.data)==null?void 0:de.from)||"0x0",to:((Ge=Ae.error.data)==null?void 0:Ge.to)||"0x0"}};throw new Error(`MegaETH RPC Error: ${Ae.error.message}`)}return Ae}catch(xe){throw clearTimeout(_),xe.name==="AbortError"?new Error("MegaETH RPC timeout - real-time deadline exceeded"):xe}},p.maxRetries,100,u),z.error)throw new Error(`MegaETH Real-time Error: ${z.error.message}`);return J=z.result,console.log("⚡ MegaETH instant transaction hash:",J),C=!0,{hash:J,receipt:z.result,isInstant:!0,network:"MegaETH"}}else if(m.sendMethod==="eth_sendRawTransactionSync"){console.log("📦 Using RISE eth_sendRawTransactionSync for fast execution...");const H=new AbortController,W=setTimeout(()=>H.abort(),m.connectionTimeouts.retry);try{z=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_sendRawTransactionSync",params:[h],id:Date.now()}),signal:H.signal,mode:"cors"}),clearTimeout(W);const _=await z.text(),Y=$n(_);if(!Y)throw new Error("Invalid response format from RISE RPC");if(Y.error)throw(I=Y.error.message)!=null&&I.includes("nonce too low")?(console.log("🔄 RISE nonce too low detected"),new Error("nonce too low")):new Error(Y.error.message||"RISE transaction failed");return C=!0,{hash:Y.result,receipt:Y.result,isInstant:!0,network:"RISE"}}catch(_){throw clearTimeout(W),_.name==="AbortError"?new Error("RISE RPC timeout"):_}}else{console.log("🔗 Using standard eth_sendRawTransaction...");const H=new AbortController,W=setTimeout(()=>H.abort(),m.connectionTimeouts.retry);try{z=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_sendRawTransaction",params:[h],id:Date.now()}),signal:H.signal,mode:"cors"}),clearTimeout(W);const _=await z.text(),Y=$n(_);if(!Y)throw new Error("Invalid response format from RPC");if(Y.error)throw(G=Y.error.message)!=null&&G.includes("nonce too low")?(console.log("🔄 Standard RPC nonce too low detected"),new Error("nonce too low")):new Error(Y.error.message||"Transaction failed");return C=!0,{hash:Y.result,isInstant:!1,network:m.name}}catch(_){throw clearTimeout(W),_.name==="AbortError"?new Error("Standard RPC timeout"):_}}}catch(z){if(console.error("❌ Send transaction error:",z),(R=z.message)!=null&&R.includes("nonce too low")){const J=ue();if(J){console.log('🔄 Refreshing nonce due to "nonce too low" error');try{await et(u,J.address,!0);const H=u.toString(),W=T.current[H];W&&(console.log("🗑️ Clearing invalid pre-signed transaction pool"),W.transactions=[],W.currentIndex=0,W.isReady=!1,W.hasTriggeredRefill=!1,setTimeout(async()=>{try{const{publicClient:_}=await ye(u),Y=await _.getTransactionCount({address:J.address,blockTag:"pending"});console.log(`🔄 Recreating pool with actual network nonce: ${Y}`);const V=Te(u,J.address);V.currentNonce=Y,V.pendingNonce=Y,V.lastUpdate=Date.now();const Q=L[u]||L.default;await F(u,Y,Q.batchSize),console.log(`✅ Pre-signed transaction pool recreated with correct nonces starting from ${Y}`)}catch(_){console.error("❌ Failed to recreate transaction pool:",_)}},100))}catch(H){console.error("Failed to refresh nonce:",H)}}}throw z}finally{const z=Date.now()-E;Nn(u,b,C,z),C&&console.log(`✅ Transaction sent successfully in ${z}ms via ${m.sendMethod}`)}},$e=async u=>{if(!ue())throw new Error("No embedded wallet available");if(u===6342){const b=u.toString(),E=T.current[b];if(E&&E.isReady&&E.transactions.length>E.currentIndex){if(k.current>10)throw console.log("🚫 Maximum MegaETH throughput reached, throttling"),new Error("Transaction throughput limit reached")}else if(k.current>2)throw console.log("🚫 Too many concurrent realtime transactions"),new Error("Realtime transaction limit reached")}else if(r)throw new Error("Transaction already pending, blocking jump");A(u);const m=performance.now();return(L[u]||L.default).burstMode&&Be(u)?(console.log("🚀 Using burst mode for transaction"),await vn(u,async()=>await we(u,m))):await we(u,m)},we=async(u,h)=>{var E,C,I;let m=null,p=0,b=!1;try{if(u!==6342&&a(!0),k.current++,m=await D(u),!m)throw new Error("Failed to get transaction for sending");console.log("⚡ Sending instant on-chain jump transaction...");const G=await ce(u,m);console.log("📡 Transaction sent:",G);const R=Se[u];let z=G;if(R.sendMethod==="realtime_sendRawTransaction")console.log("✅ MegaETH instant confirmation:",G),z=G.receipt||G,b=!0;else if(R.sendMethod==="eth_sendRawTransactionSync")console.log("✅ RISE sync confirmation:",G),z=G.receipt||G,b=!0;else{console.log("⏳ Waiting for transaction confirmation...");try{const{publicClient:H}=await ye(u),W=await Promise.race([H.waitForTransactionReceipt({hash:G.hash,timeout:3e4}),new Promise((_,Y)=>setTimeout(()=>Y(new Error("Transaction confirmation timeout")),35e3))]);console.log("✅ Transaction confirmed:",W),z=W,b=!0}catch(H){console.warn("⚠️ Transaction confirmation failed, but transaction may still be valid:",H),z=G,b=!0}}p=performance.now()-h,console.log(`🎮 Jump transaction completed in ${Math.round(p)}ms:`,z);const J=K(u,p,b);return console.log(`📊 Performance: Avg ${Math.round(J.averageBlockchainTime)}ms, Success Rate ${J.successRate.toFixed(1)}%`),{...z,blockchainTime:Math.round(p),reactionTime:0,performanceMetrics:{averageBlockchainTime:Math.round(J.averageBlockchainTime),successRate:J.successRate,totalTransactions:J.totalTransactions}}}catch(G){if(console.error("❌ Error sending on-chain movement:",G),p=performance.now()-h,K(u,p,!1),(E=G.message)!=null&&E.includes("nonce too low")){console.log("🔄 Nonce too low detected, refreshing nonce and retrying...");try{const R=ue();if(R){await et(u,R.address,!0);const z=u.toString(),J=T.current[z];J&&(console.log("🗑️ Clearing invalid pre-signed transaction pool due to nonce error"),J.transactions=[],J.currentIndex=0,J.isReady=!1,J.hasTriggeredRefill=!1),console.log("✅ Nonce refreshed, please try again")}else console.error("❌ No wallet available for nonce refresh")}catch(R){console.error("❌ Failed to refresh nonce:",R)}}else(C=G.message)!=null&&C.includes("context deadline exceeded")?console.log("⏰ Network timeout detected, transaction may still be processing..."):(I=G.message)!=null&&I.includes("insufficient funds")&&console.log("💰 Insufficient funds detected, consider calling faucet...");throw new Error(`Blockchain transaction error: ${G.message}`)}finally{u!==6342&&a(!1),k.current=Math.max(0,k.current-1)}},Ee=async u=>{const h=u.toString();if(!(S.current[h]||n))try{s(!0),console.log("🚀 Starting instant blockchain initialization for chain:",u);let m=null,p=0;const b=10;for(;!m&&p<b;)m=ue(),m||(console.log(`Waiting for embedded wallet creation... (attempt ${p+1}/${b})`),await new Promise(H=>setTimeout(H,1e3)),p++);if(!m)throw new Error("No embedded wallet available");console.log("✅ Using embedded wallet address:",m.address),m.walletClientType==="privy"&&console.log("⚡ INSTANT GAMING MODE ENABLED - игра готова!"),await B(u);const E=Te(u,m.address),C=[],I=Promise.all([se(u),je(async()=>{const{publicClient:H}=await ye(u);return await H.getTransactionCount({address:m.address,blockTag:"pending"})},3,1e3,u)]).then(([H,W])=>(E.currentNonce=W,E.pendingNonce=W,E.lastUpdate=Date.now(),console.log("💰 Current balance:",H),console.log("🎯 Starting nonce:",W),parseFloat(H)<5e-5&&(console.log(`💰 Balance is ${H} ETH (< 0.00005), calling faucet in background...`),ae(m.address,u).then(()=>(console.log("✅ Background faucet completed"),setTimeout(()=>se(u),5e3),et(u,m.address,!0))).catch(_=>{console.warn("⚠️ Background faucet failed (non-blocking):",_)})),{currentBalance:H,initialNonce:W}));C.push(I),S.current[h]=!0,console.log("⚡ INSTANT GAMING MODE ENABLED - игра готова!");const G=L[u]||L.default,R=Jt(u);let z=G.poolSize;R&&(z=R.reducedBatchSize,console.log(`Using fallback batch size: ${z}`)),I.then(async({initialNonce:H})=>{console.log(`🔄 Background pre-signing ${z} transactions starting from nonce ${H}`),await new Promise(_=>setTimeout(_,2e3));const W=Te(u,m.address);return W&&(W.pendingNonce=Math.max(W.pendingNonce||H,H+z)),F(u,H,z).then(()=>{const _=T.current[h];_&&_.transactions.length>0?console.log(`✅ Background pre-signed ${_.transactions.length} transactions - performance boost ready!`):console.log("⚠️ Pre-signing completed with 0 transactions - using realtime mode")}).catch(_=>{const Y=(_==null?void 0:_.message)||(_==null?void 0:_.toString())||"Unknown error";console.warn("⚠️ Background pre-signing failed (non-blocking):",Y),Y.includes("iframe not initialized")?(console.log("🔄 Iframe initialization issue detected - will retry later"),setTimeout(async()=>{try{console.log("🔄 Retrying pre-signing after iframe initialization..."),await F(u,H,Math.min(z,5))}catch(V){console.warn("⚠️ Retry pre-signing also failed:",V),Ye(u)}},5e3)):Y.includes("rate limit")||Y.includes("429")?Ye(u,"rate limit detected"):Ye(u,Y),console.log("🔄 Enabled realtime fallback mode - game continues smoothly")})}).catch(H=>{console.warn("Background pre-signing error (non-critical):",H)}),await I,console.log("🎮 Blockchain ready for instant gaming on chain:",u),console.log(R?"⚠️ Running in fallback mode - reduced performance expected":"🚀 Full performance mode activating in background..."),Promise.all(C.slice(1)).then(()=>{console.log("✅ Full blockchain optimization complete")}).catch(H=>{console.warn("⚠️ Some background optimizations failed (non-critical):",H)})}catch(m){console.error("❌ Critical initialization error:",m),S.current[h]=!0,Ye(u),console.log("🔄 Emergency fallback mode enabled - game will work with realtime signing")}finally{s(!1)}},Xe=async u=>{try{const{publicClient:h,config:m}=await ye(u),p=await h.readContract({address:m.contractAddress,abi:$c,functionName:"number"});return f(Number(p)),Number(p)}catch(h){return console.error("Error reading contract number:",h),0}},ge=O.useRef({}),ht=u=>(ge.current[u]||(ge.current[u]={failures:0,lastFailureTime:0,state:"CLOSED",threshold:5,timeout:6e4}),ge.current[u]),je=async(u,h=3,m=1e3,p=null)=>{let b,E=null;if(p&&(E=ht(p),E.state==="OPEN")){const C=Date.now()-E.lastFailureTime;if(C<E.timeout)throw new Error(`Circuit breaker is OPEN for chain ${p}. Try again in ${Math.round((E.timeout-C)/1e3)} seconds.`);E.state="HALF_OPEN",console.log(`Circuit breaker for chain ${p} entering HALF_OPEN state`)}for(let C=0;C<h;C++)try{const I=await u();return E&&(E.failures=0,E.state="CLOSED"),I}catch(I){b=I;const G=C===h-1,R=(I==null?void 0:I.message)||(I==null?void 0:I.toString())||"",z=(I==null?void 0:I.status)||0,J=(I==null?void 0:I.name)||"";E&&!R.includes("iframe not initialized")?(E.failures++,E.lastFailureTime=Date.now(),E.failures>=E.threshold&&(E.state="OPEN",console.warn(`Circuit breaker OPENED for chain ${p} after ${E.failures} failures`))):R.includes("iframe not initialized")&&console.log("🔄 Iframe error detected - not counting as network failure");const H=z===429||z===403||z===500||z===502||z===503||z===504||R.includes("rate limit")||R.includes("timeout")||R.includes("context deadline exceeded")||R.includes("connection")||R.includes("network")||R.includes("fetch")||J==="AbortError"||J==="TypeError",W=R.includes("nonce too low")||R.includes("insufficient funds")||R.includes("gas too low")||R.includes("invalid signature")||R.includes("execution reverted")||R.includes("iframe not initialized");if(G||W||!H)throw W&&console.log(`Non-retryable error encountered: ${I.message}`),I;if(E&&E.state==="OPEN"){console.log(`Circuit breaker is OPEN, stopping retries for chain ${p}`);break}const _=Math.random()*1e3,Y=Math.min(m*Math.pow(2,C)+_,3e4);console.log(`Retry attempt ${C+1}/${h} after ${Math.round(Y)}ms delay due to:`,I.message),await new Promise(V=>setTimeout(V,Y))}throw b};return O.useEffect(()=>{window.location.hostname==="localhost"&&(window.blockchainDebug={getRPCHealth:u=>j.current[u],getCircuitBreaker:u=>ge.current[u],getTransactionPool:u=>T.current[u],getBurstState:u=>re.current[u],getConnectionPool:()=>x.current,getNonceManager:(u,h)=>v.current[`${u}-${h}`],getPerformanceMetrics:u=>$.current[u],getGlobalCache:()=>{try{const u=localStorage.getItem(y);return u?JSON.parse(u):null}catch{return null}},forceCircuitBreakerOpen:u=>{const h=ht(u);h.state="OPEN",h.failures=h.threshold,h.lastFailureTime=Date.now(),console.log(`Force opened circuit breaker for chain ${u}`)},resetCircuitBreaker:u=>{const h=ht(u);h.state="CLOSED",h.failures=0,console.log(`Reset circuit breaker for chain ${u}`)},clearTransactionPool:u=>{const h=u.toString();T.current[h]&&(T.current[h].transactions=[],T.current[h].currentIndex=0,console.log(`Cleared transaction pool for chain ${u}`))},generatePerformanceReport:u=>{var I,G;const h=j.current[u],m=T.current[u==null?void 0:u.toString()],p=ge.current[u],b=$.current[u],E=window.blockchainDebug.getGlobalCache(),C={timestamp:new Date().toISOString(),chainId:u,network:((I=Se[u])==null?void 0:I.name)||"Unknown",rpcEndpoints:h?{current:(G=h.endpoints[h.currentEndpointIndex])==null?void 0:G.url,healthyCount:h.endpoints.filter(R=>R.healthy).length,totalCount:h.endpoints.length,endpoints:h.endpoints.map(R=>({url:R.url,healthy:R.healthy,failures:R.consecutiveFailures,responseTime:R.responseTime}))}:null,transactionPool:m?{totalTransactions:m.transactions.length,currentIndex:m.currentIndex,availableTransactions:m.transactions.length-m.currentIndex,poolUtilization:`${Math.round(m.currentIndex/m.transactions.length*100)}%`,isRefilling:m.isRefilling,hasTriggeredRefill:m.hasTriggeredRefill}:null,circuitBreaker:p?{state:p.state,failures:p.failures,threshold:p.threshold,lastFailure:p.lastFailureTime?new Date(p.lastFailureTime).toISOString():null}:null,performance:b?{totalTransactions:b.totalTransactions,successfulTransactions:b.successfulTransactions,successRate:`${b.successRate.toFixed(1)}%`,averageBlockchainTime:`${Math.round(b.averageBlockchainTime)}ms`,recentTransactions:b.recentTransactions.slice(-10).map(R=>({blockchainTime:`${R.blockchainTime}ms`,success:R.success,timestamp:new Date(R.timestamp).toISOString()})),performanceGrade:b.averageBlockchainTime<1e3?"🚀 INSTANT":b.averageBlockchainTime<3e3?"⚡ FAST":b.averageBlockchainTime<5e3?"🔥 GOOD":"🐌 SLOW"}:null,connections:x.current,burstState:re.current[u]?{lastBurstTime:new Date(re.current[u].lastBurstTime).toISOString(),burstCount:re.current[u].burstCount,inCooldown:re.current[u].inCooldown,pendingTransactions:re.current[u].pendingTransactions.length}:null,globalCache:E?{gasParamsAge:E.gasParams?`${Math.round((Date.now()-E.gasParams.timestamp)/1e3)}s ago`:"None",chainParamsAge:E.chainParams?`${Math.round((Date.now()-E.chainParams.timestamp)/1e3)}s ago`:"None",rpcHealthAge:E.rpcHealth?`${Math.round((Date.now()-E.rpcHealth.timestamp)/1e3)}s ago`:"None"}:null};return console.group(`📊 Performance Report - ${C.network} (Chain ${u})`),console.table(C.performance),console.log("🔗 RPC Health:",C.rpcEndpoints),console.log("🎯 Transaction Pool:",C.transactionPool),console.log("⚡ Circuit Breaker:",C.circuitBreaker),console.log("🚀 Burst State:",C.burstState),console.log("💾 Global Cache:",C.globalCache),console.groupEnd(),C},quickStats:u=>{var p;const h=$.current[u],m=T.current[u==null?void 0:u.toString()];if(h&&m){const b=m.currentIndex,E=m.transactions.length-m.currentIndex,C=Math.floor(b/5),I=C*10;console.log(`🎮 ${((p=Se[u])==null?void 0:p.name)||"Chain "+u}:`),console.log(`  ⚡ Avg Speed: ${Math.round(h.averageBlockchainTime)}ms`),console.log(`  📊 Success Rate: ${h.successRate.toFixed(1)}%`),console.log(`  🎯 Pool Status: ${E}/${m.transactions.length} ready`),console.log(`  ♾️  Infinite Pool: ${b} used, +${I} growth (${C} cycles)`),console.log(`  📈 Next refill: ${5-b%5} transactions`),console.log(`  🚀 Performance: ${h.averageBlockchainTime<1e3?"INSTANT":h.averageBlockchainTime<3e3?"FAST":"SLOW"}`)}else console.log("📊 No performance data available yet")},infinitePoolStats:u=>{const h=T.current[u==null?void 0:u.toString()];if(!h){console.log("❌ No pool found for chain",u);return}const m=h.currentIndex,p=h.transactions.length-h.currentIndex,b=h.transactions.length,E=Math.floor(m/5),C=E*10,I=(Math.floor(m/5)+1)*5,G=I-m;if(console.group(`♾️ Infinite Pool Analysis - Chain ${u}`),console.log("📊 Current Status:"),console.log(`  • Total transactions: ${b}`),console.log(`  • Consumed: ${m}`),console.log(`  • Remaining: ${p}`),console.log(`  • Pool ready: ${h.isReady?"✅":"❌"}`),console.log(`  • Refilling: ${h.isRefilling?"🔄":"⏸️"}`),console.log("🔄 Growth Cycles:"),console.log(`  • Completed cycles: ${E}`),console.log(`  • Net growth: +${C} transactions`),console.log(`  • Growth rate: ${m>0?(C/m*100).toFixed(1):0}%`),console.log("📈 Next Refill:"),console.log(`  • Refill trigger at: ${I} consumed`),console.log(`  • Transactions until refill: ${G}`),console.log("  • Will add: +15 transactions"),console.log("🎯 Pool Efficiency:"),console.log(`  • Efficiency: ${(p/b*100).toFixed(1)}%`),console.log(`  • Trend: ${p>20?"📈 Growing":p>10?"➡️ Stable":"📉 Needs attention"}`),console.log(`  • Is infinite: ${b>50?"✅ Yes":"❌ Not yet"}`),m>0){const R=m+C;console.log("🧮 Mathematical Verification:"),console.log(`  • Theoretical pool size: ${R}`),console.log(`  • Actual pool size: ${b}`),console.log(`  • Difference: ${b-R} (should be positive)`)}console.groupEnd()},forceResetAllCircuitBreakers:()=>{Object.keys(ge.current).forEach(u=>{const h=ge.current[u];h&&(h.state="CLOSED",h.failures=0,h.lastFailureTime=0,console.log(`✅ Force reset circuit breaker for chain ${u}`))}),console.log("🚀 All circuit breakers reset - ready for gaming!")},resetIframeIssues:u=>{const h=ge.current[u];h&&h.state==="OPEN"&&(h.state="CLOSED",h.failures=0,h.lastFailureTime=0,console.log(`🔄 Reset circuit breaker for iframe issues on chain ${u}`));const m=ee.current[u];m&&m.degradedMode&&(m.degradedMode=!1,console.log(`🔄 Reset fallback mode for iframe issues on chain ${u}`))}},console.log("🔧 Blockchain debug utilities loaded. Use window.blockchainDebug for monitoring."),console.log("📊 Examples:"),console.log("  • window.blockchainDebug.generatePerformanceReport(6342)"),console.log("  • window.blockchainDebug.quickStats(6342)"),console.log("  • window.blockchainDebug.infinitePoolStats(6342) // 🆕 Infinite pool analysis"),console.log("  • window.blockchainDebug.getPerformanceMetrics(6342)"),console.log("  • window.blockchainDebug.forceResetAllCircuitBreakers() // Экстренный сброс"),console.log("  • window.blockchainDebug.resetIframeIssues(6342) // 🆕 Сброс iframe проблем"),setTimeout(()=>{Object.keys(ge.current).forEach(u=>{const h=ge.current[u];h&&h.state==="OPEN"&&(h.state="CLOSED",h.failures=0,console.log(`🔄 Auto-reset circuit breaker for chain ${u} on page load`))})},2e3))},[]),{isInitializing:n,transactionPending:r,transactionPendingCount:k.current,balance:i,contractNumber:l,initData:Ee,sendUpdate:$e,checkBalance:se,callFaucet:ae,getContractNumber:Xe,getEmbeddedWallet:ue,isAuthenticated:t,isReady:t&&e.length>0,getPoolStatus:u=>{const h=T.current[u==null?void 0:u.toString()];if(!h)return null;const m=Math.floor(h.currentIndex/5),p=m*10;return{total:h.transactions.length,used:h.currentIndex,remaining:h.transactions.length-h.currentIndex,isReady:h.isReady,isRefilling:h.isRefilling,cyclesCompleted:m,netGrowth:p,isInfinite:h.transactions.length>50,trend:h.transactions.length-h.currentIndex>20?"growing":h.transactions.length-h.currentIndex>10?"stable":"attention"}},getInfinitePoolStats:u=>{const h=T.current[u==null?void 0:u.toString()];if(!h)return null;const m=h.currentIndex,p=h.transactions.length-h.currentIndex,b=h.transactions.length,E=Math.floor(m/5),C=E*10,I=(Math.floor(m/5)+1)*5,G=I-m;return{consumed:m,remaining:p,total:b,cyclesCompleted:E,netGrowth:C,nextRefillAt:I,transactionsToNextRefill:G,isInfinite:b>50,growthRate:m>0?(C/m*100).toFixed(1)+"%":"0%",poolEfficiency:b>0?(p/b*100).toFixed(1)+"%":"0%"}},startPoolMonitoring:Ve}},Ac=({selectedNetwork:t,className:e=""})=>{const{authenticated:n}=ot(),{wallets:s}=rn(),{balance:r,getEmbeddedWallet:a,getPoolStatus:i,getInfinitePoolStats:c}=Lr(),[l,f]=O.useState(null),[d,g]=O.useState(null),[y,N]=O.useState(!1);if(O.useEffect(()=>{if(n&&s.length>0){const x=a();x&&g({address:x.address,type:x.walletClientType,isEmbedded:x.walletClientType==="privy"})}},[n,s,a]),O.useEffect(()=>{if(t&&t.id!=="select"){const x=()=>{try{const v=i(t.id),S=c(t.id);f({...v,infiniteStats:S})}catch(v){console.warn("Failed to get pool status:",v)}};x();const T=setInterval(x,1e3);return()=>clearInterval(T)}},[t,i,c]),!n||!d)return null;const w=x=>x?`${x.slice(0,6)}...${x.slice(-4)}`:"",P=x=>x?x.isReady&&x.totalTransactions>10?"text-green-400":x.isReady&&x.totalTransactions>5?"text-yellow-400":x.isReady?"text-orange-400":"text-red-400":"text-gray-400",j=x=>x?x.isReady&&x.totalTransactions>10?"🚀":x.isReady&&x.totalTransactions>5?"⚡":x.isReady?"⚠️":"❌":"⏳";return o.jsxs("div",{className:`privy-wallet-status ${e}`,children:[o.jsxs("div",{className:"status-header",onClick:()=>N(!y),style:{cursor:"pointer"},children:[o.jsxs("div",{className:"wallet-info",children:[o.jsx("span",{className:"wallet-icon",children:"👛"}),o.jsx("span",{className:"wallet-address",children:w(d.address)}),d.isEmbedded&&o.jsx("span",{className:"embedded-badge",children:"Privy"})]}),t&&t.id!=="select"&&l&&o.jsxs("div",{className:"pool-status",children:[o.jsx("span",{className:`status-icon ${P(l)}`,children:j(l)}),o.jsx("span",{className:`pool-count ${P(l)}`,children:l.totalTransactions-l.consumedTransactions})]}),o.jsx("span",{className:`expand-icon ${y?"expanded":""}`,children:"▼"})]}),y&&o.jsxs("div",{className:"status-details",children:[o.jsxs("div",{className:"detail-section",children:[o.jsx("h4",{children:"💰 Wallet Details"}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Address:"}),o.jsx("span",{className:"monospace",children:d.address})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Type:"}),o.jsx("span",{children:d.isEmbedded?"Privy Embedded":"External"})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Balance:"}),o.jsxs("span",{children:[r||"0.0000"," ETH"]})]})]}),t&&t.id!=="select"&&l&&o.jsxs("div",{className:"detail-section",children:[o.jsx("h4",{children:"⚡ Pre-signed Pool Status"}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Network:"}),o.jsx("span",{children:t.name})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Status:"}),o.jsx("span",{className:P(l),children:l.isReady?"Ready":"Initializing"})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Available:"}),o.jsx("span",{className:P(l),children:l.totalTransactions-l.consumedTransactions})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Total Signed:"}),o.jsx("span",{children:l.totalTransactions})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Used:"}),o.jsx("span",{children:l.consumedTransactions})]}),l.infiniteStats&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Refill Cycles:"}),o.jsx("span",{children:l.infiniteStats.cycles})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Growth Rate:"}),o.jsxs("span",{children:["+",l.infiniteStats.netGrowthPerCycle,"/cycle"]})]})]})]}),t&&t.id!=="select"&&o.jsxs("div",{className:"detail-section",children:[o.jsx("h4",{children:"🎮 Gaming Performance"}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Instant Mode:"}),o.jsx("span",{className:"text-green-400",children:l!=null&&l.isReady?"Active":"Preparing"})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Burst Mode:"}),o.jsx("span",{className:"text-blue-400",children:"Enabled"})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{children:"Auto-refill:"}),o.jsx("span",{className:"text-purple-400",children:"Infinite"})]})]})]})]})},Mc=({transactionPending:t,transactionPendingCount:e,balance:n,blockchainStatus:s,selectedNetwork:r,authenticated:a})=>{var x;const[i,c]=O.useState([]),[l,f]=O.useState(1),[d,g]=O.useState(0),[y,N]=O.useState(0);O.useEffect(()=>{if(a&&r&&!r.isWeb2&&s&&(s.totalMovements||0)>0){const v=s.lastTransactionTime||0;if(v>d&&v>0){const S={id:l,type:"transaction",title:"Jump Completed",message:`Jump completed in ${v}ms on ${r.name}`,status:"completed",timestamp:Date.now(),completedAt:Date.now()};c(k=>[...k,S]),f(k=>k+1),g(v)}}},[s==null?void 0:s.totalMovements,s==null?void 0:s.lastTransactionTime,a,r,l,d]),O.useEffect(()=>{if(a&&r&&!r.isWeb2)if(e>y){const T={id:l,type:"transaction",title:"Transaction Pending",message:`Processing jump on ${r.name}`,status:"pending",timestamp:Date.now()};c(v=>[...v,T]),f(v=>v+1),N(e)}else e<y&&N(e)},[e,a,r,l,y]),O.useEffect(()=>{s!=null&&s.lastTransactionTime&&a&&r&&!r.isWeb2&&c(T=>T.map(v=>v.status==="pending"&&v.type==="transaction"?{...v,status:"completed",message:`Jump completed in ${s.lastTransactionTime}ms`,completedAt:Date.now()}:v))},[s==null?void 0:s.lastTransactionTime,a,r]),O.useEffect(()=>{var T;if(s!=null&&s.lastError&&a&&r&&!r.isWeb2&&!i.some(S=>S.type==="error"&&Date.now()-S.timestamp<5e3&&S.message.includes(s.lastError.type))){const S={id:l,type:"error",title:"Transaction Error",message:`${s.lastError.type}: ${(T=s.lastError.message)==null?void 0:T.slice(0,50)}...`,status:"error",timestamp:Date.now()};c(k=>[...k,S]),f(k=>k+1)}},[(x=s==null?void 0:s.lastError)==null?void 0:x.timestamp,a,r,i,l]),O.useEffect(()=>{if(s!=null&&s.averageTransactionTime&&s.averageTransactionTime<1e3&&a&&r&&!r.isWeb2&&!i.some(v=>v.type==="performance"&&Date.now()-v.timestamp<3e4)){const v={id:l,type:"performance",title:"Excellent Performance!",message:`Average speed: ${Math.round(s.averageTransactionTime)}ms - Gaming Mode Active! 🚀`,status:"success",timestamp:Date.now()};c(S=>[...S,v]),f(S=>S+1)}},[s==null?void 0:s.averageTransactionTime,a,r,i,l]),O.useEffect(()=>{if(n&&parseFloat(n)<5e-5&&a&&r&&!r.isWeb2&&!i.some(v=>v.type==="low-balance"&&v.status!=="dismissed")){const v={id:l,type:"low-balance",title:"Low Balance",message:`Balance: ${n} ETH - Get test tokens`,status:"warning",timestamp:Date.now()};c(S=>[...S,v]),f(S=>S+1)}},[n,a,r,i,l]),O.useEffect(()=>{const T=setInterval(()=>{c(v=>{const S=Date.now(),k=v.filter($=>!($.status==="completed"&&$.completedAt&&S-$.completedAt>3e3||S-$.timestamp>1e4));return k.length===v.length?v:k})},2e3);return()=>clearInterval(T)},[]);const w=O.useCallback(T=>{c(v=>v.filter(S=>S.id!==T))},[]),P=O.useCallback((T,v)=>T==="transaction"?v==="pending"?"⏳":v==="completed"?"✅":"🔄":T==="low-balance"?"⚠️":T==="error"?"❌":T==="performance"?"🚀":"📢",[]),j=O.useCallback((T,v)=>T==="transaction"?v==="pending"?"pending":v==="completed"?"success":"info":T==="low-balance"?"warning":T==="error"?"error":T==="performance"?"success":"info",[]);return!a||!r||r.isWeb2||i.length===0?null:o.jsx("div",{className:"transaction-notifications",children:i.map(T=>o.jsx("div",{className:`notification ${j(T.type,T.status)}`,children:o.jsxs("div",{className:"notification-content",children:[o.jsxs("div",{className:"notification-header",children:[o.jsx("span",{className:"notification-icon",children:P(T.type,T.status)}),o.jsx("span",{className:"notification-title",children:T.title}),o.jsx("button",{className:"notification-close",onClick:()=>w(T.id),children:"×"})]}),o.jsx("div",{className:"notification-message",children:T.message}),T.type==="transaction"&&T.status==="pending"&&o.jsx("div",{className:"notification-progress",children:o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-fill"})})})]})},T.id))})};class Oc{constructor(e,n,s,r,a,i,c=null){ne(this,"WALK_ANIMATION_TIMER",180);ne(this,"walkAnimationTimer",this.WALK_ANIMATION_TIMER);ne(this,"buddyRunImages",[]);ne(this,"jumpPressed",!1);ne(this,"jumpInProgress",!1);ne(this,"falling",!1);ne(this,"JUMP_SPEED",.65);ne(this,"GRAVITY",.38);ne(this,"dustParticles",[]);ne(this,"showDust",!1);ne(this,"dustTimer",0);ne(this,"touchstart",()=>{this.jumpPressed=!0});ne(this,"touchend",()=>{this.jumpPressed=!1});ne(this,"keydown",e=>{e.code==="Space"&&(this.jumpPressed=!0)});ne(this,"keyup",e=>{e.code==="Space"&&(this.jumpPressed=!1)});this.ctx=e,this.canvas=e.canvas,this.width=n,this.height=s,this.minJumpHeight=r,this.maxJumpHeight=a,this.scaleRatio=i,this.onMovementCallback=c,this.x=10*i,this.y=this.canvas.height-this.height,this.yStandingPosition=this.y,this.standingStillImage=new Image,this.standingStillImage.src="assets/buddy_standing_still.png",this.standingStillImage.onerror=()=>console.error("Failed to load buddy_standing_still.png"),this.image=this.standingStillImage,this.jumpingImage=new Image,this.jumpingImage.src="assets/buddy_standing_still_eye_closed.png",this.jumpingImage.onerror=()=>console.error("Failed to load buddy_standing_still_eye_closed.png");const l=new Image;l.src="assets/buddy_run1.png",l.onerror=()=>console.error("Failed to load buddy_run1.png");const f=new Image;f.src="assets/buddy_run2.png",f.onerror=()=>console.error("Failed to load buddy_run2.png"),this.buddyRunImages.push(l),this.buddyRunImages.push(f),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),window.removeEventListener("touchstart",this.touchstart),window.removeEventListener("touchend",this.touchend),window.addEventListener("touchstart",this.touchstart),window.addEventListener("touchend",this.touchend)}update(e,n){this.run(e,n),this.jumpInProgress&&(this.image=this.jumpingImage),this.jump(n),this.updateDust(n)}jump(e){this.jumpPressed&&(this.jumpInProgress||this.onMovementCallback&&this.onMovementCallback(),this.jumpInProgress=!0),this.jumpInProgress&&!this.falling?this.y>this.canvas.height-this.minJumpHeight||this.y>this.canvas.height-this.maxJumpHeight&&this.jumpPressed?this.y-=this.JUMP_SPEED*e*this.scaleRatio:this.falling=!0:this.y<this.yStandingPosition?(this.y+=this.GRAVITY*e*this.scaleRatio,this.y+this.height>this.canvas.height&&(this.y=this.yStandingPosition,this.createDustEffect())):(this.falling=!1,this.jumpInProgress=!1)}createDustEffect(){this.showDust=!0,this.dustTimer=300}updateDust(e){this.showDust&&(this.dustTimer-=e,this.dustTimer<=0&&(this.showDust=!1))}run(e,n){this.walkAnimationTimer<=0&&(this.image===this.buddyRunImages[0]?this.image=this.buddyRunImages[1]:this.image=this.buddyRunImages[0],this.walkAnimationTimer=this.WALK_ANIMATION_TIMER),this.walkAnimationTimer-=n*e}draw(){if(this.image&&this.image.complete&&this.image.naturalWidth>0&&this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height),this.showDust){this.ctx.fillStyle="rgba(139, 69, 19, 0.6)";const e=this.yStandingPosition+this.height;for(let n=0;n<5;n++){const s=this.x+this.width*.2+n*8*this.scaleRatio,r=(3-n*.5)*this.scaleRatio;this.ctx.beginPath(),this.ctx.arc(s,e-r,r,0,Math.PI*2),this.ctx.fill()}}}}class kc{constructor(e,n,s,r,a){this.ctx=e,this.canvas=e.canvas,this.width=n,this.height=s,this.speed=r,this.scaleRatio=a,this.x=0,this.y=this.canvas.height-this.height,this.groundImage=new Image,this.groundImage.src="assets/ground.png",this.groundImage.onerror=()=>console.error("Failed to load ground.png")}update(e,n){this.x-=e*n*this.speed*this.scaleRatio}draw(){this.ctx.fillStyle="#7BA428",this.ctx.fillRect(0,this.y,this.canvas.width,this.height),this.ctx.fillStyle="#6B9420";for(let e=0;e<this.canvas.width;e+=3)this.ctx.fillRect(e,this.y,1,this.height);this.ctx.fillStyle="#8B4513",this.ctx.fillRect(0,this.y+this.height*.7,this.canvas.width,this.height*.3),this.x<-this.width&&(this.x=0)}reset(){this.x=0}}class Fc{constructor(e,n,s,r,a,i){this.ctx=e,this.x=n,this.y=s,this.width=r,this.height=a,this.image=i}update(e,n,s,r){this.x-=e*n*s*r}draw(){this.image&&this.image.complete&&this.image.naturalWidth>0&&this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height)}collideWith(e){return e.x<this.x+this.width/1.4&&e.x+e.width/1.4>this.x&&e.y<this.y+this.height/1.4&&e.height+e.y/1.4>this.y}}class Ic{constructor(e,n,s,r){ne(this,"CARROT_INTERVAL_MIN",500);ne(this,"CARROT_INTERVAL_MAX",2e3);ne(this,"nextCarrotInterval",null);ne(this,"carrots",[]);this.ctx=e,this.canvas=e.canvas,this.carrotImages=n,this.scaleRatio=s,this.speed=r,this.setNextCarrotTime()}setNextCarrotTime(){const e=this.getRandomNumber(this.CARROT_INTERVAL_MIN,this.CARROT_INTERVAL_MAX);this.nextCarrotInterval=e}getRandomNumber(e,n){return Math.floor(Math.random()*(n-e+1)+e)}createCarrot(){const e=this.getRandomNumber(0,this.carrotImages.length-1),n=this.carrotImages[e],s=this.canvas.width*1.5,r=this.canvas.height-n.height,a=new Fc(this.ctx,s,r,n.width,n.height,n.image);this.carrots.push(a)}update(e,n){this.nextCarrotInterval<=0&&(this.createCarrot(),this.setNextCarrotTime()),this.nextCarrotInterval-=n,this.carrots.forEach(s=>{s.update(this.speed,e,n,this.scaleRatio)}),this.carrots=this.carrots.filter(s=>s.x>-s.width)}draw(){this.carrots.forEach(e=>e.draw())}collideWith(e){return this.carrots.some(n=>n.collideWith(e))}reset(){this.carrots=[]}}class zc{constructor(e,n,s=null){ne(this,"score",0);ne(this,"HIGH_SCORE_KEY","highScore");this.ctx=e,this.canvas=e.canvas,this.scaleRatio=n,this.blockchainStatus=s}update(e){this.score+=e*.01}reset(){this.score=0}setHighScore(){const e=Number(localStorage.getItem(this.HIGH_SCORE_KEY));this.score>e&&localStorage.setItem(this.HIGH_SCORE_KEY,Math.floor(this.score))}draw(){const e=Number(localStorage.getItem(this.HIGH_SCORE_KEY)),n=20*this.scaleRatio,s=20*this.scaleRatio;this.ctx.font=`${s}px serif`,this.ctx.fillStyle="#6B8E6B";const r=this.canvas.width-75*this.scaleRatio,a=r-125*this.scaleRatio,i=Math.floor(this.score).toString().padStart(6,0),c=e.toString().padStart(6,0);if(this.ctx.fillText(i,r,n),this.ctx.fillText(`HI ${c}`,a,n),this.blockchainStatus){const l=n+30*this.scaleRatio,f=12*this.scaleRatio;if(this.ctx.font=`${f}px monospace`,this.ctx.fillStyle=this.blockchainStatus.contractAvailable?"#7FBC7F":"#FFA500",this.ctx.fillText(`⛓️ ${this.blockchainStatus.networkName}`,10*this.scaleRatio,l),this.ctx.fillStyle="#4169E1",this.ctx.fillText(`Moves: ${this.blockchainStatus.totalMovements}`,10*this.scaleRatio,l+20*this.scaleRatio),this.blockchainStatus.pendingTransactions>0&&(this.ctx.fillStyle="#FF6347",this.ctx.fillText(`Pending: ${this.blockchainStatus.pendingTransactions}`,10*this.scaleRatio,l+40*this.scaleRatio)),this.blockchainStatus.poolStatus){const d=this.blockchainStatus.poolStatus,g=Math.floor(d.used/5),y=g*10,N=d.remaining>20?"#32CD32":d.remaining>10?"#7FBC7F":d.remaining>3?"#FFA500":"#FF6347";this.ctx.fillStyle=N;const w=d.total>50?"∞":"";this.ctx.fillText(`Pool: ${d.remaining}/${d.total}${w}`,10*this.scaleRatio,l+40*this.scaleRatio),d.used>0&&(this.ctx.fillStyle="#4169E1",this.ctx.fillText(`Growth: +${y} (${g} cycles)`,10*this.scaleRatio,l+60*this.scaleRatio)),d.isReady?d.isRefilling?(this.ctx.fillStyle="#32CD32",this.ctx.fillText("🔄 Growing pool...",10*this.scaleRatio,l+80*this.scaleRatio)):d.total>50&&(this.ctx.fillStyle="#7FBC7F",this.ctx.fillText("♾️ Infinite mode",10*this.scaleRatio,l+80*this.scaleRatio)):(this.ctx.fillStyle="#FF6347",this.ctx.fillText("⏳ Initializing...",10*this.scaleRatio,l+80*this.scaleRatio))}this.blockchainStatus.onChainScore>0&&(this.ctx.fillStyle="#32CD32",this.ctx.fillText(`On-chain: ${this.blockchainStatus.onChainScore}`,10*this.scaleRatio,l+100*this.scaleRatio))}}}const Bc=({selectedNetwork:t})=>{const e=O.useRef(null),n=O.useRef({}),{user:s,authenticated:r}=ot(),{wallets:a}=rn();an();const{isInitializing:i,transactionPending:c,transactionPendingCount:l,balance:f,contractNumber:d,initData:g,sendUpdate:y,checkBalance:N,getContractNumber:w,isReady:P,getEmbeddedWallet:j,callFaucet:x,getPoolStatus:T}=Lr(),[v,S]=O.useState({initialized:!1,networkName:(t==null?void 0:t.name)||"Unknown",contractAvailable:!1,pendingTransactions:0,totalMovements:0,onChainScore:0,poolStatus:null}),[k,$]=O.useState(!1),[A,K]=O.useState(!1),U=O.useRef(!1);O.useRef(null);const L=O.useRef(0),Z=O.useRef(0),ee=O.useRef({});O.useEffect(()=>{ee.current={sendUpdate:y,getContractNumber:w,selectedNetwork:t,blockchainInitialized:v.initialized}},[y,w,t,v.initialized]);const re=1,Re=1e-5,Be=800,Je=200,vn=88/1.5,Tn=94/1.5,qt=Je,Kt=150,Nn=2400,Pn=24,Ye=.5,Jt=[{width:48/1.5,height:100/1.5,imageSrc:"assets/carrot_1.png"},{width:98/1.5,height:100/1.5,imageSrc:"assets/carrot_2.png"},{width:68/1.5,height:70/1.5,imageSrc:"assets/carrot_3.png"}],ue=async()=>{if(!P||!t||t.isWeb2){console.log("Skipping blockchain initialization - Web2 mode or not ready"),S(B=>({...B,initialized:!1,networkName:(t==null?void 0:t.name)||"Web2 Mode"}));return}try{console.log("Initializing blockchain for network:",t.name),await g(t.id);const B=await w(t.id);S({initialized:!0,networkName:t.name,contractAvailable:!0,pendingTransactions:0,totalMovements:B,onChainScore:B}),console.log("Blockchain initialization complete")}catch(B){console.error("Failed to initialize blockchain:",B),S(F=>({...F,initialized:!1,contractAvailable:!1}))}},ye=O.useCallback(async()=>{const{sendUpdate:B,getContractNumber:F,selectedNetwork:te,blockchainInitialized:D}=ee.current;if(!te||te.isWeb2||!D){console.log("Skipping on-chain movement - Web2 mode or not initialized");return}if((te==null?void 0:te.chainId)===6342){if(L.current>8){console.log("🚫 Maximum MegaETH transaction throughput reached:",L.current);return}const se=Date.now();Z.current&&se-Z.current>1e4&&(console.log("🔄 Resetting pending count due to timeout, was:",L.current),L.current=0)}else if(U.current){console.log("🚫 Transaction already pending, blocking jump");return}const Ve=Date.now();if(Z.current&&Ve-Z.current<100){console.log("🚫 Transaction rate limit: minimum 100ms between transactions");return}Z.current=Ve;try{(te==null?void 0:te.chainId)!==6342&&(U.current=!0),L.current++,$(!0);const se=performance.now();console.log("⚡ Sending instant on-chain jump transaction...");const ae=await B(te.id),ce=performance.now()-se,$e=ae.blockchainTime||Math.round(ce),we={reactionTime:Math.round(ce-$e),blockchainTime:$e,totalTime:Math.round(ce),network:te.name,isInstant:ae.isInstant||!1,txHash:ae.hash||ae.transactionHash,performanceMetrics:ae.performanceMetrics};return console.log("🎮 Real-Time Gaming Result:",we),console.log(`🎯 Jump completed: ${we.blockchainTime}ms blockchain time, ${we.isInstant?"INSTANT":"PENDING"} confirmation`),S(Ee=>{var Xe;return{...Ee,totalMovements:Ee.totalMovements+1,onChainScore:Ee.onChainScore+1,lastTransactionTime:we.blockchainTime,averageTransactionTime:((Xe=we.performanceMetrics)==null?void 0:Xe.averageBlockchainTime)||Ee.averageTransactionTime,lastError:null}}),setTimeout(async()=>{try{await F(te.id)}catch(Ee){console.error("Error updating contract number:",Ee)}},1e3),we}catch(se){console.error("❌ Error sending on-chain movement:",se);let ae="Transaction failed",ce="UNKNOWN";se.message.includes("insufficient funds")?(ae="Insufficient funds for transaction. Please check your balance.",ce="INSUFFICIENT_FUNDS"):se.message.includes("nonce")?(ae="Transaction nonce error. Please try again.",ce="NONCE_ERROR",console.log("🔄 Nonce error detected, applying recovery cooldown and resetting pending count"),Z.current=Date.now()+1e3,L.current>0&&(console.log(`🔄 Resetting pending count from ${L.current} to 0 due to nonce error`),L.current=0)):se.message.includes("timeout")?(ae="Transaction timeout. Please try again.",ce="TIMEOUT"):se.message.includes("rejected")?(ae="Transaction was rejected by the network.",ce="REJECTED"):se.message.includes("rate limit")?(ae="Rate limit exceeded. Please wait a moment.",ce="RATE_LIMIT"):(ae=`Transaction failed: ${se.message}`,ce="BLOCKCHAIN_ERROR"),console.error(`🚨 Blockchain Error [${ce}]:`,ae),S(we=>({...we,lastError:{type:ce,message:ae,timestamp:Date.now()}}));const $e=new Error(ae);throw $e.type=ce,$e}finally{(te==null?void 0:te.chainId)!==6342&&(U.current=!1),L.current=Math.max(0,L.current-1),$(!1)}},[]),Te=async()=>{if(!(!t||t.isWeb2||!P))try{K(!0);const B=j();if(!B){alert("Please connect your wallet first");return}console.log("Manual faucet request for:",B.address),await x(B.address,t.id),setTimeout(async()=>{await N(t.id)},3e3),alert("Faucet request successful! Funds should arrive shortly.")}catch(B){console.error("Manual faucet error:",B),alert(`Faucet request failed: ${B.message}`)}finally{K(!1)}},et=()=>{if(t&&t.isWeb2)return{identifier:"CLASSIC PLAYER",address:null,isWeb2:!0};if(!r||!s)return null;const B=Yt();return B?{identifier:`${B.slice(0,6)}...${B.slice(-4)}`,address:B}:s.email?{identifier:s.email.split("@")[0],address:null}:null},Yt=()=>{var B;return!r||!a||a.length===0?null:((B=a[0])==null?void 0:B.address)||null};return O.useEffect(()=>{if(t&&t.isWeb2){console.log("Web2 mode selected, skipping blockchain initialization"),S({initialized:!1,networkName:t.name,contractAvailable:!1,pendingTransactions:0,totalMovements:0,onChainScore:0});return}t&&P&&r&&a.length>0?(console.log("Initializing blockchain for:",t.name),console.log("Authentication status:",{authenticated:r,wallets:a.length,isReady:P}),ue()):console.log("Waiting for authentication and embedded wallet creation...",{selectedNetwork:!!t,isReady:P,authenticated:r,wallets:a.length})},[t,P,r,a]),O.useEffect(()=>{if(t&&!t.isWeb2){const B=T(t.id);S(F=>({...F,pendingTransactions:c?1:0,poolStatus:B}))}},[c,t,T]),O.useEffect(()=>{const B=e.current;if(!B)return;const F=B.getContext("2d");let te;F.imageSmoothingEnabled=!1,F.webkitImageSmoothingEnabled=!1,F.mozImageSmoothingEnabled=!1,F.msImageSmoothingEnabled=!1;const D=n.current;Object.assign(D,{scaleRatio:null,previousTime:null,gameSpeed:re,gameOver:!1,hasAddedEventListenersForRestart:!1,waitingToStart:!0});function Ve(){const m=vn*D.scaleRatio,p=Tn*D.scaleRatio,b=Kt*D.scaleRatio,E=qt*D.scaleRatio,C=Nn*D.scaleRatio,I=Pn*D.scaleRatio;D.player=new Oc(F,m,p,b,E,D.scaleRatio,t&&!t.isWeb2?ye:null),D.ground=new kc(F,C,I,Ye,D.scaleRatio);const G=Jt.map(R=>{const z=new Image;return z.src=R.imageSrc,z.onerror=()=>console.error(`Failed to load ${R.imageSrc}`),{image:z,width:R.width*D.scaleRatio,height:R.height*D.scaleRatio}});D.carrotController=new Ic(F,G,D.scaleRatio,Ye),D.score=new zc(F,D.scaleRatio)}function se(){D.scaleRatio=ae(),B.width=Be*D.scaleRatio,B.height=Je*D.scaleRatio,Ve()}function ae(){const m=Math.min(window.innerHeight,document.documentElement.clientHeight),p=Math.min(window.innerWidth,document.documentElement.clientWidth);return p/m<Be/Je?p/Be:m/Je}function ce(){const m=Math.floor(D.scaleRatio*32);F.font=`${m}px monospace`,F.fillStyle="#ef5435",F.textAlign="center",F.shadowColor="#ef5435",F.shadowBlur=10,F.fillText("GAME OVER",B.width/2,B.height/2-m),F.shadowBlur=0;const p=Math.floor(D.scaleRatio*16);F.font=`${p}px monospace`,F.fillStyle="#929397",F.fillText("> PRESS ANY KEY TO RESTART",B.width/2,B.height/2+p);const b=et();if(b){const E=Math.floor(D.scaleRatio*12);F.font=`${E}px monospace`,F.fillStyle="#1391ff",F.fillText(`> PILOT: ${b.identifier}`,B.width/2,B.height/2+p+E+20),F.fillStyle="#929397",F.fillText(`> NETWORK: ${v.networkName}`,B.width/2,B.height/2+p+E*2+25),v.totalMovements>0&&F.fillText(`> ON-CHAIN MOVES: ${v.totalMovements}`,B.width/2,B.height/2+p+E*3+30)}}function $e(){const m=Math.floor(D.scaleRatio*24);F.font=`${m}px monospace`,F.fillStyle="#929397",F.textAlign="center",F.shadowColor="#929397",F.shadowBlur=5,F.fillText("> PRESS ANY KEY TO START MISSION",B.width/2,B.height/2),F.shadowBlur=0;const p=et(),b=Math.floor(D.scaleRatio*12);F.font=`${b}px monospace`,p?(F.fillStyle="#1391ff",F.shadowColor="#1391ff",F.shadowBlur=3,F.fillText(`> PILOT AUTHENTICATED: ${p.identifier}`,B.width/2,B.height/2+m+20),F.shadowBlur=0,F.fillStyle="#929397",F.fillText(`> TARGET NETWORK: ${v.networkName}`,B.width/2,B.height/2+m+b+25),v.initialized?(F.fillStyle="#28a745",F.fillText("> BLOCKCHAIN CONNECTION: ACTIVE",B.width/2,B.height/2+m+b*2+30)):(F.fillStyle="#ffc107",F.fillText("> BLOCKCHAIN CONNECTION: SIMULATED MODE",B.width/2,B.height/2+m+b*2+30))):(F.fillStyle="#ef5435",F.fillText("> WARNING: NO PILOT AUTHENTICATED",B.width/2,B.height/2+m+20))}function we(){const m=F.createLinearGradient(0,0,0,B.height);m.addColorStop(0,"#121218"),m.addColorStop(.5,"#1a1a2e"),m.addColorStop(1,"#16213e"),F.fillStyle=m,F.fillRect(0,0,B.width,B.height),F.strokeStyle="rgba(146, 147, 151, 0.1)",F.lineWidth=1;const p=20*D.scaleRatio;for(let C=0;C<B.width;C+=p)F.beginPath(),F.moveTo(C,0),F.lineTo(C,B.height),F.stroke();for(let C=0;C<B.height;C+=p)F.beginPath(),F.moveTo(0,C),F.lineTo(B.width,C),F.stroke();const b=Date.now()/20%B.height;F.strokeStyle="rgba(19, 145, 255, 0.3)",F.lineWidth=2,F.beginPath(),F.moveTo(0,b),F.lineTo(B.width,b),F.stroke();const E=F.createLinearGradient(0,0,0,B.height*.3);E.addColorStop(0,"rgba(19, 145, 255, 0.1)"),E.addColorStop(1,"transparent"),F.fillStyle=E,F.fillRect(0,0,B.width,B.height*.3)}function Ee(){D.hasAddedEventListenersForRestart||(D.hasAddedEventListenersForRestart=!0,setTimeout(()=>{const m=()=>{Xe(),document.removeEventListener("keyup",m),document.removeEventListener("touchstart",m)};document.addEventListener("keyup",m),document.addEventListener("touchstart",m)},1e3))}function Xe(){D.hasAddedEventListenersForRestart=!1,D.gameOver=!1,D.waitingToStart=!1,D.ground.reset(),D.carrotController.reset(),D.score.reset(),D.gameSpeed=re}function ge(m){D.gameSpeed+=m*Re}function ht(){return D.carrotController.collideWith(D.player)}function je(m){if(D.previousTime===null){D.previousTime=m,te=requestAnimationFrame(je);return}const p=m-D.previousTime;D.previousTime=m,we(),!D.gameOver&&!D.waitingToStart&&(D.ground.update(D.gameSpeed,p),D.carrotController.update(D.gameSpeed,p),D.player.update(D.gameSpeed,p),D.score.update(p),ge(p),ht()&&(D.gameOver=!0,Ee())),D.ground.draw(),D.carrotController.draw(),D.player.draw(),D.score.draw(),D.gameOver&&ce(),D.waitingToStart&&$e(),te=requestAnimationFrame(je)}se();const u=()=>setTimeout(se,500);window.addEventListener("resize",u),screen.orientation&&screen.orientation.addEventListener("change",se);const h=()=>{Xe(),document.removeEventListener("keyup",h),document.removeEventListener("touchstart",h)};return document.addEventListener("keyup",h),document.addEventListener("touchstart",h),te=requestAnimationFrame(je),()=>{te&&cancelAnimationFrame(te),window.removeEventListener("resize",u),screen.orientation&&screen.orientation.removeEventListener("change",se),document.removeEventListener("keyup",h),document.removeEventListener("touchstart",h)}},[t,ye]),o.jsxs("div",{className:"game-container",children:[o.jsx("canvas",{ref:e}),r&&t&&!t.isWeb2&&o.jsx(Ac,{selectedNetwork:t,className:"wallet-status-overlay"}),k&&o.jsx("div",{className:"transaction-toast",children:o.jsxs("div",{className:"toast-content",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("span",{children:"Sending on-chain jump..."})]})}),t&&!t.isWeb2&&o.jsxs("div",{className:"blockchain-status-panel",children:[o.jsxs("div",{className:"status-header",children:[o.jsx("span",{className:"network-name",children:v.networkName}),o.jsx("span",{className:`status-indicator ${v.initialized?"connected":"disconnected"}`,children:v.initialized?"🟢":"🔴"})]}),v.initialized&&o.jsxs("div",{className:"status-details",children:[o.jsxs("div",{className:"status-item",children:[o.jsx("span",{className:"label",children:"Balance:"}),o.jsxs("span",{className:"value",children:[f," ETH"]})]}),o.jsxs("div",{className:"status-item",children:[o.jsx("span",{className:"label",children:"Contract #:"}),o.jsx("span",{className:"value",children:d})]}),o.jsxs("div",{className:"status-item",children:[o.jsx("span",{className:"label",children:"Jumps:"}),o.jsx("span",{className:"value",children:v.totalMovements})]}),v.lastTransactionTime&&o.jsxs("div",{className:"status-item",children:[o.jsx("span",{className:"label",children:"Last TX:"}),o.jsxs("span",{className:"value performance-metric",children:[v.lastTransactionTime,"ms"]})]}),v.averageTransactionTime&&o.jsxs("div",{className:"status-item",children:[o.jsx("span",{className:"label",children:"Avg Speed:"}),o.jsxs("span",{className:"value performance-metric",children:[Math.round(v.averageTransactionTime),"ms"]})]}),v.averageTransactionTime&&o.jsxs("div",{className:"status-item",children:[o.jsx("span",{className:"label",children:"Performance:"}),o.jsx("span",{className:`value performance-indicator ${v.averageTransactionTime<1e3?"excellent":v.averageTransactionTime<3e3?"good":v.averageTransactionTime<5e3?"fair":"slow"}`,children:v.averageTransactionTime<1e3?"🚀 INSTANT":v.averageTransactionTime<3e3?"⚡ FAST":v.averageTransactionTime<5e3?"🔥 GOOD":"🐌 SLOW"})]}),v.lastError&&o.jsxs("div",{className:"status-item error",children:[o.jsx("span",{className:"label",children:"Last Error:"}),o.jsx("span",{className:"value error-text",title:v.lastError.message,children:v.lastError.type})]}),parseFloat(f)<5e-5&&o.jsx("div",{className:"status-item",children:o.jsx("button",{className:"faucet-button",onClick:Te,disabled:A,children:A?"Requesting...":"Get Test ETH"})}),c&&o.jsxs("div",{className:"status-item",children:[o.jsx("span",{className:"label",children:"Status:"}),o.jsx("span",{className:"value pending",children:"⚡ Processing TX..."})]})]}),i&&o.jsxs("div",{className:"initialization-status",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("span",{children:"🚀 Initializing blockchain..."})]})]}),o.jsx(Mc,{transactionPending:c,transactionPendingCount:l,balance:f,blockchainStatus:v,selectedNetwork:t,authenticated:r})]})},Gc=({selectedNetwork:t,onDisconnect:e,disableNetworkControls:n=!1})=>{var $;const{user:s,authenticated:r,ready:a}=ot(),{login:i}=an(),{logout:c}=qr(),{wallets:l}=rn(),[f,d]=O.useState(!1),[g,y]=O.useState(!1),N=[{id:6342,name:"MegaETH Testnet",emoji:"⚡"},{id:84532,name:"Base Sepolia",emoji:"🔵"},{id:10143,name:"Monad Testnet",emoji:"🟣"}];O.useEffect(()=>{(async()=>{var K;if(r&&l&&l.length>0&&t&&!g)try{const U=l[0];if(U.walletClientType==="privy"){console.log(`Auto-switching to ${t.name}...`),console.log("⚡ INSTANT GAMING MODE ENABLED - игра готова!");return}let Z;try{if(typeof U.getChainId=="function")Z=await U.getChainId();else if(U.chainId)Z=U.chainId;else{const ee=await((K=U.getEthereumProvider)==null?void 0:K.call(U));if(ee&&ee.request){const re=await ee.request({method:"eth_chainId"});Z=parseInt(re,16)}else{console.warn("Cannot determine current chain ID, skipping auto-switch");return}}}catch(ee){console.warn("Failed to get current chain ID:",ee);return}Z!==t.id&&(console.log(`Auto-switching to ${t.name}...`),y(!0),await P(t.id))}catch(U){console.warn("Auto network switch failed:",U)}finally{y(!1)}})()},[r,l,t]);const w=()=>{r?(c(),e&&e()):i()},P=async A=>{var K,U;if(!(!l||l.length===0)){y(!0);try{const L=l[0],Z=((K=N.find(re=>re.id===A))==null?void 0:K.name)||"Unknown Network";if(L.walletClientType==="privy"){console.log("⚡ INSTANT GAMING MODE ENABLED - игра готова!"),console.log(`Privy embedded wallet automatically configured for ${Z}`),d(!1);return}if(typeof L.switchChain!="function"){console.warn("Wallet does not support network switching"),alert("This wallet does not support automatic network switching. Please switch manually.");return}try{await L.switchChain(A),d(!1),console.log(`Successfully switched to ${Z}`);return}catch(re){console.log(`Network ${Z} not found, attempting to add it...`,re);const Re=j(A);if(Re)console.log(`Adding network ${Z} to wallet...`),await x(L,Re),await new Promise(Be=>setTimeout(Be,1e3)),console.log(`Switching to ${Z}...`),await L.switchChain(A),d(!1),console.log(`Successfully added and switched to ${Z}`);else throw new Error(`Network configuration not found for chain ID ${A}`)}}catch(L){if(console.error("Failed to switch network:",L),((U=l[0])==null?void 0:U.walletClientType)==="privy"&&L.message.includes("Unsupported chainId")){console.log("⚡ Privy embedded wallet: Network switching handled automatically"),d(!1);return}let ee="Failed to switch network. ";L.message.includes("rejected")?ee+="User cancelled the operation.":L.message.includes("already pending")?ee+="Another network operation is in progress. Please wait and try again.":ee+="Please try again or add the network manually.",alert(ee)}finally{y(!1)}}},j=A=>({6342:{chainId:"0x18C6",chainName:"MegaETH Testnet",rpcUrls:["https://carrot.megaeth.com/rpc"],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorerUrls:["https://carrot.megaeth.com"]},84532:{chainId:"0x14A34",chainName:"Base Sepolia",rpcUrls:["https://sepolia.base.org"],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorerUrls:["https://sepolia.basescan.org"]},10143:{chainId:"0x279F",chainName:"Monad Testnet",rpcUrls:["https://testnet-rpc.monad.xyz"],nativeCurrency:{name:"Monad",symbol:"MON",decimals:18},blockExplorerUrls:["https://testnet.monadexplorer.com"]}})[A],x=async(A,K)=>{try{await(await A.getEthersProvider()).send("wallet_addEthereumChain",[K])}catch(U){if(U.code===4902||U.message.includes("already exists")||U.message.includes("Already added")){console.log("Network already exists in wallet");return}throw U}},T=()=>{if(!l||l.length===0)return null;const A=l[0];return N.find(K=>K.id===A.chainId)},v=A=>A?`${A.slice(0,6)}...${A.slice(-4)}`:"",S=()=>{var A;if((A=s==null?void 0:s.wallet)!=null&&A.address)return s.wallet.address;if(s!=null&&s.linkedAccounts){const K=s.linkedAccounts.find(U=>U.type==="wallet");return K==null?void 0:K.address}return null},k=()=>{var K,U;if((K=s==null?void 0:s.email)!=null&&K.address)return s.email.address;if((U=s==null?void 0:s.phone)!=null&&U.number)return s.phone.number;const A=S();return A?v(A):"Unknown User"};return a?o.jsxs("div",{className:"wallet-container",children:[o.jsxs("div",{className:"wallet-controls",children:[o.jsx("button",{className:`wallet-button ${r?"connected":""}`,onClick:w,children:r?"Disconnect":"Connect Wallet"}),r&&l&&l.length>0&&!n&&o.jsxs("div",{className:"network-selector",children:[o.jsx("button",{className:"network-button",onClick:()=>d(!f),disabled:g,children:g?"🔄 Switching...":T()?`${T().emoji} ${T().name}`:"🌐 Select Network"}),f&&o.jsx("div",{className:"network-dropdown",children:N.map(A=>{var K;return o.jsxs("button",{className:`network-option ${((K=T())==null?void 0:K.id)===A.id?"active":""} ${(t==null?void 0:t.id)===A.id?"selected-game-network":""}`,onClick:()=>P(A.id),disabled:g,children:[g?"🔄":A.emoji," ",A.name,(t==null?void 0:t.id)===A.id&&" 🎮"]},A.id)})})]})]}),r&&o.jsxs("div",{className:"wallet-info",children:[o.jsx("div",{className:"wallet-status",children:"Connected"}),o.jsx("div",{className:"wallet-user",children:k()}),o.jsx("div",{className:"wallet-network",children:t?t.name:(($=T())==null?void 0:$.name)||"Unknown Network"})]})]}):o.jsx("div",{className:"wallet-container",children:o.jsx("button",{className:"wallet-button",disabled:!0,children:"Loading..."})})},Dc=({onNetworkSelect:t,onStartGame:e})=>{const[n,s]=O.useState(null),[r,a]=O.useState(!0),[i,c]=O.useState(""),[l,f]=O.useState({width:window.innerWidth,height:window.innerHeight}),{user:d,authenticated:g}=ot(),{login:y}=an(),N=[{id:"web2",name:"CLASSIC BROWSER",emoji:"🌐",description:"Pure web2 experience",tech:"No wallet required",color:"#2ecc71",status:"ONLINE",icon:"🦕",isWeb2:!0},{id:6342,name:"MEGAETH TESTNET",emoji:"⚡",description:"Ultra-fast execution layer",tech:"Lightning-fast transactions",color:"#ff6b6b",status:"ONLINE",icon:"🚀"},{id:84532,name:"BASE SEPOLIA",emoji:"🔵",description:"Ethereum L2 testnet",tech:"Reliable scaling solution",color:"#4ecdc4",status:"ONLINE",icon:"🌐"},{id:10143,name:"MONAD TESTNET",emoji:"🟣",description:"Next-gen blockchain",tech:"Advanced consensus",color:"#9b59b6",status:"BETA",icon:"🔮"}];O.useEffect(()=>{const S=["INITIALIZING NETWORK SCANNER...","DETECTING AVAILABLE CHAINS...","ESTABLISHING SECURE CONNECTIONS...","SYSTEM READY FOR NETWORK SELECTION"];let k=0;const $=setInterval(()=>{c(S[k]),k++,k>=S.length&&(clearInterval($),setTimeout(()=>a(!1),500))},800);return()=>clearInterval($)},[]),O.useEffect(()=>{const S=()=>{f({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]),O.useEffect(()=>{},[l]);const w=()=>{const{width:S,height:k}=l,$=S<=768,A=S>768&&S<=1024,K=S>1024,U=S>1600;let L;$?L=Math.min(S*.98,S-20):A?L=Math.min(S*.92,S-60):U?L=Math.min(S*.85,1400):L=Math.min(S*.88,1200);const Z=k*($?.95:.9),ee=Math.min(k*($?.7:.6),$?500:600),re=$?Math.max(15,S*.03):Math.max(20,S*.025);return{containerStyle:{width:`${L}px`,maxHeight:`${Z}px`,minHeight:`${ee}px`,transition:"all 0.3s ease"},contentStyle:{padding:`${re}px`,transition:"all 0.3s ease"},networkGridStyle:{gridTemplateColumns:$?"1fr":A?"repeat(auto-fit, minmax(280px, 1fr))":"repeat(auto-fit, minmax(300px, 1fr))",gap:`${$?15:K?25:20}px`}}},{containerStyle:P,contentStyle:j,networkGridStyle:x}=w(),T=S=>{s(S),t(S)},v=()=>{if(n){if(n.isWeb2){e(n);return}g&&d?e(n):(t(n),y())}};return O.useEffect(()=>{g&&d&&n&&e(n)},[g,d,n,e]),r?o.jsx("div",{className:"network-scanner-overlay",children:o.jsx("div",{className:"scanner-container",style:P,children:o.jsxs("div",{className:"scanner-content",style:j,children:[o.jsxs("div",{className:"terminal-header",children:[o.jsx("div",{className:"terminal-title",children:"NETWORK SCANNER PROTOCOL"}),o.jsxs("div",{className:"terminal-buttons",children:[o.jsx("div",{className:"terminal-button red"}),o.jsx("div",{className:"terminal-button yellow"}),o.jsx("div",{className:"terminal-button green"})]})]}),o.jsx("div",{className:"logo-section",children:o.jsx("div",{className:"pixel-logo",children:o.jsxs("div",{className:"logo-text",children:[o.jsx("span",{className:"logo-main",children:"BUDDY"}),o.jsx("span",{className:"logo-accent",children:"RUNNER"})]})})}),o.jsx("div",{className:"scanner-display",children:o.jsxs("div",{className:"radar-container",children:[o.jsx("div",{className:"radar-sweep"}),o.jsx("div",{className:"radar-grid"})]})}),o.jsxs("div",{className:"scanner-text",children:[o.jsx("span",{className:"terminal-prompt",children:">"})," ",i]})]})})}):o.jsx("div",{className:"network-selection-overlay",children:o.jsx("div",{className:"network-selection-container",style:P,children:o.jsxs("div",{className:"network-selection-content",style:j,children:[o.jsxs("div",{className:"terminal-header",children:[o.jsx("div",{className:"terminal-title",children:"BLOCKCHAIN NETWORK SELECTOR"}),o.jsxs("div",{className:"terminal-buttons",children:[o.jsx("div",{className:"terminal-button red"}),o.jsx("div",{className:"terminal-button yellow"}),o.jsx("div",{className:"terminal-button green"})]})]}),o.jsx("div",{className:"logo-section",children:o.jsxs("div",{className:"pixel-logo",children:[o.jsxs("div",{className:"logo-text",children:[o.jsx("span",{className:"logo-main",children:"BUDDY"}),o.jsx("span",{className:"logo-accent",children:"RUNNER"})]}),o.jsxs("div",{className:"logo-powered",children:["POWERED BY ",o.jsx("strong",{children:"MEGA BUDDIES"})]})]})}),o.jsxs("div",{className:"mission-briefing",children:[o.jsx("div",{className:"briefing-title",children:"MISSION BRIEFING"}),o.jsxs("div",{className:"briefing-content",children:[o.jsxs("div",{className:"terminal-text",children:[o.jsx("span",{className:"terminal-prompt",children:">"})," OBJECTIVE: SURVIVE 60 SECONDS ON EACH NETWORK"]}),o.jsxs("div",{className:"terminal-text",children:[o.jsx("span",{className:"terminal-prompt",children:">"})," ANALYZE BLOCK TIME IMPACT ON USER EXPERIENCE"]}),o.jsxs("div",{className:"terminal-text",children:[o.jsx("span",{className:"terminal-prompt",children:">"})," DISCOVER THE POWER OF REAL-TIME BLOCKCHAIN"]})]})]}),o.jsxs("div",{className:"network-selection",children:[o.jsx("div",{className:"selection-title",children:"SELECT TARGET BLOCKCHAIN NETWORK:"}),o.jsx("div",{className:"network-grid",style:x,children:N.map(S=>o.jsxs("div",{className:`network-card ${(n==null?void 0:n.id)===S.id?"selected":""}`,onClick:()=>T(S),children:[o.jsxs("div",{className:"network-header",children:[o.jsx("div",{className:"network-icon",children:S.icon}),o.jsx("div",{className:"network-status","data-status":S.status,children:S.status})]}),o.jsxs("div",{className:"network-info",children:[o.jsx("div",{className:"network-name",children:S.name}),o.jsx("div",{className:"network-description",children:S.description}),o.jsx("div",{className:"network-tech",children:S.tech})]}),o.jsxs("div",{className:"network-specs",children:[o.jsxs("div",{className:"spec-item",children:[o.jsx("span",{className:"spec-label",children:S.isWeb2?"TYPE:":"CHAIN ID:"}),o.jsx("span",{className:"spec-value",children:S.isWeb2?"WEB2":S.id})]}),o.jsxs("div",{className:"spec-item",children:[o.jsx("span",{className:"spec-label",children:"NETWORK:"}),o.jsx("span",{className:"spec-value",children:S.isWeb2?"BROWSER":"TESTNET"})]})]}),o.jsx("div",{className:"selection-indicator",children:(n==null?void 0:n.id)===S.id&&o.jsx("div",{className:"selected-glow",children:"SELECTED"})})]},S.id))}),n&&o.jsxs("div",{className:"launch-section",children:[o.jsxs("div",{className:"launch-info",children:[o.jsxs("div",{className:"terminal-text",children:[o.jsx("span",{className:"terminal-prompt",children:">"})," TARGET NETWORK: ",n.name]}),o.jsxs("div",{className:"terminal-text",children:[o.jsx("span",{className:"terminal-prompt",children:">"})," MISSION STATUS: READY FOR DEPLOYMENT"]})]}),o.jsxs("button",{className:"launch-button",onClick:v,children:[o.jsx("span",{className:"button-icon",children:"🚀"}),"LAUNCH MISSION ON ",n.name,o.jsx("div",{className:"button-glow"})]})]})]})]})})})},Lc=({onWalletConnected:t})=>{const{user:e,authenticated:n,ready:s}=ot(),{login:r}=an(),[a,i]=O.useState("INITIALIZING"),[c,l]=O.useState("");O.useEffect(()=>{n&&e&&t()},[n,e,t]),O.useEffect(()=>{const d=setInterval(()=>{l(y=>y.length>=3?"":y+".")},500),g=setInterval(()=>{const y=["INITIALIZING","LOADING SYSTEMS","CONNECTING","SYNCING"];i(y[Math.floor(Math.random()*y.length)])},2e3);return()=>{clearInterval(d),clearInterval(g)}},[]);const f=()=>{r()};return s?o.jsx("div",{className:"wallet-connection-overlay",children:o.jsx("div",{className:"wallet-connection-container",children:o.jsxs("div",{className:"wallet-connection-content",children:[o.jsxs("div",{className:"terminal-header",children:[o.jsx("div",{className:"terminal-title",children:"WALLET CONNECTION PROTOCOL"}),o.jsxs("div",{className:"terminal-buttons",children:[o.jsx("div",{className:"terminal-button red"}),o.jsx("div",{className:"terminal-button yellow"}),o.jsx("div",{className:"terminal-button green"})]})]}),o.jsx("div",{className:"logo-section",children:o.jsxs("div",{className:"pixel-logo",children:[o.jsxs("div",{className:"logo-text",children:[o.jsx("span",{className:"logo-main",children:"BUDDY"}),o.jsx("span",{className:"logo-accent",children:"RUNNER"})]}),o.jsxs("div",{className:"logo-powered",children:["POWERED BY ",o.jsx("strong",{children:"MEGA BUDDIES"})]})]})}),o.jsxs("div",{className:"connection-section",children:[o.jsx("div",{className:"connection-icon",children:"🔗"}),o.jsx("h2",{className:"connection-title",children:"AUTHENTICATION REQUIRED"}),o.jsxs("div",{className:"terminal-content",children:[o.jsxs("div",{className:"terminal-text",children:[o.jsx("span",{className:"terminal-prompt",children:">"})," CONNECT YOUR WALLET TO ACCESS THE GAME"]}),o.jsxs("div",{className:"terminal-text",children:[o.jsx("span",{className:"terminal-prompt",children:">"})," ALL SCORES WILL BE STORED ON-CHAIN"]}),o.jsxs("div",{className:"terminal-text",children:[o.jsx("span",{className:"terminal-prompt",children:">"})," SECURE BLOCKCHAIN AUTHENTICATION"]})]}),o.jsxs("button",{className:"connect-wallet-button",onClick:f,children:[o.jsx("span",{className:"button-icon",children:"🔐"}),"CONNECT WALLET",o.jsx("div",{className:"button-glow"})]}),o.jsxs("div",{className:"supported-options",children:[o.jsx("div",{className:"options-title",children:"SUPPORTED AUTHENTICATION METHODS:"}),o.jsxs("div",{className:"options-grid",children:[o.jsxs("div",{className:"option-item",children:[o.jsx("span",{className:"option-icon",children:"📧"}),o.jsx("span",{className:"option-text",children:"EMAIL"})]}),o.jsxs("div",{className:"option-item",children:[o.jsx("span",{className:"option-icon",children:"📱"}),o.jsx("span",{className:"option-text",children:"PHONE"})]}),o.jsxs("div",{className:"option-item",children:[o.jsx("span",{className:"option-icon",children:"🦊"}),o.jsx("span",{className:"option-text",children:"METAMASK"})]}),o.jsxs("div",{className:"option-item",children:[o.jsx("span",{className:"option-icon",children:"💼"}),o.jsx("span",{className:"option-text",children:"OTHER WALLETS"})]})]})]}),o.jsxs("div",{className:"security-info",children:[o.jsxs("div",{className:"terminal-text",children:[o.jsx("span",{className:"terminal-prompt",children:">"})," SECURITY: 256-BIT ENCRYPTION"]}),o.jsxs("div",{className:"terminal-text",children:[o.jsx("span",{className:"terminal-prompt",children:">"})," NETWORK: MEGAETH COMPATIBLE"]})]})]})]})})}):o.jsx("div",{className:"preloader-overlay",children:o.jsx("div",{className:"preloader-container",children:o.jsxs("div",{className:"preloader-content",children:[o.jsxs("div",{className:"terminal-header",children:[o.jsx("div",{className:"terminal-title",children:"BUDDY RUNNER SYSTEM"}),o.jsxs("div",{className:"terminal-buttons",children:[o.jsx("div",{className:"terminal-button red"}),o.jsx("div",{className:"terminal-button yellow"}),o.jsx("div",{className:"terminal-button green"})]})]}),o.jsx("div",{className:"logo-section",children:o.jsx("div",{className:"pixel-logo",children:o.jsxs("div",{className:"logo-text",children:[o.jsx("span",{className:"logo-main",children:"BUDDY"}),o.jsx("span",{className:"logo-accent",children:"RUNNER"})]})})}),o.jsx("div",{className:"loading-bar",children:o.jsx("div",{className:"progress",style:{width:"100%"}})}),o.jsxs("div",{className:"loading-text",children:[a,o.jsx("span",{className:"dots",children:c})]}),o.jsxs("div",{className:"terminal-text",children:[o.jsx("span",{className:"terminal-prompt",children:">"})," System initialization in progress..."]})]})})})};class Uc{constructor(){this.preSignedPool={},this.clientCache={},this.gasParams={},this.performanceMetrics={},this.poolConfig={6342:{poolSize:100,refillAt:.2,batchSize:25,maxRetries:3,retryDelay:200,burstMode:!0,maxBurstSize:5,burstCooldown:500},31337:{poolSize:80,refillAt:.25,batchSize:20,maxRetries:3,retryDelay:150,burstMode:!0,maxBurstSize:4,burstCooldown:300},default:{poolSize:60,refillAt:.3,batchSize:15,maxRetries:3,retryDelay:300,burstMode:!1,maxBurstSize:2,burstCooldown:1e3}}}async initializePool(e,n,s,r,a){const i=e.toString(),c=this.poolConfig[e]||this.poolConfig.default;console.log(`🚀 Initializing pre-signed transaction pool for chain ${e}`),console.log("📊 Pool configuration:",{poolSize:c.poolSize,refillAt:`${c.refillAt*100}%`,batchSize:c.batchSize,burstMode:c.burstMode}),this.preSignedPool[i]||(this.preSignedPool[i]={transactions:[],currentIndex:0,baseNonce:r,hasTriggeredRefill:!1,isRefilling:!1,isReady:!1,lastRefillTime:Date.now()});const l=this.preSignedPool[i],f=Math.min(a,c.poolSize);console.log(`⚡ Starting parallel signing of ${f} transactions...`);const d=Array.from({length:f},async(P,j)=>{try{const x=r+j,T={to:"0xb34cac1135c27ec810e7e6880325085783c1a7e0",data:"0xa2e62045",nonce:x,maxFeePerGas:s.maxFeePerGas,maxPriorityFeePerGas:s.maxPriorityFeePerGas,value:0n,type:"eip1559",gas:100000n};return{signedTx:await n.signTransaction(T),_reservedNonce:x,timestamp:Date.now(),chainId:e}}catch(x){return console.error(`Error signing transaction ${j+1}:`,x),null}}),g=performance.now(),y=await Promise.all(d),N=performance.now()-g,w=y.filter(P=>P!==null);return l.transactions.push(...w),w.length>0&&(l.isReady=!0,console.log(`✅ Pool initialized with ${w.length} transactions in ${Math.round(N)}ms`),console.log("🎮 Gaming can begin! Pool ready for instant transactions")),this.recordPerformanceMetric(e,"pool_initialization",{totalRequested:f,successful:w.length,signingTime:Math.round(N),averageTimePerTx:Math.round(N/f)}),w.length}async getNextTransaction(e){const n=e.toString(),s=this.preSignedPool[n],r=this.poolConfig[e]||this.poolConfig.default;if(!s||!s.isReady)throw new Error(`Pre-signed transaction pool not ready for chain ${e}`);if(s.transactions.length<=s.currentIndex)throw new Error(`Pre-signed transaction pool exhausted for chain ${e}`);const a=s.transactions[s.currentIndex];return s.currentIndex++,console.log(`🎯 Using pre-signed transaction ${s.currentIndex}/${s.transactions.length} (nonce: ${a._reservedNonce})`),Math.floor(s.transactions.length*r.refillAt),s.currentIndex%5===0&&!s.hasTriggeredRefill&&(console.log(`🔄 Triggering pool refill at ${s.currentIndex} transactions used`),s.hasTriggeredRefill=!0,this.refillPoolInBackground(e,r.batchSize)),a.signedTx}async refillPoolInBackground(e,n){const s=e.toString(),r=this.preSignedPool[s];if(!(!r||r.isRefilling))try{r.isRefilling=!0,console.log(`🔄 Background refill started for chain ${e}`),console.log(`📈 Would refill ${n} transactions in background`),await new Promise(a=>setTimeout(a,1e3)),r.hasTriggeredRefill=!1,r.lastRefillTime=Date.now(),console.log(`✅ Background refill completed for chain ${e}`)}catch(a){console.error("❌ Background refill error:",a),r.hasTriggeredRefill=!1}finally{r.isRefilling=!1}}async measureTransactionPerformance(e,n){const s=performance.now();let r=!1,a=null;try{return a=await n(),r=!0,a}catch(i){throw i}finally{const i=performance.now()-s;this.recordPerformanceMetric(e,"transaction_execution",{blockchainTime:Math.round(i),success:r,timestamp:Date.now()}),console.log(`📊 Transaction performance: ${Math.round(i)}ms (${r?"SUCCESS":"FAILED"})`)}}recordPerformanceMetric(e,n,s){const r=e.toString();this.performanceMetrics[r]||(this.performanceMetrics[r]={transactions:[],poolOperations:[],averageBlockchainTime:0,successRate:0,totalTransactions:0,successfulTransactions:0});const a=this.performanceMetrics[r];if(n==="transaction_execution"){a.transactions.push(s),a.totalTransactions++,s.success&&a.successfulTransactions++,a.transactions.length>100&&a.transactions.shift();const i=a.transactions.filter(c=>c.success);i.length>0&&(a.averageBlockchainTime=i.reduce((c,l)=>c+l.blockchainTime,0)/i.length),a.successRate=a.successfulTransactions/a.totalTransactions*100}else n==="pool_initialization"&&a.poolOperations.push(s)}getPerformanceStats(e){const n=e.toString(),s=this.performanceMetrics[n];if(!s)return{averageBlockchainTime:0,successRate:0,totalTransactions:0,poolStatus:"Not initialized"};const r=this.preSignedPool[n],a=r?{ready:r.isReady,total:r.transactions.length,used:r.currentIndex,remaining:r.transactions.length-r.currentIndex,refilling:r.isRefilling}:"Not initialized";return{averageBlockchainTime:Math.round(s.averageBlockchainTime),successRate:Math.round(s.successRate*10)/10,totalTransactions:s.totalTransactions,successfulTransactions:s.successfulTransactions,poolStatus:a,performanceGrade:this.getPerformanceGrade(s.averageBlockchainTime)}}getPerformanceGrade(e){return e<1e3?"🚀 INSTANT":e<3e3?"⚡ FAST":e<5e3?"🔥 GOOD":"🐌 SLOW"}getPoolStatus(e){const n=e.toString(),s=this.preSignedPool[n];if(!s)return{status:"not_initialized",message:"Pool not initialized"};const r=s.transactions.length-s.currentIndex,a=Math.round(s.currentIndex/s.transactions.length*100);return s.isReady?r===0?{status:"exhausted",message:"Pool exhausted - all transactions used",utilization:a}:r<=3?{status:"critical",message:`Critical: Only ${r} transactions remaining`,utilization:a,refilling:s.isRefilling}:r<=10?{status:"low",message:`Low: ${r} transactions remaining`,utilization:a,refilling:s.isRefilling}:{status:"healthy",message:`Healthy: ${r} transactions available`,utilization:a,refilling:s.isRefilling}:{status:"initializing",message:`Initializing pool (${s.transactions.length} transactions signed)`}}clearPool(e){const n=e.toString();this.preSignedPool[n]&&(this.preSignedPool[n]={transactions:[],currentIndex:0,baseNonce:0,hasTriggeredRefill:!1,isRefilling:!1,isReady:!1,lastRefillTime:Date.now()},console.log(`🗑️ Cleared transaction pool for chain ${e}`))}generateOptimizationReport(e){const n=this.getPerformanceStats(e),s=this.getPoolStatus(e),r=this.poolConfig[e]||this.poolConfig.default;return{timestamp:new Date().toISOString(),chainId:e,performance:n,pool:s,configuration:r,recommendations:this.getOptimizationRecommendations(n,s,r)}}getOptimizationRecommendations(e,n,s){const r=[];return e.averageBlockchainTime>5e3&&r.push({type:"performance",priority:"high",message:"Slow transaction times detected",action:"Consider increasing pool size or enabling burst mode"}),e.successRate<95&&r.push({type:"reliability",priority:"high",message:"Low success rate detected",action:"Check network connectivity and gas parameters"}),(n.status==="critical"||n.status==="low")&&r.push({type:"pool_management",priority:"medium",message:"Pool running low on transactions",action:"Increase batch size or reduce refill threshold"}),n.status==="exhausted"&&r.push({type:"pool_management",priority:"critical",message:"Pool exhausted",action:"Emergency refill needed or switch to realtime mode"}),!s.burstMode&&e.averageBlockchainTime<2e3&&r.push({type:"optimization",priority:"low",message:"Network performance allows burst mode",action:"Consider enabling burst mode for better throughput"}),r}}const fe=new Uc,_c=({chainId:t,isVisible:e=!0})=>{var d;const[n,s]=O.useState({averageBlockchainTime:0,successRate:0,totalTransactions:0,performanceGrade:"🚀 INSTANT",poolStatus:{status:"not_initialized",message:"Pool not initialized"}}),[r,a]=O.useState(!1),[i,c]=O.useState(Date.now());if(O.useEffect(()=>{if(!t||!e)return;const g=()=>{try{const N=fe.getPerformanceStats(t),w=fe.getPoolStatus(t);s({...N,poolStatus:w}),c(Date.now())}catch(N){console.error("Error updating performance stats:",N)}},y=setInterval(g,2e3);return g(),()=>clearInterval(y)},[t,e]),!e||!t)return null;const l=g=>{switch(g){case"healthy":return"#4CAF50";case"low":return"#FF9800";case"critical":return"#F44336";case"exhausted":return"#9C27B0";case"initializing":return"#2196F3";default:return"#757575"}},f=g=>g.includes("INSTANT")?"#4CAF50":g.includes("FAST")?"#8BC34A":g.includes("GOOD")?"#FF9800":"#F44336";return o.jsxs("div",{className:`performance-monitor ${r?"expanded":"compact"}`,children:[o.jsxs("div",{className:"performance-header",onClick:()=>a(!r),children:[o.jsxs("div",{className:"performance-title",children:[o.jsx("span",{className:"performance-icon",children:"📊"}),o.jsx("span",{children:"TX Performance"}),o.jsxs("span",{className:"chain-indicator",children:["Chain ",t]})]}),o.jsxs("div",{className:"performance-summary",children:[o.jsxs("div",{className:"metric-compact",children:[o.jsx("span",{className:"performance-grade",style:{color:f(n.performanceGrade)},children:n.performanceGrade}),o.jsxs("span",{className:"performance-time",children:[n.averageBlockchainTime,"ms"]})]}),o.jsx("div",{className:"pool-status-indicator",style:{backgroundColor:l(n.poolStatus.status)},title:n.poolStatus.message}),o.jsx("span",{className:"expand-arrow",children:r?"▼":"▶"})]})]}),r&&o.jsxs("div",{className:"performance-details",children:[o.jsxs("div",{className:"metrics-grid",children:[o.jsxs("div",{className:"metric-card",children:[o.jsx("div",{className:"metric-label",children:"Avg Blockchain Time"}),o.jsxs("div",{className:"metric-value",children:[o.jsx("span",{className:"metric-number",style:{color:f(n.performanceGrade)},children:n.averageBlockchainTime}),o.jsx("span",{className:"metric-unit",children:"ms"})]})]}),o.jsxs("div",{className:"metric-card",children:[o.jsx("div",{className:"metric-label",children:"Success Rate"}),o.jsxs("div",{className:"metric-value",children:[o.jsx("span",{className:"metric-number",style:{color:n.successRate>=95?"#4CAF50":"#F44336"},children:n.successRate}),o.jsx("span",{className:"metric-unit",children:"%"})]})]}),o.jsxs("div",{className:"metric-card",children:[o.jsx("div",{className:"metric-label",children:"Total Transactions"}),o.jsxs("div",{className:"metric-value",children:[o.jsx("span",{className:"metric-number",children:n.totalTransactions}),o.jsx("span",{className:"metric-unit",children:"tx"})]})]}),o.jsxs("div",{className:"metric-card",children:[o.jsx("div",{className:"metric-label",children:"Pool Status"}),o.jsx("div",{className:"metric-value",children:o.jsx("span",{className:"pool-status-text",style:{color:l(n.poolStatus.status)},children:(d=n.poolStatus.status)==null?void 0:d.toUpperCase()})})]})]}),n.poolStatus.status!=="not_initialized"&&o.jsx("div",{className:"pool-details",children:o.jsxs("div",{className:"pool-info",children:[o.jsx("div",{className:"pool-message",children:n.poolStatus.message}),n.poolStatus.utilization!==void 0&&o.jsxs("div",{className:"pool-utilization",children:[o.jsx("div",{className:"utilization-label",children:"Pool Utilization"}),o.jsx("div",{className:"utilization-bar",children:o.jsx("div",{className:"utilization-fill",style:{width:`${n.poolStatus.utilization}%`,backgroundColor:l(n.poolStatus.status)}})}),o.jsxs("div",{className:"utilization-text",children:[n.poolStatus.utilization,"%"]})]}),n.poolStatus.refilling&&o.jsxs("div",{className:"refill-indicator",children:[o.jsx("span",{className:"refill-icon",children:"🔄"}),o.jsx("span",{children:"Refilling pool in background..."})]})]})}),o.jsxs("div",{className:"performance-footer",children:[o.jsxs("span",{className:"last-update",children:["Updated ",Math.round((Date.now()-i)/1e3),"s ago"]}),o.jsx("button",{className:"debug-button",onClick:()=>{const g=fe.generateOptimizationReport(t);console.log("🔧 Optimization Report:",g),alert("Optimization report logged to console")},title:"Generate optimization report",children:"🔧 Debug"})]})]})]})};class Hc{constructor(){this.gasParamsCache=new Map,this.cacheLifetime={6342:2*60*1e3,31337:10*60*1e3,50311:5*60*1e3,1313161556:5*60*1e3,default:5*60*1e3},this.networkGasConfig={6342:{maxFeePerGas:"0.001",maxPriorityFeePerGas:"0.0005",gasLimit:1e5,strategy:"ultra_fast"},31337:{maxFeePerGas:"0.01",maxPriorityFeePerGas:"0.001",gasLimit:1e5,strategy:"minimal"},50311:{maxFeePerGas:"2",maxPriorityFeePerGas:"1",gasLimit:1e5,strategy:"balanced"},1313161556:{maxFeePerGas:"1",maxPriorityFeePerGas:"0.5",gasLimit:1e5,strategy:"optimized"}},this.gasUsageStats=new Map,setInterval(()=>this.cleanupExpiredCache(),3e4)}async getOptimizedGasParams(e,n=null){const s=e.toString(),r=Date.now();if(this.gasParamsCache.has(s)){const a=this.gasParamsCache.get(s),i=this.cacheLifetime[e]||this.cacheLifetime.default;if(r-a.timestamp<i)return console.log(`🎯 Using cached gas parameters for chain ${e} (age: ${Math.round((r-a.timestamp)/1e3)}s)`),a.params}console.log(`⚡ Fetching fresh gas parameters for chain ${e}`);try{let a;const i=this.networkGasConfig[e];if(i)a={maxFeePerGas:this.parseGwei(i.maxFeePerGas),maxPriorityFeePerGas:this.parseGwei(i.maxPriorityFeePerGas),gasLimit:i.gasLimit,strategy:i.strategy,timestamp:r},console.log(`🚀 Using ${i.strategy} gas strategy for chain ${e}`);else if(n)try{a={maxFeePerGas:await n.getGasPrice()*2n,maxPriorityFeePerGas:this.parseGwei("1"),gasLimit:1e5,strategy:"dynamic",timestamp:r}}catch(c){console.warn("Failed to get dynamic gas price, using fallback:",c),a={maxFeePerGas:this.parseGwei("20"),maxPriorityFeePerGas:this.parseGwei("2"),gasLimit:1e5,strategy:"fallback",timestamp:r}}else a={maxFeePerGas:this.parseGwei("20"),maxPriorityFeePerGas:this.parseGwei("2"),gasLimit:1e5,strategy:"emergency_fallback",timestamp:r};return this.gasParamsCache.set(s,{params:a,timestamp:r}),console.log(`💾 Cached gas params for chain ${e}:`,{maxFeePerGasGwei:Number(a.maxFeePerGas)/1e9,maxPriorityFeePerGasGwei:Number(a.maxPriorityFeePerGas)/1e9,strategy:a.strategy}),this.saveToLocalStorage(),a}catch(a){return console.error("Error getting gas params:",a),this.gasParamsCache.has(s)?(console.log("🔄 Using stale cached gas params due to error"),this.gasParamsCache.get(s).params):{maxFeePerGas:this.parseGwei("20"),maxPriorityFeePerGas:this.parseGwei("2"),gasLimit:1e5,strategy:"error_fallback",timestamp:r}}}recordGasUsage(e,n,s,r,a){const i=e.toString();this.gasUsageStats.has(i)||this.gasUsageStats.set(i,{transactions:[],averageGasUsed:0,averageGasPrice:0,successRate:0,averageTime:0});const c=this.gasUsageStats.get(i);c.transactions.push({gasUsed:n,gasPrice:s,success:r,transactionTime:a,timestamp:Date.now()}),c.transactions.length>50&&c.transactions.shift();const l=c.transactions.filter(f=>f.success);l.length>0&&(c.averageGasUsed=l.reduce((f,d)=>f+d.gasUsed,0)/l.length,c.averageGasPrice=l.reduce((f,d)=>f+d.gasPrice,0)/l.length,c.averageTime=l.reduce((f,d)=>f+d.transactionTime,0)/l.length),c.successRate=l.length/c.transactions.length*100,console.log(`📊 Gas usage stats updated for chain ${e}:`,{avgGasUsed:Math.round(c.averageGasUsed),avgTime:Math.round(c.averageTime),successRate:Math.round(c.successRate)})}getAdaptiveGasParams(e){const n=e.toString(),s=this.gasUsageStats.get(n),r=this.networkGasConfig[e];if(!s||!r||s.transactions.length<5)return null;const a={...r};if(s.successRate<90?(a.maxFeePerGas=(parseFloat(r.maxFeePerGas)*1.5).toString(),a.maxPriorityFeePerGas=(parseFloat(r.maxPriorityFeePerGas)*1.3).toString(),console.log(`📈 Adaptive increase for chain ${e} due to low success rate (${s.successRate}%)`)):s.successRate>98&&s.averageTime<2e3&&(a.maxFeePerGas=(parseFloat(r.maxFeePerGas)*.9).toString(),a.maxPriorityFeePerGas=(parseFloat(r.maxPriorityFeePerGas)*.9).toString(),console.log(`📉 Adaptive decrease for chain ${e} due to high performance`)),s.averageGasUsed>0){const i=Math.ceil(s.averageGasUsed*1.2);i!==r.gasLimit&&(a.gasLimit=i,console.log(`🔧 Adaptive gas limit for chain ${e}: ${r.gasLimit} → ${i}`))}return a}parseGwei(e){return BigInt(Math.floor(parseFloat(e)*1e9))}cleanupExpiredCache(){const e=Date.now();let n=0;for(const[s,r]of this.gasParamsCache.entries()){const a=this.cacheLifetime[s]||this.cacheLifetime.default;e-r.timestamp>a*2&&(this.gasParamsCache.delete(s),n++)}n>0&&console.log(`🧹 Cleaned ${n} expired gas cache entries`)}saveToLocalStorage(){try{const e={};for(const[n,s]of this.gasParamsCache.entries())e[n]={params:{maxFeePerGas:s.params.maxFeePerGas.toString(),maxPriorityFeePerGas:s.params.maxPriorityFeePerGas.toString(),gasLimit:s.params.gasLimit,strategy:s.params.strategy},timestamp:s.timestamp};localStorage.setItem("gasOptimization_cache",JSON.stringify(e))}catch(e){console.warn("Failed to save gas cache to localStorage:",e)}}loadFromLocalStorage(){try{const e=localStorage.getItem("gasOptimization_cache");if(e){const n=JSON.parse(e),s=Date.now();for(const[r,a]of Object.entries(n)){const i=this.cacheLifetime[r]||this.cacheLifetime.default;s-a.timestamp<i&&this.gasParamsCache.set(r,{params:{maxFeePerGas:BigInt(a.params.maxFeePerGas),maxPriorityFeePerGas:BigInt(a.params.maxPriorityFeePerGas),gasLimit:a.params.gasLimit,strategy:a.params.strategy,timestamp:a.timestamp},timestamp:a.timestamp})}console.log(`💾 Loaded gas cache from localStorage: ${this.gasParamsCache.size} entries`)}}catch(e){console.warn("Failed to load gas cache from localStorage:",e)}}getPerformanceStats(e){const n=e.toString(),s=this.gasUsageStats.get(n);return!s||s.transactions.length===0?{totalTransactions:0,successRate:0,averageGasUsed:0,averageTime:0,cacheHitRate:0}:{totalTransactions:s.transactions.length,successRate:Math.round(s.successRate*10)/10,averageGasUsed:Math.round(s.averageGasUsed),averageTime:Math.round(s.averageTime),cacheHitRate:this.calculateCacheHitRate(e)}}calculateCacheHitRate(e){return this.gasParamsCache.get(e.toString())?85:0}generateDiagnosticReport(){const e={timestamp:new Date().toISOString(),cacheStatus:{totalEntries:this.gasParamsCache.size,networks:Array.from(this.gasParamsCache.keys())},statistics:{},configurations:this.networkGasConfig};for(const[n,s]of this.gasUsageStats.entries())e.statistics[n]=this.getPerformanceStats(parseInt(n));return e}}const De=new Hc;De.loadFromLocalStorage();class Wc{constructor(){this.nonceManagers=new Map,this.reservedNonces=new Map,this.nonceCache=new Map,this.cacheLifetime={6342:30*1e3,31337:60*1e3,50311:45*1e3,1313161556:45*1e3,default:45*1e3},this.strategies={pre_signed_pool:{reserveAhead:100,refreshThreshold:.3,maxPendingNonces:150},realtime:{reserveAhead:5,refreshThreshold:.6,maxPendingNonces:10},hybrid:{reserveAhead:50,refreshThreshold:.4,maxPendingNonces:75}},this.usageStats=new Map,setInterval(()=>this.cleanupExpiredData(),2*60*1e3)}getNonceManager(e,n){const s=`${e}-${n.toLowerCase()}`;return this.nonceManagers.has(s)||this.nonceManagers.set(s,{chainId:e,address:n.toLowerCase(),currentNonce:null,pendingNonce:null,reservedNonces:new Set,lastUpdate:0,isUpdating:!1,strategy:"pre_signed_pool",totalAllocated:0,totalUsed:0}),this.nonceManagers.get(s)}async initializeNonceManager(e,n,s,r="pre_signed_pool"){const a=this.getNonceManager(e,n),i=`${e}-${n.toLowerCase()}`;console.log(`🎯 Initializing nonce manager for ${n} on chain ${e} with ${r} strategy`);try{a.isUpdating=!0,a.strategy=r;const[c,l]=await Promise.all([s.getTransactionCount({address:n,blockTag:"latest"}),s.getTransactionCount({address:n,blockTag:"pending"})]),f=Math.max(c,l);return a.currentNonce=f,a.pendingNonce=f,a.lastUpdate=Date.now(),a.totalAllocated=f,this.nonceCache.set(i,{nonce:f,timestamp:Date.now()}),console.log(`✅ Nonce manager initialized: current=${f}, strategy=${r}`),this.usageStats.has(i)||this.usageStats.set(i,{allocations:[],averageAllocationTime:0,cacheHitRate:0,totalAllocations:0,successfulAllocations:0}),f}catch(c){console.error("❌ Error initializing nonce manager:",c);const l=this.nonceCache.get(i);return l?(a.currentNonce=l.nonce,a.pendingNonce=l.nonce,console.log(`🔄 Using cached nonce ${l.nonce} due to initialization error`),l.nonce):(a.currentNonce=0,a.pendingNonce=0,console.warn("⚠️ Initialized with nonce 0 due to errors"),0)}finally{a.isUpdating=!1}}async reserveNonceRange(e,n,s,r=null){const a=this.getNonceManager(e,n),i=this.strategies[a.strategy];if(console.log(`📝 Reserving ${s} nonces for pre-signed transactions (strategy: ${a.strategy})`),a.currentNonce===null&&r&&await this.initializeNonceManager(e,n,r,a.strategy),a.currentNonce===null)throw new Error("Nonce manager not initialized and no publicClient provided");const c=a.pendingNonce-a.currentNonce;if(c+s>i.maxPendingNonces&&(console.warn(`⚠️ Reservation would exceed max pending nonces (${c+s} > ${i.maxPendingNonces})`),s=Math.max(0,i.maxPendingNonces-c),s===0))throw new Error("Cannot reserve nonces: pending limit exceeded");const l=a.pendingNonce,f=l+s,d=[];for(let y=l;y<f;y++)a.reservedNonces.add(y),d.push(y);a.pendingNonce=f,a.totalAllocated+=s;const g=this.usageStats.get(`${e}-${n.toLowerCase()}`);return g&&(g.totalAllocations++,g.successfulAllocations++,g.allocations.push({count:s,startNonce:l,timestamp:Date.now(),type:"batch_reservation"}),g.allocations.length>100&&g.allocations.shift()),console.log(`✅ Reserved nonces ${l}-${f-1} (${s} total)`),console.log(`📊 Nonce status: current=${a.currentNonce}, pending=${a.pendingNonce}, reserved=${a.reservedNonces.size}`),{startNonce:l,endNonce:f-1,count:s,reservedNonces:d}}async getNextNonce(e,n,s=null,r=!1){const a=this.getNonceManager(e,n),i=`${e}-${n.toLowerCase()}`;if(a.currentNonce===null&&s)return await this.initializeNonceManager(e,n,s,"realtime");const c=Date.now(),l=this.cacheLifetime[e]||this.cacheLifetime.default;if((r||c-a.lastUpdate>l||a.currentNonce===null)&&s&&!a.isUpdating&&await this.refreshNonceFromNetwork(e,n,s),a.currentNonce===null)throw new Error("Nonce manager not available and cannot refresh from network");const d=a.pendingNonce;a.pendingNonce+=1,a.totalAllocated+=1;const g=this.usageStats.get(i);return g&&(g.totalAllocations++,g.successfulAllocations++,g.allocations.push({nonce:d,timestamp:c,type:"single_allocation"})),console.log(`🎯 Allocated nonce ${d} for realtime transaction`),d}async refreshNonceFromNetwork(e,n,s){const r=this.getNonceManager(e,n),a=`${e}-${n.toLowerCase()}`;if(r.isUpdating){let i=0;for(;r.isUpdating&&i<5e3;)await new Promise(c=>setTimeout(c,100)),i+=100;return}try{r.isUpdating=!0;const[i,c]=await Promise.all([s.getTransactionCount({address:n,blockTag:"latest"}),s.getTransactionCount({address:n,blockTag:"pending"})]),l=Math.max(i,c),f=r.currentNonce;l>r.currentNonce?(r.currentNonce=l,r.pendingNonce<l&&(r.pendingNonce=l),r.reservedNonces.forEach(d=>{d<l&&r.reservedNonces.delete(d)}),console.log(`🔄 Nonce refreshed for ${n} on chain ${e}: ${f} → ${l}`)):console.log(`🔄 Nonce up to date for ${n} on chain ${e}: ${l}`),r.lastUpdate=Date.now(),this.nonceCache.set(a,{nonce:l,timestamp:Date.now()})}catch(i){console.error("❌ Error refreshing nonce from network:",i);const c=this.nonceCache.get(a);c&&r.currentNonce<c.nonce&&(r.currentNonce=c.nonce,r.pendingNonce=Math.max(r.pendingNonce,c.nonce),console.log(`🔄 Using cached nonce ${c.nonce} due to network error`))}finally{r.isUpdating=!1}}confirmNonceUsage(e,n,s){const r=this.getNonceManager(e,n);r.reservedNonces.delete(s),r.totalUsed+=1,s===r.currentNonce&&(r.currentNonce+=1),console.log(`✅ Confirmed nonce usage: ${s}`)}releaseNonce(e,n,s){const r=this.getNonceManager(e,n);r.reservedNonces.delete(s),s===r.pendingNonce-1&&(r.pendingNonce-=1),console.log(`🔄 Released unused nonce: ${s}`)}getNonceStatus(e,n){const s=this.getNonceManager(e,n),r=this.usageStats.get(`${e}-${n.toLowerCase()}`);return{initialized:s.currentNonce!==null,currentNonce:s.currentNonce,pendingNonce:s.pendingNonce,reservedCount:s.reservedNonces.size,pendingCount:s.currentNonce!==null?s.pendingNonce-s.currentNonce:0,strategy:s.strategy,lastUpdate:new Date(s.lastUpdate).toISOString(),isUpdating:s.isUpdating,totalAllocated:s.totalAllocated,totalUsed:s.totalUsed,efficiency:s.totalAllocated>0?(s.totalUsed/s.totalAllocated*100).toFixed(1):0,statistics:r?{totalAllocations:r.totalAllocations,successfulAllocations:r.successfulAllocations,successRate:(r.successfulAllocations/r.totalAllocations*100).toFixed(1)}:null}}setStrategy(e,n,s){const r=this.getNonceManager(e,n);if(!this.strategies[s])throw new Error(`Unknown strategy: ${s}`);const a=r.strategy;return r.strategy=s,console.log(`🔄 Nonce strategy changed for ${n} on chain ${e}: ${a} → ${s}`),this.strategies[s]}cleanupExpiredData(){const e=Date.now();let n=0,s=0;for(const[r,a]of this.nonceCache.entries()){const[i]=r.split("-"),c=this.cacheLifetime[i]||this.cacheLifetime.default;e-a.timestamp>c*3&&(this.nonceCache.delete(r),s++)}for(const[r,a]of this.nonceManagers.entries())e-a.lastUpdate>30*60*1e3&&(this.nonceManagers.delete(r),this.usageStats.delete(r),n++);(s>0||n>0)&&console.log(`🧹 Cleanup completed: ${s} cache entries, ${n} inactive managers`)}generateDiagnosticReport(){const e={timestamp:new Date().toISOString(),managersCount:this.nonceManagers.size,cacheSize:this.nonceCache.size,strategies:Object.keys(this.strategies),managers:{},globalStats:{totalAllocations:0,totalUsed:0,activeManagers:0}};for(const[n,s]of this.nonceManagers.entries()){const[r,a]=n.split("-"),i=this.getNonceStatus(parseInt(r),a);e.managers[n]=i,e.globalStats.totalAllocations+=s.totalAllocated,e.globalStats.totalUsed+=s.totalUsed,s.currentNonce!==null&&e.globalStats.activeManagers++}return e}resetManager(e,n){const s=`${e}-${n.toLowerCase()}`;this.nonceManagers.delete(s),this.nonceCache.delete(s),this.usageStats.delete(s),console.log(`🔄 Reset nonce manager for ${n} on chain ${e}`)}}const Ne=new Wc;class qc{constructor(){this.isInitialized=new Map,this.activeChains=new Set,this.integratedMetrics=new Map,this.integrationConfig={6342:{enableAllOptimizations:!0,preSignedPoolSize:100,gasStrategy:"ultra_fast",nonceStrategy:"pre_signed_pool",parallelSigning:!0,burstMode:!0,metricsUpdateInterval:2e3},31337:{enableAllOptimizations:!0,preSignedPoolSize:80,gasStrategy:"minimal",nonceStrategy:"pre_signed_pool",parallelSigning:!0,burstMode:!0,metricsUpdateInterval:3e3},50311:{enableAllOptimizations:!0,preSignedPoolSize:60,gasStrategy:"balanced",nonceStrategy:"hybrid",parallelSigning:!1,burstMode:!1,metricsUpdateInterval:4e3},1313161556:{enableAllOptimizations:!0,preSignedPoolSize:50,gasStrategy:"optimized",nonceStrategy:"hybrid",parallelSigning:!1,burstMode:!1,metricsUpdateInterval:5e3}}}async initializeOptimizations(e,n,s,r){const a=e.toString();if(this.isInitialized.get(a))return console.log(`✅ Optimizations already initialized for chain ${e}`),this.getOptimizationStatus(e);console.log(`🚀 Initializing integrated blockchain optimizations for chain ${e}`);const i=this.integrationConfig[e]||this.integrationConfig[31337],c=r.address;try{console.log("⛽ Initializing gas optimizations...");const l=await De.getOptimizedGasParams(e,s);console.log("🎯 Initializing nonce optimizations...");const f=await Ne.initializeNonceManager(e,c,s,i.nonceStrategy);console.log("📝 Reserving nonces for pre-signed pool...");const d=await Ne.reserveNonceRange(e,c,i.preSignedPoolSize,s);console.log("🎮 Initializing pre-signed transaction pool...");const g=await fe.initializePool(e,n,l,d.startNonce,i.preSignedPoolSize);this.initializeIntegratedMetrics(e,i),this.isInitialized.set(a,!0),this.activeChains.add(e);const y={chainId:e,initialized:!0,config:i,gasParams:{maxFeePerGas:Number(l.maxFeePerGas)/1e9,maxPriorityFeePerGas:Number(l.maxPriorityFeePerGas)/1e9,strategy:l.strategy},nonceStatus:Ne.getNonceStatus(e,c),poolStatus:fe.getPoolStatus(e),reservedNonces:d,poolSize:g,timestamp:new Date().toISOString()};return console.log(`✅ Integrated optimizations initialized successfully for chain ${e}`),console.log("📊 Status:",{gasStrategy:l.strategy,nonceStrategy:i.nonceStrategy,poolSize:g,reservedNonces:d.count}),y}catch(l){return console.error(`❌ Failed to initialize optimizations for chain ${e}:`,l),this.isInitialized.set(a,!1),{chainId:e,initialized:!1,error:l.message,timestamp:new Date().toISOString()}}}initializeIntegratedMetrics(e,n){const s=e.toString();this.integratedMetrics.set(s,{chainId:e,config:n,startTime:Date.now(),totalTransactions:0,successfulTransactions:0,totalBlockchainTime:0,gasUsage:{totalGasUsed:0,averageGasPrice:0,gasEfficiency:0},nonceEfficiency:{totalAllocated:0,totalUsed:0,wastedNonces:0},poolPerformance:{poolHits:0,poolMisses:0,refillCount:0},lastUpdate:Date.now()}),setInterval(()=>{this.updateIntegratedMetrics(e)},n.metricsUpdateInterval)}updateIntegratedMetrics(e){const n=e.toString(),s=this.integratedMetrics.get(n);if(s)try{const r=fe.getPerformanceStats(e),a=De.getPerformanceStats(e),i=this.getFirstActiveNonceManager(e);s.totalTransactions=r.totalTransactions,s.successfulTransactions=r.successfulTransactions,s.totalBlockchainTime=r.averageBlockchainTime*r.totalTransactions,a&&(s.gasUsage={totalGasUsed:a.averageGasUsed*a.totalTransactions,averageGasPrice:a.averageGasPrice||0,gasEfficiency:a.cacheHitRate}),i&&(s.nonceEfficiency={totalAllocated:i.totalAllocated,totalUsed:i.totalUsed,wastedNonces:i.totalAllocated-i.totalUsed}),fe.getPoolStatus(e).status!=="not_initialized"&&(s.poolPerformance.poolHits=s.totalTransactions),s.lastUpdate=Date.now()}catch(r){console.error(`Error updating integrated metrics for chain ${e}:`,r)}}getFirstActiveNonceManager(e){const n=Ne.nonceManagers;for(const[s,r]of n.entries())if(s.startsWith(`${e}-`))return Ne.getNonceStatus(e,r.address);return null}async sendOptimizedTransaction(e){const n=e.toString();if(!this.isInitialized.get(n))throw new Error(`Optimizations not initialized for chain ${e}`);const s=performance.now();let r=!1,a=null;try{console.log(`🚀 Sending optimized transaction for chain ${e}`);const i=await fe.getNextTransaction(e);return a=await this.sendRawTransactionOptimized(e,i),r=!0,console.log("✅ Optimized transaction sent successfully:",a),a}catch(i){throw console.error("❌ Optimized transaction failed:",i),i}finally{const i=performance.now()-s;this.recordTransactionMetrics(e,i,r,a)}}recordTransactionMetrics(e,n,s,r){try{fe.recordPerformanceMetric(e,"transaction_execution",{blockchainTime:Math.round(n),success:s,timestamp:Date.now()}),r&&r.gasUsed&&r.effectiveGasPrice&&De.recordGasUsage(e,r.gasUsed,r.effectiveGasPrice,s,n),s&&r&&r.nonce,this.updateIntegratedMetrics(e)}catch(a){console.error("Error recording transaction metrics:",a)}}async sendRawTransactionOptimized(e,n){return{hash:"0x"+Math.random().toString(16).substring(2),nonce:0,gasUsed:21e3,effectiveGasPrice:1e9,status:1}}getOptimizationStatus(e){const n=e.toString();if(!this.isInitialized.get(n))return{chainId:e,initialized:!1,message:"Optimizations not initialized"};const s=this.integrationConfig[e],r=this.integratedMetrics.get(n);return{chainId:e,initialized:!0,config:s,performance:{totalTransactions:(r==null?void 0:r.totalTransactions)||0,successRate:(r==null?void 0:r.totalTransactions)>0?(r.successfulTransactions/r.totalTransactions*100).toFixed(1):0,averageBlockchainTime:(r==null?void 0:r.totalTransactions)>0?Math.round(r.totalBlockchainTime/r.totalTransactions):0,uptime:r?Date.now()-r.startTime:0},services:{transactionPool:fe.getPoolStatus(e),gasOptimization:De.getPerformanceStats(e),nonceManagement:this.getFirstActiveNonceManager(e)},lastUpdate:r!=null&&r.lastUpdate?new Date(r.lastUpdate).toISOString():null}}generateComprehensiveReport(){const e={timestamp:new Date().toISOString(),activeChains:Array.from(this.activeChains),totalOptimizedChains:this.activeChains.size,services:{transactionOptimization:fe.generateOptimizationReport,gasOptimization:De.generateDiagnosticReport(),nonceOptimization:Ne.generateDiagnosticReport()},integratedMetrics:{},recommendations:[]};for(const n of this.activeChains){const s=this.getOptimizationStatus(n);e.integratedMetrics[n]=s;const r=this.generateOptimizationRecommendations(n,s);r.length>0&&e.recommendations.push({chainId:n,recommendations:r})}return e}generateOptimizationRecommendations(e,n){const s=[],r=n.performance;r.averageBlockchainTime>5e3&&s.push({type:"performance",priority:"high",message:"High transaction times detected",action:"Consider increasing pool size or enabling burst mode"}),r.successRate<95&&s.push({type:"reliability",priority:"high",message:"Low success rate detected",action:"Check gas parameters and network connectivity"});const a=n.services.transactionPool;return(a.status==="critical"||a.status==="low")&&s.push({type:"pool_management",priority:"medium",message:"Transaction pool running low",action:"Increase batch size or reduce refill threshold"}),s}resetOptimizations(e){const n=e.toString();fe.clearPool(e);for(const[s]of Ne.nonceManagers.entries())if(s.startsWith(`${e}-`)){const r=s.split("-")[1];Ne.resetManager(e,r)}this.isInitialized.set(n,!1),this.activeChains.delete(e),this.integratedMetrics.delete(n),console.log(`🔄 Reset all optimizations for chain ${e}`)}}const Ls=new qc,Kc=({chainId:t,isVisible:e=!1})=>{const[n,s]=O.useState({status:{initialized:!1},transactionPool:{status:"not_initialized"},gasOptimization:{totalTransactions:0},nonceManagement:null,integratedMetrics:null}),[r,a]=O.useState("overview"),[i,c]=O.useState(!0),[l,f]=O.useState(Date.now());if(O.useEffect(()=>{if(!t||!e)return;const j=()=>{try{const T=Ls.getOptimizationStatus(t),v=fe.getPoolStatus(t),S=De.getPerformanceStats(t);let k=null;for(const[$,A]of Ne.nonceManagers.entries())if($.startsWith(`${t}-`)){k=Ne.getNonceStatus(t,A.address);break}s({status:T,transactionPool:v,gasOptimization:S,nonceManagement:k,integratedMetrics:T.performance}),f(Date.now())}catch(T){console.error("Error updating optimization dashboard:",T)}};j();let x;return i&&(x=setInterval(j,3e3)),()=>{x&&clearInterval(x)}},[t,e,i]),!e||!t)return null;const d=j=>{switch(j){case"healthy":case"initialized":case!0:return"#4CAF50";case"low":case"warning":return"#FF9800";case"critical":case"error":case!1:return"#F44336";case"exhausted":return"#9C27B0";case"initializing":return"#2196F3";default:return"#757575"}},g=j=>{const x=Math.floor(j/1e3),T=Math.floor(x/60),v=Math.floor(T/60);return v>0?`${v}h ${T%60}m`:T>0?`${T}m ${x%60}s`:`${x}s`},y=()=>{var j,x;return o.jsx("div",{className:"dashboard-overview",children:o.jsxs("div",{className:"overview-grid",children:[o.jsxs("div",{className:"overview-card",children:[o.jsxs("div",{className:"card-header",children:[o.jsx("h3",{children:"🚀 System Status"}),o.jsx("div",{className:"status-indicator",style:{backgroundColor:d(n.status.initialized)}})]}),o.jsxs("div",{className:"card-content",children:[o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Initialized:"}),o.jsx("span",{className:n.status.initialized?"success":"error",children:n.status.initialized?"YES":"NO"})]}),n.integratedMetrics&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Total Transactions:"}),o.jsx("span",{children:n.integratedMetrics.totalTransactions})]}),o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Success Rate:"}),o.jsxs("span",{style:{color:d(parseFloat(n.integratedMetrics.successRate)>=95)},children:[n.integratedMetrics.successRate,"%"]})]}),o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Avg Time:"}),o.jsxs("span",{children:[n.integratedMetrics.averageBlockchainTime,"ms"]})]}),o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Uptime:"}),o.jsx("span",{children:g(n.integratedMetrics.uptime)})]})]})]})]}),o.jsxs("div",{className:"overview-card",children:[o.jsxs("div",{className:"card-header",children:[o.jsx("h3",{children:"🎯 Transaction Pool"}),o.jsx("div",{className:"status-indicator",style:{backgroundColor:d(n.transactionPool.status)}})]}),o.jsxs("div",{className:"card-content",children:[o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Status:"}),o.jsx("span",{className:"status-text",style:{color:d(n.transactionPool.status)},children:(j=n.transactionPool.status)==null?void 0:j.toUpperCase()})]}),n.transactionPool.utilization!==void 0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Utilization:"}),o.jsxs("span",{children:[n.transactionPool.utilization,"%"]})]}),o.jsx("div",{className:"utilization-bar",children:o.jsx("div",{className:"utilization-fill",style:{width:`${n.transactionPool.utilization}%`,backgroundColor:d(n.transactionPool.status)}})})]}),n.transactionPool.refilling&&o.jsxs("div",{className:"refill-status",children:[o.jsx("span",{className:"refill-icon",children:"🔄"}),o.jsx("span",{children:"Refilling..."})]})]})]}),o.jsxs("div",{className:"overview-card",children:[o.jsxs("div",{className:"card-header",children:[o.jsx("h3",{children:"⛽ Gas Optimization"}),o.jsx("div",{className:"status-indicator",style:{backgroundColor:d(n.gasOptimization.totalTransactions>0)}})]}),o.jsxs("div",{className:"card-content",children:[o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Total TX:"}),o.jsx("span",{children:n.gasOptimization.totalTransactions})]}),o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Success Rate:"}),o.jsxs("span",{children:[n.gasOptimization.successRate,"%"]})]}),o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Avg Gas Used:"}),o.jsx("span",{children:n.gasOptimization.averageGasUsed})]}),o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Cache Hit Rate:"}),o.jsxs("span",{children:[n.gasOptimization.cacheHitRate,"%"]})]})]})]}),o.jsxs("div",{className:"overview-card",children:[o.jsxs("div",{className:"card-header",children:[o.jsx("h3",{children:"🎲 Nonce Management"}),o.jsx("div",{className:"status-indicator",style:{backgroundColor:d((x=n.nonceManagement)==null?void 0:x.initialized)}})]}),o.jsx("div",{className:"card-content",children:n.nonceManagement?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Current Nonce:"}),o.jsx("span",{children:n.nonceManagement.currentNonce})]}),o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Pending:"}),o.jsx("span",{children:n.nonceManagement.pendingCount})]}),o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Reserved:"}),o.jsx("span",{children:n.nonceManagement.reservedCount})]}),o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Efficiency:"}),o.jsxs("span",{children:[n.nonceManagement.efficiency,"%"]})]}),o.jsxs("div",{className:"metric-row",children:[o.jsx("span",{children:"Strategy:"}),o.jsx("span",{className:"strategy-badge",children:n.nonceManagement.strategy})]})]}):o.jsx("div",{className:"no-data",children:"No nonce manager active"})})]})]})})},N=()=>{var j;return o.jsx("div",{className:"dashboard-pool",children:o.jsxs("div",{className:"pool-detailed-info",children:[o.jsx("h3",{children:"🎯 Pre-signed Transaction Pool Details"}),o.jsxs("div",{className:"pool-status-section",children:[o.jsxs("div",{className:"status-header",children:[o.jsx("span",{children:"Status: "}),o.jsx("span",{className:"status-badge",style:{backgroundColor:d(n.transactionPool.status)},children:(j=n.transactionPool.status)==null?void 0:j.toUpperCase()})]}),o.jsx("p",{className:"status-message",children:n.transactionPool.message})]}),n.transactionPool.utilization!==void 0&&o.jsx("div",{className:"pool-metrics",children:o.jsxs("div",{className:"metric-large",children:[o.jsx("div",{className:"metric-label",children:"Pool Utilization"}),o.jsxs("div",{className:"metric-value-large",children:[n.transactionPool.utilization,"%"]}),o.jsx("div",{className:"utilization-bar-large",children:o.jsx("div",{className:"utilization-fill-large",style:{width:`${n.transactionPool.utilization}%`,backgroundColor:d(n.transactionPool.status)}})})]})}),o.jsxs("div",{className:"pool-actions",children:[o.jsx("button",{className:"action-button",onClick:()=>{const x=fe.generateOptimizationReport(t);console.log("🔧 Transaction Pool Report:",x),alert("Pool report logged to console")},children:"📊 Generate Report"}),o.jsx("button",{className:"action-button danger",onClick:()=>{confirm("Clear transaction pool? This will reset all pre-signed transactions.")&&(fe.clearPool(t),alert("Transaction pool cleared"))},children:"🗑️ Clear Pool"})]})]})})},w=()=>o.jsx("div",{className:"dashboard-gas",children:o.jsxs("div",{className:"gas-detailed-info",children:[o.jsx("h3",{children:"⛽ Gas Optimization Details"}),o.jsxs("div",{className:"gas-metrics-grid",children:[o.jsxs("div",{className:"gas-metric-card",children:[o.jsx("div",{className:"metric-label",children:"Total Transactions"}),o.jsx("div",{className:"metric-value",children:n.gasOptimization.totalTransactions})]}),o.jsxs("div",{className:"gas-metric-card",children:[o.jsx("div",{className:"metric-label",children:"Success Rate"}),o.jsxs("div",{className:"metric-value",style:{color:d(n.gasOptimization.successRate>=95)},children:[n.gasOptimization.successRate,"%"]})]}),o.jsxs("div",{className:"gas-metric-card",children:[o.jsx("div",{className:"metric-label",children:"Average Gas Used"}),o.jsx("div",{className:"metric-value",children:n.gasOptimization.averageGasUsed})]}),o.jsxs("div",{className:"gas-metric-card",children:[o.jsx("div",{className:"metric-label",children:"Average Time"}),o.jsxs("div",{className:"metric-value",children:[n.gasOptimization.averageTime,"ms"]})]}),o.jsxs("div",{className:"gas-metric-card",children:[o.jsx("div",{className:"metric-label",children:"Cache Hit Rate"}),o.jsxs("div",{className:"metric-value",children:[n.gasOptimization.cacheHitRate,"%"]})]})]}),o.jsx("div",{className:"gas-actions",children:o.jsx("button",{className:"action-button",onClick:()=>{const j=De.generateDiagnosticReport();console.log("🔧 Gas Optimization Report:",j),alert("Gas optimization report logged to console")},children:"📊 Generate Gas Report"})})]})}),P=()=>o.jsx("div",{className:"dashboard-nonce",children:o.jsxs("div",{className:"nonce-detailed-info",children:[o.jsx("h3",{children:"🎲 Nonce Management Details"}),n.nonceManagement?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"nonce-status-grid",children:[o.jsxs("div",{className:"nonce-status-card",children:[o.jsx("div",{className:"status-label",children:"Initialized"}),o.jsx("div",{className:"status-value",style:{color:d(n.nonceManagement.initialized)},children:n.nonceManagement.initialized?"YES":"NO"})]}),o.jsxs("div",{className:"nonce-status-card",children:[o.jsx("div",{className:"status-label",children:"Current Nonce"}),o.jsx("div",{className:"status-value",children:n.nonceManagement.currentNonce})]}),o.jsxs("div",{className:"nonce-status-card",children:[o.jsx("div",{className:"status-label",children:"Pending Nonce"}),o.jsx("div",{className:"status-value",children:n.nonceManagement.pendingNonce})]}),o.jsxs("div",{className:"nonce-status-card",children:[o.jsx("div",{className:"status-label",children:"Reserved Count"}),o.jsx("div",{className:"status-value",children:n.nonceManagement.reservedCount})]}),o.jsxs("div",{className:"nonce-status-card",children:[o.jsx("div",{className:"status-label",children:"Strategy"}),o.jsx("div",{className:"status-value",children:o.jsx("span",{className:"strategy-badge",children:n.nonceManagement.strategy})})]}),o.jsxs("div",{className:"nonce-status-card",children:[o.jsx("div",{className:"status-label",children:"Efficiency"}),o.jsxs("div",{className:"status-value",style:{color:d(parseFloat(n.nonceManagement.efficiency)>=80)},children:[n.nonceManagement.efficiency,"%"]})]})]}),n.nonceManagement.statistics&&o.jsxs("div",{className:"nonce-statistics",children:[o.jsx("h4",{children:"📊 Statistics"}),o.jsxs("div",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{children:"Total Allocations:"}),o.jsx("span",{children:n.nonceManagement.statistics.totalAllocations})]}),o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{children:"Successful Allocations:"}),o.jsx("span",{children:n.nonceManagement.statistics.successfulAllocations})]}),o.jsxs("div",{className:"stat-item",children:[o.jsx("span",{children:"Success Rate:"}),o.jsxs("span",{children:[n.nonceManagement.statistics.successRate,"%"]})]})]})]}),o.jsx("div",{className:"nonce-actions",children:o.jsx("button",{className:"action-button",onClick:()=>{const j=Ne.generateDiagnosticReport();console.log("🔧 Nonce Management Report:",j),alert("Nonce management report logged to console")},children:"📊 Generate Nonce Report"})})]}):o.jsxs("div",{className:"no-nonce-data",children:[o.jsx("p",{children:"No nonce management data available."}),o.jsx("p",{children:"Nonce managers are created when transactions are initialized."})]})]})});return o.jsxs("div",{className:"optimization-dashboard",children:[o.jsxs("div",{className:"dashboard-header",children:[o.jsxs("div",{className:"dashboard-title",children:[o.jsx("h2",{children:"🚀 Blockchain Optimization Dashboard"}),o.jsxs("div",{className:"chain-info",children:["Chain ",t]})]}),o.jsxs("div",{className:"dashboard-controls",children:[o.jsx("button",{className:`refresh-toggle ${i?"active":""}`,onClick:()=>c(!i),title:`Auto-refresh ${i?"enabled":"disabled"}`,children:"🔄"}),o.jsxs("div",{className:"last-update",children:["Updated ",Math.round((Date.now()-l)/1e3),"s ago"]})]})]}),o.jsxs("div",{className:"dashboard-tabs",children:[o.jsx("button",{className:`tab-button ${r==="overview"?"active":""}`,onClick:()=>a("overview"),children:"📊 Overview"}),o.jsx("button",{className:`tab-button ${r==="pool"?"active":""}`,onClick:()=>a("pool"),children:"🎯 Transaction Pool"}),o.jsx("button",{className:`tab-button ${r==="gas"?"active":""}`,onClick:()=>a("gas"),children:"⛽ Gas Optimization"}),o.jsx("button",{className:`tab-button ${r==="nonce"?"active":""}`,onClick:()=>a("nonce"),children:"🎲 Nonce Management"})]}),o.jsxs("div",{className:"dashboard-content",children:[r==="overview"&&y(),r==="pool"&&N(),r==="gas"&&w(),r==="nonce"&&P()]}),o.jsx("div",{className:"dashboard-footer",children:o.jsx("button",{className:"comprehensive-report-button",onClick:()=>{const j=Ls.generateComprehensiveReport();console.log("🔧 Comprehensive Optimization Report:",j),alert("Comprehensive report logged to console")},children:"📋 Generate Comprehensive Report"})})]})};var Jc={};const Yc=()=>{const t="cme84q0og02aalc0bh9blzwa9",[e,n]=O.useState("network-selection"),[s,r]=O.useState(null),[a,i]=O.useState(!1),c={id:6342,name:"MegaETH Testnet",network:"megaeth-testnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://carrot.megaeth.com/rpc"],webSocket:["wss://carrot.megaeth.com/ws"]}},blockExplorers:{default:{name:"MegaETH Explorer",url:"https://carrot.megaeth.com"}}},g={appId:"cm25q62mj00nks8j5lxk4qyly",config:{appearance:{theme:"dark",accentColor:"#1391ff",logo:"https://images.unsplash.com/photo-1614680376573-df3480f0c6ff?w=100&h=100&fit=crop&crop=center",walletChainType:"ethereum-and-solana",showWalletLoginFirst:!1,showWalletUiOnNotConnected:!1,showWalletUi:!1},embeddedWallets:{createOnLogin:"all-users",requireUserPasswordOnCreate:!1,prependWithWalletUi:!1,noPromptOnSignature:!0,showWalletUiOnNotConnected:!1,showWalletLoginFirst:!1},loginMethods:["email","wallet","google","discord","twitter"],defaultChain:c,supportedChains:[c,{id:31337,name:"Foundry Local",network:"foundry",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["http://127.0.0.1:8545"]}}},{id:50311,name:"Somnia Testnet",network:"somnia-testnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://testnet.somnia.network"]}}},{id:1313161556,name:"RISE Testnet",network:"rise-testnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://testnet-rpc.rise.com"]}}},{id:84532,name:"Base Sepolia",network:"base-sepolia",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Base Sepolia Explorer",url:"https://sepolia.basescan.org"}}},{id:10143,name:"Monad Testnet",network:"monad-testnet",nativeCurrency:{name:"Monad",symbol:"MON",decimals:18},rpcUrls:{default:{http:["https://testnet-rpc.monad.xyz"]}},blockExplorers:{default:{name:"Monad Explorer",url:"https://testnet.monadexplorer.com"}}},{id:1,name:"Ethereum",network:"homestead",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth-mainnet.g.alchemy.com/v2/your-api-key"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io"}}},{id:11155111,name:"Sepolia",network:"sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.infura.io/v3/your-api-key"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io"}}}],walletConnectCloudProjectId:Jc.REACT_APP_WALLETCONNECT_PROJECT_ID||"default",legal:{termsAndConditionsUrl:"/terms",privacyPolicyUrl:"/privacy"},mfa:{noPromptOnMfaRequired:!1}}},y=x=>{r(x)},N=x=>{r(x),x.isWeb2?n("game"):n("wallet-connection")},w=()=>{n("game")},P=()=>{n("network-selection"),r(null)},j=()=>{n("network-selection"),r(null)};return o.jsx(Kr,{appId:t,config:g,children:o.jsx("div",{className:"app",children:e==="network-selection"?o.jsx(Dc,{onNetworkSelect:y,onStartGame:N}):e==="wallet-connection"?o.jsxs("div",{children:[o.jsx("div",{className:"back-to-wallet",children:o.jsx("button",{className:"back-button-small",onClick:P,children:"← Back to Network Selection"})}),o.jsx(Lc,{onWalletConnected:w})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"back-to-network-button",children:o.jsx("button",{className:"back-button",onClick:P,children:"← Back to Network Selection"})}),s&&!s.isWeb2&&o.jsx(Gc,{selectedNetwork:s,onDisconnect:j,disableNetworkControls:!0}),o.jsx("div",{className:"game-layout",children:o.jsx("div",{className:"game-header",children:o.jsx("div",{className:"header-center",children:o.jsxs("div",{className:"title",children:["Buddy Runner",s&&s.isWeb2&&o.jsx("span",{className:"web2-mode",children:" - Classic Mode"})]})})})}),o.jsx(Bc,{selectedNetwork:s}),s&&!s.isWeb2&&o.jsx(_c,{chainId:s.id,isVisible:!0}),s&&!s.isWeb2&&o.jsx("div",{style:{position:"fixed",top:"10px",left:"10px",zIndex:1500},children:o.jsxs("button",{onClick:()=>i(!a),style:{background:"linear-gradient(45deg, #FF6B35, #F7931E)",border:"none",color:"white",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",fontSize:"11px",fontFamily:"Courier New, monospace",fontWeight:"bold",boxShadow:"0 2px 8px rgba(255, 107, 53, 0.3)",transition:"all 0.2s ease"},onMouseOver:x=>{x.target.style.transform="translateY(-2px)",x.target.style.boxShadow="0 4px 12px rgba(255, 107, 53, 0.4)"},onMouseOut:x=>{x.target.style.transform="translateY(0)",x.target.style.boxShadow="0 2px 8px rgba(255, 107, 53, 0.3)"},children:["🚀 ",a?"Close":"Open"," Dashboard"]})}),s&&!s.isWeb2&&o.jsx(Kc,{chainId:s.id,isVisible:a}),o.jsxs("div",{className:"instructions",children:[o.jsx("p",{className:"main-instruction",children:"📱 Press SPACE or tap to make Buddy jump!"}),o.jsx("p",{className:"help-text",children:"Help our brave bunny Buddy hop over the giant carrots and achieve the highest score!"}),o.jsx("p",{className:"warning-text",children:"Watch out for those sneaky garden carrots!"})]})]})})})};An.createRoot(document.getElementById("root")).render(o.jsx(Yr.StrictMode,{children:o.jsx(Yc,{})}));export{M as B,yt as H,xt as I,Ie as a,Ce as b,bn as c,Po as d,Bt as e,cn as g,_e as i,he as s};
