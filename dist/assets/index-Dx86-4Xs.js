const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ccip-DD1jhJol.js","assets/privy-C-Ell8v5.js","assets/vendor-C7A1SLig.js"])))=>i.map(i=>d[i]);
var Mo=Object.defineProperty;var Qs=t=>{throw TypeError(t)};var Lo=(t,e,n)=>e in t?Mo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var b=(t,e,n)=>Lo(t,typeof e!="symbol"?e+"":e,n),jr=(t,e,n)=>e.has(t)||Qs("Cannot "+n);var N=(t,e,n)=>(jr(t,e,"read from private field"),n?n.call(t):e.get(t)),_=(t,e,n)=>e.has(t)?Qs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),U=(t,e,n,r)=>(jr(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),H=(t,e,n)=>(jr(t,e,"access private method"),n);var ei=(t,e,n,r)=>({set _(s){U(t,e,s,n)},get _(){return N(t,e,r)}});import{m as jn,o as Wi,j as d,i as ws,a as Uo,_ as Do,X as Go}from"./privy-C-Ell8v5.js";import{b as _o,r as $,R as zo}from"./vendor-C7A1SLig.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var _r={},ti=_o;_r.createRoot=ti.createRoot,_r.hydrateRoot=ti.hydrateRoot;class Ho{constructor(e,n,r,s,i,a,o=null){b(this,"WALK_ANIMATION_TIMER",180);b(this,"walkAnimationTimer",this.WALK_ANIMATION_TIMER);b(this,"buddyRunImages",[]);b(this,"jumpPressed",!1);b(this,"jumpInProgress",!1);b(this,"falling",!1);b(this,"JUMP_SPEED",.65);b(this,"GRAVITY",.38);b(this,"dustParticles",[]);b(this,"showDust",!1);b(this,"dustTimer",0);b(this,"touchstart",()=>{this.jumpPressed=!0});b(this,"touchend",()=>{this.jumpPressed=!1});b(this,"keydown",e=>{e.code==="Space"&&(this.jumpPressed=!0)});b(this,"keyup",e=>{e.code==="Space"&&(this.jumpPressed=!1)});this.ctx=e,this.canvas=e.canvas,this.width=n,this.height=r,this.minJumpHeight=s,this.maxJumpHeight=i,this.scaleRatio=a,this.onMovementCallback=o,this.x=10*a,this.y=this.canvas.height-this.height,this.yStandingPosition=this.y,this.standingStillImage=new Image,this.standingStillImage.src="assets/buddy_standing_still.png",this.standingStillImage.onerror=()=>console.error("Failed to load buddy_standing_still.png"),this.image=this.standingStillImage,this.jumpingImage=new Image,this.jumpingImage.src="assets/buddy_standing_still_eye_closed.png",this.jumpingImage.onerror=()=>console.error("Failed to load buddy_standing_still_eye_closed.png");const c=new Image;c.src="assets/buddy_run1.png",c.onerror=()=>console.error("Failed to load buddy_run1.png");const u=new Image;u.src="assets/buddy_run2.png",u.onerror=()=>console.error("Failed to load buddy_run2.png"),this.buddyRunImages.push(c),this.buddyRunImages.push(u),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),window.removeEventListener("touchstart",this.touchstart),window.removeEventListener("touchend",this.touchend),window.addEventListener("touchstart",this.touchstart),window.addEventListener("touchend",this.touchend)}update(e,n){this.run(e,n),this.jumpInProgress&&(this.image=this.jumpingImage),this.jump(n),this.updateDust(n)}jump(e){this.jumpPressed&&(this.jumpInProgress||this.onMovementCallback&&this.onMovementCallback(),this.jumpInProgress=!0),this.jumpInProgress&&!this.falling?this.y>this.canvas.height-this.minJumpHeight||this.y>this.canvas.height-this.maxJumpHeight&&this.jumpPressed?this.y-=this.JUMP_SPEED*e*this.scaleRatio:this.falling=!0:this.y<this.yStandingPosition?(this.y+=this.GRAVITY*e*this.scaleRatio,this.y+this.height>this.canvas.height&&(this.y=this.yStandingPosition,this.createDustEffect())):(this.falling=!1,this.jumpInProgress=!1)}createDustEffect(){this.showDust=!0,this.dustTimer=300}updateDust(e){this.showDust&&(this.dustTimer-=e,this.dustTimer<=0&&(this.showDust=!1))}run(e,n){this.walkAnimationTimer<=0&&(this.image===this.buddyRunImages[0]?this.image=this.buddyRunImages[1]:this.image=this.buddyRunImages[0],this.walkAnimationTimer=this.WALK_ANIMATION_TIMER),this.walkAnimationTimer-=n*e}draw(){if(this.image&&this.image.complete&&this.image.naturalWidth>0&&this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height),this.showDust){this.ctx.fillStyle="rgba(139, 69, 19, 0.6)";const e=this.yStandingPosition+this.height;for(let n=0;n<5;n++){const r=this.x+this.width*.2+n*8*this.scaleRatio,s=(3-n*.5)*this.scaleRatio;this.ctx.beginPath(),this.ctx.arc(r,e-s,s,0,Math.PI*2),this.ctx.fill()}}}}class Wo{constructor(e,n,r,s,i){this.ctx=e,this.canvas=e.canvas,this.width=n,this.height=r,this.speed=s,this.scaleRatio=i,this.x=0,this.y=this.canvas.height-this.height,this.groundImage=new Image,this.groundImage.src="assets/ground.png",this.groundImage.onerror=()=>console.error("Failed to load ground.png")}update(e,n){this.x-=e*n*this.speed*this.scaleRatio}draw(){this.ctx.fillStyle="#7BA428",this.ctx.fillRect(0,this.y,this.canvas.width,this.height),this.ctx.fillStyle="#6B9420";for(let e=0;e<this.canvas.width;e+=3)this.ctx.fillRect(e,this.y,1,this.height);this.ctx.fillStyle="#8B4513",this.ctx.fillRect(0,this.y+this.height*.7,this.canvas.width,this.height*.3),this.x<-this.width&&(this.x=0)}reset(){this.x=0}}class Vo{constructor(e,n,r,s,i,a){this.ctx=e,this.x=n,this.y=r,this.width=s,this.height=i,this.image=a}update(e,n,r,s){this.x-=e*n*r*s}draw(){this.image&&this.image.complete&&this.image.naturalWidth>0&&this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height)}collideWith(e){return e.x<this.x+this.width/1.4&&e.x+e.width/1.4>this.x&&e.y<this.y+this.height/1.4&&e.height+e.y/1.4>this.y}}class qo{constructor(e,n,r,s){b(this,"CARROT_INTERVAL_MIN",500);b(this,"CARROT_INTERVAL_MAX",2e3);b(this,"nextCarrotInterval",null);b(this,"carrots",[]);this.ctx=e,this.canvas=e.canvas,this.carrotImages=n,this.scaleRatio=r,this.speed=s,this.setNextCarrotTime()}setNextCarrotTime(){const e=this.getRandomNumber(this.CARROT_INTERVAL_MIN,this.CARROT_INTERVAL_MAX);this.nextCarrotInterval=e}getRandomNumber(e,n){return Math.floor(Math.random()*(n-e+1)+e)}createCarrot(){const e=this.getRandomNumber(0,this.carrotImages.length-1),n=this.carrotImages[e],r=this.canvas.width*1.5,s=this.canvas.height-n.height,i=new Vo(this.ctx,r,s,n.width,n.height,n.image);this.carrots.push(i)}update(e,n){this.nextCarrotInterval<=0&&(this.createCarrot(),this.setNextCarrotTime()),this.nextCarrotInterval-=n,this.carrots.forEach(r=>{r.update(this.speed,e,n,this.scaleRatio)}),this.carrots=this.carrots.filter(r=>r.x>-r.width)}draw(){this.carrots.forEach(e=>e.draw())}collideWith(e){return this.carrots.some(n=>n.collideWith(e))}reset(){this.carrots=[]}}class Jo{constructor(e,n,r=null){b(this,"score",0);b(this,"HIGH_SCORE_KEY","highScore");this.ctx=e,this.canvas=e.canvas,this.scaleRatio=n,this.blockchainStatus=r}update(e){this.score+=e*.01}reset(){this.score=0}setHighScore(){const e=Number(localStorage.getItem(this.HIGH_SCORE_KEY));this.score>e&&localStorage.setItem(this.HIGH_SCORE_KEY,Math.floor(this.score))}draw(){const e=Number(localStorage.getItem(this.HIGH_SCORE_KEY)),n=20*this.scaleRatio,r=20*this.scaleRatio;this.ctx.font=`${r}px serif`,this.ctx.fillStyle="#6B8E6B";const s=this.canvas.width-75*this.scaleRatio,i=s-125*this.scaleRatio,a=Math.floor(this.score).toString().padStart(6,0),o=e.toString().padStart(6,0);if(this.ctx.fillText(a,s,n),this.ctx.fillText(`HI ${o}`,i,n),this.blockchainStatus){const c=n+30*this.scaleRatio,u=12*this.scaleRatio;this.ctx.font=`${u}px monospace`,this.ctx.fillStyle=this.blockchainStatus.contractAvailable?"#7FBC7F":"#FFA500",this.ctx.fillText(`⛓️ ${this.blockchainStatus.networkName}`,10*this.scaleRatio,c),this.ctx.fillStyle="#4169E1",this.ctx.fillText(`Moves: ${this.blockchainStatus.totalMovements}`,10*this.scaleRatio,c+20*this.scaleRatio),this.blockchainStatus.pendingTransactions>0&&(this.ctx.fillStyle="#FF6347",this.ctx.fillText(`Pending: ${this.blockchainStatus.pendingTransactions}`,10*this.scaleRatio,c+40*this.scaleRatio)),this.blockchainStatus.onChainScore>0&&(this.ctx.fillStyle="#32CD32",this.ctx.fillText(`On-chain: ${this.blockchainStatus.onChainScore}`,10*this.scaleRatio,c+60*this.scaleRatio))}}}const Yo="6.15.0";function Xo(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function zr(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function L(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&Xo(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function At(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>At(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return At(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${At(r,e)}: ${At(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Dt(t,e){return t&&t.code===e}function Vi(t){return Dt(t,"CALL_EXCEPTION")}function an(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${At(n)}`);for(const a in n){if(a==="shortMessage")continue;const o=n[a];i.push(a+"="+At(o))}}i.push(`code=${e}`),i.push(`version=${Yo}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return L(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&L(s,{shortMessage:r}),s}function B(t,e,n,r){if(!t)throw an(e,n,r)}function A(t,e,n,r){B(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function qi(t,e,n){n==null&&(n=""),n&&(n=": "+n),B(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),B(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function xs(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),B(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function Ji(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}A(!1,"invalid BytesLike value",e||"value",t)}function _e(t,e){return Ji(t,e,!1)}function Ie(t,e){return Ji(t,e,!0)}function Le(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function Ko(t){return Le(t,!0)||t instanceof Uint8Array}const ni="0123456789abcdef";function J(t){const e=_e(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=ni[(s&240)>>4]+ni[s&15]}return n}function Ct(t){return"0x"+t.map(e=>J(e).substring(2)).join("")}function Tt(t,e,n){const r=_e(t);return n!=null&&n>r.length&&B(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),J(r.slice(e??0,n??r.length))}function Yi(t,e,n){const r=_e(t);B(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),J(s)}function Zo(t,e){return Yi(t,e,!0)}function Qo(t,e){return Yi(t,e,!1)}const lr=BigInt(0),be=BigInt(1),It=9007199254740991;function ec(t,e){const n=dr(t,"value"),r=BigInt(Ve(e,"width"));if(B(n>>r===lr,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-be){const s=(be<<r)-be;return-((~n&s)+be)}return n}function tc(t,e){let n=st(t,"value");const r=BigInt(Ve(e,"width")),s=be<<r-be;if(n<lr){n=-n,B(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(be<<r)-be;return(~n&i)+be}else B(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function zn(t,e){const n=dr(t,"value"),r=BigInt(Ve(e,"bits"));return n&(be<<r)-be}function st(t,e){switch(typeof t){case"bigint":return t;case"number":return A(Number.isInteger(t),"underflow",e||"value",t),A(t>=-It&&t<=It,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){A(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}A(!1,"invalid BigNumberish value",e||"value",t)}function dr(t,e){const n=st(t,e);return B(n>=lr,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const ri="0123456789abcdef";function Xi(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=ri[n>>4],e+=ri[n&15];return BigInt(e)}return st(t)}function Ve(t,e){switch(typeof t){case"bigint":return A(t>=-It&&t<=It,"overflow",e||"value",t),Number(t);case"number":return A(Number.isInteger(t),"underflow",e||"value",t),A(t>=-It&&t<=It,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Ve(BigInt(t),e)}catch(n){A(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}A(!1,"invalid numeric value",e||"value",t)}function nc(t){return Ve(Xi(t))}function Ki(t,e){let r=dr(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=Ve(e,"width");for(B(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function rc(t){const e=dr(t,"value");if(e===lr)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}var Ft;class sc{constructor(e,n,r){b(this,"filter");b(this,"emitter");_(this,Ft);U(this,Ft,n),L(this,{emitter:e,filter:r})}async removeListener(){N(this,Ft)!=null&&await this.emitter.off(this.filter,N(this,Ft))}}Ft=new WeakMap;function ic(t,e,n,r,s){A(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function Zi(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let a=e+1;a<n.length&&n[a]>>6===2;a++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function ac(t,e,n,r,s){return t==="OVERLONG"?(A(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),Zi(t,e,n))}const oc=Object.freeze({error:ic,ignore:Zi,replace:ac});function cc(t,e){e==null&&(e=oc.error);const n=_e(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let a=null,o=null;if((i&224)===192)a=1,o=127;else if((i&240)===224)a=2,o=2047;else if((i&248)===240)a=3,o=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+a>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-a-1)-1;for(let u=0;u<a;u++){let l=n[s];if((l&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|l&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-a,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-a,n,r,c);continue}if(c<=o){s+=e("OVERLONG",s-1-a,n,r,c);continue}r.push(c)}}return r}function Qi(t,e){A(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);A(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const a=65536+((s&1023)<<10)+(i&1023);n.push(a>>18|240),n.push(a>>12&63|128),n.push(a>>6&63|128),n.push(a&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function uc(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function lc(t,e){return uc(cc(t,e))}const te=32,Hr=new Uint8Array(te),dc=["then"],Hn={},ea=new WeakMap;function ct(t){return ea.get(t)}function si(t,e){ea.set(t,e)}function Kt(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function Wr(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof Gt?Wr(ct(r),r,n):r):t.reduce((r,s,i)=>{let a=e.getValue(s);return s in r||(n&&a instanceof Gt&&(a=Wr(ct(a),a,n)),r[s]=a),r},{})}var Bt;const St=class St extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),a=!0;r!==Hn&&(s=n,i=[],a=!1);super(s.length);_(this,Bt);s.forEach((u,l)=>{this[l]=u});const o=i.reduce((u,l)=>(typeof l=="string"&&u.set(l,(u.get(l)||0)+1),u),new Map);if(si(this,Object.freeze(s.map((u,l)=>{const f=i[l];return f!=null&&o.get(f)===1?f:null}))),U(this,Bt,[]),N(this,Bt)==null&&N(this,Bt),!a)return;Object.freeze(this);const c=new Proxy(this,{get:(u,l,f)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){const m=Ve(l,"%index");if(m<0||m>=this.length)throw new RangeError("out of result range");const p=u[m];return p instanceof Error&&Kt(`index ${m}`,p),p}if(dc.indexOf(l)>=0)return Reflect.get(u,l,f);const h=u[l];if(h instanceof Function)return function(...m){return h.apply(this===f?u:this,m)};if(!(l in u))return u.getValue.apply(this===f?u:this,[l])}return Reflect.get(u,l,f)}});return si(c,ct(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&Kt(`index ${i}`,s),n&&s instanceof St&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=ct(this);return r.reduce((s,i,a)=>(B(i!=null,`value at index ${a} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Wr(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=ct(this),i=[],a=[];for(let o=n;o<r;o++)i.push(this[o]),a.push(s[o]);return new St(Hn,i,a)}filter(n,r){const s=ct(this),i=[],a=[];for(let o=0;o<this.length;o++){const c=this[o];c instanceof Error&&Kt(`index ${o}`,c),n.call(r,c,o,this)&&(i.push(c),a.push(s[o]))}return new St(Hn,i,a)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const a=this[i];a instanceof Error&&Kt(`index ${i}`,a),s.push(n.call(r,a,i,this))}return s}getValue(n){const r=ct(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&Kt(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new St(Hn,n,r)}};Bt=new WeakMap;let Gt=St;function ii(t){let e=rc(t);return B(e.length<=te,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:te,offset:e.length}),e.length!==te&&(e=Ie(Ct([Hr.slice(e.length%te),e]))),e}class qe{constructor(e,n,r,s){b(this,"name");b(this,"type");b(this,"localName");b(this,"dynamic");L(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){A(!1,e,this.localName,n)}}var Me,dt,Mt,Kn;class Vr{constructor(){_(this,Mt);_(this,Me);_(this,dt);U(this,Me,[]),U(this,dt,0)}get data(){return Ct(N(this,Me))}get length(){return N(this,dt)}appendWriter(e){return H(this,Mt,Kn).call(this,Ie(e.data))}writeBytes(e){let n=Ie(e);const r=n.length%te;return r&&(n=Ie(Ct([n,Hr.slice(r)]))),H(this,Mt,Kn).call(this,n)}writeValue(e){return H(this,Mt,Kn).call(this,ii(e))}writeUpdatableValue(){const e=N(this,Me).length;return N(this,Me).push(Hr),U(this,dt,N(this,dt)+te),n=>{N(this,Me)[e]=ii(n)}}}Me=new WeakMap,dt=new WeakMap,Mt=new WeakSet,Kn=function(e){return N(this,Me).push(e),U(this,dt,N(this,dt)+e.length),e.length};var se,le,ft,ht,Ye,Et,Jr,ta;const Ys=class Ys{constructor(e,n,r){_(this,Et);b(this,"allowLoose");_(this,se);_(this,le);_(this,ft);_(this,ht);_(this,Ye);L(this,{allowLoose:!!n}),U(this,se,Ie(e)),U(this,ft,0),U(this,ht,null),U(this,Ye,r??1024),U(this,le,0)}get data(){return J(N(this,se))}get dataLength(){return N(this,se).length}get consumed(){return N(this,le)}get bytes(){return new Uint8Array(N(this,se))}subReader(e){const n=new Ys(N(this,se).slice(N(this,le)+e),this.allowLoose,N(this,Ye));return U(n,ht,this),n}readBytes(e,n){let r=H(this,Et,ta).call(this,0,e,!!n);return H(this,Et,Jr).call(this,e),U(this,le,N(this,le)+r.length),r.slice(0,e)}readValue(){return Xi(this.readBytes(te))}readIndex(){return nc(this.readBytes(te))}};se=new WeakMap,le=new WeakMap,ft=new WeakMap,ht=new WeakMap,Ye=new WeakMap,Et=new WeakSet,Jr=function(e){var n;if(N(this,ht))return H(n=N(this,ht),Et,Jr).call(n,e);U(this,ft,N(this,ft)+e),B(N(this,Ye)<1||N(this,ft)<=N(this,Ye)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${N(this,Ye)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Ie(N(this,se)),offset:N(this,le),length:e,info:{bytesRead:N(this,ft),dataLength:this.dataLength}})},ta=function(e,n,r){let s=Math.ceil(n/te)*te;return N(this,le)+s>N(this,se).length&&(this.allowLoose&&r&&N(this,le)+n<=N(this,se).length?s=n:B(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Ie(N(this,se)),length:N(this,se).length,offset:N(this,le)+s})),N(this,se).slice(N(this,le),N(this,le)+s)};let qr=Ys;function ai(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function na(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function oi(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function fc(t,e){na(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hc=t=>t instanceof Uint8Array,pc=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),mc=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!mc)throw new Error("Non little-endian hardware is not supported");function gc(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function ra(t){if(typeof t=="string"&&(t=gc(t)),!hc(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}let bc=class{clone(){return this._cloneInto()}};function yc(t){const e=r=>t().update(ra(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const Wn=BigInt(2**32-1),ci=BigInt(32);function wc(t,e=!1){return e?{h:Number(t&Wn),l:Number(t>>ci&Wn)}:{h:Number(t>>ci&Wn)|0,l:Number(t&Wn)|0}}function xc(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:a}=wc(t[s],e);[n[s],r[s]]=[i,a]}return[n,r]}const vc=(t,e,n)=>t<<n|e>>>32-n,Ec=(t,e,n)=>e<<n|t>>>32-n,Nc=(t,e,n)=>e<<n-32|t>>>64-n,Tc=(t,e,n)=>t<<n-32|e>>>64-n,[sa,ia,aa]=[[],[],[]],Pc=BigInt(0),Zt=BigInt(1),kc=BigInt(2),Ac=BigInt(7),Ic=BigInt(256),Oc=BigInt(113);for(let t=0,e=Zt,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],sa.push(2*(5*r+n)),ia.push((t+1)*(t+2)/2%64);let s=Pc;for(let i=0;i<7;i++)e=(e<<Zt^(e>>Ac)*Oc)%Ic,e&kc&&(s^=Zt<<(Zt<<BigInt(i))-Zt);aa.push(s)}const[Sc,Cc]=xc(aa,!0),ui=(t,e,n)=>n>32?Nc(t,e,n):vc(t,e,n),li=(t,e,n)=>n>32?Tc(t,e,n):Ec(t,e,n);function Rc(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let a=0;a<10;a++)n[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,u=n[c],l=n[c+1],f=ui(u,l,1)^n[o],h=li(u,l,1)^n[o+1];for(let m=0;m<50;m+=10)t[a+m]^=f,t[a+m+1]^=h}let s=t[2],i=t[3];for(let a=0;a<24;a++){const o=ia[a],c=ui(s,i,o),u=li(s,i,o),l=sa[a];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)n[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~n[(o+2)%10]&n[(o+4)%10]}t[0]^=Sc[r],t[1]^=Cc[r]}n.fill(0)}let jc=class oa extends bc{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ai(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=pc(this.state)}keccak(){Rc(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){oi(this);const{blockLen:n,state:r}=this;e=ra(e);const s=e.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let o=0;o<a;o++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){oi(this,!1),na(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ai(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(fc(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return e||(e=new oa(n,r,s,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}};const $c=(t,e,n)=>yc(()=>new jc(e,t,n)),Fc=$c(1,136,256/8);let ca=!1;const ua=function(t){return Fc(t)};let la=ua;function Qe(t){const e=_e(t,"data");return J(la(e))}Qe._=ua;Qe.lock=function(){ca=!0};Qe.register=function(t){if(ca)throw new TypeError("keccak256 is locked");la=t};Object.freeze(Qe);const Bc=BigInt(0),Mc=BigInt(36);function di(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=_e(Qe(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const vs={};for(let t=0;t<10;t++)vs[String(t)]=String(t);for(let t=0;t<26;t++)vs[String.fromCharCode(65+t)]=String(10+t);const fi=15;function Lc(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>vs[r]).join("");for(;e.length>=fi;){let r=e.substring(0,fi);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const Uc=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function Dc(t){t=t.toLowerCase();let e=Bc;for(let n=0;n<t.length;n++)e=e*Mc+Uc[t[n]];return e}function gt(t){if(A(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=di(t);return A(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){A(t.substring(2,4)===Lc(t),"bad icap checksum","address",t);let e=Dc(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return di("0x"+e)}A(!1,"invalid address","address",t)}function da(t){return t&&typeof t.getAddress=="function"}async function $r(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(B(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),A(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),gt(n)}function on(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?gt(t):(B(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),$r(t,e.resolveName(t)));if(da(t))return $r(t,t.getAddress());if(t&&typeof t.then=="function")return $r(t,t);A(!1,"unsupported addressable value","target",t)}const $e={};function R(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new Q($e,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function D(t,e){return new Q($e,`bytes${e||""}`,t,{size:e})}const hi=Symbol.for("_ethers_typed");var pt;const Fe=class Fe{constructor(e,n,r,s){b(this,"type");b(this,"value");_(this,pt);b(this,"_typedSymbol");s==null&&(s=null),xs($e,e,"Typed"),L(this,{_typedSymbol:hi,type:n,value:r}),U(this,pt,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return N(this,pt)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return N(this,pt)===!0?-1:N(this,pt)===!1?this.value.length:null}static from(e,n){return new Fe($e,e,n)}static uint8(e){return R(e,8)}static uint16(e){return R(e,16)}static uint24(e){return R(e,24)}static uint32(e){return R(e,32)}static uint40(e){return R(e,40)}static uint48(e){return R(e,48)}static uint56(e){return R(e,56)}static uint64(e){return R(e,64)}static uint72(e){return R(e,72)}static uint80(e){return R(e,80)}static uint88(e){return R(e,88)}static uint96(e){return R(e,96)}static uint104(e){return R(e,104)}static uint112(e){return R(e,112)}static uint120(e){return R(e,120)}static uint128(e){return R(e,128)}static uint136(e){return R(e,136)}static uint144(e){return R(e,144)}static uint152(e){return R(e,152)}static uint160(e){return R(e,160)}static uint168(e){return R(e,168)}static uint176(e){return R(e,176)}static uint184(e){return R(e,184)}static uint192(e){return R(e,192)}static uint200(e){return R(e,200)}static uint208(e){return R(e,208)}static uint216(e){return R(e,216)}static uint224(e){return R(e,224)}static uint232(e){return R(e,232)}static uint240(e){return R(e,240)}static uint248(e){return R(e,248)}static uint256(e){return R(e,256)}static uint(e){return R(e,256)}static int8(e){return R(e,-8)}static int16(e){return R(e,-16)}static int24(e){return R(e,-24)}static int32(e){return R(e,-32)}static int40(e){return R(e,-40)}static int48(e){return R(e,-48)}static int56(e){return R(e,-56)}static int64(e){return R(e,-64)}static int72(e){return R(e,-72)}static int80(e){return R(e,-80)}static int88(e){return R(e,-88)}static int96(e){return R(e,-96)}static int104(e){return R(e,-104)}static int112(e){return R(e,-112)}static int120(e){return R(e,-120)}static int128(e){return R(e,-128)}static int136(e){return R(e,-136)}static int144(e){return R(e,-144)}static int152(e){return R(e,-152)}static int160(e){return R(e,-160)}static int168(e){return R(e,-168)}static int176(e){return R(e,-176)}static int184(e){return R(e,-184)}static int192(e){return R(e,-192)}static int200(e){return R(e,-200)}static int208(e){return R(e,-208)}static int216(e){return R(e,-216)}static int224(e){return R(e,-224)}static int232(e){return R(e,-232)}static int240(e){return R(e,-240)}static int248(e){return R(e,-248)}static int256(e){return R(e,-256)}static int(e){return R(e,-256)}static bytes1(e){return D(e,1)}static bytes2(e){return D(e,2)}static bytes3(e){return D(e,3)}static bytes4(e){return D(e,4)}static bytes5(e){return D(e,5)}static bytes6(e){return D(e,6)}static bytes7(e){return D(e,7)}static bytes8(e){return D(e,8)}static bytes9(e){return D(e,9)}static bytes10(e){return D(e,10)}static bytes11(e){return D(e,11)}static bytes12(e){return D(e,12)}static bytes13(e){return D(e,13)}static bytes14(e){return D(e,14)}static bytes15(e){return D(e,15)}static bytes16(e){return D(e,16)}static bytes17(e){return D(e,17)}static bytes18(e){return D(e,18)}static bytes19(e){return D(e,19)}static bytes20(e){return D(e,20)}static bytes21(e){return D(e,21)}static bytes22(e){return D(e,22)}static bytes23(e){return D(e,23)}static bytes24(e){return D(e,24)}static bytes25(e){return D(e,25)}static bytes26(e){return D(e,26)}static bytes27(e){return D(e,27)}static bytes28(e){return D(e,28)}static bytes29(e){return D(e,29)}static bytes30(e){return D(e,30)}static bytes31(e){return D(e,31)}static bytes32(e){return D(e,32)}static address(e){return new Fe($e,"address",e)}static bool(e){return new Fe($e,"bool",!!e)}static bytes(e){return new Fe($e,"bytes",e)}static string(e){return new Fe($e,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Fe($e,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===hi}static dereference(e,n){if(Fe.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};pt=new WeakMap;let Q=Fe;class Gc extends qe{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=Q.dereference(n,"string");try{r=gt(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return gt(Ki(e.readValue(),20))}}class _c extends qe{constructor(n){super(n.name,n.type,"_",n.dynamic);b(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function fa(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(u=>{const l=u.localName;return B(l,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:n}),B(!c[l],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:n}),c[l]=!0,n[l]})}else A(!1,"invalid tuple value","tuple",n);A(e.length===r.length,"types/value length mismatch","tuple",n);let s=new Vr,i=new Vr,a=[];e.forEach((c,u)=>{let l=r[u];if(c.dynamic){let f=i.length;c.encode(i,l);let h=s.writeUpdatableValue();a.push(m=>{h(m+f)})}else c.encode(s,l)}),a.forEach(c=>{c(s.length)});let o=t.appendWriter(s);return o+=t.appendWriter(i),o}function ha(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let a=null;if(i.dynamic){let o=t.readIndex(),c=s.subReader(o);try{a=i.decode(c)}catch(u){if(Dt(u,"BUFFER_OVERRUN"))throw u;a=u,a.baseType=i.name,a.name=i.localName,a.type=i.type}}else try{a=i.decode(t)}catch(o){if(Dt(o,"BUFFER_OVERRUN"))throw o;a=o,a.baseType=i.name,a.name=i.localName,a.type=i.type}if(a==null)throw new Error("investigate");n.push(a),r.push(i.localName||null)}),Gt.fromItems(n,r)}class zc extends qe{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",a=r===-1||n.dynamic;super("array",i,s,a);b(this,"coder");b(this,"length");L(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=Q.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),qi(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let a=[];for(let o=0;o<s.length;o++)a.push(this.coder);return fa(n,a,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),B(r*te<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*te,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new _c(this.coder));return ha(n,s)}}class Hc extends qe{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=Q.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class pa extends qe{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=Ie(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class Wc extends pa{constructor(e){super("bytes",e)}decode(e){return J(super.decode(e))}}class Vc extends qe{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);b(this,"size");L(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=Ie(Q.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return J(n.readBytes(this.size))}}const qc=new Uint8Array([]);class Jc extends qe{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(qc)}decode(e){return e.readBytes(0),null}}const Yc=BigInt(0),Xc=BigInt(1),Kc=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Zc extends qe{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);b(this,"size");b(this,"signed");L(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=st(Q.dereference(r,this.type)),i=zn(Kc,te*8);if(this.signed){let a=zn(i,this.size*8-1);(s>a||s<-(a+Xc))&&this._throwError("value out-of-bounds",r),s=tc(s,8*te)}else(s<Yc||s>zn(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=zn(n.readValue(),this.size*8);return this.signed&&(r=ec(r,this.size*8)),r}}class Qc extends pa{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,Qi(Q.dereference(n,"string")))}decode(e){return lc(super.decode(e))}}class Vn extends qe{constructor(n,r){let s=!1;const i=[];n.forEach(o=>{o.dynamic&&(s=!0),i.push(o.type)});const a="tuple("+i.join(",")+")";super("tuple",a,r,s);b(this,"coders");L(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const a=i.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});return this.coders.forEach((s,i)=>{let a=s.localName;!a||r[a]!==1||(a==="length"&&(a="_length"),n[a]==null&&(n[a]=n[i]))}),Object.freeze(n)}encode(n,r){const s=Q.dereference(r,"tuple");return fa(n,this.coders,s)}decode(n){return ha(n,this.coders)}}function Fr(t,e){return{address:gt(t),storageKeys:e.map((n,r)=>(A(Le(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function eu(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(A(n.length===2,"invalid slot set",`value[${r}]`,n),Fr(n[0],n[1])):(A(n!=null&&typeof n=="object","invalid address-slot set","value",t),Fr(n.address,n.storageKeys)));A(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return Fr(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function cn(t){return Qe(Qi(t))}function ne(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const tu="external public payable override",nu=ne(tu.split(" ")),ma="constant external internal payable private public pure view override",ru=ne(ma.split(" ")),ga="constructor error event fallback function receive struct",ba=ne(ga.split(" ")),ya="calldata memory storage payable indexed",su=ne(ya.split(" ")),iu="tuple returns",au=[ga,ya,iu,ma].join(" "),ou=ne(au.split(" ")),cu={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},uu=new RegExp("^(\\s*)"),lu=new RegExp("^([0-9]+)"),du=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),wa=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),xa=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var X,ge,On,Yr;const cr=class cr{constructor(e){_(this,On);_(this,X);_(this,ge);U(this,X,0),U(this,ge,e.slice())}get offset(){return N(this,X)}get length(){return N(this,ge).length-N(this,X)}clone(){return new cr(N(this,ge))}reset(){U(this,X,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=H(this,On,Yr).call(this,N(this,X)+1,e.match+1);return U(this,X,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;N(this,X)<e.match-1;){const r=this.peek().linkNext;n.push(H(this,On,Yr).call(this,N(this,X)+1,r)),U(this,X,r)}return U(this,X,e.match+1),n}peek(){if(N(this,X)>=N(this,ge).length)throw new Error("out-of-bounds");return N(this,ge)[N(this,X)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return ei(this,X)._++,e}toString(){const e=[];for(let n=N(this,X);n<N(this,ge).length;n++){const r=N(this,ge)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};X=new WeakMap,ge=new WeakMap,On=new WeakSet,Yr=function(e=0,n=0){return new cr(N(this,ge).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let ye=cr;function it(t){const e=[],n=a=>{const o=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${o} at ${i}: ${a}`)};let r=[],s=[],i=0;for(;i<t.length;){let a=t.substring(i),o=a.match(uu);o&&(i+=o[1].length,a=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let u=cu[a[0]]||"";if(u){if(c.type=u,c.text=a[0],i++,u==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(u=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(u==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(u==="OPEN_BRACKET")c.type="BRACKET";else if(u==="CLOSE_BRACKET"){let l=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const f=e.pop().text;l=f+l,e[e.length-1].value=Ve(f)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=l}continue}if(o=a.match(du),o){if(c.text=o[1],i+=c.text.length,ou.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(xa)){c.type="TYPE";continue}c.type="ID";continue}if(o=a.match(lu),o){c.text=o[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${i}`)}return new ye(e.map(a=>Object.freeze(a)))}function pi(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function fr(t,e){if(e.peekKeyword(ba)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function ze(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function va(t){let e=ze(t,ru);return pi(e,ne("constant payable nonpayable".split(" "))),pi(e,ne("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function De(t,e){return t.popParams().map(n=>K.from(n,e))}function Ea(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return st(t.pop().text);throw new Error("invalid gas")}return null}function bt(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const fu=new RegExp(/^(.*)\[([0-9]*)\]$/);function mi(t){const e=t.match(xa);if(A(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);A(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);A(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const W={},oe=Symbol.for("_ethers_internal"),gi="_ParamTypeInternal",bi="_ErrorInternal",yi="_EventInternal",wi="_ConstructorInternal",xi="_FallbackInternal",vi="_FunctionInternal",Ei="_StructInternal";var Lt,Zn;const fe=class fe{constructor(e,n,r,s,i,a,o,c){_(this,Lt);b(this,"name");b(this,"type");b(this,"baseType");b(this,"indexed");b(this,"components");b(this,"arrayLength");b(this,"arrayChildren");if(xs(e,W,"ParamType"),Object.defineProperty(this,oe,{value:gi}),a&&(a=Object.freeze(a.slice())),s==="array"){if(o==null||c==null)throw new Error("")}else if(o!=null||c!=null)throw new Error("");if(s==="tuple"){if(a==null)throw new Error("")}else if(a!=null)throw new Error("");L(this,{name:n,type:r,baseType:s,indexed:i,components:a,arrayLength:o,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return H(this,Lt,Zn).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(fe.isParamType(e))return e;if(typeof e=="string")try{return fe.from(it(e),n)}catch{A(!1,"invalid param type","obj",e)}else if(e instanceof ye){let o="",c="",u=null;ze(e,ne(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",u=e.popParams().map(y=>fe.from(y)),o=`tuple(${u.map(y=>y.format()).join(",")})`):(o=mi(e.popType("TYPE")),c=o);let l=null,f=null;for(;e.length&&e.peekType("BRACKET");){const y=e.pop();l=new fe(W,"",o,c,null,u,f,l),f=y.value,o+=y.text,c="array",u=null}let h=null;if(ze(e,su).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new fe(W,p,o,c,h,u,f,l)}const r=e.name;A(!r||typeof r=="string"&&r.match(wa),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(A(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,a=i.match(fu);if(a){const o=parseInt(a[2]||"-1"),c=fe.from({type:a[1],components:e.components});return new fe(W,r||"",i,"array",s,null,o,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const o=e.components!=null?e.components.map(u=>fe.from(u)):null;return new fe(W,r||"",i,"tuple",s,o,null,null)}return i=mi(e.type),new fe(W,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[oe]===gi}};Lt=new WeakSet,Zn=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const a=this.arrayChildren,o=n.slice();o.forEach((c,u)=>{var l;H(l=a,Lt,Zn).call(l,e,c,r,f=>{o[u]=f})}),s(o);return}if(this.isTuple()){const a=this.components;let o;if(Array.isArray(n))o=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");o=a.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(o.length!==this.components.length)throw new Error("array is wrong length");o.forEach((c,u)=>{var l;H(l=a[u],Lt,Zn).call(l,e,c,r,f=>{o[u]=f})}),s(o);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let K=fe;class yt{constructor(e,n,r){b(this,"type");b(this,"inputs");xs(e,W,"Fragment"),r=Object.freeze(r.slice()),L(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{yt.from(JSON.parse(e))}catch{}return yt.from(it(e))}if(e instanceof ye)switch(e.peekKeyword(ba)){case"constructor":return Ue.from(e);case"error":return ie.from(e);case"event":return ke.from(e);case"fallback":case"receive":return Be.from(e);case"function":return Ae.from(e);case"struct":return mt.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Ue.from(e);case"error":return ie.from(e);case"event":return ke.from(e);case"fallback":case"receive":return Be.from(e);case"function":return Ae.from(e);case"struct":return mt.from(e)}B(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}A(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Ue.isFragment(e)}static isError(e){return ie.isFragment(e)}static isEvent(e){return ke.isFragment(e)}static isFunction(e){return Ae.isFragment(e)}static isStruct(e){return mt.isFragment(e)}}class hr extends yt{constructor(n,r,s,i){super(n,r,i);b(this,"name");A(typeof s=="string"&&s.match(wa),"invalid identifier","name",s),i=Object.freeze(i.slice()),L(this,{name:s})}}function un(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class ie extends hr{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,oe,{value:bi})}get selector(){return cn(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+un(e,this.inputs)),n.join(" ")}static from(e){if(ie.isFragment(e))return e;if(typeof e=="string")return ie.from(it(e));if(e instanceof ye){const n=fr("error",e),r=De(e);return bt(e),new ie(W,n,r)}return new ie(W,e.name,e.inputs?e.inputs.map(K.from):[])}static isFragment(e){return e&&e[oe]===bi}}class ke extends hr{constructor(n,r,s,i){super(n,"event",r,s);b(this,"anonymous");Object.defineProperty(this,oe,{value:yi}),L(this,{anonymous:i})}get topicHash(){return cn(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+un(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>K.from(i)),new ke(W,n,r,!1).topicHash}static from(n){if(ke.isFragment(n))return n;if(typeof n=="string")try{return ke.from(it(n))}catch{A(!1,"invalid event fragment","obj",n)}else if(n instanceof ye){const r=fr("event",n),s=De(n,!0),i=!!ze(n,ne(["anonymous"])).has("anonymous");return bt(n),new ke(W,r,s,i)}return new ke(W,n.name,n.inputs?n.inputs.map(r=>K.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[oe]===yi}}class Ue extends yt{constructor(n,r,s,i,a){super(n,r,s);b(this,"payable");b(this,"gas");Object.defineProperty(this,oe,{value:wi}),L(this,{payable:i,gas:a})}format(n){if(B(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${un(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Ue.isFragment(n))return n;if(typeof n=="string")try{return Ue.from(it(n))}catch{A(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof ye){ze(n,ne(["constructor"]));const r=De(n),s=!!ze(n,nu).has("payable"),i=Ea(n);return bt(n),new Ue(W,"constructor",r,s,i)}return new Ue(W,"constructor",n.inputs?n.inputs.map(K.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[oe]===wi}}class Be extends yt{constructor(n,r,s){super(n,"fallback",r);b(this,"payable");Object.defineProperty(this,oe,{value:xi}),L(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Be.isFragment(n))return n;if(typeof n=="string")try{return Be.from(it(n))}catch{A(!1,"invalid fallback fragment","obj",n)}else if(n instanceof ye){const r=n.toString(),s=n.peekKeyword(ne(["fallback","receive"]));if(A(s,"type must be fallback or receive","obj",r),n.popKeyword(ne(["fallback","receive"]))==="receive"){const c=De(n);return A(c.length===0,"receive cannot have arguments","obj.inputs",c),ze(n,ne(["payable"])),bt(n),new Be(W,[],!0)}let a=De(n);a.length?A(a.length===1&&a[0].type==="bytes","invalid fallback inputs","obj.inputs",a.map(c=>c.format("minimal")).join(", ")):a=[K.from("bytes")];const o=va(n);if(A(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),ze(n,ne(["returns"])).has("returns")){const c=De(n);A(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(u=>u.format("minimal")).join(", "))}return bt(n),new Be(W,a,o==="payable")}if(n.type==="receive")return new Be(W,[],!0);if(n.type==="fallback"){const r=[K.from("bytes")],s=n.stateMutability==="payable";return new Be(W,r,s)}A(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[oe]===xi}}class Ae extends hr{constructor(n,r,s,i,a,o){super(n,"function",r,i);b(this,"constant");b(this,"outputs");b(this,"stateMutability");b(this,"payable");b(this,"gas");Object.defineProperty(this,oe,{value:vi}),a=Object.freeze(a.slice()),L(this,{constant:s==="view"||s==="pure",gas:o,outputs:a,payable:s==="payable",stateMutability:s})}get selector(){return cn(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+un(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(un(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>K.from(i)),new Ae(W,n,"view",r,[],null).selector}static from(n){if(Ae.isFragment(n))return n;if(typeof n=="string")try{return Ae.from(it(n))}catch{A(!1,"invalid function fragment","obj",n)}else if(n instanceof ye){const s=fr("function",n),i=De(n),a=va(n);let o=[];ze(n,ne(["returns"])).has("returns")&&(o=De(n));const c=Ea(n);return bt(n),new Ae(W,s,a,i,o,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Ae(W,n.name,r,n.inputs?n.inputs.map(K.from):[],n.outputs?n.outputs.map(K.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[oe]===vi}}class mt extends hr{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,oe,{value:Ei})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return mt.from(it(e))}catch{A(!1,"invalid struct fragment","obj",e)}else if(e instanceof ye){const n=fr("struct",e),r=De(e);return bt(e),new mt(W,n,r)}return new mt(W,e.name,e.inputs?e.inputs.map(K.from):[])}static isFragment(e){return e&&e[oe]===Ei}}const xe=new Map;xe.set(0,"GENERIC_PANIC");xe.set(1,"ASSERT_FALSE");xe.set(17,"OVERFLOW");xe.set(18,"DIVIDE_BY_ZERO");xe.set(33,"ENUM_RANGE_ERROR");xe.set(34,"BAD_STORAGE_DATA");xe.set(49,"STACK_UNDERFLOW");xe.set(50,"ARRAY_RANGE_ERROR");xe.set(65,"OUT_OF_MEMORY");xe.set(81,"UNINITIALIZED_FUNCTION_CALL");const hu=new RegExp(/^bytes([0-9]*)$/),pu=new RegExp(/^(u?int)([0-9]*)$/);let Br=null,Ni=1024;function mu(t,e,n,r){let s="missing revert data",i=null;const a=null;let o=null;if(n){s="execution reverted";const u=_e(n);if(n=J(n),u.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(u.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(J(u.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],u.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(J(u.slice(0,4))==="0x4e487b71")try{const l=Number(r.decode(["uint256"],u.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[l]},i=`Panic due to ${xe.get(l)||"UNKNOWN"}(${l})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?gt(e.to):null,data:e.data||"0x"};return e.from&&(c.from=gt(e.from)),an(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:a,revert:o})}var Xe,kt;const ur=class ur{constructor(){_(this,Xe)}getDefaultValue(e){const n=e.map(s=>H(this,Xe,kt).call(this,K.from(s)));return new Vn(n,"_").defaultValue()}encode(e,n){qi(n.length,e.length,"types/values length mismatch");const r=e.map(a=>H(this,Xe,kt).call(this,K.from(a))),s=new Vn(r,"_"),i=new Vr;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(a=>H(this,Xe,kt).call(this,K.from(a)));return new Vn(s,"_").decode(new qr(n,r,Ni))}static _setDefaultMaxInflation(e){A(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),Ni=e}static defaultAbiCoder(){return Br==null&&(Br=new ur),Br}static getBuiltinCallException(e,n,r){return mu(e,n,r,ur.defaultAbiCoder())}};Xe=new WeakSet,kt=function(e){if(e.isArray())return new zc(H(this,Xe,kt).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Vn(e.components.map(r=>H(this,Xe,kt).call(this,r)),e.name);switch(e.baseType){case"address":return new Gc(e.name);case"bool":return new Hc(e.name);case"string":return new Qc(e.name);case"bytes":return new Wc(e.name);case"":return new Jc(e.name)}let n=e.type.match(pu);if(n){let r=parseInt(n[2]||"256");return A(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new Zc(r/8,n[1]==="int",e.name)}if(n=e.type.match(hu),n){let r=parseInt(n[1]);return A(r!==0&&r<=32,"invalid bytes length","param",e),new Vc(r,e.name)}A(!1,"invalid type","type",e.type)};let nr=ur;class gu{constructor(e,n,r){b(this,"fragment");b(this,"name");b(this,"signature");b(this,"topic");b(this,"args");const s=e.name,i=e.format();L(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class bu{constructor(e,n,r,s){b(this,"fragment");b(this,"name");b(this,"args");b(this,"signature");b(this,"selector");b(this,"value");const i=e.name,a=e.format();L(this,{fragment:e,name:i,args:r,signature:a,selector:n,value:s})}}class yu{constructor(e,n,r){b(this,"fragment");b(this,"name");b(this,"args");b(this,"signature");b(this,"selector");const s=e.name,i=e.format();L(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class Ti{constructor(e){b(this,"hash");b(this,"_isIndexed");L(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const Pi={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},ki={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&Pi[t.toString()]&&(e=Pi[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var Ne,Te,Pe,Z,Oe,Qn,er;const ut=class ut{constructor(e){_(this,Oe);b(this,"fragments");b(this,"deploy");b(this,"fallback");b(this,"receive");_(this,Ne);_(this,Te);_(this,Pe);_(this,Z);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,U(this,Pe,new Map),U(this,Ne,new Map),U(this,Te,new Map);const r=[];for(const a of n)try{r.push(yt.from(a))}catch(o){console.log(`[Warning] Invalid Fragment ${JSON.stringify(a)}:`,o.message)}L(this,{fragments:Object.freeze(r)});let s=null,i=!1;U(this,Z,this.getAbiCoder()),this.fragments.forEach((a,o)=>{let c;switch(a.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}L(this,{deploy:a});return;case"fallback":a.inputs.length===0?i=!0:(A(!s||a.payable!==s.payable,"conflicting fallback fragments",`fragments[${o}]`,a),s=a,i=s.payable);return;case"function":c=N(this,Pe);break;case"event":c=N(this,Te);break;case"error":c=N(this,Ne);break;default:return}const u=a.format();c.has(u)||c.set(u,a)}),this.deploy||L(this,{deploy:Ue.from("constructor()")}),L(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return nr.defaultAbiCoder()}getFunctionName(e){const n=H(this,Oe,Qn).call(this,e,null,!1);return A(n,"no matching function","key",e),n.name}hasFunction(e){return!!H(this,Oe,Qn).call(this,e,null,!1)}getFunction(e,n){return H(this,Oe,Qn).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(N(this,Pe).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(N(this,Pe).get(s),r)}}getEventName(e){const n=H(this,Oe,er).call(this,e,null,!1);return A(n,"no matching event","key",e),n.name}hasEvent(e){return!!H(this,Oe,er).call(this,e,null,!1)}getEvent(e,n){return H(this,Oe,er).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(N(this,Te).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(N(this,Te).get(s),r)}}getError(e,n){if(Le(e)){const s=e.toLowerCase();if(ki[s])return ie.from(ki[s].signature);for(const i of N(this,Ne).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,a]of N(this,Ne))i.split("(")[0]===e&&s.push(a);if(s.length===0)return e==="Error"?ie.from("error Error(string)"):e==="Panic"?ie.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(a=>JSON.stringify(a.format())).join(", ");A(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=ie.from(e).format(),e==="Error(string)")return ie.from("error Error(string)");if(e==="Panic(uint256)")return ie.from("error Panic(uint256)");const r=N(this,Ne).get(e);return r||null}forEachError(e){const n=Array.from(N(this,Ne).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(N(this,Ne).get(s),r)}}_decodeParams(e,n){return N(this,Z).decode(e,n)}_encodeParams(e,n){return N(this,Z).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);A(r,"unknown error","fragment",e),e=r}return A(Tt(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,Tt(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);A(r,"unknown error","fragment",e),e=r}return Ct([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);A(r,"unknown function","fragment",e),e=r}return A(Tt(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,Tt(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);A(r,"unknown function","fragment",e),e=r}return Ct([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);A(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=Ie(n);if(s.length%32===0)try{return N(this,Z).decode(e.outputs,s)}catch{r="could not decode result data"}B(!1,r,"BAD_DATA",{value:J(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=_e(e,"data"),s=nr.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const o=J(r.slice(0,4)),c=this.getError(o);if(c)try{const u=N(this,Z).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:u},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const a=this.parseTransaction(n);return a&&(s.invocation={method:a.name,signature:a.signature,args:a.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);A(r,"unknown function","fragment",e),e=r}return J(N(this,Z).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);A(i,"unknown event","eventFragment",e),e=i}B(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,a)=>i.type==="string"?cn(a):i.type==="bytes"?Qe(J(a)):(i.type==="bool"&&typeof a=="boolean"?a=a?"0x01":"0x00":i.type.match(/^u?int/)?a=Ki(a):i.type.match(/^bytes/)?a=Qo(a,32):i.type==="address"&&N(this,Z).encode(["address"],[a]),Zo(J(a),32));for(n.forEach((i,a)=>{const o=e.inputs[a];if(!o.indexed){A(i==null,"cannot filter non-indexed parameters; must be null","contract."+o.name,i);return}i==null?r.push(null):o.baseType==="array"||o.baseType==="tuple"?A(!1,"filtering with tuples or arrays not supported","contract."+o.name,i):Array.isArray(i)?r.push(i.map(c=>s(o,c))):r.push(s(o,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const a=this.getEvent(e);A(a,"unknown event","eventFragment",e),e=a}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),A(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((a,o)=>{const c=n[o];if(a.indexed)if(a.type==="string")r.push(cn(c));else if(a.type==="bytes")r.push(Qe(c));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");r.push(N(this,Z).encode([a.type],[c]))}else s.push(a),i.push(c)}),{data:N(this,Z).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const m=this.getEvent(e);A(m,"unknown event","eventFragment",e),e=m}if(r!=null&&!e.anonymous){const m=e.topicHash;A(Le(r[0],32)&&r[0].toLowerCase()===m,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],a=[];e.inputs.forEach((m,p)=>{m.indexed?m.type==="string"||m.type==="bytes"||m.baseType==="tuple"||m.baseType==="array"?(s.push(K.from({type:"bytes32",name:m.name})),a.push(!0)):(s.push(m),a.push(!1)):(i.push(m),a.push(!1))});const o=r!=null?N(this,Z).decode(s,Ct(r)):null,c=N(this,Z).decode(i,n,!0),u=[],l=[];let f=0,h=0;return e.inputs.forEach((m,p)=>{let y=null;if(m.indexed)if(o==null)y=new Ti(null);else if(a[p])y=new Ti(o[h++]);else try{y=o[h++]}catch(x){y=x}else try{y=c[f++]}catch(x){y=x}u.push(y),l.push(m.name||null)}),Gt.fromItems(u,l)}parseTransaction(e){const n=_e(e.data,"tx.data"),r=st(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(J(n.slice(0,4)));if(!s)return null;const i=N(this,Z).decode(s.inputs,n.slice(4));return new bu(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new gu(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=J(e),r=this.getError(Tt(n,0,4));if(!r)return null;const s=N(this,Z).decode(r.inputs,Tt(n,4));return new yu(r,r.selector,s)}static from(e){return e instanceof ut?e:typeof e=="string"?new ut(JSON.parse(e)):typeof e.formatJson=="function"?new ut(e.formatJson()):typeof e.format=="function"?new ut(e.format("json")):new ut(e)}};Ne=new WeakMap,Te=new WeakMap,Pe=new WeakMap,Z=new WeakMap,Oe=new WeakSet,Qn=function(e,n,r){if(Le(e)){const i=e.toLowerCase();for(const a of N(this,Pe).values())if(i===a.selector)return a;return null}if(e.indexOf("(")===-1){const i=[];for(const[a,o]of N(this,Pe))a.split("(")[0]===e&&i.push(o);if(n){const a=n.length>0?n[n.length-1]:null;let o=n.length,c=!0;Q.isTyped(a)&&a.type==="overrides"&&(c=!1,o--);for(let u=i.length-1;u>=0;u--){const l=i[u].inputs.length;l!==o&&(!c||l!==o-1)&&i.splice(u,1)}for(let u=i.length-1;u>=0;u--){const l=i[u].inputs;for(let f=0;f<n.length;f++)if(Q.isTyped(n[f])){if(f>=l.length){if(n[f].type==="overrides")continue;i.splice(u,1);break}if(n[f].type!==l[f].baseType){i.splice(u,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const a=n[n.length-1];(a==null||Array.isArray(a)||typeof a!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const a=i.map(o=>JSON.stringify(o.format())).join(", ");A(!1,`ambiguous function description (i.e. matches ${a})`,"key",e)}return i[0]}const s=N(this,Pe).get(Ae.from(e).format());return s||null},er=function(e,n,r){if(Le(e)){const i=e.toLowerCase();for(const a of N(this,Te).values())if(i===a.topicHash)return a;return null}if(e.indexOf("(")===-1){const i=[];for(const[a,o]of N(this,Te))a.split("(")[0]===e&&i.push(o);if(n){for(let a=i.length-1;a>=0;a--)i[a].inputs.length<n.length&&i.splice(a,1);for(let a=i.length-1;a>=0;a--){const o=i[a].inputs;for(let c=0;c<n.length;c++)if(Q.isTyped(n[c])&&n[c].type!==o[c].baseType){i.splice(a,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const a=i.map(o=>JSON.stringify(o.format())).join(", ");A(!1,`ambiguous event description (i.e. matches ${a})`,"key",e)}return i[0]}const s=N(this,Te).get(ke.from(e).format());return s||null};let Xr=ut;const Na=BigInt(0);function he(t){return t==null?null:t.toString()}function wu(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=J(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=st(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Ve(t[s],`request.${s}`));return t.accessList&&(e.accessList=eu(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>Ko(s)?J(s):Object.assign({},s))),e}class pr{constructor(e,n){b(this,"provider");b(this,"transactionHash");b(this,"blockHash");b(this,"blockNumber");b(this,"removed");b(this,"address");b(this,"data");b(this,"topics");b(this,"index");b(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());L(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:a,topics:o,transactionHash:c,transactionIndex:u}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:a,topics:o,transactionHash:c,transactionIndex:u}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return B(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return B(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return B(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return vu(this)}}var Sn;class xu{constructor(e,n){b(this,"provider");b(this,"to");b(this,"from");b(this,"contractAddress");b(this,"hash");b(this,"index");b(this,"blockHash");b(this,"blockNumber");b(this,"logsBloom");b(this,"gasUsed");b(this,"blobGasUsed");b(this,"cumulativeGasUsed");b(this,"gasPrice");b(this,"blobGasPrice");b(this,"type");b(this,"status");b(this,"root");_(this,Sn);U(this,Sn,Object.freeze(e.logs.map(s=>new pr(s,n))));let r=Na;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),L(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return N(this,Sn)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:a,blockNumber:o,logsBloom:c,logs:u,status:l,root:f}=this;return{_type:"TransactionReceipt",blockHash:a,blockNumber:o,contractAddress:r,cumulativeGasUsed:he(this.cumulativeGasUsed),from:n,gasPrice:he(this.gasPrice),blobGasUsed:he(this.blobGasUsed),blobGasPrice:he(this.blobGasPrice),gasUsed:he(this.gasUsed),hash:s,index:i,logs:u,logsBloom:c,root:f,status:l,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Pa(this)}reorderedEvent(e){return B(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Ta(this,e)}}Sn=new WeakMap;var Ke;const Xs=class Xs{constructor(e,n){b(this,"provider");b(this,"blockNumber");b(this,"blockHash");b(this,"index");b(this,"hash");b(this,"type");b(this,"to");b(this,"from");b(this,"nonce");b(this,"gasLimit");b(this,"gasPrice");b(this,"maxPriorityFeePerGas");b(this,"maxFeePerGas");b(this,"maxFeePerBlobGas");b(this,"data");b(this,"value");b(this,"chainId");b(this,"signature");b(this,"accessList");b(this,"blobVersionedHashes");b(this,"authorizationList");_(this,Ke);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,U(this,Ke,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:a,from:o,nonce:c,data:u,signature:l,accessList:f,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:f,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:he(this.chainId),data:u,from:o,gasLimit:he(this.gasLimit),gasPrice:he(this.gasPrice),hash:s,maxFeePerGas:he(this.maxFeePerGas),maxPriorityFeePerGas:he(this.maxPriorityFeePerGas),maxFeePerBlobGas:he(this.maxFeePerBlobGas),nonce:c,signature:l,to:a,index:r,type:i,value:he(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await zr({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=N(this,Ke),a=-1,o=i===-1;const c=async()=>{if(o)return null;const{blockNumber:h,nonce:m}=await zr({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(m<this.nonce){i=h;return}if(o)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(a===-1&&(a=i-3,a<N(this,Ke)&&(a=N(this,Ke)));a<=h;){if(o)return null;const y=await this.provider.getBlock(a,!0);if(y==null)return;for(const x of y)if(x===this.hash)return;for(let x=0;x<y.length;x++){const w=await y.getTransaction(x);if(w.from===this.from&&w.nonce===this.nonce){if(o)return null;const E=await this.provider.getTransactionReceipt(w.hash);if(E==null||h-E.blockNumber+1<r)return;let I="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?I="repriced":w.data==="0x"&&w.from===w.to&&w.value===Na&&(I="cancelled"),B(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:I==="replaced"||I==="cancelled",reason:I,replacement:w.replaceableTransaction(i),hash:w.hash,receipt:E})}}a++}},u=h=>{if(h==null||h.status!==0)return h;B(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},l=await this.provider.getTransactionReceipt(this.hash);if(r===0)return u(l);if(l){if(r===1||await l.confirmations()>=r)return u(l)}else if(await c(),r===0)return null;return await new Promise((h,m)=>{const p=[],y=()=>{p.forEach(w=>w())};if(p.push(()=>{o=!0}),s>0){const w=setTimeout(()=>{y(),m(an("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(w)})}const x=async w=>{if(await w.confirmations()>=r){y();try{h(u(w))}catch(E){m(E)}}};if(p.push(()=>{this.provider.off(this.hash,x)}),this.provider.on(this.hash,x),i>=0){const w=async()=>{try{await c()}catch(E){if(Dt(E,"TRANSACTION_REPLACED")){y(),m(E);return}}o||this.provider.once("block",w)};p.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return B(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Pa(this)}reorderedEvent(e){return B(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),B(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ta(this,e)}replaceableTransaction(e){A(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new Xs(this,this.provider);return U(n,Ke,e),n}};Ke=new WeakMap;let Kr=Xs;function Ta(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function Pa(t){return{orphan:"drop-transaction",tx:t}}function vu(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class Es extends pr{constructor(n,r,s){super(n,n.provider);b(this,"interface");b(this,"fragment");b(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);L(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class ka extends pr{constructor(n,r){super(n,n.provider);b(this,"error");L(this,{error:r})}}var Ut;class Eu extends xu{constructor(n,r,s){super(s,r);_(this,Ut);U(this,Ut,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?N(this,Ut).getEvent(n.topics[0]):null;if(r)try{return new Es(n,N(this,Ut),r)}catch(s){return new ka(n,s)}return n})}}Ut=new WeakMap;var Cn;class Ns extends Kr{constructor(n,r,s){super(s,r);_(this,Cn);U(this,Cn,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new Eu(N(this,Cn),this.provider,s)}}Cn=new WeakMap;class Aa extends sc{constructor(n,r,s,i){super(n,r,s);b(this,"log");L(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Nu extends Aa{constructor(e,n,r,s,i){super(e,n,r,new Es(i,e.interface,s));const a=e.interface.decodeEventLog(s,this.log.data,this.log.topics);L(this,{args:a,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Ai=BigInt(0);function Ia(t){return t&&typeof t.call=="function"}function Oa(t){return t&&typeof t.estimateGas=="function"}function mr(t){return t&&typeof t.resolveName=="function"}function Sa(t){return t&&typeof t.sendTransaction=="function"}function Ca(t){if(t!=null){if(mr(t))return t;if(t.provider)return t.provider}}var Rn;class Tu{constructor(e,n,r){_(this,Rn);b(this,"fragment");if(L(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=wt(e.runner,"resolveName"),i=mr(s)?s:null;U(this,Rn,async function(){const a=await Promise.all(n.inputs.map((o,c)=>r[c]==null?null:o.walkAsync(r[c],(l,f)=>l==="address"?Array.isArray(f)?Promise.all(f.map(h=>on(h,i))):on(f,i):f)));return e.interface.encodeFilterTopics(n,a)}())}getTopicFilter(){return N(this,Rn)}}Rn=new WeakMap;function wt(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function lt(t){return t==null?null:t.provider||null}async function Ra(t,e){const n=Q.dereference(t,"overrides");A(typeof n=="object","invalid overrides parameter","overrides",t);const r=wu(n);return A(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),A(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function Pu(t,e,n){const r=wt(t,"resolveName"),s=mr(r)?r:null;return await Promise.all(e.map((i,a)=>i.walkAsync(n[a],(o,c)=>(c=Q.dereference(c,o),o==="address"?on(c,s):c))))}function ku(t){const e=async function(a){const o=await Ra(a,["data"]);o.to=await t.getAddress(),o.from&&(o.from=await on(o.from,Ca(t.runner)));const c=t.interface,u=st(o.value||Ai,"overrides.value")===Ai,l=(o.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!l&&!u&&A(!1,"cannot send data to receive or send value to non-payable fallback","overrides",a),A(c.fallback||l,"cannot send data to receive-only contract","overrides.data",o.data);const f=c.receive||c.fallback&&c.fallback.payable;return A(f||u,"cannot send value to non-payable fallback","overrides.value",o.value),A(c.fallback||l,"cannot send data to receive-only contract","overrides.data",o.data),o},n=async function(a){const o=wt(t.runner,"call");B(Ia(o),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(a);try{return await o.call(c)}catch(u){throw Vi(u)&&u.data?t.interface.makeError(u.data,c):u}},r=async function(a){const o=t.runner;B(Sa(o),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await o.sendTransaction(await e(a)),u=lt(t.runner);return new Ns(t.interface,u,c)},s=async function(a){const o=wt(t.runner,"estimateGas");return B(Oa(o),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await o.estimateGas(await e(a))},i=async a=>await r(a);return L(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function Au(t,e){const n=function(...u){const l=t.interface.getFunction(e,u);return B(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:u}}),l},r=async function(...u){const l=n(...u);let f={};if(l.inputs.length+1===u.length&&(f=await Ra(u.pop()),f.from&&(f.from=await on(f.from,Ca(t.runner)))),l.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await Pu(t.runner,l.inputs,u);return Object.assign({},f,await zr({to:t.getAddress(),data:t.interface.encodeFunctionData(l,h)}))},s=async function(...u){const l=await o(...u);return l.length===1?l[0]:l},i=async function(...u){const l=t.runner;B(Sa(l),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await l.sendTransaction(await r(...u)),h=lt(t.runner);return new Ns(t.interface,h,f)},a=async function(...u){const l=wt(t.runner,"estimateGas");return B(Oa(l),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await l.estimateGas(await r(...u))},o=async function(...u){const l=wt(t.runner,"call");B(Ia(l),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await r(...u);let h="0x";try{h=await l.call(f)}catch(p){throw Vi(p)&&p.data?t.interface.makeError(p.data,f):p}const m=n(...u);return t.interface.decodeFunctionResult(m,h)},c=async(...u)=>n(...u).constant?await s(...u):await i(...u);return L(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:a,populateTransaction:r,send:i,staticCall:s,staticCallResult:o}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=t.interface.getFunction(e);return B(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),u}}),c}function Iu(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return B(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new Tu(t,n(...s),s)};return L(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return B(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const rr=Symbol.for("_ethersInternal_contract"),ja=new WeakMap;function Ou(t,e){ja.set(t[rr],e)}function ue(t){return ja.get(t[rr])}function Su(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function Ts(t,e){let n,r=null;if(Array.isArray(e)){const i=function(a){if(Le(a,32))return a;const o=t.interface.getEvent(a);return A(o,"unknown fragment","name",a),o.topicHash};n=e.map(a=>a==null?null:Array.isArray(a)?a.map(i):i(a))}else e==="*"?n=[null]:typeof e=="string"?Le(e,32)?n=[e]:(r=t.interface.getEvent(e),A(r,"unknown fragment","event",e),n=[r.topicHash]):Su(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):A(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const a=Array.from(new Set(i.map(o=>o.toLowerCase())).values());return a.length===1?a[0]:(a.sort(),a)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function rn(t,e){const{subs:n}=ue(t);return n.get((await Ts(t,e)).tag)||null}async function Ii(t,e,n){const r=lt(t.runner);B(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:a}=await Ts(t,n),{addr:o,subs:c}=ue(t);let u=c.get(i);if(!u){const f={address:o||t,topics:a},h=x=>{let w=s;if(w==null)try{w=t.interface.getEvent(x.topics[0])}catch{}if(w){const E=w,I=s?t.interface.decodeEventLog(s,x.data,x.topics):[];Qr(t,n,I,k=>new Nu(t,k,n,E,x))}else Qr(t,n,[],E=>new Aa(t,E,n,x))};let m=[];u={tag:i,listeners:[],start:()=>{m.length||m.push(r.on(f,h))},stop:async()=>{if(m.length==0)return;let x=m;m=[],await Promise.all(x),r.off(f,h)}},c.set(i,u)}return u}let Zr=Promise.resolve();async function Cu(t,e,n,r){await Zr;const s=await rn(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:a,once:o})=>{const c=Array.from(n);r&&c.push(r(o?null:a));try{a.call(t,...c)}catch{}return!o}),s.listeners.length===0&&(s.stop(),ue(t).subs.delete(s.tag)),i>0}async function Qr(t,e,n,r){try{await Zr}catch{}const s=Cu(t,e,n,r);return Zr=s,await s}const qn=["then"];var Hi;Hi=rr;const sn=class sn{constructor(e,n,r,s){b(this,"target");b(this,"interface");b(this,"runner");b(this,"filters");b(this,Hi);b(this,"fallback");A(typeof e=="string"||da(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=Xr.from(n);L(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,rr,{value:{}});let a,o=null,c=null;if(s){const f=lt(r);c=new Ns(this.interface,f,s)}let u=new Map;if(typeof e=="string")if(Le(e))o=e,a=Promise.resolve(e);else{const f=wt(r,"resolveName");if(!mr(f))throw an("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});a=f.resolveName(e).then(h=>{if(h==null)throw an("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return ue(this).addr=h,h})}else a=e.getAddress().then(f=>{if(f==null)throw new Error("TODO");return ue(this).addr=f,f});Ou(this,{addrPromise:a,addr:o,deployTx:c,subs:u});const l=new Proxy({},{get:(f,h,m)=>{if(typeof h=="symbol"||qn.indexOf(h)>=0)return Reflect.get(f,h,m);try{return this.getEvent(h)}catch(p){if(!Dt(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(f,h)=>qn.indexOf(h)>=0?Reflect.has(f,h):Reflect.has(f,h)||this.interface.hasEvent(String(h))});return L(this,{filters:l}),L(this,{fallback:i.receive||i.fallback?ku(this):null}),new Proxy(this,{get:(f,h,m)=>{if(typeof h=="symbol"||h in f||qn.indexOf(h)>=0)return Reflect.get(f,h,m);try{return f.getFunction(h)}catch(p){if(!Dt(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(f,h)=>typeof h=="symbol"||h in f||qn.indexOf(h)>=0?Reflect.has(f,h):f.interface.hasFunction(h)})}connect(e){return new sn(this.target,this.interface,e)}attach(e){return new sn(e,this.interface,this.runner)}async getAddress(){return await ue(this).addrPromise}async getDeployedCode(){const e=lt(this.runner);B(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=lt(this.runner);return B(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const a=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",a)}catch(o){i(o)}};a()})}deploymentTransaction(){return ue(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),Au(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),Iu(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=ue(this),a=s||await i,{fragment:o,topics:c}=await Ts(this,e),u={address:a,topics:c,fromBlock:n,toBlock:r},l=lt(this.runner);return B(l,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await l.getLogs(u)).map(f=>{let h=o;if(h==null)try{h=this.interface.getEvent(f.topics[0])}catch{}if(h)try{return new Es(f,this.interface,h)}catch(m){return new ka(f,m)}return new pr(f,l)})}async on(e,n){const r=await Ii(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await Ii(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await Qr(this,e,n,null)}async listenerCount(e){if(e){const s=await rn(this,e);return s?s.listeners.length:0}const{subs:n}=ue(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await rn(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=ue(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await rn(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),ue(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await rn(this,e);if(!n)return this;n.stop(),ue(this).subs.delete(n.tag)}else{const{subs:n}=ue(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends sn{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let es=sn;function Ru(){return es}class ju extends Ru(){}const $u=["function startGame()","function makeMovement()","function endGame()","function getPlayerSession(address player) view returns (tuple(address player, uint256 score, uint256 movements, uint256 startTime, bool isActive))","function getPlayerHighScore(address player) view returns (uint256)","event GameStarted(address indexed player, uint256 timestamp)","event MovementMade(address indexed player, uint256 movementCount, uint256 score)","event GameEnded(address indexed player, uint256 finalScore, uint256 totalMovements)"],Fu={6342:"0x0000000000000000000000000000000000000000",84532:"0x0000000000000000000000000000000000000000",10143:"0x0000000000000000000000000000000000000000"};class Bu{constructor(){this.provider=null,this.signer=null,this.contract=null,this.chainId=null,this.transactionQueue=[],this.isProcessingQueue=!1}async initialize(e){try{if(!e)throw new Error("No wallet provided");const n=await e.getEthersProvider();this.provider=n,this.signer=n.getSigner();const r=await n.getNetwork();this.chainId=r.chainId;const s=Fu[this.chainId];return s&&s!=="0x0000000000000000000000000000000000000000"&&(this.contract=new ju(s,$u,this.signer)),console.log(`Blockchain service initialized on chain ${this.chainId}`),!0}catch(n){return console.error("Failed to initialize blockchain service:",n),!1}}async startGame(){if(!this.contract)return console.warn("Contract not available on current network"),{success:!1,error:"Contract not deployed on current network"};try{const e=await this.contract.startGame();console.log("Game started, transaction:",e.hash);const n=await e.wait();return console.log("Game start confirmed:",n.transactionHash),{success:!0,txHash:n.transactionHash}}catch(e){return console.error("Failed to start game:",e),{success:!1,error:e.message}}}async makeMovement(){return this.contract?new Promise(e=>{this.transactionQueue.push({type:"movement",resolve:e,timestamp:Date.now()}),this.processQueue()}):(console.warn("Contract not available, simulating movement"),{success:!0,simulated:!0})}async processQueue(){if(!(this.isProcessingQueue||this.transactionQueue.length===0)){this.isProcessingQueue=!0;try{const n=this.transactionQueue.splice(0,2);for(const r of n)try{const s=await this.contract.makeMovement();console.log("Movement transaction sent:",s.hash),s.wait().then(i=>{console.log("Movement confirmed:",i.transactionHash)}),r.resolve({success:!0,txHash:s.hash,pending:!0})}catch(s){console.error("Movement transaction failed:",s),r.resolve({success:!1,error:s.message})}}catch(e){console.error("Error processing transaction queue:",e)}this.isProcessingQueue=!1,this.transactionQueue.length>0&&setTimeout(()=>this.processQueue(),100)}}async endGame(){if(!this.contract)return console.warn("Contract not available on current network"),{success:!1,error:"Contract not deployed on current network"};try{const e=await this.contract.endGame();console.log("Game ended, transaction:",e.hash);const n=await e.wait();return console.log("Game end confirmed:",n.transactionHash),{success:!0,txHash:n.transactionHash}}catch(e){return console.error("Failed to end game:",e),{success:!1,error:e.message}}}async getPlayerSession(e){if(!this.contract)return null;try{const n=await this.contract.getPlayerSession(e);return{player:n.player,score:n.score.toString(),movements:n.movements.toString(),startTime:n.startTime.toString(),isActive:n.isActive}}catch(n){return console.error("Failed to get player session:",n),null}}async getPlayerHighScore(e){if(!this.contract)return 0;try{return(await this.contract.getPlayerHighScore(e)).toString()}catch(n){return console.error("Failed to get high score:",n),0}}getNetworkName(){return{6342:"MegaETH Testnet",84532:"Base Sepolia",10143:"Monad Testnet",1:"Ethereum Mainnet",11155111:"Sepolia Testnet"}[this.chainId]||`Unknown Network (${this.chainId})`}isContractAvailable(){return this.contract!==null}getPendingTransactions(){return this.transactionQueue.length}}const ot=new Bu,Mu=({selectedNetwork:t})=>{const e=$.useRef(null),n=$.useRef({}),{user:r,authenticated:s}=jn(),{wallets:i}=Wi(),[a,o]=$.useState({initialized:!1,networkName:(t==null?void 0:t.name)||"Unknown",contractAvailable:!1,pendingTransactions:0,totalMovements:0,onChainScore:0}),c=1,u=1e-5,l=800,f=200,h=88/1.5,m=94/1.5,p=f,y=150,x=2400,w=24,E=.5,I=[{width:48/1.5,height:100/1.5,imageSrc:"assets/carrot_1.png"},{width:98/1.5,height:100/1.5,imageSrc:"assets/carrot_2.png"},{width:68/1.5,height:70/1.5,imageSrc:"assets/carrot_3.png"}],k=async()=>{if(!s||!i||i.length===0||!t){o(v=>({...v,initialized:!1}));return}try{const v=i[0];try{await v.switchChain(t.id),console.log(`Switched to ${t.name}`)}catch(S){console.warn(`Failed to switch to ${t.name}:`,S)}const g=await ot.initialize(v);o({initialized:g,networkName:t.name,contractAvailable:ot.isContractAvailable(),pendingTransactions:0,totalMovements:0,onChainScore:0}),g&&ot.isContractAvailable()&&await ot.startGame()}catch(v){console.error("Failed to initialize blockchain:",v),o(g=>({...g,initialized:!1,networkName:t.name}))}},j=async()=>{if(a.initialized)try{const v=await ot.makeMovement();if(o(g=>({...g,totalMovements:g.totalMovements+1,pendingTransactions:ot.getPendingTransactions()})),v.success&&!v.simulated){const g=P();if(g){const S=await ot.getPlayerScore(g);o(T=>({...T,onChainScore:S}))}}}catch(v){console.error("On-chain movement failed:",v)}},C=()=>{if(t&&t.isWeb2)return{identifier:"CLASSIC PLAYER",address:null,isWeb2:!0};if(!s||!r)return null;const v=P();return v?{identifier:`${v.slice(0,6)}...${v.slice(-4)}`,address:v}:r.email?{identifier:r.email.split("@")[0],address:null}:null},P=()=>{var v;return!s||!i||i.length===0?null:((v=i[0])==null?void 0:v.address)||null};return $.useEffect(()=>{if(t&&t.isWeb2){o({initialized:!1,networkName:t.name,contractAvailable:!1,pendingTransactions:0,totalMovements:0,onChainScore:0});return}k()},[s,r,t]),$.useEffect(()=>{const v=e.current;if(!v)return;const g=v.getContext("2d");let S;g.imageSmoothingEnabled=!1,g.webkitImageSmoothingEnabled=!1,g.mozImageSmoothingEnabled=!1,g.msImageSmoothingEnabled=!1;const T=n.current;Object.assign(T,{scaleRatio:null,previousTime:null,gameSpeed:c,gameOver:!1,hasAddedEventListenersForRestart:!1,waitingToStart:!0});function z(){const G=h*T.scaleRatio,V=m*T.scaleRatio,de=y*T.scaleRatio,Ee=p*T.scaleRatio,me=x*T.scaleRatio,Fo=w*T.scaleRatio;T.player=new Ho(g,G,V,de,Ee,T.scaleRatio,t&&!t.isWeb2?j:null),T.ground=new Wo(g,me,Fo,E,T.scaleRatio);const Bo=I.map(_n=>{const Rr=new Image;return Rr.src=_n.imageSrc,Rr.onerror=()=>console.error(`Failed to load ${_n.imageSrc}`),{image:Rr,width:_n.width*T.scaleRatio,height:_n.height*T.scaleRatio}});T.carrotController=new qo(g,Bo,T.scaleRatio,E),T.score=new Jo(g,T.scaleRatio)}function ve(){T.scaleRatio=Or(),v.width=l*T.scaleRatio,v.height=f*T.scaleRatio,z()}function Or(){const G=Math.min(window.innerHeight,document.documentElement.clientHeight),V=Math.min(window.innerWidth,document.documentElement.clientWidth);return V/G<l/f?V/l:G/f}function Xt(){const G=Math.floor(T.scaleRatio*32);g.font=`${G}px monospace`,g.fillStyle="#ef5435",g.textAlign="center",g.shadowColor="#ef5435",g.shadowBlur=10,g.fillText("GAME OVER",v.width/2,v.height/2-G),g.shadowBlur=0;const V=Math.floor(T.scaleRatio*16);g.font=`${V}px monospace`,g.fillStyle="#929397",g.fillText("> PRESS ANY KEY TO RESTART",v.width/2,v.height/2+V);const de=C();if(de){const Ee=Math.floor(T.scaleRatio*12);g.font=`${Ee}px monospace`,g.fillStyle="#1391ff",g.fillText(`> PILOT: ${de.identifier}`,v.width/2,v.height/2+V+Ee+20),g.fillStyle="#929397",g.fillText(`> NETWORK: ${a.networkName}`,v.width/2,v.height/2+V+Ee*2+25),a.totalMovements>0&&g.fillText(`> ON-CHAIN MOVES: ${a.totalMovements}`,v.width/2,v.height/2+V+Ee*3+30)}}function Sr(){const G=Math.floor(T.scaleRatio*24);g.font=`${G}px monospace`,g.fillStyle="#929397",g.textAlign="center",g.shadowColor="#929397",g.shadowBlur=5,g.fillText("> PRESS ANY KEY TO START MISSION",v.width/2,v.height/2),g.shadowBlur=0;const V=C(),de=Math.floor(T.scaleRatio*12);g.font=`${de}px monospace`,V?(g.fillStyle="#1391ff",g.shadowColor="#1391ff",g.shadowBlur=3,g.fillText(`> PILOT AUTHENTICATED: ${V.identifier}`,v.width/2,v.height/2+G+20),g.shadowBlur=0,g.fillStyle="#929397",g.fillText(`> TARGET NETWORK: ${a.networkName}`,v.width/2,v.height/2+G+de+25),a.initialized?(g.fillStyle="#28a745",g.fillText("> BLOCKCHAIN CONNECTION: ACTIVE",v.width/2,v.height/2+G+de*2+30)):(g.fillStyle="#ffc107",g.fillText("> BLOCKCHAIN CONNECTION: SIMULATED MODE",v.width/2,v.height/2+G+de*2+30))):(g.fillStyle="#ef5435",g.fillText("> WARNING: NO PILOT AUTHENTICATED",v.width/2,v.height/2+G+20))}function Co(){const G=g.createLinearGradient(0,0,0,v.height);G.addColorStop(0,"#121218"),G.addColorStop(.5,"#1a1a2e"),G.addColorStop(1,"#16213e"),g.fillStyle=G,g.fillRect(0,0,v.width,v.height),g.strokeStyle="rgba(146, 147, 151, 0.1)",g.lineWidth=1;const V=20*T.scaleRatio;for(let me=0;me<v.width;me+=V)g.beginPath(),g.moveTo(me,0),g.lineTo(me,v.height),g.stroke();for(let me=0;me<v.height;me+=V)g.beginPath(),g.moveTo(0,me),g.lineTo(v.width,me),g.stroke();const de=Date.now()/20%v.height;g.strokeStyle="rgba(19, 145, 255, 0.3)",g.lineWidth=2,g.beginPath(),g.moveTo(0,de),g.lineTo(v.width,de),g.stroke();const Ee=g.createLinearGradient(0,0,0,v.height*.3);Ee.addColorStop(0,"rgba(19, 145, 255, 0.1)"),Ee.addColorStop(1,"transparent"),g.fillStyle=Ee,g.fillRect(0,0,v.width,v.height*.3)}function Ro(){T.hasAddedEventListenersForRestart||(T.hasAddedEventListenersForRestart=!0,setTimeout(()=>{const G=()=>{Ks(),document.removeEventListener("keyup",G),document.removeEventListener("touchstart",G)};document.addEventListener("keyup",G),document.addEventListener("touchstart",G)},1e3))}function Ks(){T.hasAddedEventListenersForRestart=!1,T.gameOver=!1,T.waitingToStart=!1,T.ground.reset(),T.carrotController.reset(),T.score.reset(),T.gameSpeed=c}function jo(G){T.gameSpeed+=G*u}function $o(){return T.carrotController.collideWith(T.player)}function Cr(G){if(T.previousTime===null){T.previousTime=G,S=requestAnimationFrame(Cr);return}const V=G-T.previousTime;T.previousTime=G,Co(),!T.gameOver&&!T.waitingToStart&&(T.ground.update(T.gameSpeed,V),T.carrotController.update(T.gameSpeed,V),T.player.update(T.gameSpeed,V),T.score.update(V),jo(V),$o()&&(T.gameOver=!0,Ro()),Math.random()<.01&&j()),T.ground.draw(),T.carrotController.draw(),T.player.draw(),T.score.draw(),T.gameOver&&Xt(),T.waitingToStart&&Sr(),S=requestAnimationFrame(Cr)}ve();const Zs=()=>setTimeout(ve,500);window.addEventListener("resize",Zs),screen.orientation&&screen.orientation.addEventListener("change",ve);const Nt=()=>{Ks(),document.removeEventListener("keyup",Nt),document.removeEventListener("touchstart",Nt)};return document.addEventListener("keyup",Nt),document.addEventListener("touchstart",Nt),S=requestAnimationFrame(Cr),()=>{S&&cancelAnimationFrame(S),window.removeEventListener("resize",Zs),screen.orientation&&screen.orientation.removeEventListener("change",ve),document.removeEventListener("keyup",Nt),document.removeEventListener("touchstart",Nt)}},[s,r,t]),d.jsxs("div",{className:"game-canvas-container",children:[d.jsx("canvas",{ref:e,id:"game",className:"game-canvas"}),d.jsx("div",{className:"game-ui-overlay"})]})},Lu=({selectedNetwork:t,onDisconnect:e,disableNetworkControls:n=!1})=>{var C;const{user:r,authenticated:s,ready:i}=jn(),{login:a}=ws(),{logout:o}=Uo(),{wallets:c}=Wi(),[u,l]=$.useState(!1),[f,h]=$.useState(!1),m=[{id:6342,name:"MegaETH Testnet",emoji:"⚡"},{id:84532,name:"Base Sepolia",emoji:"🔵"},{id:10143,name:"Monad Testnet",emoji:"🟣"}];$.useEffect(()=>{(async()=>{if(s&&c&&c.length>0&&t&&!f)try{await c[0].getChainId()!==t.id&&(console.log(`Auto-switching to ${t.name}...`),h(!0),await y(t.id))}catch(v){console.warn("Auto network switch failed:",v)}finally{h(!1)}})()},[s,c,t]);const p=()=>{s?(o(),e&&e()):a()},y=async P=>{var v;if(!(!c||c.length===0)){h(!0);try{const g=c[0],S=((v=m.find(T=>T.id===P))==null?void 0:v.name)||"Unknown Network";try{await g.switchChain(P),l(!1),console.log(`Successfully switched to ${S}`);return}catch(T){console.log(`Network ${S} not found, attempting to add it...`,T);const z=x(P);if(z)console.log(`Adding network ${S} to wallet...`),await w(g,z),await new Promise(ve=>setTimeout(ve,1e3)),console.log(`Switching to ${S}...`),await g.switchChain(P),l(!1),console.log(`Successfully added and switched to ${S}`);else throw new Error(`Network configuration not found for chain ID ${P}`)}}catch(g){console.error("Failed to switch network:",g);let S="Failed to switch network. ";g.message.includes("rejected")?S+="User cancelled the operation.":g.message.includes("already pending")?S+="Another network operation is in progress. Please wait and try again.":S+="Please try again or add the network manually.",alert(S)}finally{h(!1)}}},x=P=>({6342:{chainId:"0x18C6",chainName:"MegaETH Testnet",rpcUrls:["https://carrot.megaeth.com/rpc"],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorerUrls:["https://carrot.megaeth.com"]},84532:{chainId:"0x14A34",chainName:"Base Sepolia",rpcUrls:["https://sepolia.base.org"],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorerUrls:["https://sepolia.basescan.org"]},10143:{chainId:"0x279F",chainName:"Monad Testnet",rpcUrls:["https://testnet-rpc.monad.xyz"],nativeCurrency:{name:"Monad",symbol:"MON",decimals:18},blockExplorerUrls:["https://testnet.monadexplorer.com"]}})[P],w=async(P,v)=>{try{await(await P.getEthersProvider()).send("wallet_addEthereumChain",[v])}catch(g){if(g.code===4902||g.message.includes("already exists")||g.message.includes("Already added")){console.log("Network already exists in wallet");return}throw g}},E=()=>{if(!c||c.length===0)return null;const P=c[0];return m.find(v=>v.id===P.chainId)},I=P=>P?`${P.slice(0,6)}...${P.slice(-4)}`:"",k=()=>{var P;if((P=r==null?void 0:r.wallet)!=null&&P.address)return r.wallet.address;if(r!=null&&r.linkedAccounts){const v=r.linkedAccounts.find(g=>g.type==="wallet");return v==null?void 0:v.address}return null},j=()=>{var v,g;if((v=r==null?void 0:r.email)!=null&&v.address)return r.email.address;if((g=r==null?void 0:r.phone)!=null&&g.number)return r.phone.number;const P=k();return P?I(P):"Unknown User"};return i?d.jsxs("div",{className:"wallet-container",children:[d.jsxs("div",{className:"wallet-controls",children:[d.jsx("button",{className:`wallet-button ${s?"connected":""}`,onClick:p,children:s?"Disconnect":"Connect Wallet"}),s&&c&&c.length>0&&!n&&d.jsxs("div",{className:"network-selector",children:[d.jsx("button",{className:"network-button",onClick:()=>l(!u),disabled:f,children:f?"🔄 Switching...":E()?`${E().emoji} ${E().name}`:"🌐 Select Network"}),u&&d.jsx("div",{className:"network-dropdown",children:m.map(P=>{var v;return d.jsxs("button",{className:`network-option ${((v=E())==null?void 0:v.id)===P.id?"active":""} ${(t==null?void 0:t.id)===P.id?"selected-game-network":""}`,onClick:()=>y(P.id),disabled:f,children:[f?"🔄":P.emoji," ",P.name,(t==null?void 0:t.id)===P.id&&" 🎮"]},P.id)})})]})]}),s&&d.jsxs("div",{className:"wallet-info",children:[d.jsx("div",{className:"wallet-status",children:"Connected"}),d.jsx("div",{className:"wallet-user",children:j()}),d.jsx("div",{className:"wallet-network",children:t?t.name:((C=E())==null?void 0:C.name)||"Unknown Network"})]})]}):d.jsx("div",{className:"wallet-container",children:d.jsx("button",{className:"wallet-button",disabled:!0,children:"Loading..."})})},Uu=({onNetworkSelect:t,onStartGame:e})=>{const[n,r]=$.useState(null),[s,i]=$.useState(!0),[a,o]=$.useState(""),[c,u]=$.useState({width:window.innerWidth,height:window.innerHeight}),{user:l,authenticated:f}=jn(),{login:h}=ws(),m=[{id:"web2",name:"CLASSIC BROWSER",emoji:"🌐",description:"Pure web2 experience",tech:"No wallet required",color:"#2ecc71",status:"ONLINE",icon:"🦕",isWeb2:!0},{id:6342,name:"MEGAETH TESTNET",emoji:"⚡",description:"Ultra-fast execution layer",tech:"Lightning-fast transactions",color:"#ff6b6b",status:"ONLINE",icon:"🚀"},{id:84532,name:"BASE SEPOLIA",emoji:"🔵",description:"Ethereum L2 testnet",tech:"Reliable scaling solution",color:"#4ecdc4",status:"ONLINE",icon:"🌐"},{id:10143,name:"MONAD TESTNET",emoji:"🟣",description:"Next-gen blockchain",tech:"Advanced consensus",color:"#9b59b6",status:"BETA",icon:"🔮"}];$.useEffect(()=>{const k=["INITIALIZING NETWORK SCANNER...","DETECTING AVAILABLE CHAINS...","ESTABLISHING SECURE CONNECTIONS...","SYSTEM READY FOR NETWORK SELECTION"];let j=0;const C=setInterval(()=>{o(k[j]),j++,j>=k.length&&(clearInterval(C),setTimeout(()=>i(!1),500))},800);return()=>clearInterval(C)},[]),$.useEffect(()=>{const k=()=>{u({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),$.useEffect(()=>{},[c]);const p=()=>{const{width:k,height:j}=c,C=k<=768,P=k>768&&k<=1024,v=k>1024,g=k>1600;let S;C?S=Math.min(k*.98,k-20):P?S=Math.min(k*.92,k-60):g?S=Math.min(k*.85,1400):S=Math.min(k*.88,1200);const T=j*(C?.95:.9),z=Math.min(j*(C?.7:.6),C?500:600),ve=C?Math.max(15,k*.03):Math.max(20,k*.025);return{containerStyle:{width:`${S}px`,maxHeight:`${T}px`,minHeight:`${z}px`,transition:"all 0.3s ease"},contentStyle:{padding:`${ve}px`,transition:"all 0.3s ease"},networkGridStyle:{gridTemplateColumns:C?"1fr":P?"repeat(auto-fit, minmax(280px, 1fr))":"repeat(auto-fit, minmax(300px, 1fr))",gap:`${C?15:v?25:20}px`}}},{containerStyle:y,contentStyle:x,networkGridStyle:w}=p(),E=k=>{r(k),t(k)},I=()=>{if(n){if(n.isWeb2){e(n);return}f&&l?e(n):(t(n),h())}};return $.useEffect(()=>{f&&l&&n&&e(n)},[f,l,n,e]),s?d.jsx("div",{className:"network-scanner-overlay",children:d.jsx("div",{className:"scanner-container",style:y,children:d.jsxs("div",{className:"scanner-content",style:x,children:[d.jsxs("div",{className:"terminal-header",children:[d.jsx("div",{className:"terminal-title",children:"NETWORK SCANNER PROTOCOL"}),d.jsxs("div",{className:"terminal-buttons",children:[d.jsx("div",{className:"terminal-button red"}),d.jsx("div",{className:"terminal-button yellow"}),d.jsx("div",{className:"terminal-button green"})]})]}),d.jsx("div",{className:"logo-section",children:d.jsx("div",{className:"pixel-logo",children:d.jsxs("div",{className:"logo-text",children:[d.jsx("span",{className:"logo-main",children:"BUDDY"}),d.jsx("span",{className:"logo-accent",children:"RUNNER"})]})})}),d.jsx("div",{className:"scanner-display",children:d.jsxs("div",{className:"radar-container",children:[d.jsx("div",{className:"radar-sweep"}),d.jsx("div",{className:"radar-grid"})]})}),d.jsxs("div",{className:"scanner-text",children:[d.jsx("span",{className:"terminal-prompt",children:">"})," ",a]})]})})}):d.jsx("div",{className:"network-selection-overlay",children:d.jsx("div",{className:"network-selection-container",style:y,children:d.jsxs("div",{className:"network-selection-content",style:x,children:[d.jsxs("div",{className:"terminal-header",children:[d.jsx("div",{className:"terminal-title",children:"BLOCKCHAIN NETWORK SELECTOR"}),d.jsxs("div",{className:"terminal-buttons",children:[d.jsx("div",{className:"terminal-button red"}),d.jsx("div",{className:"terminal-button yellow"}),d.jsx("div",{className:"terminal-button green"})]})]}),d.jsx("div",{className:"logo-section",children:d.jsxs("div",{className:"pixel-logo",children:[d.jsxs("div",{className:"logo-text",children:[d.jsx("span",{className:"logo-main",children:"BUDDY"}),d.jsx("span",{className:"logo-accent",children:"RUNNER"})]}),d.jsxs("div",{className:"logo-powered",children:["POWERED BY ",d.jsx("strong",{children:"MEGA BUDDIES"})]})]})}),d.jsxs("div",{className:"mission-briefing",children:[d.jsx("div",{className:"briefing-title",children:"MISSION BRIEFING"}),d.jsxs("div",{className:"briefing-content",children:[d.jsxs("div",{className:"terminal-text",children:[d.jsx("span",{className:"terminal-prompt",children:">"})," OBJECTIVE: SURVIVE 60 SECONDS ON EACH NETWORK"]}),d.jsxs("div",{className:"terminal-text",children:[d.jsx("span",{className:"terminal-prompt",children:">"})," ANALYZE BLOCK TIME IMPACT ON USER EXPERIENCE"]}),d.jsxs("div",{className:"terminal-text",children:[d.jsx("span",{className:"terminal-prompt",children:">"})," DISCOVER THE POWER OF REAL-TIME BLOCKCHAIN"]})]})]}),d.jsxs("div",{className:"network-selection",children:[d.jsx("div",{className:"selection-title",children:"SELECT TARGET BLOCKCHAIN NETWORK:"}),d.jsx("div",{className:"network-grid",style:w,children:m.map(k=>d.jsxs("div",{className:`network-card ${(n==null?void 0:n.id)===k.id?"selected":""}`,onClick:()=>E(k),children:[d.jsxs("div",{className:"network-header",children:[d.jsx("div",{className:"network-icon",children:k.icon}),d.jsx("div",{className:"network-status","data-status":k.status,children:k.status})]}),d.jsxs("div",{className:"network-info",children:[d.jsx("div",{className:"network-name",children:k.name}),d.jsx("div",{className:"network-description",children:k.description}),d.jsx("div",{className:"network-tech",children:k.tech})]}),d.jsxs("div",{className:"network-specs",children:[d.jsxs("div",{className:"spec-item",children:[d.jsx("span",{className:"spec-label",children:k.isWeb2?"TYPE:":"CHAIN ID:"}),d.jsx("span",{className:"spec-value",children:k.isWeb2?"WEB2":k.id})]}),d.jsxs("div",{className:"spec-item",children:[d.jsx("span",{className:"spec-label",children:"NETWORK:"}),d.jsx("span",{className:"spec-value",children:k.isWeb2?"BROWSER":"TESTNET"})]})]}),d.jsx("div",{className:"selection-indicator",children:(n==null?void 0:n.id)===k.id&&d.jsx("div",{className:"selected-glow",children:"SELECTED"})})]},k.id))}),n&&d.jsxs("div",{className:"launch-section",children:[d.jsxs("div",{className:"launch-info",children:[d.jsxs("div",{className:"terminal-text",children:[d.jsx("span",{className:"terminal-prompt",children:">"})," TARGET NETWORK: ",n.name]}),d.jsxs("div",{className:"terminal-text",children:[d.jsx("span",{className:"terminal-prompt",children:">"})," MISSION STATUS: READY FOR DEPLOYMENT"]})]}),d.jsxs("button",{className:"launch-button",onClick:I,children:[d.jsx("span",{className:"button-icon",children:"🚀"}),"LAUNCH MISSION ON ",n.name,d.jsx("div",{className:"button-glow"})]})]})]})]})})})},Du=({onWalletConnected:t})=>{const{user:e,authenticated:n,ready:r}=jn(),{login:s}=ws(),[i,a]=$.useState("INITIALIZING"),[o,c]=$.useState("");$.useEffect(()=>{n&&e&&t()},[n,e,t]),$.useEffect(()=>{const l=setInterval(()=>{c(h=>h.length>=3?"":h+".")},500),f=setInterval(()=>{const h=["INITIALIZING","LOADING SYSTEMS","CONNECTING","SYNCING"];a(h[Math.floor(Math.random()*h.length)])},2e3);return()=>{clearInterval(l),clearInterval(f)}},[]);const u=()=>{s()};return r?d.jsx("div",{className:"wallet-connection-overlay",children:d.jsx("div",{className:"wallet-connection-container",children:d.jsxs("div",{className:"wallet-connection-content",children:[d.jsxs("div",{className:"terminal-header",children:[d.jsx("div",{className:"terminal-title",children:"WALLET CONNECTION PROTOCOL"}),d.jsxs("div",{className:"terminal-buttons",children:[d.jsx("div",{className:"terminal-button red"}),d.jsx("div",{className:"terminal-button yellow"}),d.jsx("div",{className:"terminal-button green"})]})]}),d.jsx("div",{className:"logo-section",children:d.jsxs("div",{className:"pixel-logo",children:[d.jsxs("div",{className:"logo-text",children:[d.jsx("span",{className:"logo-main",children:"BUDDY"}),d.jsx("span",{className:"logo-accent",children:"RUNNER"})]}),d.jsxs("div",{className:"logo-powered",children:["POWERED BY ",d.jsx("strong",{children:"MEGA BUDDIES"})]})]})}),d.jsxs("div",{className:"connection-section",children:[d.jsx("div",{className:"connection-icon",children:"🔗"}),d.jsx("h2",{className:"connection-title",children:"AUTHENTICATION REQUIRED"}),d.jsxs("div",{className:"terminal-content",children:[d.jsxs("div",{className:"terminal-text",children:[d.jsx("span",{className:"terminal-prompt",children:">"})," CONNECT YOUR WALLET TO ACCESS THE GAME"]}),d.jsxs("div",{className:"terminal-text",children:[d.jsx("span",{className:"terminal-prompt",children:">"})," ALL SCORES WILL BE STORED ON-CHAIN"]}),d.jsxs("div",{className:"terminal-text",children:[d.jsx("span",{className:"terminal-prompt",children:">"})," SECURE BLOCKCHAIN AUTHENTICATION"]})]}),d.jsxs("button",{className:"connect-wallet-button",onClick:u,children:[d.jsx("span",{className:"button-icon",children:"🔐"}),"CONNECT WALLET",d.jsx("div",{className:"button-glow"})]}),d.jsxs("div",{className:"supported-options",children:[d.jsx("div",{className:"options-title",children:"SUPPORTED AUTHENTICATION METHODS:"}),d.jsxs("div",{className:"options-grid",children:[d.jsxs("div",{className:"option-item",children:[d.jsx("span",{className:"option-icon",children:"📧"}),d.jsx("span",{className:"option-text",children:"EMAIL"})]}),d.jsxs("div",{className:"option-item",children:[d.jsx("span",{className:"option-icon",children:"📱"}),d.jsx("span",{className:"option-text",children:"PHONE"})]}),d.jsxs("div",{className:"option-item",children:[d.jsx("span",{className:"option-icon",children:"🦊"}),d.jsx("span",{className:"option-text",children:"METAMASK"})]}),d.jsxs("div",{className:"option-item",children:[d.jsx("span",{className:"option-icon",children:"💼"}),d.jsx("span",{className:"option-text",children:"OTHER WALLETS"})]})]})]}),d.jsxs("div",{className:"security-info",children:[d.jsxs("div",{className:"terminal-text",children:[d.jsx("span",{className:"terminal-prompt",children:">"})," SECURITY: 256-BIT ENCRYPTION"]}),d.jsxs("div",{className:"terminal-text",children:[d.jsx("span",{className:"terminal-prompt",children:">"})," NETWORK: MEGAETH COMPATIBLE"]})]})]})]})})}):d.jsx("div",{className:"preloader-overlay",children:d.jsx("div",{className:"preloader-container",children:d.jsxs("div",{className:"preloader-content",children:[d.jsxs("div",{className:"terminal-header",children:[d.jsx("div",{className:"terminal-title",children:"BUDDY RUNNER SYSTEM"}),d.jsxs("div",{className:"terminal-buttons",children:[d.jsx("div",{className:"terminal-button red"}),d.jsx("div",{className:"terminal-button yellow"}),d.jsx("div",{className:"terminal-button green"})]})]}),d.jsx("div",{className:"logo-section",children:d.jsx("div",{className:"pixel-logo",children:d.jsxs("div",{className:"logo-text",children:[d.jsx("span",{className:"logo-main",children:"BUDDY"}),d.jsx("span",{className:"logo-accent",children:"RUNNER"})]})})}),d.jsx("div",{className:"loading-bar",children:d.jsx("div",{className:"progress",style:{width:"100%"}})}),d.jsxs("div",{className:"loading-text",children:[i,d.jsx("span",{className:"dots",children:o})]}),d.jsxs("div",{className:"terminal-text",children:[d.jsx("span",{className:"terminal-prompt",children:">"})," System initialization in progress..."]})]})})})};function Gu(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const Oi=/^tuple(?<array>(\[(\d*)\])*)$/;function ts(t){let e=t.type;if(Oi.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=ts(i),s<n-1&&(e+=", ")}const r=Gu(Oi,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,ts({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Qt(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=ts(s),r!==n-1&&(e+=", ")}return e}function _u(t){return t.type==="function"?`function ${t.name}(${Qt(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${t.outputs.length?` returns (${Qt(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Qt(t.inputs)})`:t.type==="error"?`error ${t.name}(${Qt(t.inputs)})`:t.type==="constructor"?`constructor(${Qt(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?"fallback()":"receive() external payable"}function F(t,e,n){return r=>{var s;return((s=t[e.name||n])==null?void 0:s.call(t,r))??e(t,r)}}function He(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new il(t.type);return`${t.name}(${gr(t.inputs,{includeName:e})})`}function gr(t,{includeName:e=!1}={}){return t?t.map(n=>zu(n,{includeName:e})).join(e?", ":","):""}function zu(t,{includeName:e}){return t.type.startsWith("tuple")?`(${gr(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function Se(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Y(t){return Se(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Hu="1.21.3",Wu=t=>t,$a=t=>t,Vu=()=>`viem@${Hu}`;class O extends Error{constructor(e,n={}){var i;super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:Vu()});const r=n.cause instanceof O?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof O&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://viem.sh${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return Fa(this,e)}}function Fa(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t?Fa(t.cause,e):e?null:t}class qu extends O{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorNotFoundError"})}}class Si extends O{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiConstructorParamsNotFoundError"})}}class Ps extends O{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${gr(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class br extends O{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiDecodingZeroDataError"})}}class Ju extends O{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class Yu extends O{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Y(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class Xu extends O{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}class Ba extends O{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class Ku extends O{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureEmptyTopicsError"})}}class Zu extends O{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventSignatureNotFoundError"})}}class Ci extends O{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEventNotFoundError"})}}class sr extends O{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class Qu extends O{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionOutputsNotFoundError"})}}class el extends O{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${He(e.abiItem)}\`, and`,`\`${n.type}\` in \`${He(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItemAmbiguityError"})}}class tl extends O{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class xt extends O{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${gr(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class zt extends O{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${He(e,{includeName:!0})}".`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class nl extends O{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class rl extends O{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiDecodingType"})}}class sl extends O{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class il extends O{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}class al extends O{constructor(e){super(`Filter type "${e}" is not supported.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FilterTypeNotSupportedError"})}}class Ma extends O{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class La extends O{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}function Ht(t,{dir:e,size:n=32}={}){return typeof t=="string"?Ze(t,{dir:e,size:n}):ol(t,{dir:e,size:n})}function Ze(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new La({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function ol(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new La({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class cl extends O{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class ul extends O{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidHexBooleanError"})}}class ll extends O{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}function Rt(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function at(t,{size:e}){if(Y(t)>e)throw new ll({givenSize:Y(t),maxSize:e})}function yr(t,e={}){const{signed:n}=e;e.size&&at(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function dl(t,e={}){let n=t;if(e.size&&(at(n,{size:e.size}),n=Rt(n)),Rt(n)==="0x00")return!1;if(Rt(n)==="0x01")return!0;throw new ul(n)}function ee(t,e={}){return Number(yr(t,e))}function fl(t,e={}){let n=As(t);return e.size&&(at(n,{size:e.size}),n=Rt(n,{dir:"right"})),new TextDecoder().decode(n)}const hl=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Je(t,e={}){return typeof t=="number"||typeof t=="bigint"?M(t,e):typeof t=="string"?ks(t,e):typeof t=="boolean"?Ua(t,e):ln(t,e)}function Ua(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(at(n,{size:e.size}),Ht(n,{size:e.size})):n}function ln(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=hl[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(at(r,{size:e.size}),Ht(r,{dir:"right",size:e.size})):r}function M(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const c=typeof t=="bigint"?"n":"";throw new cl({max:i?`${i}${c}`:void 0,min:`${a}${c}`,signed:n,size:r,value:`${t}${c}`})}const o=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ht(o,{size:r}):o}const pl=new TextEncoder;function ks(t,e={}){const n=pl.encode(t);return ln(n,e)}const ml=new TextEncoder;function et(t,e={}){return typeof t=="number"||typeof t=="bigint"?bl(t,e):typeof t=="boolean"?gl(t,e):Se(t)?As(t,e):Ge(t,e)}function gl(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(at(n,{size:e.size}),Ht(n,{size:e.size})):n}const je={zero:48,nine:57,A:65,F:70,a:97,f:102};function Ri(t){if(t>=je.zero&&t<=je.nine)return t-je.zero;if(t>=je.A&&t<=je.F)return t-(je.A-10);if(t>=je.a&&t<=je.f)return t-(je.a-10)}function As(t,e={}){let n=t;e.size&&(at(n,{size:e.size}),n=Ht(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let a=0,o=0;a<s;a++){const c=Ri(r.charCodeAt(o++)),u=Ri(r.charCodeAt(o++));if(c===void 0||u===void 0)throw new O(`Invalid byte sequence ("${r[o-2]}${r[o-1]}" in "${r}").`);i[a]=c*16+u}return i}function bl(t,e){const n=M(t,e);return As(n)}function Ge(t,e={}){const n=ml.encode(t);return typeof e.size=="number"?(at(n,{size:e.size}),Ht(n,{dir:"right",size:e.size})):n}function yl(t){let e=!0,n="",r=0,s="",i=!1;for(let a=0;a<t.length;a++){const o=t[a];if(["(",")",","].includes(o)&&(e=!0),o==="("&&r++,o===")"&&r--,!!e){if(r===0){if(o===" "&&["event","function",""].includes(s))s="";else if(s+=o,o===")"){i=!0;break}continue}if(o===" "){t[a-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=o,n+=o}}if(!i)throw new O("Unable to normalize signature.");return s}const Da=t=>{const e=typeof t=="string"?t:_u(t);return yl(e)},wl=t=>Da(t);function ji(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Ga(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function $i(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function xl(t,e){Ga(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Jn=BigInt(2**32-1),Fi=BigInt(32);function vl(t,e=!1){return e?{h:Number(t&Jn),l:Number(t>>Fi&Jn)}:{h:Number(t>>Fi&Jn)|0,l:Number(t&Jn)|0}}function El(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:a}=vl(t[s],e);[n[s],r[s]]=[i,a]}return[n,r]}const Nl=(t,e,n)=>t<<n|e>>>32-n,Tl=(t,e,n)=>e<<n|t>>>32-n,Pl=(t,e,n)=>e<<n-32|t>>>64-n,kl=(t,e,n)=>t<<n-32|e>>>64-n;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Al=t=>t instanceof Uint8Array,Il=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Ol=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Ol)throw new Error("Non little-endian hardware is not supported");function Sl(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function _a(t){if(typeof t=="string"&&(t=Sl(t)),!Al(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}class Cl{clone(){return this._cloneInto()}}function Rl(t){const e=r=>t().update(_a(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const[za,Ha,Wa]=[[],[],[]],jl=BigInt(0),en=BigInt(1),$l=BigInt(2),Fl=BigInt(7),Bl=BigInt(256),Ml=BigInt(113);for(let t=0,e=en,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],za.push(2*(5*r+n)),Ha.push((t+1)*(t+2)/2%64);let s=jl;for(let i=0;i<7;i++)e=(e<<en^(e>>Fl)*Ml)%Bl,e&$l&&(s^=en<<(en<<BigInt(i))-en);Wa.push(s)}const[Ll,Ul]=El(Wa,!0),Bi=(t,e,n)=>n>32?Pl(t,e,n):Nl(t,e,n),Mi=(t,e,n)=>n>32?kl(t,e,n):Tl(t,e,n);function Dl(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let a=0;a<10;a++)n[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,u=n[c],l=n[c+1],f=Bi(u,l,1)^n[o],h=Mi(u,l,1)^n[o+1];for(let m=0;m<50;m+=10)t[a+m]^=f,t[a+m+1]^=h}let s=t[2],i=t[3];for(let a=0;a<24;a++){const o=Ha[a],c=Bi(s,i,o),u=Mi(s,i,o),l=za[a];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)n[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~n[(o+2)%10]&n[(o+4)%10]}t[0]^=Ll[r],t[1]^=Ul[r]}n.fill(0)}class Is extends Cl{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ji(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Il(this.state)}keccak(){Dl(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){$i(this);const{blockLen:n,state:r}=this;e=_a(e);const s=e.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let o=0;o<a;o++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){$i(this,!1),Ga(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ji(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(xl(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return e||(e=new Is(n,r,s,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}}const Gl=(t,e,n)=>Rl(()=>new Is(e,t,n)),_l=Gl(1,136,256/8);function re(t,e){const n=e||"hex",r=_l(Se(t,{strict:!1})?et(t):t);return n==="bytes"?r:Je(r)}const zl=t=>re(et(t)),Os=t=>zl(wl(t));class dn extends O{constructor({address:e}){super(`Address "${e}" is invalid.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}const Hl=/^0x[a-fA-F0-9]{40}$/;function tt(t){return Hl.test(t)}function We(t){return typeof t[0]=="string"?Ss(t):Wl(t)}function Wl(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Ss(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function q(t,e,n,{strict:r}={}){return Se(t,{strict:!1})?ql(t,e,n,{strict:r}):Vl(t,e,n,{strict:r})}function Va(t,e){if(typeof e=="number"&&e>0&&e>Y(t)-1)throw new Ma({offset:e,position:"start",size:Y(t)})}function qa(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Y(t)!==n-e)throw new Ma({offset:n,position:"end",size:Y(t)})}function Vl(t,e,n,{strict:r}={}){Va(t,e);const s=t.slice(e,n);return r&&qa(s,e,n),s}function ql(t,e,n,{strict:r}={}){Va(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&qa(s,e,n),s}function $n(t,e){if(t.length!==e.length)throw new Xu({expectedLength:t.length,givenLength:e.length});const n=Jl({params:t,values:e}),r=Rs(n);return r.length===0?"0x":r}function Jl({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(Cs({param:t[r],value:e[r]}));return n}function Cs({param:t,value:e}){const n=wr(t.type);if(n){const[r,s]=n;return Xl(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return td(e,{param:t});if(t.type==="address")return Yl(e);if(t.type==="bool")return Zl(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int");return Ql(e,{signed:r})}if(t.type.startsWith("bytes"))return Kl(e,{param:t});if(t.type==="string")return ed(e);throw new nl(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Rs(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:o}=t[i];a?e+=32:e+=Y(o)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:a,encoded:o}=t[i];a?(n.push(M(e+s,{size:32})),r.push(o),s+=Y(o)):n.push(o)}return We([...n,...r])}function Yl(t){if(!tt(t))throw new dn({address:t});return{dynamic:!1,encoded:Ze(t.toLowerCase())}}function Xl(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new sl(t);if(!r&&t.length!==e)throw new Ju({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let a=0;a<t.length;a++){const o=Cs({param:n,value:t[a]});o.dynamic&&(s=!0),i.push(o)}if(r||s){const a=Rs(i);if(r){const o=M(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?We([o,a]):o}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:We(i.map(({encoded:a})=>a))}}function Kl(t,{param:e}){const[,n]=e.type.split("bytes"),r=Y(t);if(!n){let s=t;return r%32!==0&&(s=Ze(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:We([Ze(M(r,{size:32})),s])}}if(r!==parseInt(n))throw new Yu({expectedSize:parseInt(n),value:t});return{dynamic:!1,encoded:Ze(t,{dir:"right"})}}function Zl(t){return{dynamic:!1,encoded:Ze(Ua(t))}}function Ql(t,{signed:e}){return{dynamic:!1,encoded:M(t,{size:32,signed:e})}}function ed(t){const e=ks(t),n=Math.ceil(Y(e)/32),r=[];for(let s=0;s<n;s++)r.push(Ze(q(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:We([Ze(M(Y(e),{size:32})),...r])}}function td(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],a=Array.isArray(t)?s:i.name,o=Cs({param:i,value:t[a]});r.push(o),o.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Rs(r):We(r.map(({encoded:s})=>s))}}function wr(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const nd=t=>re(et(t)),js=t=>q(nd(Da(t)),0,4);function Fn({abi:t,args:e=[],name:n}){const r=Se(n,{strict:!1}),s=t.filter(a=>r?a.type==="function"?js(a)===n:a.type==="event"?Os(a)===n:!1:"name"in a&&a.name===n);if(s.length===0)return;if(s.length===1)return s[0];let i;for(const a of s){if(!("inputs"in a))continue;if(!e||e.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==e.length)continue;if(e.every((c,u)=>{const l="inputs"in a&&a.inputs[u];return l?ns(c,l):!1})){if(i&&"inputs"in i&&i.inputs){const c=Ja(a.inputs,i.inputs,e);if(c)throw new el({abiItem:a,type:c[0]},{abiItem:i,type:c[1]})}i=a}}return i||s[0]}function ns(t,e){const n=typeof t,r=e.type;switch(r){case"address":return tt(t);case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>ns(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>ns(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Ja(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return Ja(s.components,i.components,n[r]);const a=[s.type,i.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")||a.includes("address")&&a.includes("bytes")?tt(n[r]):!1)return a}}function Bn({abi:t,eventName:e,args:n}){var o;let r=t[0];if(e&&(r=Fn({abi:t,args:n,name:e}),!r))throw new Ci(e,{docsPath:"/docs/contract/encodeEventTopics"});if(r.type!=="event")throw new Ci(void 0,{docsPath:"/docs/contract/encodeEventTopics"});const s=He(r),i=Os(s);let a=[];if(n&&"inputs"in r){const c=(o=r.inputs)==null?void 0:o.filter(l=>"indexed"in l&&l.indexed),u=Array.isArray(n)?n:Object.values(n).length>0?(c==null?void 0:c.map(l=>n[l.name]))??[]:[];u.length>0&&(a=(c==null?void 0:c.map((l,f)=>Array.isArray(u[f])?u[f].map((h,m)=>Li({param:l,value:u[f][m]})):u[f]?Li({param:l,value:u[f]}):null))??[])}return[i,...a]}function Li({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return re(et(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new al(t.type);return $n([t],[e])}function xr(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:a,status:o,transport:c})=>{o==="success"&&e===i&&(n[a]=c.request)})),i=>n[i]||t.request}async function Ya(t,{address:e,abi:n,args:r,eventName:s,fromBlock:i,strict:a,toBlock:o}){const c=xr(t,{method:"eth_newFilter"}),u=s?Bn({abi:n,args:r,eventName:s}):void 0,l=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?M(i):i,toBlock:typeof o=="bigint"?M(o):o,topics:u}]});return{abi:n,args:r,eventName:s,id:l,request:c(l),strict:a,type:"event"}}function pe(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}function Ce({abi:t,args:e,functionName:n}){let r=t[0];if(n&&(r=Fn({abi:t,args:e,name:n}),!r))throw new sr(n,{docsPath:"/docs/contract/encodeFunctionData"});if(r.type!=="function")throw new sr(void 0,{docsPath:"/docs/contract/encodeFunctionData"});const s=He(r),i=js(s),a="inputs"in r&&r.inputs?$n(r.inputs,e??[]):void 0;return Ss([i,a??"0x"])}const Xa={1:"An `assert` condition failed.",17:"Arithmic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},rd={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},sd={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function $s(t,e){const n=t.substring(2).toLowerCase(),r=re(Ge(n),"bytes"),s=n.split("");for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&s[i]&&(s[i]=s[i].toUpperCase()),(r[i>>1]&15)>=8&&s[i+1]&&(s[i+1]=s[i+1].toUpperCase());return`0x${s.join("")}`}function id(t,e){if(!tt(t))throw new dn({address:t});return $s(t)}function vr(t,e){if(e==="0x"&&t.length>0)throw new br;if(Y(e)&&Y(e)<32)throw new Ps({data:e,params:t,size:Y(e)});return ad({data:e,params:t})}function ad({data:t,params:e}){const n=[];let r=0;for(let s=0;s<e.length;s++){if(r>=Y(t))throw new Ps({data:t,params:e,size:Y(t)});const i=e[s],{consumed:a,value:o}=jt({data:t,param:i,position:r});n.push(o),r+=a}return n}function jt({data:t,param:e,position:n}){const r=wr(e.type);if(r){const[i,a]=r;return cd(t,{length:i,param:{...e,type:a},position:n})}if(e.type==="tuple")return hd(t,{param:e,position:n});if(e.type==="string")return fd(t,{position:n});if(e.type.startsWith("bytes"))return ld(t,{param:e,position:n});const s=q(t,n,n+32,{strict:!0});if(e.type.startsWith("uint")||e.type.startsWith("int"))return dd(s,{param:e});if(e.type==="address")return od(s);if(e.type==="bool")return ud(s);throw new rl(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function od(t){return{consumed:32,value:$s(q(t,-20))}}function cd(t,{param:e,length:n,position:r}){if(!n){const a=ee(q(t,r,r+32,{strict:!0})),o=ee(q(t,a,a+32,{strict:!0}));let c=0;const u=[];for(let l=0;l<o;++l){const f=jt({data:q(t,a+32),param:e,position:c});c+=f.consumed,u.push(f.value)}return{value:u,consumed:32}}if(ir(e)){const a=wr(e.type),o=!(a!=null&&a[0]);let c=0;const u=[];for(let l=0;l<n;++l){const f=ee(q(t,r,r+32,{strict:!0})),h=jt({data:q(t,f),param:e,position:o?c:l*32});c+=h.consumed,u.push(h.value)}return{value:u,consumed:32}}let s=0;const i=[];for(let a=0;a<n;++a){const o=jt({data:t,param:e,position:r+s});s+=o.consumed,i.push(o.value)}return{value:i,consumed:s}}function ud(t){return{consumed:32,value:dl(t)}}function ld(t,{param:e,position:n}){const[r,s]=e.type.split("bytes");if(!s){const a=ee(q(t,n,n+32,{strict:!0})),o=ee(q(t,a,a+32,{strict:!0}));return o===0?{consumed:32,value:"0x"}:{consumed:32,value:q(t,a+32,a+32+o,{strict:!0})}}return{consumed:32,value:q(t,n,n+parseInt(s),{strict:!0})}}function dd(t,{param:e}){const n=e.type.startsWith("int");return{consumed:32,value:parseInt(e.type.split("int")[1]||"256")>48?yr(t,{signed:n}):ee(t,{signed:n})}}function fd(t,{position:e}){const n=ee(q(t,e,e+32,{strict:!0})),r=ee(q(t,n,n+32,{strict:!0}));return r===0?{consumed:32,value:""}:{consumed:32,value:fl(Rt(q(t,n+32,n+32+r,{strict:!0})))}}function hd(t,{param:e,position:n}){const r=e.components.length===0||e.components.some(({name:a})=>!a),s=r?[]:{};let i=0;if(ir(e)){const a=ee(q(t,n,n+32,{strict:!0}));for(let o=0;o<e.components.length;++o){const c=e.components[o],u=jt({data:q(t,a),param:c,position:i});i+=u.consumed,s[r?o:c==null?void 0:c.name]=u.value}return{consumed:32,value:s}}for(let a=0;a<e.components.length;++a){const o=e.components[a],c=jt({data:t,param:o,position:n+i});i+=c.consumed,s[r?a:o==null?void 0:o.name]=c.value}return{consumed:i,value:s}}function ir(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(ir);const n=wr(t.type);return!!(n&&ir({...t,type:n[1]}))}function pd({abi:t,data:e}){const n=q(e,0,4);if(n==="0x")throw new br;const s=[...t||[],rd,sd].find(i=>i.type==="error"&&n===js(He(i)));if(!s)throw new Ba(n,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?vr(s.inputs,q(e,4)):void 0,errorName:s.name}}const Re=(t,e,n)=>JSON.stringify(t,(r,s)=>{const i=typeof s=="bigint"?s.toString():s;return typeof e=="function"?e(r,i):i},n);function Ka({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Re(e[i]):e[i]}`).join(", ")})`}const md={gwei:9,wei:18},gd={ether:-9,wei:9};function Za(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function Fs(t,e="wei"){return Za(t,md[e])}function ae(t,e="wei"){return Za(t,gd[e])}function Mn(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class bd extends O{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeConflictError"})}}class yd extends O{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Mn(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- a Legacy Transaction with `gasPrice`"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSerializableTransactionError"})}}class wd extends O{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:f,value:h}){var p;const m=Mn({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:f,value:typeof h<"u"&&`${Fs(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:a,gasPrice:typeof o<"u"&&`${ae(o)} gwei`,maxFeePerGas:typeof c<"u"&&`${ae(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ae(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",m].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionExecutionError"}),this.cause=e}}class Qa extends O{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let a="Transaction";r&&i!==void 0&&(a=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(a=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(a=`Transaction at block number "${n}" at index "${i}"`),s&&(a=`Transaction with hash "${s}"`),super(`${a} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionNotFoundError"})}}class eo extends O{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionReceiptNotFoundError"})}}class xd extends O{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WaitForTransactionReceiptTimeoutError"})}}class to extends O{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:f,value:h}){var y;const m=n?pe(n):void 0,p=Mn({from:m==null?void 0:m.address,to:f,value:typeof h<"u"&&`${Fs(h)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:a,gasPrice:typeof o<"u"&&`${ae(o)} gwei`,maxFeePerGas:typeof c<"u"&&`${ae(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ae(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",p].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CallExecutionError"}),this.cause=e}}class vd extends O{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:a,sender:o}){const c=Fn({abi:n,args:r,name:a}),u=c?Ka({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=c?He(c,{includeName:!0}):void 0,f=Mn({address:s&&Wu(s),function:l,args:u&&u!=="()"&&`${[...Array((a==null?void 0:a.length)??0).keys()].map(()=>" ").join("")}${u}`,sender:o});super(e.shortMessage||`An unknown error occurred while executing the contract function "${a}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Contract Call:",f].filter(Boolean)}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionExecutionError"}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=a,this.sender=o}}class rs extends O{constructor({abi:e,data:n,functionName:r,message:s}){let i,a,o,c;if(n&&n!=="0x")try{a=pd({abi:e,data:n});const{abiItem:l,errorName:f,args:h}=a;if(f==="Error")c=h[0];else if(f==="Panic"){const[m]=h;c=Xa[m]}else{const m=l?He(l,{includeName:!0}):void 0,p=l&&h?Ka({abiItem:l,args:h,includeFunctionName:!1,includeName:!1}):void 0;o=[m?`Error: ${m}`:"",p&&p!=="()"?`       ${[...Array((f==null?void 0:f.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(l){i=l}else s&&(c=s);let u;i instanceof Ba&&(u=i.signature,o=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:o}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=a,this.reason=c,this.signature=u}}class Ed extends O{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ContractFunctionZeroDataError"})}}class Bs extends O{constructor({data:e,message:n}){super(n||""),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RawContractError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class no extends O{constructor({body:e,details:n,headers:r,status:s,url:i}){super("HTTP request failed.",{details:n,metaMessages:[s&&`Status: ${s}`,`URL: ${$a(i)}`,e&&`Request body: ${Re(e)}`].filter(Boolean)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=r,this.status=s,this.url=i}}class Nd extends O{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${$a(r)}`,`Request body: ${Re(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code}}const Td=-1;class ce extends O{constructor(e,{code:n,docsPath:r,metaMessages:s,shortMessage:i}){super(i,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.code=e instanceof Nd?e.code:n??Td}}class Wt extends ce{constructor(e,n){super(e,n),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class fn extends ce{constructor(e){super(e,{code:fn.code,shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ParseRpcError"})}}Object.defineProperty(fn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class hn extends ce{constructor(e){super(e,{code:hn.code,shortMessage:"JSON is not a valid request object."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidRequestRpcError"})}}Object.defineProperty(hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class pn extends ce{constructor(e){super(e,{code:pn.code,shortMessage:"The method does not exist / is not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotFoundRpcError"})}}Object.defineProperty(pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class mn extends ce{constructor(e){super(e,{code:mn.code,shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParamsRpcError"})}}Object.defineProperty(mn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class _t extends ce{constructor(e){super(e,{code:_t.code,shortMessage:"An internal error was received."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InternalRpcError"})}}Object.defineProperty(_t,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class vt extends ce{constructor(e){super(e,{code:vt.code,shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidInputRpcError"})}}Object.defineProperty(vt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class gn extends ce{constructor(e){super(e,{code:gn.code,shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(gn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class bn extends ce{constructor(e){super(e,{code:bn.code,shortMessage:"Requested resource not available."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceUnavailableRpcError"})}}Object.defineProperty(bn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class yn extends ce{constructor(e){super(e,{code:yn.code,shortMessage:"Transaction creation failed."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionRejectedRpcError"})}}Object.defineProperty(yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class wn extends ce{constructor(e){super(e,{code:wn.code,shortMessage:"Method is not implemented."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MethodNotSupportedRpcError"})}}Object.defineProperty(wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class xn extends ce{constructor(e){super(e,{code:xn.code,shortMessage:"Request exceeds defined limit."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"LimitExceededRpcError"})}}Object.defineProperty(xn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class vn extends ce{constructor(e){super(e,{code:vn.code,shortMessage:"Version of JSON-RPC protocol is not supported."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"JsonRpcVersionUnsupportedError"})}}Object.defineProperty(vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class $t extends Wt{constructor(e){super(e,{code:$t.code,shortMessage:"User rejected the request."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UserRejectedRequestError"})}}Object.defineProperty($t,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class En extends Wt{constructor(e){super(e,{code:En.code,shortMessage:"The requested method and/or account has not been authorized by the user."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnauthorizedProviderError"})}}Object.defineProperty(En,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Nn extends Wt{constructor(e){super(e,{code:Nn.code,shortMessage:"The Provider does not support the requested method."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnsupportedProviderMethodError"})}}Object.defineProperty(Nn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Tn extends Wt{constructor(e){super(e,{code:Tn.code,shortMessage:"The Provider is disconnected from all chains."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderDisconnectedError"})}}Object.defineProperty(Tn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Pn extends Wt{constructor(e){super(e,{code:Pn.code,shortMessage:"The Provider is not connected to the requested chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDisconnectedError"})}}Object.defineProperty(Pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class kn extends Wt{constructor(e){super(e,{code:kn.code,shortMessage:"An error occurred when attempting to switch chain."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainError"})}}Object.defineProperty(kn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Pd extends ce{constructor(e){super(e,{shortMessage:"An unknown RPC error occurred."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownRpcError"})}}const kd=3;function An(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:a}){const{code:o,data:c,message:u,shortMessage:l}=t instanceof Bs?t:t instanceof O?t.walk(h=>"data"in h)||t.walk():{},f=t instanceof br?new Ed({functionName:i}):[kd,_t.code].includes(o)&&(c||u||l)?new rs({abi:e,data:typeof c=="object"?c.data:c,functionName:i,message:l??u}):t;return new vd(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:a})}class Vt extends O{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the WalletClient."].join(`
`),{docsPath:e,docsSlug:"account"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AccountNotFoundError"})}}class Ad extends O{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:f,value:h}){var p;const m=Mn({from:n==null?void 0:n.address,to:f,value:typeof h<"u"&&`${Fs(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:a,gasPrice:typeof o<"u"&&`${ae(o)} gwei`,maxFeePerGas:typeof c<"u"&&`${ae(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ae(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",m].filter(Boolean)}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EstimateGasExecutionError"}),this.cause=e}}class Ot extends O{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ExecutionRevertedError"})}}Object.defineProperty(Ot,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Ot,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class ar extends O{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ae(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooHigh"})}}Object.defineProperty(ar,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class ss extends O{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ae(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"FeeCapTooLow"})}}Object.defineProperty(ss,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class is extends O{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooHighError"})}}Object.defineProperty(is,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class as extends O{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceTooLowError"})}}Object.defineProperty(as,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class os extends O{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"NonceMaxValueError"})}}Object.defineProperty(os,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class cs extends O{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InsufficientFundsError"})}}Object.defineProperty(cs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds/});class us extends O{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooHighError"})}}Object.defineProperty(us,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class ls extends O{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntrinsicGasTooLowError"})}}Object.defineProperty(ls,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class ds extends O{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TransactionTypeNotSupportedError"})}}Object.defineProperty(ds,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class or extends O{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ae(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ae(r)} gwei`:""}).`].join(`
`),{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TipAboveFeeCapError"})}}Object.defineProperty(or,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Er extends O{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownNodeError"})}}function Ms(t,e){const n=(t.details||"").toLowerCase(),r=t.walk(s=>s.code===Ot.code);return r instanceof O?new Ot({cause:t,message:r.details}):Ot.nodeMessage.test(n)?new Ot({cause:t,message:t.details}):ar.nodeMessage.test(n)?new ar({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):ss.nodeMessage.test(n)?new ss({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):is.nodeMessage.test(n)?new is({cause:t,nonce:e==null?void 0:e.nonce}):as.nodeMessage.test(n)?new as({cause:t,nonce:e==null?void 0:e.nonce}):os.nodeMessage.test(n)?new os({cause:t,nonce:e==null?void 0:e.nonce}):cs.nodeMessage.test(n)?new cs({cause:t}):us.nodeMessage.test(n)?new us({cause:t,gas:e==null?void 0:e.gas}):ls.nodeMessage.test(n)?new ls({cause:t,gas:e==null?void 0:e.gas}):ds.nodeMessage.test(n)?new ds({cause:t}):or.nodeMessage.test(n)?new or({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Er({cause:t})}function Id(t,{docsPath:e,...n}){const r=(()=>{const s=Ms(t,n);return s instanceof Er?t:s})();return new Ad(r,{docsPath:e,...n})}function Ls(t,{format:e}){if(!e)return{};const n={};function r(i){const a=Object.keys(i);for(const o of a)o in t&&(n[o]=t[o]),i[o]&&typeof i[o]=="object"&&!Array.isArray(i[o])&&r(i[o])}const s=e(t||{});return r(s),n}const Od={legacy:"0x0",eip2930:"0x1",eip1559:"0x2"};function Nr(t){return{...t,gas:typeof t.gas<"u"?M(t.gas):void 0,gasPrice:typeof t.gasPrice<"u"?M(t.gasPrice):void 0,maxFeePerGas:typeof t.maxFeePerGas<"u"?M(t.maxFeePerGas):void 0,maxPriorityFeePerGas:typeof t.maxPriorityFeePerGas<"u"?M(t.maxPriorityFeePerGas):void 0,nonce:typeof t.nonce<"u"?M(t.nonce):void 0,type:typeof t.type<"u"?Od[t.type]:void 0,value:typeof t.value<"u"?M(t.value):void 0}}function Ln(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,a=e?pe(e):void 0;if(a&&!tt(a.address))throw new dn({address:a.address});if(i&&!tt(i))throw new dn({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new bd;if(r&&r>2n**256n-1n)throw new ar({maxFeePerGas:r});if(s&&r&&s>r)throw new or({maxFeePerGas:r,maxPriorityFeePerGas:s})}class Sd extends O{constructor(){super("`baseFeeMultiplier` must be greater than 1."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseFeeScalarError"})}}class Us extends O{constructor(){super("Chain does not support EIP-1559 fees."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Eip1559FeesNotSupportedError"})}}class Cd extends O{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ae(e)} gwei).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"MaxFeePerGasTooLowError"})}}class ro extends O{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BlockNotFoundError"})}}const so={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"};function io(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?ee(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?ee(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?so[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e}function ao(t){var n;const e=(n=t.transactions)==null?void 0:n.map(r=>typeof r=="string"?r:io(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,difficulty:t.difficulty?BigInt(t.difficulty):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function nt(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var l,f,h;const i=r??"latest",a=s??!1,o=n!==void 0?M(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,a]}):c=await t.request({method:"eth_getBlockByNumber",params:[o||i,a]}),!c)throw new ro({blockHash:e,blockNumber:n});return(((h=(f=(l=t.chain)==null?void 0:l.formatters)==null?void 0:f.block)==null?void 0:h.format)||ao)(c)}async function Ds(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function Rd(t,e){return oo(t,e)}async function oo(t,e){var i,a,o;const{block:n,chain:r=t.chain,request:s}=e||{};if(typeof((i=r==null?void 0:r.fees)==null?void 0:i.defaultPriorityFee)=="function"){const c=n||await F(t,nt,"getBlock")({});return r.fees.defaultPriorityFee({block:c,client:t,request:s})}if(typeof((a=r==null?void 0:r.fees)==null?void 0:a.defaultPriorityFee)<"u")return(o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee;try{const c=await t.request({method:"eth_maxPriorityFeePerGas"});return yr(c)}catch{const[c,u]=await Promise.all([n?Promise.resolve(n):F(t,nt,"getBlock")({}),F(t,Ds,"getGasPrice")({})]);if(typeof c.baseFeePerGas!="bigint")throw new Us;const l=u-c.baseFeePerGas;return l<0n?0n:l}}async function jd(t,e){return fs(t,e)}async function fs(t,e){var h,m;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},a=await(async()=>{var p,y;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((y=r==null?void 0:r.fees)==null?void 0:y.baseFeeMultiplier)??1.2})();if(a<1)throw new Sd;const c=10**(((h=a.toString().split(".")[1])==null?void 0:h.length)??0),u=p=>p*BigInt(Math.ceil(a*c))/BigInt(c),l=n||await F(t,nt,"getBlock")({});if(typeof((m=r==null?void 0:r.fees)==null?void 0:m.estimateFeesPerGas)=="function")return r.fees.estimateFeesPerGas({block:n,client:t,multiply:u,request:s,type:i});if(i==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new Us;const p=s!=null&&s.maxPriorityFeePerGas?s.maxPriorityFeePerGas:await oo(t,{block:l,chain:r,request:s}),y=u(l.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??y+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??u(await F(t,Ds,"getGasPrice")({}))}}async function co(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,r?M(r):n]});return ee(s)}function $d(t){if(t.type)return t.type;if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new yd({transaction:t})}async function Tr(t,e){const{account:n=t.account,chain:r,gas:s,nonce:i,type:a}=e;if(!n)throw new Vt;const o=pe(n),c=await F(t,nt,"getBlock")({blockTag:"latest"}),u={...e,from:o.address};if(typeof i>"u"&&(u.nonce=await F(t,co,"getTransactionCount")({address:o.address,blockTag:"pending"})),typeof a>"u")try{u.type=$d(u)}catch{u.type=typeof c.baseFeePerGas=="bigint"?"eip1559":"legacy"}if(u.type==="eip1559"){const{maxFeePerGas:l,maxPriorityFeePerGas:f}=await fs(t,{block:c,chain:r,request:u});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<f)throw new Cd({maxPriorityFeePerGas:f});u.maxPriorityFeePerGas=f,u.maxFeePerGas=l}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new Us;const{gasPrice:l}=await fs(t,{block:c,chain:r,request:u,type:"legacy"});u.gasPrice=l}return typeof s>"u"&&(u.gas=await F(t,Gs,"estimateGas")({...u,account:{address:o.address,type:"json-rpc"}})),Ln(u),u}async function Gs(t,e){var s,i,a;const n=e.account??t.account;if(!n)throw new Vt({docsPath:"/docs/actions/public/estimateGas"});const r=pe(n);try{const{accessList:o,blockNumber:c,blockTag:u,data:l,gas:f,gasPrice:h,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:y,to:x,value:w,...E}=r.type==="local"?await Tr(t,e):e,k=(c?M(c):void 0)||u;Ln(e);const j=(a=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:a.format,P=(j||Nr)({...Ls(E,{format:j}),from:r.address,accessList:o,data:l,gas:f,gasPrice:h,maxFeePerGas:m,maxPriorityFeePerGas:p,nonce:y,to:x,value:w}),v=await t.request({method:"eth_estimateGas",params:k?[P,k]:[P]});return BigInt(v)}catch(o){throw Id(o,{...e,account:r,chain:t.chain})}}async function Fd(t,{abi:e,address:n,args:r,functionName:s,...i}){const a=Ce({abi:e,args:r,functionName:s});try{return await F(t,Gs,"estimateGas")({data:a,to:n,...i})}catch(o){const c=i.account?pe(i.account):void 0;throw An(o,{abi:e,address:n,args:r,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:c==null?void 0:c.address})}}const Ui="/docs/contract/decodeEventLog";function Un({abi:t,data:e,strict:n,topics:r}){const s=n??!0,[i,...a]=r;if(!i)throw new Ku({docsPath:Ui});const o=t.find(p=>p.type==="event"&&i===Os(He(p)));if(!(o&&"name"in o)||o.type!=="event")throw new Zu(i,{docsPath:Ui});const{name:c,inputs:u}=o,l=u==null?void 0:u.some(p=>!("name"in p&&p.name));let f=l?[]:{};const h=u.filter(p=>"indexed"in p&&p.indexed);for(let p=0;p<h.length;p++){const y=h[p],x=a[p];if(!x)throw new zt({abiItem:o,param:y});f[y.name||p]=Bd({param:y,value:x})}const m=u.filter(p=>!("indexed"in p&&p.indexed));if(m.length>0){if(e&&e!=="0x")try{const p=vr(m,e);if(p)if(l)f=[...f,...p];else for(let y=0;y<m.length;y++)f[m[y].name]=p[y]}catch(p){if(s)throw p instanceof Ps?new xt({abiItem:o,data:p.data,params:p.params,size:p.size}):p}else if(s)throw new xt({abiItem:o,data:"0x",params:m,size:0})}return{eventName:c,args:Object.values(f).length>0?f:void 0}}function Bd({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(vr([t],e)||[])[0]}function we(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function _s(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:a,args:o,strict:c}={}){const u=c??!1,l=a??(i?[i]:void 0);let f=[];l&&(f=[l.flatMap(m=>Bn({abi:[m],eventName:m.name,args:o}))],i&&(f=f[0]));let h;return n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:f,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:f,fromBlock:typeof r=="bigint"?M(r):r,toBlock:typeof s=="bigint"?M(s):s}]}),h.map(m=>{var p;try{const{eventName:y,args:x}=l?Un({abi:l,data:m.data,topics:m.topics,strict:u}):{eventName:void 0,args:void 0};return we(m,{args:x,eventName:y})}catch(y){let x,w;if(y instanceof xt||y instanceof zt){if(u)return;x=y.abiItem.name,w=(p=y.abiItem.inputs)==null?void 0:p.some(E=>!("name"in E&&E.name))}return we(m,{args:w?[]:{},eventName:x})}}).filter(Boolean)}async function uo(t,{abi:e,address:n,args:r,blockHash:s,eventName:i,fromBlock:a,toBlock:o,strict:c}){const u=i?Fn({abi:e,name:i}):void 0,l=u?void 0:e.filter(f=>f.type==="event");return F(t,_s,"getLogs")({address:n,args:r,blockHash:s,event:u,events:l,fromBlock:a,toBlock:o,strict:c})}const Mr="/docs/contract/decodeFunctionResult";function qt({abi:t,args:e,functionName:n,data:r}){let s=t[0];if(n&&(s=Fn({abi:t,args:e,name:n}),!s))throw new sr(n,{docsPath:Mr});if(s.type!=="function")throw new sr(void 0,{docsPath:Mr});if(!s.outputs)throw new Qu(s.name,{docsPath:Mr});const i=vr(s.outputs,r);if(i&&i.length>1)return i;if(i&&i.length===1)return i[0]}const hs=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],lo=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"}],fo=[...lo,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Md=[...lo,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],Di=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],Gi=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Ld=[{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"}],Ud="0x82ad56cb";class ps extends O{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainDoesNotSupportContract"})}}class Dd extends O{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainMismatchError"})}}class Gd extends O{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotFoundError"})}}class ho extends O{constructor(){super("No chain was provided to the Client."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ClientChainNotConfiguredError"})}}function Jt({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new ps({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new ps({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function _d(t,{docsPath:e,...n}){const r=(()=>{const s=Ms(t,n);return s instanceof Er?t:s})();return new to(r,{docsPath:e,...n})}const Lr=new Map;function zd({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const l=c();a();const f=l.map(({args:h})=>h);f.length!==0&&t(f).then(h=>{var m;s&&Array.isArray(h)&&h.sort(s);for(let p=0;p<l.length;p++){const{pendingPromise:y}=l[p];(m=y.resolve)==null||m.call(y,[h[p],h])}}).catch(h=>{var m;for(let p=0;p<l.length;p++){const{pendingPromise:y}=l[p];(m=y.reject)==null||m.call(y,h)}})},a=()=>Lr.delete(e),o=()=>c().map(({args:l})=>l),c=()=>Lr.get(e)||[],u=l=>Lr.set(e,[...c(),l]);return{flush:a,async schedule(l){const f={},h=new Promise((y,x)=>{f.resolve=y,f.reject=x});return(n==null?void 0:n([...o(),l]))&&i(),c().length>0?(u({args:l,pendingPromise:f}),h):(u({args:l,pendingPromise:f}),setTimeout(i,r),h)}}}async function Pr(t,e){var w,E,I,k;const{account:n=t.account,batch:r=!!((w=t.batch)!=null&&w.multicall),blockNumber:s,blockTag:i="latest",accessList:a,data:o,gas:c,gasPrice:u,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:h,to:m,value:p,...y}=e,x=n?pe(n):void 0;try{Ln(e);const C=(s?M(s):void 0)||i,P=(k=(I=(E=t.chain)==null?void 0:E.formatters)==null?void 0:I.transactionRequest)==null?void 0:k.format,g=(P||Nr)({...Ls(y,{format:P}),from:x==null?void 0:x.address,accessList:a,data:o,gas:c,gasPrice:u,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:h,to:m,value:p});if(r&&Hd({request:g}))try{return await Wd(t,{...g,blockNumber:s,blockTag:i})}catch(T){if(!(T instanceof ho)&&!(T instanceof ps))throw T}const S=await t.request({method:"eth_call",params:C?[g,C]:[g]});return S==="0x"?{data:void 0}:{data:S}}catch(j){const C=Vd(j),{offchainLookup:P,offchainLookupSignature:v}=await Do(async()=>{const{offchainLookup:g,offchainLookupSignature:S}=await import("./ccip-DD1jhJol.js");return{offchainLookup:g,offchainLookupSignature:S}},__vite__mapDeps([0,1,2]));if((C==null?void 0:C.slice(0,10))===v&&m)return{data:await P(t,{data:C,to:m})};throw _d(j,{...e,account:x,chain:t.chain})}}function Hd({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Ud)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Wd(t,e){var y;const{batchSize:n=1024,wait:r=0}=typeof((y=t.batch)==null?void 0:y.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:a,multicallAddress:o,to:c}=e;let u=o;if(!u){if(!t.chain)throw new ho;u=Jt({blockNumber:s,chain:t.chain,contract:"multicall3"})}const f=(s?M(s):void 0)||i,{schedule:h}=zd({id:`${t.uid}.${f}`,wait:r,shouldSplitBatch(x){return x.reduce((E,{data:I})=>E+(I.length-2),0)>n*2},fn:async x=>{const w=x.map(k=>({allowFailure:!0,callData:k.data,target:k.to})),E=Ce({abi:hs,args:[w],functionName:"aggregate3"}),I=await t.request({method:"eth_call",params:[{data:E,to:u},f]});return qt({abi:hs,args:[w],functionName:"aggregate3",data:I||"0x"})}}),[{returnData:m,success:p}]=await h({data:a,to:c});if(!p)throw new Bs({data:m});return m==="0x"?{data:void 0}:{data:m}}function Vd(t){if(!(t instanceof O))return;const e=t.walk();return typeof e.data=="object"?e.data.data:e.data}async function rt(t,{abi:e,address:n,args:r,functionName:s,...i}){const a=Ce({abi:e,args:r,functionName:s});try{const{data:o}=await F(t,Pr,"call")({data:a,to:n,...i});return qt({abi:e,args:r,functionName:s,data:o||"0x"})}catch(o){throw An(o,{abi:e,address:n,args:r,docsPath:"/docs/contract/readContract",functionName:s})}}async function qd(t,{abi:e,address:n,args:r,dataSuffix:s,functionName:i,...a}){const o=a.account?pe(a.account):void 0,c=Ce({abi:e,args:r,functionName:i});try{const{data:u}=await F(t,Pr,"call")({batch:!1,data:`${c}${s?s.replace("0x",""):""}`,to:n,...a});return{result:qt({abi:e,args:r,functionName:i,data:u||"0x"}),request:{abi:e,address:n,args:r,dataSuffix:s,functionName:i,...a}}}catch(u){throw An(u,{abi:e,address:n,args:r,docsPath:"/docs/contract/simulateContract",functionName:i,sender:o==null?void 0:o.address})}}const Ur=new Map,_i=new Map;let Jd=0;function Yt(t,e,n){const r=++Jd,s=()=>Ur.get(t)||[],i=()=>{const l=s();Ur.set(t,l.filter(f=>f.id!==r))},a=()=>{const l=_i.get(t);s().length===1&&l&&l(),i()},o=s();if(Ur.set(t,[...o,{id:r,fns:e}]),o&&o.length>0)return a;const c={};for(const l in e)c[l]=(...f)=>{var m,p;const h=s();if(h.length!==0)for(const y of h)(p=(m=y.fns)[l])==null||p.call(m,...f)};const u=n(c);return typeof u=="function"&&_i.set(t,u),a}async function ms(t){return new Promise(e=>setTimeout(e,t))}function Dn(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let o;e&&(o=await t({unpoll:i}));const c=await(n==null?void 0:n(o))??r;await ms(c);const u=async()=>{s&&(await t({unpoll:i}),await ms(r),u())};u()})(),i}const Yd=new Map,Xd=new Map;function Kd(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:a=>i.set(s,a)}),n=e(t,Yd),r=e(t,Xd);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Zd(t,{cacheKey:e,cacheTime:n=1/0}){const r=Kd(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const a=await i;return r.response.set({created:new Date,data:a}),a}finally{r.promise.clear()}}const Qd=t=>`blockNumber.${t}`;async function Gn(t,{cacheTime:e=t.cacheTime,maxAge:n}={}){const r=await Zd(()=>t.request({method:"eth_blockNumber"}),{cacheKey:Qd(t.uid),cacheTime:n??e});return BigInt(r)}async function kr(t,{filter:e}){const n="strict"in e&&e.strict;return(await e.request({method:"eth_getFilterChanges",params:[e.id]})).map(s=>{var i;if(typeof s=="string")return s;try{const{eventName:a,args:o}="abi"in e&&e.abi?Un({abi:e.abi,data:s.data,topics:s.topics,strict:n}):{eventName:void 0,args:void 0};return we(s,{args:o,eventName:a})}catch(a){let o,c;if(a instanceof xt||a instanceof zt){if("strict"in e&&e.strict)return;o=a.abiItem.name,c=(i=a.abiItem.inputs)==null?void 0:i.some(u=>!("name"in u&&u.name))}return we(s,{args:c?[]:{},eventName:o})}}).filter(Boolean)}async function Ar(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function ef(t,{abi:e,address:n,args:r,batch:s=!0,eventName:i,onError:a,onLogs:o,poll:c,pollingInterval:u=t.pollingInterval,strict:l}){return(typeof c<"u"?c:t.transport.type!=="webSocket")?(()=>{const p=Re(["watchContractEvent",n,r,s,t.uid,i,u]),y=l??!1;return Yt(p,{onLogs:o,onError:a},x=>{let w,E,I=!1;const k=Dn(async()=>{var j;if(!I){try{E=await F(t,Ya,"createContractEventFilter")({abi:e,address:n,args:r,eventName:i,strict:y})}catch{}I=!0;return}try{let C;if(E)C=await F(t,kr,"getFilterChanges")({filter:E});else{const P=await F(t,Gn,"getBlockNumber")({});w&&w!==P?C=await F(t,uo,"getContractEvents")({abi:e,address:n,args:r,eventName:i,fromBlock:w+1n,toBlock:P,strict:y}):C=[],w=P}if(C.length===0)return;if(s)x.onLogs(C);else for(const P of C)x.onLogs([P])}catch(C){E&&C instanceof vt&&(I=!1),(j=x.onError)==null||j.call(x,C)}},{emitOnBegin:!0,interval:u});return async()=>{E&&await F(t,Ar,"uninstallFilter")({filter:E}),k()}})})():(()=>{let p=!0,y=()=>p=!1;return(async()=>{try{const x=i?Bn({abi:e,eventName:i,args:r}):[],{unsubscribe:w}=await t.transport.subscribe({params:["logs",{address:n,topics:x}],onData(E){var k;if(!p)return;const I=E.result;try{const{eventName:j,args:C}=Un({abi:e,data:I.data,topics:I.topics,strict:l}),P=we(I,{args:C,eventName:j});o([P])}catch(j){let C,P;if(j instanceof xt||j instanceof zt){if(l)return;C=j.abiItem.name,P=(k=j.abiItem.inputs)==null?void 0:k.some(g=>!("name"in g&&g.name))}const v=we(I,{args:P?[]:{},eventName:C});o([v])}},onError(E){a==null||a(E)}});y=w,p||y()}catch(x){a==null||a(x)}})(),y})()}function po({chain:t,currentChainId:e}){if(!t)throw new Gd;if(e!==t.id)throw new Dd({chain:t,currentChainId:e})}function tf(t,{docsPath:e,...n}){const r=(()=>{const s=Ms(t,n);return s instanceof Er?t:s})();return new wd(r,{docsPath:e,...n})}async function In(t){const e=await t.request({method:"eth_chainId"});return ee(e)}async function zs(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]})}async function Hs(t,e){var y,x,w,E;const{account:n=t.account,chain:r=t.chain,accessList:s,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:f,value:h,...m}=e;if(!n)throw new Vt({docsPath:"/docs/actions/wallet/sendTransaction"});const p=pe(n);try{Ln(e);let I;if(r!==null&&(I=await F(t,In,"getChainId")({}),po({currentChainId:I,chain:r})),p.type==="local"){const P=await F(t,Tr,"prepareTransactionRequest")({account:p,accessList:s,chain:r,data:i,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:f,value:h,...m});I||(I=await F(t,In,"getChainId")({}));const v=(y=r==null?void 0:r.serializers)==null?void 0:y.transaction,g=await p.signTransaction({...P,chainId:I},{serializer:v});return await F(t,zs,"sendRawTransaction")({serializedTransaction:g})}const k=(E=(w=(x=t.chain)==null?void 0:x.formatters)==null?void 0:w.transactionRequest)==null?void 0:E.format,C=(k||Nr)({...Ls(m,{format:k}),accessList:s,data:i,from:p.address,gas:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:f,value:h});return await t.request({method:"eth_sendTransaction",params:[C]})}catch(I){throw tf(I,{...e,account:p,chain:e.chain||void 0})}}async function nf(t,{abi:e,address:n,args:r,dataSuffix:s,functionName:i,...a}){const o=Ce({abi:e,args:r,functionName:i});return await F(t,Hs,"sendTransaction")({data:`${o}${s?s.replace("0x",""):""}`,to:n,...a})}async function rf(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:a}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:M(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:a?Object.values(a).map(({url:o})=>o):void 0}]})}const gs=256;let Yn=gs,Xn;function sf(t=11){if(!Xn||Yn+t>gs*2){Xn="",Yn=0;for(let e=0;e<gs;e++)Xn+=(256+Math.random()*256|0).toString(16).substring(1)}return Xn.substring(Yn,Yn+++t)}function af(t){const{batch:e,cacheTime:n=t.pollingInterval??4e3,key:r="base",name:s="Base Client",pollingInterval:i=4e3,type:a="base"}=t,o=t.chain,c=t.account?pe(t.account):void 0,{config:u,request:l,value:f}=t.transport({chain:o,pollingInterval:i}),h={...u,...f},m={account:c,batch:e,cacheTime:n,chain:o,key:r,name:s,pollingInterval:i,request:l,transport:h,type:a,uid:sf()};function p(y){return x=>{const w=x(y);for(const I in m)delete w[I];const E={...y,...w};return Object.assign(E,{extend:p(E)})}}return Object.assign(m,{extend:p(m)})}function bs(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const a=async({count:o=0}={})=>{const c=async({error:u})=>{const l=typeof e=="function"?e({count:o,error:u}):e;l&&await ms(l),a({count:o+1})};try{const u=await t();s(u)}catch(u){if(o<n&&await r({count:o,error:u}))return c({error:u});i(u)}};a()})}const of=t=>"code"in t?t.code!==-1&&t.code!==-32004&&t.code!==-32005&&t.code!==-32042&&t.code!==-32603:t instanceof no&&t.status?t.status!==403&&t.status!==408&&t.status!==413&&t.status!==429&&t.status!==500&&t.status!==502&&t.status!==503&&t.status!==504:!1;function cf(t,{retryDelay:e=150,retryCount:n=3}={}){return async r=>bs(async()=>{try{return await t(r)}catch(s){const i=s;switch(i.code){case fn.code:throw new fn(i);case hn.code:throw new hn(i);case pn.code:throw new pn(i);case mn.code:throw new mn(i);case _t.code:throw new _t(i);case vt.code:throw new vt(i);case gn.code:throw new gn(i);case bn.code:throw new bn(i);case yn.code:throw new yn(i);case wn.code:throw new wn(i);case xn.code:throw new xn(i);case vn.code:throw new vn(i);case $t.code:throw new $t(i);case En.code:throw new En(i);case Nn.code:throw new Nn(i);case Tn.code:throw new Tn(i);case Pn.code:throw new Pn(i);case kn.code:throw new kn(i);case 5e3:throw new $t(i);default:throw s instanceof O?s:new Pd(i)}}},{delay:({count:s,error:i})=>{var a;if(i&&i instanceof no){const o=(a=i==null?void 0:i.headers)==null?void 0:a.get("Retry-After");if(o!=null&&o.match(/\d/))return parseInt(o)*1e3}return~~(1<<s)*e},retryCount:n,shouldRetry:({error:s})=>!of(s)})}function uf({key:t,name:e,request:n,retryCount:r=3,retryDelay:s=150,timeout:i,type:a},o){return{config:{key:t,name:e,request:n,retryCount:r,retryDelay:s,timeout:i,type:a},request:cf(n,{retryCount:r,retryDelay:s}),value:o}}function lf(t,e={}){const{key:n="custom",name:r="Custom Provider",retryDelay:s}=e;return({retryCount:i})=>uf({key:n,name:r,request:t.request.bind(t),retryCount:e.retryCount??i,retryDelay:s,type:"custom"})}function Ws(t,e){var r,s,i;if(!(t instanceof O))return!1;const n=t.walk(a=>a instanceof rs);return n instanceof rs?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||(i=n.reason)!=null&&i.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===Xa[50]):!1}function mo(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Se(e)?e:null}function tr(t){let e=new Uint8Array(32).fill(0);if(!t)return ln(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=mo(n[r]),i=s?et(s):re(Ge(n[r]),"bytes");e=re(We([e,i]),"bytes")}return ln(e)}function df(t){return`[${t.slice(2)}]`}function ff(t){const e=new Uint8Array(32).fill(0);return t?mo(t)||re(Ge(t)):ln(e)}function Ir(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(Ge(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let a=Ge(s[i]);a.byteLength>255&&(a=Ge(df(ff(s[i])))),n[r]=a.length,n.set(a,r+1),r+=a.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function hf(t,{blockNumber:e,blockTag:n,coinType:r,name:s,universalResolverAddress:i}){let a=i;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=Jt({blockNumber:e,chain:t.chain,contract:"ensUniversalResolver"})}try{const o=Ce({abi:Gi,functionName:"addr",...r!=null?{args:[tr(s),BigInt(r)]}:{args:[tr(s)]}}),c=await F(t,rt,"readContract")({address:a,abi:fo,functionName:"resolve",args:[Je(Ir(s)),o],blockNumber:e,blockTag:n});if(c[0]==="0x")return null;const u=qt({abi:Gi,args:r!=null?[tr(s),BigInt(r)]:void 0,functionName:"addr",data:c[0]});return u==="0x"||Rt(u)==="0x00"?null:u}catch(o){if(Ws(o,"resolve"))return null;throw o}}class pf extends O{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidMetadataError"})}}class tn extends O{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarInvalidNftUriError"})}}class Vs extends O{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUriResolutionError"})}}class mf extends O{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"EnsAvatarUnsupportedNamespaceError"})}}const gf=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,bf=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,yf=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,wf=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function xf(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function zi(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function go({uri:t,gatewayUrls:e}){const n=yf.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=zi(e==null?void 0:e.ipfs,"https://ipfs.io"),s=zi(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(gf),{protocol:a,subpath:o,target:c,subtarget:u=""}=(i==null?void 0:i.groups)||{},l=a==="ipns:/"||o==="ipns/",f=a==="ipfs:/"||o==="ipfs/"||bf.test(t);if(t.startsWith("http")&&!l&&!f){let m=t;return e!=null&&e.arweave&&(m=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:m,isOnChain:!1,isEncoded:!1}}if((l||f)&&c)return{uri:`${r}/${l?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(a==="ar:/"&&c)return{uri:`${s}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(wf,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new Vs({uri:t})}function bo(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new pf({data:t});return t.image||t.image_url||t.image_data}async function vf({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await qs({gatewayUrls:t,uri:bo(n)})}catch{throw new Vs({uri:e})}}async function qs({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=go({uri:e,gatewayUrls:t});if(r||await xf(n))return n;throw new Vs({uri:e})}function Ef(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,a]=n.split(":"),[o,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new tn({reason:"Only EIP-155 supported"});if(!a)throw new tn({reason:"Chain ID not found"});if(!c)throw new tn({reason:"Contract address not found"});if(!s)throw new tn({reason:"Token ID not found"});if(!o)throw new tn({reason:"ERC namespace not found"});return{chainID:parseInt(a),namespace:o.toLowerCase(),contractAddress:c,tokenID:s}}async function Nf(t,{nft:e}){if(e.namespace==="erc721")return rt(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return rt(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new mf({namespace:e.namespace})}async function Tf(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?Pf(t,{gatewayUrls:e,record:n}):qs({uri:n,gatewayUrls:e})}async function Pf(t,{gatewayUrls:e,record:n}){const r=Ef(n),s=await Nf(t,{nft:r}),{uri:i,isOnChain:a,isEncoded:o}=go({uri:s,gatewayUrls:e});if(a&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const u=o?atob(i.replace("data:application/json;base64,","")):i,l=JSON.parse(u);return qs({uri:bo(l),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),vf({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function yo(t,{blockNumber:e,blockTag:n,name:r,key:s,universalResolverAddress:i}){let a=i;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=Jt({blockNumber:e,chain:t.chain,contract:"ensUniversalResolver"})}try{const o=await F(t,rt,"readContract")({address:a,abi:fo,functionName:"resolve",args:[Je(Ir(r)),Ce({abi:Di,functionName:"text",args:[tr(r),s]})],blockNumber:e,blockTag:n});if(o[0]==="0x")return null;const c=qt({abi:Di,functionName:"text",data:o[0]});return c===""?null:c}catch(o){if(Ws(o,"resolve"))return null;throw o}}async function kf(t,{blockNumber:e,blockTag:n,gatewayUrls:r,name:s,universalResolverAddress:i}){const a=await F(t,yo,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:i});if(!a)return null;try{return await Tf(t,{record:a,gatewayUrls:r})}catch{return null}}async function Af(t,{address:e,blockNumber:n,blockTag:r,universalResolverAddress:s}){let i=s;if(!i){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=Jt({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const a=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const[o,c]=await F(t,rt,"readContract")({address:i,abi:Md,functionName:"reverse",args:[Je(Ir(a))],blockNumber:n,blockTag:r});return e.toLowerCase()!==c.toLowerCase()?null:o}catch(o){if(Ws(o,"reverse"))return null;throw o}}async function If(t,{blockNumber:e,blockTag:n,name:r,universalResolverAddress:s}){let i=s;if(!i){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=Jt({blockNumber:e,chain:t.chain,contract:"ensUniversalResolver"})}const[a]=await F(t,rt,"readContract")({address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Je(Ir(r))],blockNumber:e,blockTag:n});return a}async function Of(t){const e=xr(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}async function wo(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:a,toBlock:o}={}){const c=s??(r?[r]:void 0),u=xr(t,{method:"eth_newFilter"});let l=[];c&&(l=[c.flatMap(h=>Bn({abi:[h],eventName:h.name,args:n}))],r&&(l=l[0]));const f=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?M(i):i,toBlock:typeof o=="bigint"?M(o):o,...l.length?{topics:l}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:f,request:u(f),strict:a,toBlock:o,type:"event"}}async function xo(t){const e=xr(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Sf(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n?M(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function Cf(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?M(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]}),ee(i)}async function Rf(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?M(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]});if(i!=="0x")return i}function jf(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function $f(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=n?M(n):void 0,a=await t.request({method:"eth_feeHistory",params:[M(e),i||r,s]});return jf(a)}async function Ff(t,{filter:e}){const n=e.strict??!1;return(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(s=>{var i;try{const{eventName:a,args:o}="abi"in e&&e.abi?Un({abi:e.abi,data:s.data,topics:s.topics,strict:n}):{eventName:void 0,args:void 0};return we(s,{args:o,eventName:a})}catch(a){let o,c;if(a instanceof xt||a instanceof zt){if("strict"in e&&e.strict)return;o=a.abiItem.name,c=(i=a.abiItem.inputs)==null?void 0:i.some(u=>!("name"in u&&u.name))}return we(s,{args:c?[]:{},eventName:o})}}).filter(Boolean)}const Bf=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Mf=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Lf({domain:t,message:e,primaryType:n,types:r}){const s=typeof t>"u"?{}:t,i={EIP712Domain:ko({domain:s}),...r};Po({domain:s,message:e,primaryType:n,types:i});const a=["0x1901"];return s&&a.push(Uf({domain:s,types:i})),n!=="EIP712Domain"&&a.push(vo({data:e,primaryType:n,types:i})),re(We(a))}function Uf({domain:t,types:e}){return vo({data:t,primaryType:"EIP712Domain",types:e})}function vo({data:t,primaryType:e,types:n}){const r=Eo({data:t,primaryType:e,types:n});return re(r)}function Eo({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[Df({primaryType:e,types:n})];for(const i of n[e]){const[a,o]=To({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(a),s.push(o)}return $n(r,s)}function Df({primaryType:t,types:e}){const n=Je(Gf({primaryType:t,types:e}));return re(n)}function Gf({primaryType:t,types:e}){let n="";const r=No({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:a,type:o})=>`${o} ${a}`).join(",")})`;return n}function No({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])No({primaryType:i.type,types:e},n);return n}function To({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},re(Eo({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},re(r)];if(n==="string")return[{type:"bytes32"},re(Je(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(a=>To({name:e,type:s,types:t,value:a}));return[{type:"bytes32"},re($n(i.map(([a])=>a),i.map(([,a])=>a)))]}return[{type:n},r]}function Po({domain:t,message:e,primaryType:n,types:r}){const s=r,i=(a,o)=>{for(const c of a){const{name:u,type:l}=c,f=l,h=o[u],m=f.match(Mf);if(m&&(typeof h=="number"||typeof h=="bigint")){const[x,w,E]=m;M(h,{signed:w==="int",size:parseInt(E)/8})}if(f==="address"&&typeof h=="string"&&!tt(h))throw new dn({address:h});const p=f.match(Bf);if(p){const[x,w]=p;if(w&&Y(h)!==parseInt(w))throw new tl({expectedSize:parseInt(w),givenSize:Y(h)})}const y=s[f];y&&i(y,h)}};if(s.EIP712Domain&&t&&i(s.EIP712Domain,t),n!=="EIP712Domain"){const a=s[n];i(a,e)}}function ko({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},typeof(t==null?void 0:t.chainId)=="number"&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}const Dr="/docs/contract/encodeDeployData";function Ao({abi:t,args:e,bytecode:n}){if(!e||e.length===0)return n;const r=t.find(i=>"type"in i&&i.type==="constructor");if(!r)throw new qu({docsPath:Dr});if(!("inputs"in r))throw new Si({docsPath:Dr});if(!r.inputs||r.inputs.length===0)throw new Si({docsPath:Dr});const s=$n(r.inputs,e);return Ss([n,s])}const _f={"0x0":"reverted","0x1":"success"};function zf(t){return{...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(e=>we(e)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?ee(t.transactionIndex):null,status:t.status?_f[t.status]:null,type:t.type?so[t.type]||t.type:null}}const Hf=`Ethereum Signed Message:
`;function Wf(t,e){const n=typeof t=="string"?Ge(t):t.raw instanceof Uint8Array?t.raw:et(t.raw),r=Ge(`${Hf}${n.length}`);return re(We([r,n]),e)}function Vf(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function qf(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?ee(t.nonce):void 0,storageProof:t.storageProof?Vf(t.storageProof):void 0}}async function Jf(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",a=n!==void 0?M(n):void 0,o=await t.request({method:"eth_getProof",params:[e,s,a||i]});return qf(o)}async function Yf(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?M(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function Js(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var l,f,h;const a=r||"latest",o=n!==void 0?M(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,M(i)]}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[o||a,M(i)]}),!c)throw new Qa({blockHash:e,blockNumber:n,blockTag:a,hash:s,index:i});return(((h=(f=(l=t.chain)==null?void 0:l.formatters)==null?void 0:f.transaction)==null?void 0:h.format)||io)(c)}async function Xf(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([F(t,Gn,"getBlockNumber")({}),e?F(t,Js,"getBlockNumber")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}async function ys(t,{hash:e}){var s,i,a;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]});if(!n)throw new eo({hash:e});return(((a=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:a.format)||zf)(n)}async function Kf(t,e){var y;const{allowFailure:n=!0,batchSize:r,blockNumber:s,blockTag:i,contracts:a,multicallAddress:o}=e,c=r??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let u=o;if(!u){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");u=Jt({blockNumber:s,chain:t.chain,contract:"multicall3"})}const l=[[]];let f=0,h=0;for(let x=0;x<a.length;x++){const{abi:w,address:E,args:I,functionName:k}=a[x];try{const j=Ce({abi:w,args:I,functionName:k});h+=(j.length-2)/2,c>0&&h>c&&l[f].length>0&&(f++,h=(j.length-2)/2,l[f]=[]),l[f]=[...l[f],{allowFailure:!0,callData:j,target:E}]}catch(j){const C=An(j,{abi:w,address:E,args:I,docsPath:"/docs/contract/multicall",functionName:k});if(!n)throw C;l[f]=[...l[f],{allowFailure:!0,callData:"0x",target:E}]}}const m=await Promise.allSettled(l.map(x=>F(t,rt,"readContract")({abi:hs,address:u,args:[x],blockNumber:s,blockTag:i,functionName:"aggregate3"}))),p=[];for(let x=0;x<m.length;x++){const w=m[x];if(w.status==="rejected"){if(!n)throw w.reason;for(let I=0;I<l[x].length;I++)p.push({status:"failure",error:w.reason,result:void 0});continue}const E=w.value;for(let I=0;I<E.length;I++){const{returnData:k,success:j}=E[I],{callData:C}=l[x][I],{abi:P,address:v,functionName:g,args:S}=a[p.length];try{if(C==="0x")throw new br;if(!j)throw new Bs({data:k});const T=qt({abi:P,args:S,data:k,functionName:g});p.push(n?{result:T,status:"success"}:T)}catch(T){const z=An(T,{abi:P,address:v,args:S,docsPath:"/docs/contract/multicall",functionName:g});if(!n)throw z;p.push({error:z,result:void 0,status:"failure"})}}}if(p.length!==a.length)throw new O("multicall results mismatch");return p}const Zf="0x60806040523480156200001157600080fd5b50604051620007003803806200070083398101604081905262000034916200056f565b6000620000438484846200004f565b9050806000526001601ff35b600080846001600160a01b0316803b806020016040519081016040528181526000908060200190933c90507f6492649264926492649264926492649264926492649264926492649264926492620000a68462000451565b036200021f57600060608085806020019051810190620000c79190620005ce565b8651929550909350915060000362000192576000836001600160a01b031683604051620000f5919062000643565b6000604051808303816000865af19150503d806000811462000134576040519150601f19603f3d011682016040523d82523d6000602084013e62000139565b606091505b5050905080620001905760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b505b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90620001c4908b90869060040162000661565b602060405180830381865afa158015620001e2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200020891906200069d565b6001600160e01b031916149450505050506200044a565b805115620002b157604051630b135d3f60e11b808252906001600160a01b03871690631626ba7e9062000259908890889060040162000661565b602060405180830381865afa15801562000277573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200029d91906200069d565b6001600160e01b031916149150506200044a565b8251604114620003195760405162461bcd60e51b815260206004820152603a6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e677468000000000000606482015260840162000187565b620003236200046b565b506020830151604080850151855186939260009185919081106200034b576200034b620006c9565b016020015160f81c9050601b81148015906200036b57508060ff16601c14155b15620003cf5760405162461bcd60e51b815260206004820152603b6024820152600080516020620006e083398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c75650000000000606482015260840162000187565b6040805160008152602081018083528a905260ff83169181019190915260608101849052608081018390526001600160a01b038a169060019060a0016020604051602081039080840390855afa1580156200042e573d6000803e3d6000fd5b505050602060405103516001600160a01b031614955050505050505b9392505050565b60006020825110156200046357600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b03811681146200049f57600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b83811015620004d5578181015183820152602001620004bb565b50506000910152565b600082601f830112620004f057600080fd5b81516001600160401b03808211156200050d576200050d620004a2565b604051601f8301601f19908116603f01168101908282118183101715620005385762000538620004a2565b816040528381528660208588010111156200055257600080fd5b62000565846020830160208901620004b8565b9695505050505050565b6000806000606084860312156200058557600080fd5b8351620005928162000489565b6020850151604086015191945092506001600160401b03811115620005b657600080fd5b620005c486828701620004de565b9150509250925092565b600080600060608486031215620005e457600080fd5b8351620005f18162000489565b60208501519093506001600160401b03808211156200060f57600080fd5b6200061d87838801620004de565b935060408601519150808211156200063457600080fd5b50620005c486828701620004de565b6000825162000657818460208701620004b8565b9190910192915050565b828152604060208201526000825180604084015262000688816060850160208701620004b8565b601f01601f1916919091016060019392505050565b600060208284031215620006b057600080fd5b81516001600160e01b0319811681146200044a57600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);BigInt(1);BigInt(2);function Qf(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function eh(t,e){const n=Se(t)?et(t):t,r=Se(e)?et(e):e;return Qf(n,r)}async function Io(t,{address:e,hash:n,signature:r,...s}){const i=Se(r)?r:Je(r);try{const{data:a}=await F(t,Pr,"call")({data:Ao({abi:Ld,args:[e,n,i],bytecode:Zf}),...s});return eh(a??"0x0","0x1")}catch(a){if(a instanceof to)return!1;throw a}}async function th(t,{address:e,message:n,signature:r,...s}){const i=Wf(n);return Io(t,{address:e,hash:i,signature:r,...s})}async function nh(t,{address:e,signature:n,message:r,primaryType:s,types:i,domain:a,...o}){const c=Lf({message:r,primaryType:s,types:i,domain:a});return Io(t,{address:e,hash:c,signature:n,...o})}function Oo(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:a=t.pollingInterval}){const o=typeof i<"u"?i:t.transport.type!=="webSocket";let c;return o?(()=>{const f=Re(["watchBlockNumber",t.uid,e,n,a]);return Yt(f,{onBlockNumber:r,onError:s},h=>Dn(async()=>{var m;try{const p=await F(t,Gn,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let y=c+1n;y<p;y++)h.onBlockNumber(y,c),c=y}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(m=h.onError)==null||m.call(h,p)}},{emitOnBegin:e,interval:a}))})():(()=>{let f=!0,h=()=>f=!1;return(async()=>{try{const{unsubscribe:m}=await t.transport.subscribe({params:["newHeads"],onData(p){var x;if(!f)return;const y=yr((x=p.result)==null?void 0:x.number);r(y,c),c=y},onError(p){s==null||s(p)}});h=m,f||h()}catch(m){s==null||s(m)}})(),h})()}async function rh(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,timeout:i}){const a=Re(["waitForTransactionReceipt",t.uid,n]);let o,c,u,l=!1;return new Promise((f,h)=>{i&&setTimeout(()=>h(new xd({hash:n})),i);const m=Yt(a,{onReplaced:r,resolve:f,reject:h},p=>{const y=F(t,Oo,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(x){if(l)return;let w=x;const E=I=>{y(),I(),m()};try{if(u){if(e>1&&(!u.blockNumber||w-u.blockNumber+1n<e))return;E(()=>p.resolve(u));return}if(o||(l=!0,await bs(async()=>{o=await F(t,Js,"getTransaction")({hash:n}),o.blockNumber&&(w=o.blockNumber)},{delay:({count:I})=>~~(1<<I)*200,retryCount:6}),l=!1),u=await F(t,ys,"getTransactionReceipt")({hash:n}),e>1&&(!u.blockNumber||w-u.blockNumber+1n<e))return;E(()=>p.resolve(u))}catch(I){if(o&&(I instanceof Qa||I instanceof eo))try{c=o,l=!0;const k=await bs(()=>F(t,nt,"getBlock")({blockNumber:w,includeTransactions:!0}),{delay:({count:P})=>~~(1<<P)*200,retryCount:6,shouldRetry:({error:P})=>P instanceof ro});l=!1;const j=k.transactions.find(({from:P,nonce:v})=>P===c.from&&v===c.nonce);if(!j||(u=await F(t,ys,"getTransactionReceipt")({hash:j.hash}),e>1&&(!u.blockNumber||w-u.blockNumber+1n<e)))return;let C="replaced";j.to===c.to&&j.value===c.value?C="repriced":j.from===j.to&&j.value===0n&&(C="cancelled"),E(()=>{var P;(P=p.onReplaced)==null||P.call(p,{reason:C,replacedTransaction:c,transaction:j,transactionReceipt:u}),p.resolve(u)})}catch(k){E(()=>p.reject(k))}else E(()=>p.reject(I))}}})})})}function sh(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:a,poll:o,pollingInterval:c=t.pollingInterval}){const u=typeof o<"u"?o:t.transport.type!=="webSocket",l=a??!1;let f;return u?(()=>{const p=Re(["watchBlocks",t.uid,n,r,l,c]);return Yt(p,{onBlock:s,onError:i},y=>Dn(async()=>{var x;try{const w=await F(t,nt,"getBlock")({blockTag:e,includeTransactions:l});if(w.number&&(f!=null&&f.number)){if(w.number===f.number)return;if(w.number-f.number>1&&n)for(let E=(f==null?void 0:f.number)+1n;E<w.number;E++){const I=await F(t,nt,"getBlock")({blockNumber:E,includeTransactions:l});y.onBlock(I,f),f=I}}(!(f!=null&&f.number)||e==="pending"&&!(w!=null&&w.number)||w.number&&w.number>f.number)&&(y.onBlock(w,f),f=w)}catch(w){(x=y.onError)==null||x.call(y,w)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,y=()=>p=!1;return(async()=>{try{const{unsubscribe:x}=await t.transport.subscribe({params:["newHeads"],onData(w){var k,j,C;if(!p)return;const I=(((C=(j=(k=t.chain)==null?void 0:k.formatters)==null?void 0:j.block)==null?void 0:C.format)||ao)(w.result);s(I,f),f=I},onError(w){i==null||i(w)}});y=x,p||y()}catch(x){i==null||i(x)}})(),y})()}function ih(t,{address:e,args:n,batch:r=!0,event:s,events:i,onError:a,onLogs:o,poll:c,pollingInterval:u=t.pollingInterval,strict:l}){const f=typeof c<"u"?c:t.transport.type!=="webSocket",h=l??!1;return f?(()=>{const y=Re(["watchEvent",e,n,r,t.uid,s,u]);return Yt(y,{onLogs:o,onError:a},x=>{let w,E,I=!1;const k=Dn(async()=>{var j;if(!I){try{E=await F(t,wo,"createEventFilter")({address:e,args:n,event:s,events:i,strict:h})}catch{}I=!0;return}try{let C;if(E)C=await F(t,kr,"getFilterChanges")({filter:E});else{const P=await F(t,Gn,"getBlockNumber")({});w&&w!==P?C=await F(t,_s,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:w+1n,toBlock:P}):C=[],w=P}if(C.length===0)return;if(r)x.onLogs(C);else for(const P of C)x.onLogs([P])}catch(C){E&&C instanceof vt&&(I=!1),(j=x.onError)==null||j.call(x,C)}},{emitOnBegin:!0,interval:u});return async()=>{E&&await F(t,Ar,"uninstallFilter")({filter:E}),k()}})})():(()=>{let y=!0,x=()=>y=!1;return(async()=>{try{const w=i??(s?[s]:void 0);let E=[];w&&(E=[w.flatMap(k=>Bn({abi:[k],eventName:k.name,args:n}))],s&&(E=E[0]));const{unsubscribe:I}=await t.transport.subscribe({params:["logs",{address:e,topics:E}],onData(k){var C;if(!y)return;const j=k.result;try{const{eventName:P,args:v}=Un({abi:w,data:j.data,topics:j.topics,strict:h}),g=we(j,{args:v,eventName:P});o([g])}catch(P){let v,g;if(P instanceof xt||P instanceof zt){if(l)return;v=P.abiItem.name,g=(C=P.abiItem.inputs)==null?void 0:C.some(T=>!("name"in T&&T.name))}const S=we(j,{args:g?[]:{},eventName:v});o([S])}},onError(k){a==null||a(k)}});x=I,y||x()}catch(w){a==null||a(w)}})(),x})()}function ah(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket")?(()=>{const u=Re(["watchPendingTransactions",t.uid,e,i]);return Yt(u,{onTransactions:r,onError:n},l=>{let f;const h=Dn(async()=>{var m;try{if(!f)try{f=await F(t,xo,"createPendingTransactionFilter")({});return}catch(y){throw h(),y}const p=await F(t,kr,"getFilterChanges")({filter:f});if(p.length===0)return;if(e)l.onTransactions(p);else for(const y of p)l.onTransactions([y])}catch(p){(m=l.onError)==null||m.call(l,p)}},{emitOnBegin:!0,interval:i});return async()=>{f&&await F(t,Ar,"uninstallFilter")({filter:f}),h()}})})():(()=>{let u=!0,l=()=>u=!1;return(async()=>{try{const{unsubscribe:f}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!u)return;const m=h.result;r([m])},onError(h){n==null||n(h)}});l=f,u||l()}catch(f){n==null||n(f)}})(),l})()}function oh(t){return{call:e=>Pr(t,e),createBlockFilter:()=>Of(t),createContractEventFilter:e=>Ya(t,e),createEventFilter:e=>wo(t,e),createPendingTransactionFilter:()=>xo(t),estimateContractGas:e=>Fd(t,e),estimateGas:e=>Gs(t,e),getBalance:e=>Sf(t,e),getBlock:e=>nt(t,e),getBlockNumber:e=>Gn(t,e),getBlockTransactionCount:e=>Cf(t,e),getBytecode:e=>Rf(t,e),getChainId:()=>In(t),getContractEvents:e=>uo(t,e),getEnsAddress:e=>hf(t,e),getEnsAvatar:e=>kf(t,e),getEnsName:e=>Af(t,e),getEnsResolver:e=>If(t,e),getEnsText:e=>yo(t,e),getFeeHistory:e=>$f(t,e),estimateFeesPerGas:e=>jd(t,e),getFilterChanges:e=>kr(t,e),getFilterLogs:e=>Ff(t,e),getGasPrice:()=>Ds(t),getLogs:e=>_s(t,e),getProof:e=>Jf(t,e),estimateMaxPriorityFeePerGas:e=>Rd(t,e),getStorageAt:e=>Yf(t,e),getTransaction:e=>Js(t,e),getTransactionConfirmations:e=>Xf(t,e),getTransactionCount:e=>co(t,e),getTransactionReceipt:e=>ys(t,e),multicall:e=>Kf(t,e),prepareTransactionRequest:e=>Tr(t,e),readContract:e=>rt(t,e),sendRawTransaction:e=>zs(t,e),simulateContract:e=>qd(t,e),verifyMessage:e=>th(t,e),verifyTypedData:e=>nh(t,e),uninstallFilter:e=>Ar(t,e),waitForTransactionReceipt:e=>rh(t,e),watchBlocks:e=>sh(t,e),watchBlockNumber:e=>Oo(t,e),watchContractEvent:e=>ef(t,e),watchEvent:e=>ih(t,e),watchPendingTransactions:e=>ah(t,e)}}function ch(t,{abi:e,args:n,bytecode:r,...s}){const i=Ao({abi:e,args:n,bytecode:r});return Hs(t,{...s,data:i})}async function uh(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"})).map(r=>$s(r))}async function lh(t){return await t.request({method:"wallet_getPermissions"})}async function dh(t){return(await t.request({method:"eth_requestAccounts"})).map(n=>id(n))}async function fh(t,e){return t.request({method:"wallet_requestPermissions",params:[e]})}async function hh(t,{account:e=t.account,message:n}){if(!e)throw new Vt({docsPath:"/docs/actions/wallet/signMessage"});const r=pe(e);if(r.type==="local")return r.signMessage({message:n});const s=typeof n=="string"?ks(n):n.raw instanceof Uint8Array?Je(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]})}async function ph(t,e){var u,l,f,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new Vt({docsPath:"/docs/actions/wallet/signTransaction"});const i=pe(n);Ln({account:i,...e});const a=await F(t,In,"getChainId")({});r!==null&&po({currentChainId:a,chain:r});const o=(r==null?void 0:r.formatters)||((u=t.chain)==null?void 0:u.formatters),c=((l=o==null?void 0:o.transactionRequest)==null?void 0:l.format)||Nr;return i.type==="local"?i.signTransaction({...s,chainId:a},{serializer:(h=(f=t.chain)==null?void 0:f.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:M(a),from:i.address}]})}async function mh(t,{account:e=t.account,domain:n,message:r,primaryType:s,types:i}){if(!e)throw new Vt({docsPath:"/docs/actions/wallet/signTypedData"});const a=pe(e),o={EIP712Domain:ko({domain:n}),...i};if(Po({domain:n,message:r,primaryType:s,types:o}),a.type==="local")return a.signTypedData({domain:n,primaryType:s,types:o,message:r});const c=Re({domain:n??{},primaryType:s,types:o,message:r},(u,l)=>Se(l)?l.toLowerCase():l);return t.request({method:"eth_signTypedData_v4",params:[a.address,c]})}async function gh(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:M(e)}]})}async function bh(t,e){return await t.request({method:"wallet_watchAsset",params:e})}function yh(t){return{addChain:e=>rf(t,e),deployContract:e=>ch(t,e),getAddresses:()=>uh(t),getChainId:()=>In(t),getPermissions:()=>lh(t),prepareTransactionRequest:e=>Tr(t,e),requestAddresses:()=>dh(t),requestPermissions:e=>fh(t,e),sendRawTransaction:e=>zs(t,e),sendTransaction:e=>Hs(t,e),signMessage:e=>hh(t,e),signTransaction:e=>ph(t,e),signTypedData:e=>mh(t,e),switchChain:e=>gh(t,e),watchAsset:e=>bh(t,e),writeContract:e=>nf(t,e)}}function wh(t){const{key:e="wallet",name:n="Wallet Client",transport:r}=t;return af({...t,key:e,name:n,transport:i=>r({...i,retryCount:0}),type:"walletClient"}).extend(yh)}const nn={local:{id:31337,name:"Local Hardhat",rpcUrl:"http://127.0.0.1:8545",contracts:{updater:"0xb34cac1135c27ec810e7e6880325085783c1a7e0",faucet:"0x76b71a17d82232fd29aca475d14ed596c67c4b85"},blockTime:2e3,gasLimit:100000n,sendMethod:"eth_sendRawTransaction"},megaeth:{id:6342,name:"MegaETH Testnet",rpcUrl:"https://megaeth-testnet.rpc.caldera.xyz/http",contracts:{updater:"0xb34cac1135c27ec810e7e6880325085783c1a7e0",faucet:"0x76b71a17d82232fd29aca475d14ed596c67c4b85"},blockTime:100,gasLimit:100000n,sendMethod:"realtime_sendRawTransaction"},base:{id:84532,name:"Base Sepolia",rpcUrl:"https://sepolia.base.org",contracts:{updater:"0xb34cac1135c27ec810e7e6880325085783c1a7e0",faucet:"0x76b71a17d82232fd29aca475d14ed596c67c4b85"},blockTime:2e3,gasLimit:100000n,sendMethod:"eth_sendRawTransaction"}},Gr=[{name:"update",type:"function",stateMutability:"nonpayable",inputs:[],outputs:[]},{name:"number",type:"function",stateMutability:"view",inputs:[],outputs:[{name:"",type:"uint256"}]}];class xh{constructor(){this.clientCache={},this.gasParams={},this.preSignedPool={},this.metrics={totalTransactions:0,averageTime:0,networkStats:{}},this.isInitialized=!1,this.currentWallet=null}async initializeOptimized(e,n="local",r=20){try{console.log(`🚀 Инициализация оптимизированной системы для ${n}...`);const s=performance.now();this.currentWallet=e,await this.switchToChain(n),await this.createCachedClient(n),await this.cacheGasParams(n),await this.preSignBatch(n,r),this.isInitialized=!0;const i=performance.now()-s;return console.log(`✅ Система инициализирована за ${i.toFixed(2)}ms`),console.log(`📦 Предподписано ${r} транзакций для мгновенной отправки`),!0}catch(s){throw console.error("❌ Ошибка инициализации:",s),s}}async switchToChain(e){const n=nn[e];if(!n)throw new Error(`Неизвестная сеть: ${e}`);try{(await(await this.currentWallet.getEthersProvider()).getNetwork()).chainId!==n.id&&(console.log(`🔄 Переключение на сеть ${n.name}...`),await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${n.id.toString(16)}`}]}),await new Promise(i=>setTimeout(i,1e3)))}catch(r){console.warn("Не удалось переключить сеть через wallet_switchEthereumChain:",r)}}async createCachedClient(e){if(this.clientCache[e])return this.clientCache[e];const n=nn[e],r=await this.currentWallet.getEthersProvider(),s=wh({transport:lf(r)}).extend(oh);return this.clientCache[e]=s,console.log(`🔧 Создан и кеширован клиент для ${n.name}`),s}async cacheGasParams(e){if(this.gasParams[e])return this.gasParams[e];const n=this.clientCache[e];try{const r=await n.getGasPrice(),s={maxFeePerGas:r*120n/100n,maxPriorityFeePerGas:r*10n/100n,gasPrice:r};return this.gasParams[e]=s,console.log(`⛽ Кеширован газ для ${e}: ${s.maxFeePerGas.toString()}`),s}catch{console.warn("Не удалось получить газовые параметры, используем значения по умолчанию");const s={maxFeePerGas:20000000000n,maxPriorityFeePerGas:1000000000n,gasPrice:20000000000n};return this.gasParams[e]=s,s}}async preSignBatch(e,n){const r=this.clientCache[e],s=nn[e],i=this.gasParams[e];try{const o=(await r.getAddresses())[0],c=await r.getTransactionCount({address:o,blockTag:"pending"});console.log(`📝 Предподписание ${n} транзакций, начиная с nonce ${c}...`);const u=Ce({abi:Gr,functionName:"update",args:[]}),l=[];for(let f=0;f<n;f++){const h={account:o,to:s.contracts.updater,data:u,nonce:c+f,maxFeePerGas:i.maxFeePerGas,maxPriorityFeePerGas:i.maxPriorityFeePerGas,value:0n,type:"eip1559",gas:s.gasLimit},m=await r.signTransaction(h);l.push(m)}return this.preSignedPool[e]={transactions:l,currentIndex:0,baseNonce:c,hasTriggeredRefill:!1},console.log(`✅ Предподписано ${n} транзакций для ${e}`),!0}catch(a){throw console.error("❌ Ошибка предподписания:",a),a}}getNextTransaction(e){const n=this.preSignedPool[e];if(!n||n.currentIndex>=n.transactions.length)throw new Error(`Пул транзакций для ${e} пуст или исчерпан`);const r=n.transactions[n.currentIndex];return n.currentIndex++,n.currentIndex>=n.transactions.length/2&&!n.hasTriggeredRefill&&(n.hasTriggeredRefill=!0,console.log(`🔄 Запуск автодозаправки пула для ${e}...`),this.extendPool(e,n.baseNonce+n.transactions.length,10).then(()=>{console.log(`✅ Пул ${e} успешно дозаправлен`),n.hasTriggeredRefill=!1}).catch(s=>{console.error(`❌ Ошибка дозаправки пула ${e}:`,s),n.hasTriggeredRefill=!1})),r}async extendPool(e,n,r){const s=this.clientCache[e],i=nn[e],a=this.gasParams[e];try{const c=(await s.getAddresses())[0],u=Ce({abi:Gr,functionName:"update",args:[]}),l=[];for(let f=0;f<r;f++){const h={account:c,to:i.contracts.updater,data:u,nonce:n+f,maxFeePerGas:a.maxFeePerGas,maxPriorityFeePerGas:a.maxPriorityFeePerGas,value:0n,type:"eip1559",gas:i.gasLimit},m=await s.signTransaction(h);l.push(m)}return this.preSignedPool[e].transactions.push(...l),!0}catch(o){throw console.error("Ошибка дозаправки пула:",o),o}}async sendPlayerAction(e){if(!this.isInitialized)throw new Error("Система не инициализирована. Вызовите initializeOptimized() сначала.");const n=performance.now();try{let r;switch(e){case"megaeth":r=await this.sendMegaethTransaction(n);break;case"base":r=await this.sendBaseTransaction(n);break;default:r=await this.sendRegularTransaction(e,n)}return this.updateMetrics(e,r),r}catch(r){throw console.error(`❌ Ошибка отправки действия для ${e}:`,r),r}}async sendMegaethTransaction(e){const n=this.clientCache.megaeth,r=this.getNextTransaction("megaeth");try{const s=await n.request({method:"realtime_sendRawTransaction",params:[r]}),i=performance.now()-e;return console.log(`⚡ MegaETH транзакция отправлена за ${i.toFixed(2)}ms`),i}catch{return console.warn("Fallback на обычную отправку для MegaETH"),await this.sendRegularTransaction("megaeth",e)}}async sendBaseTransaction(e){const n=this.clientCache.base,r=this.getNextTransaction("base"),s=await n.sendRawTransaction({serializedTransaction:r}),i=performance.now()-e;return console.log(`🔵 Base транзакция отправлена за ${i.toFixed(2)}ms, hash: ${s}`),i}async sendRegularTransaction(e,n){const r=this.clientCache[e],s=this.getNextTransaction(e),i=await r.sendRawTransaction({serializedTransaction:s});if(e==="local"){const o=await r.waitForTransactionReceipt({hash:i});console.log(`📋 Транзакция подтверждена в блоке ${o.blockNumber}`)}const a=performance.now()-n;return console.log(`🔗 ${e} транзакция отправлена за ${a.toFixed(2)}ms, hash: ${i}`),a}updateMetrics(e,n){this.metrics.totalTransactions++,this.metrics.averageTime=(this.metrics.averageTime*(this.metrics.totalTransactions-1)+n)/this.metrics.totalTransactions,this.metrics.networkStats[e]||(this.metrics.networkStats[e]={count:0,averageTime:0,minTime:1/0,maxTime:0});const r=this.metrics.networkStats[e];r.count++,r.averageTime=(r.averageTime*(r.count-1)+n)/r.count,r.minTime=Math.min(r.minTime,n),r.maxTime=Math.max(r.maxTime,n)}async getCurrentNumber(e){const n=this.clientCache[e],r=nn[e];try{const s=await n.readContract({address:r.contracts.updater,abi:Gr,functionName:"number"});return Number(s)}catch(s){return console.error("Ошибка чтения контракта:",s),null}}getPerformanceStats(){return{...this.metrics,poolStatus:Object.keys(this.preSignedPool).reduce((e,n)=>{const r=this.preSignedPool[n];return e[n]={total:r.transactions.length,used:r.currentIndex,remaining:r.transactions.length-r.currentIndex},e},{})}}reset(){this.clientCache={},this.gasParams={},this.preSignedPool={},this.metrics={totalTransactions:0,averageTime:0,networkStats:{}},this.isInitialized=!1,this.currentWallet=null,console.log("🔄 Система сброшена")}}const Pt=new xh,So=()=>{const[t,e]=$.useState(!1),[n,r]=$.useState("local"),[s,i]=$.useState(!1),[a,o]=$.useState(null),[c,u]=$.useState(null),[l,f]=$.useState({lastTransactionTime:null,transactionsThisSession:0,averageTimeThisSession:0}),[h,m]=$.useState({currentNumber:0,isReading:!1}),{ready:p,authenticated:y,user:x}=jn(),w=$.useRef({startTime:null,transactionTimes:[]}),E=$.useCallback(async(S="local",T=20)=>{if(!p||!y||!(x!=null&&x.wallet))return console.warn("Privy не готов для инициализации blockchain системы"),!1;i(!0),o(null);try{return console.log("🎯 Инициализация оптимизированной системы для игры..."),await Pt.initializeOptimized(x.wallet,S,T),e(!0),r(S),w.current={startTime:Date.now(),transactionTimes:[]},f({lastTransactionTime:null,transactionsThisSession:0,averageTimeThisSession:0}),console.log("✅ Система готова к отправке действий игрока в блокчейн!"),await j(),!0}catch(z){return console.error("❌ Ошибка инициализации системы:",z),o(z.message),!1}finally{i(!1)}},[p,y,x]),I=$.useCallback(async()=>{if(!t)throw new Error("Система не инициализирована");try{const S=performance.now(),T=await Pt.sendPlayerAction(n),z=performance.now()-S;w.current.transactionTimes.push(T);const ve=w.current.transactionTimes.reduce((Xt,Sr)=>Xt+Sr,0)/w.current.transactionTimes.length;f(Xt=>({lastTransactionTime:T,transactionsThisSession:Xt.transactionsThisSession+1,averageTimeThisSession:ve}));const Or=Pt.getPerformanceStats();return u(Or),console.log(`🎮 Действие игрока отправлено за ${T.toFixed(2)}ms`),{success:!0,executionTime:T,totalActionTime:z,transactionHash:null}}catch(S){return console.error("❌ Ошибка отправки действия игрока:",S),o(S.message),{success:!1,error:S.message,executionTime:null}}},[t,n]),k=$.useCallback(async(S,T=20)=>{if(S===n)return console.log(`Уже подключен к сети ${S}`),!0;i(!0);try{Pt.reset(),e(!1);const z=await E(S,T);return z&&console.log(`🔄 Успешно переключились на ${S}`),z}catch(z){return console.error("❌ Ошибка переключения сети:",z),o(z.message),!1}finally{i(!1)}},[n,E]),j=$.useCallback(async()=>{if(t){m(S=>({...S,isReading:!0}));try{const S=await Pt.getCurrentNumber(n);m({currentNumber:S||0,isReading:!1})}catch(S){console.warn("Не удалось обновить состояние контракта:",S),m(T=>({...T,isReading:!1}))}}},[t,n]);$.useEffect(()=>{if(!t)return;const S=setInterval(j,5e3);return()=>clearInterval(S)},[t,j]);const C=$.useCallback(()=>[{key:"local",name:"Local Hardhat",description:"Локальная тестовая сеть",icon:"🏠",blockTime:"2s"},{key:"megaeth",name:"MegaETH Testnet",description:"Сверхбыстрая сеть 100k TPS",icon:"⚡",blockTime:"100ms"},{key:"base",name:"Base Sepolia",description:"Base L2 тестовая сеть",icon:"🔵",blockTime:"2s"}],[]),P=$.useCallback(()=>p&&y&&(x==null?void 0:x.wallet)&&t,[p,y,x,t]),v=$.useCallback(()=>{if(!(c!=null&&c.poolStatus))return null;const S=c.poolStatus[n];return S?{...S,utilizationPercent:Math.round(S.used/S.total*100),needsRefill:S.remaining<S.total*.3}:null},[c,n]),g=$.useCallback(()=>{Pt.reset(),e(!1),o(null),u(null),f({lastTransactionTime:null,transactionsThisSession:0,averageTimeThisSession:0}),m({currentNumber:0,isReading:!1}),w.current={startTime:null,transactionTimes:[]},console.log("🔄 Система сброшена")},[]);return $.useEffect(()=>()=>{t&&g()},[]),{initializeSystem:E,sendPlayerAction:I,switchNetwork:k,updateContractState:j,resetSystem:g,isInitialized:t,currentNetwork:n,isLoading:s,error:a,isSystemReady:P(),performanceStats:c,realtimeStats:l,contractState:h,poolInfo:v(),availableNetworks:C(),sessionDuration:w.current.startTime?Date.now()-w.current.startTime:0}},vh=()=>{const{initializeSystem:t,sendPlayerAction:e,switchNetwork:n,resetSystem:r,isInitialized:s,currentNetwork:i,isLoading:a,error:o,isSystemReady:c,performanceStats:u,realtimeStats:l,contractState:f,poolInfo:h,availableNetworks:m,sessionDuration:p}=So(),[y,x]=$.useState(!1),[w,E]=$.useState(!1),[I,k]=$.useState(null);$.useEffect(()=>{if(w&&c){const g=setInterval(async()=>{try{await e()}catch(S){console.error("Ошибка автоотправки:",S),E(!1)}},1e3);return k(g),()=>clearInterval(g)}else I&&(clearInterval(I),k(null))},[w,c,e]);const j=async g=>{if(g===i)return;await n(g)&&console.log(`✅ Переключились на ${g}`)},C=async()=>{if(c)try{const g=await e();g.success&&console.log(`🎯 Действие выполнено за ${g.executionTime.toFixed(2)}ms`)}catch(g){console.error("Ошибка выполнения действия:",g)}},P=g=>g<1e3?`${g.toFixed(2)}ms`:`${(g/1e3).toFixed(2)}s`,v=g=>{const S=Math.floor(g/1e3),T=Math.floor(S/60),z=Math.floor(T/60);return z>0?`${z}:${(T%60).toString().padStart(2,"0")}:${(S%60).toString().padStart(2,"0")}`:T>0?`${T}:${(S%60).toString().padStart(2,"0")}`:`${S}s`};return d.jsxs("div",{className:"optimized-blockchain-panel",children:[d.jsx("div",{className:"panel-header",onClick:()=>x(!y),children:d.jsxs("div",{className:"header-content",children:[d.jsxs("div",{className:"status-indicator",children:[d.jsx("div",{className:`status-light ${c?"ready":a?"loading":"error"}`}),d.jsx("span",{className:"status-text",children:c?"Готов к бою":a?"Инициализация...":"Не инициализирован"})]}),c&&l.lastTransactionTime&&d.jsxs("div",{className:"last-transaction",children:[d.jsx("span",{className:"metric-value",children:P(l.lastTransactionTime)}),d.jsx("span",{className:"metric-label",children:"последняя транзакция"})]}),d.jsx("div",{className:"expand-arrow",children:y?"▼":"▶"})]})}),y&&d.jsxs("div",{className:"panel-content",children:[o&&d.jsxs("div",{className:"error-message",children:["❌ ",o]}),d.jsxs("div",{className:"network-selection",children:[d.jsx("h4",{children:"🌐 Выбор сети"}),d.jsx("div",{className:"network-grid",children:m.map(g=>d.jsxs("button",{className:`network-button ${i===g.key?"active":""}`,onClick:()=>j(g.key),disabled:a,children:[d.jsx("div",{className:"network-icon",children:g.icon}),d.jsxs("div",{className:"network-info",children:[d.jsx("div",{className:"network-name",children:g.name}),d.jsx("div",{className:"network-description",children:g.description}),d.jsxs("div",{className:"network-speed",children:["Блоки: ",g.blockTime]})]})]},g.key))})]}),d.jsx("div",{className:"control-buttons",children:s?d.jsxs("div",{className:"action-buttons",children:[d.jsx("button",{className:"action-button manual",onClick:C,disabled:!c||a,children:"🎯 Отправить действие"}),d.jsx("button",{className:`action-button auto ${w?"active":""}`,onClick:()=>E(!w),disabled:!c,children:w?"⏸️ Остановить":"⚡ Авто режим"}),d.jsx("button",{className:"action-button reset",onClick:r,children:"🔄 Сброс"})]}):d.jsx("button",{className:"init-button",onClick:()=>t(i),disabled:a,children:"🚀 Инициализировать систему"})}),c&&d.jsxs("div",{className:"performance-metrics",children:[d.jsx("h4",{children:"📊 Метрики производительности"}),d.jsxs("div",{className:"realtime-stats",children:[d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:l.transactionsThisSession}),d.jsx("div",{className:"stat-label",children:"Транзакций в сессии"})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:l.averageTimeThisSession?P(l.averageTimeThisSession):"N/A"}),d.jsx("div",{className:"stat-label",children:"Среднее время"})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:v(p)}),d.jsx("div",{className:"stat-label",children:"Длительность сессии"})]}),d.jsxs("div",{className:"stat-card",children:[d.jsx("div",{className:"stat-value",children:f.currentNumber}),d.jsx("div",{className:"stat-label",children:"Счетчик контракта"})]})]}),h&&d.jsxs("div",{className:"pool-info",children:[d.jsx("h5",{children:"📦 Пул транзакций"}),d.jsxs("div",{className:"pool-progress",children:[d.jsx("div",{className:"progress-bar",children:d.jsx("div",{className:"progress-fill",style:{width:`${h.utilizationPercent}%`}})}),d.jsxs("div",{className:"pool-stats",children:[d.jsxs("span",{children:["Использовано: ",h.used,"/",h.total]}),d.jsxs("span",{children:["Осталось: ",h.remaining]}),h.needsRefill&&d.jsx("span",{className:"refill-warning",children:"⚠️ Нужна дозаправка"})]})]})]}),u&&d.jsxs("div",{className:"general-stats",children:[d.jsx("h5",{children:"📈 Общая статистика"}),d.jsxs("div",{className:"stats-grid",children:[d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-name",children:"Всего транзакций:"}),d.jsx("span",{className:"stat-value",children:u.totalTransactions})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-name",children:"Общее среднее время:"}),d.jsx("span",{className:"stat-value",children:P(u.averageTime)})]})]}),Object.keys(u.networkStats).length>0&&d.jsxs("div",{className:"network-stats",children:[d.jsx("h6",{children:"По сетям:"}),Object.entries(u.networkStats).map(([g,S])=>d.jsxs("div",{className:"network-stat",children:[d.jsxs("span",{className:"network-name",children:[g,":"]}),d.jsxs("span",{className:"network-values",children:[S.count," tx, avg: ",P(S.averageTime),", min: ",P(S.minTime),", max: ",P(S.maxTime)]})]},g))]})]})]})]}),d.jsx("style",{jsx:!0,children:`
        .optimized-blockchain-panel {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          border-radius: 12px;
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
          margin: 20px;
          overflow: hidden;
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .panel-header {
          padding: 16px 20px;
          cursor: pointer;
          transition: background-color 0.2s;
          border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .panel-header:hover {
          background-color: rgba(255, 255, 255, 0.05);
        }

        .header-content {
          display: flex;
          align-items: center;
          justify-content: space-between;
          color: white;
        }

        .status-indicator {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .status-light {
          width: 10px;
          height: 10px;
          border-radius: 50%;
          animation: pulse 2s infinite;
        }

        .status-light.ready {
          background-color: #4ade80;
        }

        .status-light.loading {
          background-color: #fbbf24;
        }

        .status-light.error {
          background-color: #ef4444;
        }

        .last-transaction {
          display: flex;
          flex-direction: column;
          align-items: center;
        }

        .metric-value {
          font-weight: bold;
          font-size: 18px;
        }

        .metric-label {
          font-size: 12px;
          opacity: 0.8;
        }

        .expand-arrow {
          font-size: 14px;
          transition: transform 0.2s;
        }

        .panel-content {
          padding: 20px;
          background: rgba(255, 255, 255, 0.95);
          color: #333;
        }

        .error-message {
          background: #fee2e2;
          border: 1px solid #fecaca;
          color: #dc2626;
          padding: 12px;
          border-radius: 8px;
          margin-bottom: 16px;
        }

        .network-selection h4 {
          margin: 0 0 12px 0;
          color: #374151;
        }

        .network-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 12px;
          margin-bottom: 20px;
        }

        .network-button {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px;
          border: 2px solid #e5e7eb;
          border-radius: 8px;
          background: white;
          cursor: pointer;
          transition: all 0.2s;
        }

        .network-button:hover {
          border-color: #667eea;
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .network-button.active {
          border-color: #667eea;
          background: #f3f4f6;
        }

        .network-icon {
          font-size: 24px;
        }

        .network-info {
          flex: 1;
        }

        .network-name {
          font-weight: bold;
          margin-bottom: 4px;
        }

        .network-description {
          font-size: 12px;
          color: #6b7280;
          margin-bottom: 2px;
        }

        .network-speed {
          font-size: 11px;
          color: #9ca3af;
        }

        .control-buttons {
          margin-bottom: 20px;
        }

        .init-button {
          width: 100%;
          padding: 16px;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          border: none;
          border-radius: 8px;
          font-size: 16px;
          font-weight: bold;
          cursor: pointer;
          transition: transform 0.2s;
        }

        .init-button:hover {
          transform: translateY(-2px);
        }

        .action-buttons {
          display: flex;
          gap: 12px;
          flex-wrap: wrap;
        }

        .action-button {
          flex: 1;
          min-width: 120px;
          padding: 12px 16px;
          border: none;
          border-radius: 8px;
          font-weight: bold;
          cursor: pointer;
          transition: all 0.2s;
        }

        .action-button.manual {
          background: #10b981;
          color: white;
        }

        .action-button.auto {
          background: #f59e0b;
          color: white;
        }

        .action-button.auto.active {
          background: #dc2626;
        }

        .action-button.reset {
          background: #6b7280;
          color: white;
        }

        .action-button:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .performance-metrics h4 {
          margin: 0 0 16px 0;
          color: #374151;
        }

        .realtime-stats {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: 12px;
          margin-bottom: 20px;
        }

        .stat-card {
          background: white;
          padding: 16px;
          border-radius: 8px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
          text-align: center;
        }

        .stat-value {
          font-size: 24px;
          font-weight: bold;
          color: #667eea;
          margin-bottom: 4px;
        }

        .stat-label {
          font-size: 12px;
          color: #6b7280;
        }

        .pool-info {
          background: white;
          padding: 16px;
          border-radius: 8px;
          margin-bottom: 16px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .pool-info h5 {
          margin: 0 0 12px 0;
          color: #374151;
        }

        .progress-bar {
          width: 100%;
          height: 8px;
          background: #e5e7eb;
          border-radius: 4px;
          overflow: hidden;
          margin-bottom: 8px;
        }

        .progress-fill {
          height: 100%;
          background: linear-gradient(90deg, #10b981, #059669);
          transition: width 0.3s;
        }

        .pool-stats {
          display: flex;
          justify-content: space-between;
          font-size: 12px;
          color: #6b7280;
        }

        .refill-warning {
          color: #f59e0b !important;
          font-weight: bold;
        }

        .general-stats {
          background: white;
          padding: 16px;
          border-radius: 8px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .general-stats h5 {
          margin: 0 0 12px 0;
          color: #374151;
        }

        .stats-grid {
          display: grid;
          gap: 8px;
          margin-bottom: 16px;
        }

        .stat-item {
          display: flex;
          justify-content: space-between;
          padding: 8px 0;
          border-bottom: 1px solid #f3f4f6;
        }

        .stat-name {
          color: #6b7280;
        }

        .stat-value {
          font-weight: bold;
          color: #374151;
        }

        .network-stats h6 {
          margin: 8px 0;
          color: #374151;
        }

        .network-stat {
          display: flex;
          justify-content: space-between;
          padding: 4px 0;
          font-size: 12px;
        }

        .network-name {
          color: #6b7280;
          font-weight: bold;
        }

        .network-values {
          color: #374151;
        }

        @keyframes pulse {
          0%, 100% {
            opacity: 1;
          }
          50% {
            opacity: 0.5;
          }
        }

        @media (max-width: 768px) {
          .optimized-blockchain-panel {
            margin: 10px;
          }
          
          .network-grid {
            grid-template-columns: 1fr;
          }
          
          .action-buttons {
            flex-direction: column;
          }
          
          .realtime-stats {
            grid-template-columns: repeat(2, 1fr);
          }
        }
      `})]})},Eh=()=>{const[t,e]=$.useState(!1),[n,r]=$.useState(0),[s,i]=$.useState(30),[a,o]=$.useState([]),{sendPlayerAction:c,isSystemReady:u,realtimeStats:l,contractState:f}=So(),h=$.useRef(null),m=$.useRef(null),p=$.useCallback(async()=>{if(!t||!u)return;const w=performance.now();r(E=>E+1);try{const E=await c();if(E.success){const I={id:Date.now(),actionTime:Date.now()-m.current,blockchainTime:E.executionTime,totalTime:performance.now()-w,success:!0};o(k=>[I,...k.slice(0,9)]),console.log(`🎮 Действие в игре выполнено за ${E.executionTime.toFixed(2)}ms`)}else console.error("❌ Ошибка отправки действия:",E.error),r(I=>Math.max(0,I-1))}catch(E){console.error("❌ Критическая ошибка при отправке действия:",E),r(I=>Math.max(0,I-1))}},[t,u,c]),y=$.useCallback(()=>{if(!u){alert("Сначала инициализируйте блокчейн систему!");return}e(!0),r(0),i(30),o([]),m.current=Date.now(),h.current=setInterval(()=>{i(w=>w<=1?(e(!1),0):w-1)},1e3),console.log("🎮 Игра началась! Каждое действие отправляется в блокчейн!")},[u]),x=$.useCallback(()=>{e(!1),h.current&&(clearInterval(h.current),h.current=null),console.log("🏁 Игра окончена!")},[]);return $.useEffect(()=>()=>{h.current&&clearInterval(h.current)},[]),$.useEffect(()=>{s===0&&t&&x()},[s,t,x]),d.jsxs("div",{className:"game-demo",children:[d.jsxs("div",{className:"demo-container",children:[d.jsx(vh,{}),d.jsxs("div",{className:"game-section",children:[d.jsxs("div",{className:"game-header",children:[d.jsx("h2",{children:"🎮 Blockchain Game Demo"}),d.jsx("p",{children:"Каждое действие отправляется в ваш Updater контракт!"})]}),d.jsxs("div",{className:"game-stats",children:[d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Счет:"}),d.jsx("span",{className:"stat-value",children:n})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Время:"}),d.jsxs("span",{className:"stat-value",children:[s,"s"]})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Контракт:"}),d.jsx("span",{className:"stat-value",children:f.currentNumber})]}),l.transactionsThisSession>0&&d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Ср. время:"}),d.jsxs("span",{className:"stat-value",children:[l.averageTimeThisSession.toFixed(2),"ms"]})]})]}),d.jsx("div",{className:"game-area",children:t?d.jsxs("div",{className:"game-active",children:[d.jsxs("div",{className:"action-zone",children:[d.jsx("button",{className:"action-button-big",onClick:p,disabled:!u,children:"🎯 ДЕЙСТВИЕ!"}),d.jsx("p",{className:"action-hint",children:"Нажимайте для отправки действий в блокчейн!"})]}),d.jsx("button",{className:"stop-button",onClick:x,children:"⏹️ Остановить игру"})]}):d.jsxs("div",{className:"game-start",children:[d.jsx("button",{className:"start-button",onClick:y,disabled:!u,children:u?"🚀 Начать игру":"⏳ Ожидание инициализации..."}),!u&&d.jsx("p",{className:"init-hint",children:"Инициализируйте блокчейн систему в панели выше"})]})}),a.length>0&&d.jsxs("div",{className:"action-history",children:[d.jsx("h4",{children:"📝 История действий"}),d.jsx("div",{className:"history-list",children:a.map(w=>d.jsxs("div",{className:"history-item",children:[d.jsxs("div",{className:"history-time",children:[(w.actionTime/1e3).toFixed(1),"s"]}),d.jsxs("div",{className:"history-details",children:[d.jsxs("span",{className:"blockchain-time",children:["Блокчейн: ",w.blockchainTime.toFixed(2),"ms"]}),d.jsxs("span",{className:"total-time",children:["Общее: ",w.totalTime.toFixed(2),"ms"]})]}),d.jsx("div",{className:"history-status",children:w.success?"✅":"❌"})]},w.id))})]})]})]}),d.jsx("style",{jsx:!0,children:`
        .game-demo {
          min-height: 100vh;
          background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
          padding: 20px;
          color: white;
        }

        .demo-container {
          max-width: 1200px;
          margin: 0 auto;
        }

        .game-section {
          background: rgba(255, 255, 255, 0.1);
          backdrop-filter: blur(10px);
          border-radius: 16px;
          padding: 24px;
          margin-top: 20px;
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .game-header {
          text-align: center;
          margin-bottom: 24px;
        }

        .game-header h2 {
          margin: 0 0 8px 0;
          font-size: 28px;
          background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .game-header p {
          margin: 0;
          opacity: 0.8;
          font-size: 16px;
        }

        .game-stats {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: 16px;
          margin-bottom: 24px;
        }

        .stat-item {
          background: rgba(255, 255, 255, 0.1);
          padding: 16px;
          border-radius: 12px;
          text-align: center;
          border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat-label {
          display: block;
          font-size: 14px;
          opacity: 0.7;
          margin-bottom: 4px;
        }

        .stat-value {
          display: block;
          font-size: 24px;
          font-weight: bold;
          color: #4ecdc4;
        }

        .game-area {
          background: rgba(255, 255, 255, 0.05);
          border-radius: 16px;
          padding: 32px;
          text-align: center;
          margin-bottom: 24px;
          border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .game-start {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 16px;
        }

        .start-button {
          padding: 20px 40px;
          font-size: 20px;
          font-weight: bold;
          background: linear-gradient(45deg, #ff6b6b, #ff8e53);
          color: white;
          border: none;
          border-radius: 16px;
          cursor: pointer;
          transition: all 0.3s ease;
          box-shadow: 0 8px 24px rgba(255, 107, 107, 0.3);
        }

        .start-button:hover:not(:disabled) {
          transform: translateY(-4px);
          box-shadow: 0 12px 32px rgba(255, 107, 107, 0.4);
        }

        .start-button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
          transform: none !important;
        }

        .init-hint {
          margin: 0;
          opacity: 0.7;
          font-size: 14px;
        }

        .game-active {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 24px;
        }

        .action-zone {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 12px;
        }

        .action-button-big {
          width: 200px;
          height: 200px;
          font-size: 24px;
          font-weight: bold;
          background: linear-gradient(45deg, #4ecdc4, #44a08d);
          color: white;
          border: none;
          border-radius: 50%;
          cursor: pointer;
          transition: all 0.2s ease;
          box-shadow: 0 8px 24px rgba(78, 205, 196, 0.3);
          border: 4px solid rgba(255, 255, 255, 0.2);
        }

        .action-button-big:hover:not(:disabled) {
          transform: scale(1.05);
          box-shadow: 0 12px 32px rgba(78, 205, 196, 0.4);
        }

        .action-button-big:active {
          transform: scale(0.95);
        }

        .action-button-big:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .action-hint {
          margin: 0;
          opacity: 0.8;
          font-size: 16px;
        }

        .stop-button {
          padding: 12px 24px;
          font-size: 16px;
          background: rgba(239, 68, 68, 0.8);
          color: white;
          border: none;
          border-radius: 12px;
          cursor: pointer;
          transition: all 0.2s;
        }

        .stop-button:hover {
          background: rgba(239, 68, 68, 1);
          transform: translateY(-2px);
        }

        .action-history {
          background: rgba(255, 255, 255, 0.05);
          border-radius: 12px;
          padding: 20px;
          border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .action-history h4 {
          margin: 0 0 16px 0;
          color: #4ecdc4;
        }

        .history-list {
          display: flex;
          flex-direction: column;
          gap: 8px;
          max-height: 300px;
          overflow-y: auto;
        }

        .history-item {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 12px;
          background: rgba(255, 255, 255, 0.05);
          border-radius: 8px;
          border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .history-time {
          font-weight: bold;
          color: #ff8e53;
          min-width: 60px;
        }

        .history-details {
          display: flex;
          flex-direction: column;
          gap: 2px;
          flex: 1;
          margin-left: 12px;
        }

        .blockchain-time {
          font-size: 14px;
          color: #4ecdc4;
        }

        .total-time {
          font-size: 12px;
          opacity: 0.7;
        }

        .history-status {
          font-size: 18px;
        }

        @media (max-width: 768px) {
          .game-stats {
            grid-template-columns: repeat(2, 1fr);
          }
          
          .action-button-big {
            width: 150px;
            height: 150px;
            font-size: 20px;
          }
          
          .game-area {
            padding: 24px 16px;
          }
          
          .history-item {
            flex-direction: column;
            align-items: flex-start;
            gap: 8px;
          }
          
          .history-details {
            margin-left: 0;
            width: 100%;
          }
        }
      `})]})},Nh=()=>{const t="cme84q0og02aalc0bh9blzwa9",[e,n]=$.useState("network-selection"),[r,s]=$.useState(null),i={appearance:{theme:"light",accentColor:"#7FBC7F",logo:"https://your-logo-url.com/logo.png"},embeddedWallets:{createOnLogin:"users-without-wallets",noPromptOnSignature:!1},loginMethods:["email","wallet"],supportedChains:[{id:6342,name:"MegaETH Testnet",network:"megaeth-testnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://carrot.megaeth.com/rpc"],webSocket:["wss://carrot.megaeth.com/ws"]}},blockExplorers:{default:{name:"MegaETH Explorer",url:"https://carrot.megaeth.com"}}},{id:84532,name:"Base Sepolia",network:"base-sepolia",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Base Sepolia Explorer",url:"https://sepolia.basescan.org"}}},{id:10143,name:"Monad Testnet",network:"monad-testnet",nativeCurrency:{name:"Monad",symbol:"MON",decimals:18},rpcUrls:{default:{http:["https://testnet-rpc.monad.xyz"]}},blockExplorers:{default:{name:"Monad Explorer",url:"https://testnet.monadexplorer.com"}}},{id:1,name:"Ethereum",network:"homestead",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth-mainnet.g.alchemy.com/v2/your-api-key"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io"}}},{id:11155111,name:"Sepolia",network:"sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.infura.io/v3/your-api-key"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io"}}}]},a=f=>{s(f)},o=f=>{s(f),n("game")},c=()=>{n("game")},u=()=>{n("network-selection"),s(null)},l=()=>{n("network-selection"),s(null)};return d.jsx(Go,{appId:t,config:i,children:d.jsx("div",{className:"app",children:e==="network-selection"?d.jsxs("div",{children:[d.jsx("div",{style:{position:"absolute",top:"20px",right:"20px",zIndex:1e3},children:d.jsx("button",{onClick:()=>n("blockchain-demo"),style:{background:"linear-gradient(45deg, #667eea, #764ba2)",color:"white",border:"none",borderRadius:"8px",padding:"12px 20px",cursor:"pointer",fontWeight:"bold",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:"🚀 Blockchain Demo"})}),d.jsx(Uu,{onNetworkSelect:a,onStartGame:o})]}):e==="blockchain-demo"?d.jsxs("div",{children:[d.jsx("div",{style:{position:"absolute",top:"20px",left:"20px",zIndex:1e3},children:d.jsx("button",{onClick:()=>n("network-selection"),style:{background:"rgba(255,255,255,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"8px",padding:"12px 20px",cursor:"pointer",fontWeight:"bold"},children:"← Назад к игре"})}),d.jsx(Eh,{})]}):e==="wallet-connection"?d.jsxs("div",{children:[d.jsx("div",{className:"back-to-wallet",children:d.jsx("button",{className:"back-button-small",onClick:u,children:"← Back to Network Selection"})}),d.jsx(Du,{onWalletConnected:c})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"back-to-network-button",children:d.jsx("button",{className:"back-button",onClick:u,children:"← Back to Network Selection"})}),r&&!r.isWeb2&&d.jsx(Lu,{selectedNetwork:r,onDisconnect:l,disableNetworkControls:!0}),d.jsx("div",{className:"game-layout",children:d.jsx("div",{className:"game-header",children:d.jsx("div",{className:"header-center",children:d.jsxs("div",{className:"title",children:["Buddy Runner",r&&r.isWeb2&&d.jsx("span",{className:"web2-mode",children:" - Classic Mode"})]})})})}),d.jsx(Mu,{selectedNetwork:r}),d.jsxs("div",{className:"instructions",children:[d.jsx("p",{className:"main-instruction",children:"📱 Press SPACE or tap to make Buddy jump!"}),d.jsx("p",{className:"help-text",children:"Help our brave bunny Buddy hop over the giant carrots and achieve the highest score!"}),d.jsx("p",{className:"warning-text",children:"Watch out for those sneaky garden carrots!"})]})]})})})};_r.createRoot(document.getElementById("root")).render(d.jsx(zo.StrictMode,{children:d.jsx(Nh,{})}));export{O as B,no as H,dn as I,We as a,Se as b,Pr as c,pd as d,$n as e,$a as g,tt as i,Re as s};
