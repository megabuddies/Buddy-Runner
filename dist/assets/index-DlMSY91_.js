var Js=Object.defineProperty;var xn=s=>{throw TypeError(s)};var Ys=(s,t,e)=>t in s?Js(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var h=(s,t,e)=>Ys(s,typeof t!="symbol"?t+"":t,e),ze=(s,t,e)=>t.has(s)||xn("Cannot "+e);var m=(s,t,e)=>(ze(s,t,"read from private field"),e?e.call(s):t.get(s)),P=(s,t,e)=>t.has(s)?xn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),O=(s,t,e,n)=>(ze(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),j=(s,t,e)=>(ze(s,t,"access private method"),e);var En=(s,t,e,n)=>({set _(r){O(s,t,r,e)},get _(){return m(s,t,n)}});import{m as je,o as Qn,j as l,i as ln,a as Xs,X as Qs}from"./privy-CJey9ZCd.js";import{b as Zs,r as F,R as qs}from"./vendor-C7A1SLig.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();var Ye={},Nn=Zs;Ye.createRoot=Nn.createRoot,Ye.hydrateRoot=Nn.hydrateRoot;class tr{constructor(t,e,n,r,i,a,o=null){h(this,"WALK_ANIMATION_TIMER",180);h(this,"walkAnimationTimer",this.WALK_ANIMATION_TIMER);h(this,"buddyRunImages",[]);h(this,"jumpPressed",!1);h(this,"jumpInProgress",!1);h(this,"falling",!1);h(this,"JUMP_SPEED",.65);h(this,"GRAVITY",.38);h(this,"dustParticles",[]);h(this,"showDust",!1);h(this,"dustTimer",0);h(this,"touchstart",()=>{this.jumpPressed=!0});h(this,"touchend",()=>{this.jumpPressed=!1});h(this,"keydown",t=>{t.code==="Space"&&(this.jumpPressed=!0)});h(this,"keyup",t=>{t.code==="Space"&&(this.jumpPressed=!1)});this.ctx=t,this.canvas=t.canvas,this.width=e,this.height=n,this.minJumpHeight=r,this.maxJumpHeight=i,this.scaleRatio=a,this.onMovementCallback=o,this.x=10*a,this.y=this.canvas.height-this.height-1.5*a,this.yStandingPosition=this.y,this.standingStillImage=new Image,this.standingStillImage.src="./images/buddy_standing_still.png",this.standingStillImage.onerror=()=>console.error("Failed to load buddy_standing_still.png"),this.image=this.standingStillImage,this.jumpingImage=new Image,this.jumpingImage.src="./images/buddy_standing_still_eye_closed.png",this.jumpingImage.onerror=()=>console.error("Failed to load buddy_standing_still_eye_closed.png");const c=new Image;c.src="./images/buddy_run1.png",c.onerror=()=>console.error("Failed to load buddy_run1.png");const u=new Image;u.src="./images/buddy_run2.png",u.onerror=()=>console.error("Failed to load buddy_run2.png"),this.buddyRunImages.push(c),this.buddyRunImages.push(u),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),window.removeEventListener("touchstart",this.touchstart),window.removeEventListener("touchend",this.touchend),window.addEventListener("touchstart",this.touchstart),window.addEventListener("touchend",this.touchend)}update(t,e){this.run(t,e),this.jumpInProgress&&(this.image=this.jumpingImage),this.jump(e),this.updateDust(e)}jump(t){this.jumpPressed&&(this.jumpInProgress||this.onMovementCallback&&this.onMovementCallback(),this.jumpInProgress=!0),this.jumpInProgress&&!this.falling?this.y>this.canvas.height-this.minJumpHeight||this.y>this.canvas.height-this.maxJumpHeight&&this.jumpPressed?this.y-=this.JUMP_SPEED*t*this.scaleRatio:this.falling=!0:this.y<this.yStandingPosition?(this.y+=this.GRAVITY*t*this.scaleRatio,this.y+this.height>this.canvas.height&&(this.y=this.yStandingPosition,this.createDustEffect())):(this.falling=!1,this.jumpInProgress=!1)}createDustEffect(){this.showDust=!0,this.dustTimer=300}updateDust(t){this.showDust&&(this.dustTimer-=t,this.dustTimer<=0&&(this.showDust=!1))}run(t,e){this.walkAnimationTimer<=0&&(this.image===this.buddyRunImages[0]?this.image=this.buddyRunImages[1]:this.image=this.buddyRunImages[0],this.walkAnimationTimer=this.WALK_ANIMATION_TIMER),this.walkAnimationTimer-=e*t}draw(){if(this.image&&this.image.complete&&this.image.naturalWidth>0&&this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height),this.showDust){this.ctx.fillStyle="rgba(139, 69, 19, 0.6)";const t=this.yStandingPosition+this.height;for(let e=0;e<5;e++){const n=this.x+this.width*.2+e*8*this.scaleRatio,r=(3-e*.5)*this.scaleRatio;this.ctx.beginPath(),this.ctx.arc(n,t-r,r,0,Math.PI*2),this.ctx.fill()}}}}class er{constructor(t,e,n,r,i){this.ctx=t,this.canvas=t.canvas,this.width=e,this.height=n,this.speed=r,this.scaleRatio=i,this.x=0,this.y=this.canvas.height-this.height,this.groundImage=new Image,this.groundImage.src="./images/ground.png",this.groundImage.onerror=()=>console.error("Failed to load ground.png")}update(t,e){this.x-=t*e*this.speed*this.scaleRatio}draw(){this.ctx.fillStyle="#7BA428",this.ctx.fillRect(0,this.y,this.canvas.width,this.height),this.ctx.fillStyle="#6B9420";for(let t=0;t<this.canvas.width;t+=3)this.ctx.fillRect(t,this.y,1,this.height);this.ctx.fillStyle="#8B4513",this.ctx.fillRect(0,this.y+this.height*.7,this.canvas.width,this.height*.3),this.x<-this.width&&(this.x=0)}reset(){this.x=0}}class nr{constructor(t,e,n,r,i,a){this.ctx=t,this.x=e,this.y=n,this.width=r,this.height=i,this.image=a}update(t,e,n,r){this.x-=t*e*n*r}draw(){this.image&&this.image.complete&&this.image.naturalWidth>0&&this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height)}collideWith(t){return t.x<this.x+this.width/1.4&&t.x+t.width/1.4>this.x&&t.y<this.y+this.height/1.4&&t.height+t.y/1.4>this.y}}class sr{constructor(t,e,n,r){h(this,"CARROT_INTERVAL_MIN",500);h(this,"CARROT_INTERVAL_MAX",2e3);h(this,"nextCarrotInterval",null);h(this,"carrots",[]);this.ctx=t,this.canvas=t.canvas,this.carrotImages=e,this.scaleRatio=n,this.speed=r,this.setNextCarrotTime()}setNextCarrotTime(){const t=this.getRandomNumber(this.CARROT_INTERVAL_MIN,this.CARROT_INTERVAL_MAX);this.nextCarrotInterval=t}getRandomNumber(t,e){return Math.floor(Math.random()*(e-t+1)+t)}createCarrot(){const t=this.getRandomNumber(0,this.carrotImages.length-1),e=this.carrotImages[t],n=this.canvas.width*1.5,r=this.canvas.height-e.height,i=new nr(this.ctx,n,r,e.width,e.height,e.image);this.carrots.push(i)}update(t,e){this.nextCarrotInterval<=0&&(this.createCarrot(),this.setNextCarrotTime()),this.nextCarrotInterval-=e,this.carrots.forEach(n=>{n.update(this.speed,t,e,this.scaleRatio)}),this.carrots=this.carrots.filter(n=>n.x>-n.width)}draw(){this.carrots.forEach(t=>t.draw())}collideWith(t){return this.carrots.some(e=>e.collideWith(t))}reset(){this.carrots=[]}}class rr{constructor(t,e,n=null){h(this,"score",0);h(this,"HIGH_SCORE_KEY","highScore");this.ctx=t,this.canvas=t.canvas,this.scaleRatio=e,this.blockchainStatus=n}update(t){this.score+=t*.01}reset(){this.score=0}setHighScore(){const t=Number(localStorage.getItem(this.HIGH_SCORE_KEY));this.score>t&&localStorage.setItem(this.HIGH_SCORE_KEY,Math.floor(this.score))}draw(){const t=Number(localStorage.getItem(this.HIGH_SCORE_KEY)),e=20*this.scaleRatio,n=20*this.scaleRatio;this.ctx.font=`${n}px serif`,this.ctx.fillStyle="#6B8E6B";const r=this.canvas.width-75*this.scaleRatio,i=r-125*this.scaleRatio,a=Math.floor(this.score).toString().padStart(6,0),o=t.toString().padStart(6,0);if(this.ctx.fillText(a,r,e),this.ctx.fillText(`HI ${o}`,i,e),this.blockchainStatus){const c=e+30*this.scaleRatio,u=12*this.scaleRatio;this.ctx.font=`${u}px monospace`,this.ctx.fillStyle=this.blockchainStatus.contractAvailable?"#7FBC7F":"#FFA500",this.ctx.fillText(`⛓️ ${this.blockchainStatus.networkName}`,10*this.scaleRatio,c),this.ctx.fillStyle="#4169E1",this.ctx.fillText(`Moves: ${this.blockchainStatus.totalMovements}`,10*this.scaleRatio,c+20*this.scaleRatio),this.blockchainStatus.pendingTransactions>0&&(this.ctx.fillStyle="#FF6347",this.ctx.fillText(`Pending: ${this.blockchainStatus.pendingTransactions}`,10*this.scaleRatio,c+40*this.scaleRatio)),this.blockchainStatus.onChainScore>0&&(this.ctx.fillStyle="#32CD32",this.ctx.fillText(`On-chain: ${this.blockchainStatus.onChainScore}`,10*this.scaleRatio,c+60*this.scaleRatio))}}}const ir="6.15.0";function ar(s,t,e){const n=t.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof s===t)return}const r=new Error(`invalid value for type ${t}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${e}`,r.value=s,r}async function Xe(s){const t=Object.keys(s);return(await Promise.all(t.map(n=>Promise.resolve(s[n])))).reduce((n,r,i)=>(n[t[i]]=r,n),{})}function T(s,t,e){for(let n in t){let r=t[n];const i=e?e[n]:null;i&&ar(r,i,n),Object.defineProperty(s,n,{enumerable:!0,value:r,writable:!1})}}function qt(s,t){if(s==null)return"null";if(t==null&&(t=new Set),typeof s=="object"){if(t.has(s))return"[Circular]";t.add(s)}if(Array.isArray(s))return"[ "+s.map(e=>qt(e,t)).join(", ")+" ]";if(s instanceof Uint8Array){const e="0123456789abcdef";let n="0x";for(let r=0;r<s.length;r++)n+=e[s[r]>>4],n+=e[s[r]&15];return n}if(typeof s=="object"&&typeof s.toJSON=="function")return qt(s.toJSON(),t);switch(typeof s){case"boolean":case"number":case"symbol":return s.toString();case"bigint":return BigInt(s).toString();case"string":return JSON.stringify(s);case"object":{const e=Object.keys(s);return e.sort(),"{ "+e.map(n=>`${qt(n,t)}: ${qt(s[n],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ce(s,t){return s&&s.code===t}function Zn(s){return ce(s,"CALL_EXCEPTION")}function pe(s,t,e){let n=s;{const i=[];if(e){if("message"in e||"code"in e||"name"in e)throw new Error(`value will overwrite populated values: ${qt(e)}`);for(const a in e){if(a==="shortMessage")continue;const o=e[a];i.push(a+"="+qt(o))}}i.push(`code=${t}`),i.push(`version=${ir}`),i.length&&(s+=" ("+i.join(", ")+")")}let r;switch(t){case"INVALID_ARGUMENT":r=new TypeError(s);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(s);break;default:r=new Error(s)}return T(r,{code:t}),e&&Object.assign(r,e),r.shortMessage==null&&T(r,{shortMessage:n}),r}function N(s,t,e,n){if(!s)throw pe(t,e,n)}function y(s,t,e,n){N(s,t,"INVALID_ARGUMENT",{argument:e,value:n})}function qn(s,t,e){e==null&&(e=""),e&&(e=": "+e),N(s>=t,"missing argument"+e,"MISSING_ARGUMENT",{count:s,expectedCount:t}),N(s<=t,"too many arguments"+e,"UNEXPECTED_ARGUMENT",{count:s,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((s,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");s.push(t)}catch{}return s},[]);function un(s,t,e){if(e==null&&(e=""),s!==t){let n=e,r="new";e&&(n+=".",r+=" "+e),N(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function ts(s,t,e){if(s instanceof Uint8Array)return e?new Uint8Array(s):s;if(typeof s=="string"&&s.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((s.length-2)/2);let r=2;for(let i=0;i<n.length;i++)n[i]=parseInt(s.substring(r,r+2),16),r+=2;return n}y(!1,"invalid BytesLike value",t||"value",s)}function Tt(s,t){return ts(s,t,!1)}function mt(s,t){return ts(s,t,!0)}function Et(s,t){return!(typeof s!="string"||!s.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&s.length!==2+2*t||t===!0&&s.length%2!==0)}function or(s){return Et(s,!0)||s instanceof Uint8Array}const vn="0123456789abcdef";function D(s){const t=Tt(s);let e="0x";for(let n=0;n<t.length;n++){const r=t[n];e+=vn[(r&240)>>4]+vn[r&15]}return e}function ne(s){return"0x"+s.map(t=>D(t).substring(2)).join("")}function Qt(s,t,e){const n=Tt(s);return e!=null&&e>n.length&&N(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:e}),D(n.slice(t??0,e??n.length))}function es(s,t,e){const n=Tt(s);N(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});const r=new Uint8Array(t);return r.fill(0),e?r.set(n,t-n.length):r.set(n,0),D(r)}function cr(s,t){return es(s,t,!0)}function lr(s,t){return es(s,t,!1)}const Me=BigInt(0),at=BigInt(1),te=9007199254740991;function ur(s,t){const e=_e(s,"value"),n=BigInt(It(t,"width"));if(N(e>>n===Me,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:s}),e>>n-at){const r=(at<<n)-at;return-((~e&r)+at)}return e}function hr(s,t){let e=Lt(s,"value");const n=BigInt(It(t,"width")),r=at<<n-at;if(e<Me){e=-e,N(e<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:s});const i=(at<<n)-at;return(~e&i)+at}else N(e<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:s});return e}function ve(s,t){const e=_e(s,"value"),n=BigInt(It(t,"bits"));return e&(at<<n)-at}function Lt(s,t){switch(typeof s){case"bigint":return s;case"number":return y(Number.isInteger(s),"underflow",t||"value",s),y(s>=-te&&s<=te,"overflow",t||"value",s),BigInt(s);case"string":try{if(s==="")throw new Error("empty string");return s[0]==="-"&&s[1]!=="-"?-BigInt(s.substring(1)):BigInt(s)}catch(e){y(!1,`invalid BigNumberish string: ${e.message}`,t||"value",s)}}y(!1,"invalid BigNumberish value",t||"value",s)}function _e(s,t){const e=Lt(s,t);return N(e>=Me,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:s}),e}const Tn="0123456789abcdef";function ns(s){if(s instanceof Uint8Array){let t="0x0";for(const e of s)t+=Tn[e>>4],t+=Tn[e&15];return BigInt(t)}return Lt(s)}function It(s,t){switch(typeof s){case"bigint":return y(s>=-te&&s<=te,"overflow",t||"value",s),Number(s);case"number":return y(Number.isInteger(s),"underflow",t||"value",s),y(s>=-te&&s<=te,"overflow",t||"value",s),s;case"string":try{if(s==="")throw new Error("empty string");return It(BigInt(s),t)}catch(e){y(!1,`invalid numeric string: ${e.message}`,t||"value",s)}}y(!1,"invalid numeric value",t||"value",s)}function fr(s){return It(ns(s))}function ss(s,t){let n=_e(s,"value").toString(16);if(t==null)n.length%2&&(n="0"+n);else{const r=It(t,"width");for(N(r*2>=n.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:s});n.length<r*2;)n="0"+n}return"0x"+n}function dr(s){const t=_e(s,"value");if(t===Me)return new Uint8Array([]);let e=t.toString(16);e.length%2&&(e="0"+e);const n=new Uint8Array(e.length/2);for(let r=0;r<n.length;r++){const i=r*2;n[r]=parseInt(e.substring(i,i+2),16)}return n}var se;class pr{constructor(t,e,n){h(this,"filter");h(this,"emitter");P(this,se);O(this,se,e),T(this,{emitter:t,filter:n})}async removeListener(){m(this,se)!=null&&await this.emitter.off(this.filter,m(this,se))}}se=new WeakMap;function mr(s,t,e,n,r){y(!1,`invalid codepoint at offset ${t}; ${s}`,"bytes",e)}function rs(s,t,e,n,r){if(s==="BAD_PREFIX"||s==="UNEXPECTED_CONTINUE"){let i=0;for(let a=t+1;a<e.length&&e[a]>>6===2;a++)i++;return i}return s==="OVERRUN"?e.length-t-1:0}function gr(s,t,e,n,r){return s==="OVERLONG"?(y(typeof r=="number","invalid bad code point for replacement","badCodepoint",r),n.push(r),0):(n.push(65533),rs(s,t,e))}const yr=Object.freeze({error:mr,ignore:rs,replace:gr});function wr(s,t){t==null&&(t=yr.error);const e=Tt(s,"bytes"),n=[];let r=0;for(;r<e.length;){const i=e[r++];if(!(i>>7)){n.push(i);continue}let a=null,o=null;if((i&224)===192)a=1,o=127;else if((i&240)===224)a=2,o=2047;else if((i&248)===240)a=3,o=65535;else{(i&192)===128?r+=t("UNEXPECTED_CONTINUE",r-1,e,n):r+=t("BAD_PREFIX",r-1,e,n);continue}if(r-1+a>=e.length){r+=t("OVERRUN",r-1,e,n);continue}let c=i&(1<<8-a-1)-1;for(let u=0;u<a;u++){let f=e[r];if((f&192)!=128){r+=t("MISSING_CONTINUE",r,e,n),c=null;break}c=c<<6|f&63,r++}if(c!==null){if(c>1114111){r+=t("OUT_OF_RANGE",r-1-a,e,n,c);continue}if(c>=55296&&c<=57343){r+=t("UTF16_SURROGATE",r-1-a,e,n,c);continue}if(c<=o){r+=t("OVERLONG",r-1-a,e,n,c);continue}n.push(c)}}return n}function is(s,t){y(typeof s=="string","invalid string value","str",s);let e=[];for(let n=0;n<s.length;n++){const r=s.charCodeAt(n);if(r<128)e.push(r);else if(r<2048)e.push(r>>6|192),e.push(r&63|128);else if((r&64512)==55296){n++;const i=s.charCodeAt(n);y(n<s.length&&(i&64512)===56320,"invalid surrogate pair","str",s);const a=65536+((r&1023)<<10)+(i&1023);e.push(a>>18|240),e.push(a>>12&63|128),e.push(a>>6&63|128),e.push(a&63|128)}else e.push(r>>12|224),e.push(r>>6&63|128),e.push(r&63|128)}return new Uint8Array(e)}function br(s){return s.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function xr(s,t){return br(wr(s,t))}const V=32,Qe=new Uint8Array(V),Er=["then"],Te={},as=new WeakMap;function jt(s){return as.get(s)}function Sn(s,t){as.set(s,t)}function ue(s,t){const e=new Error(`deferred error during ABI decoding triggered accessing ${s}`);throw e.error=t,e}function Ze(s,t,e){return s.indexOf(null)>=0?t.map((n,r)=>n instanceof le?Ze(jt(n),n,e):n):s.reduce((n,r,i)=>{let a=t.getValue(r);return r in n||(e&&a instanceof le&&(a=Ze(jt(a),a,e)),n[r]=a),n},{})}var re;const ee=class ee extends Array{constructor(...e){const n=e[0];let r=e[1],i=(e[2]||[]).slice(),a=!0;n!==Te&&(r=e,i=[],a=!1);super(r.length);P(this,re);r.forEach((u,f)=>{this[f]=u});const o=i.reduce((u,f)=>(typeof f=="string"&&u.set(f,(u.get(f)||0)+1),u),new Map);if(Sn(this,Object.freeze(r.map((u,f)=>{const d=i[f];return d!=null&&o.get(d)===1?d:null}))),O(this,re,[]),m(this,re)==null&&m(this,re),!a)return;Object.freeze(this);const c=new Proxy(this,{get:(u,f,d)=>{if(typeof f=="string"){if(f.match(/^[0-9]+$/)){const E=It(f,"%index");if(E<0||E>=this.length)throw new RangeError("out of result range");const S=u[E];return S instanceof Error&&ue(`index ${E}`,S),S}if(Er.indexOf(f)>=0)return Reflect.get(u,f,d);const g=u[f];if(g instanceof Function)return function(...E){return g.apply(this===d?u:this,E)};if(!(f in u))return u.getValue.apply(this===d?u:this,[f])}return Reflect.get(u,f,d)}});return Sn(c,jt(this)),c}toArray(e){const n=[];return this.forEach((r,i)=>{r instanceof Error&&ue(`index ${i}`,r),e&&r instanceof ee&&(r=r.toArray(e)),n.push(r)}),n}toObject(e){const n=jt(this);return n.reduce((r,i,a)=>(N(i!=null,`value at index ${a} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Ze(n,this,e)),{})}slice(e,n){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const r=jt(this),i=[],a=[];for(let o=e;o<n;o++)i.push(this[o]),a.push(r[o]);return new ee(Te,i,a)}filter(e,n){const r=jt(this),i=[],a=[];for(let o=0;o<this.length;o++){const c=this[o];c instanceof Error&&ue(`index ${o}`,c),e.call(n,c,o,this)&&(i.push(c),a.push(r[o]))}return new ee(Te,i,a)}map(e,n){const r=[];for(let i=0;i<this.length;i++){const a=this[i];a instanceof Error&&ue(`index ${i}`,a),r.push(e.call(n,a,i,this))}return r}getValue(e){const n=jt(this).indexOf(e);if(n===-1)return;const r=this[n];return r instanceof Error&&ue(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,n){return new ee(Te,e,n)}};re=new WeakMap;let le=ee;function In(s){let t=dr(s);return N(t.length<=V,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:V,offset:t.length}),t.length!==V&&(t=mt(ne([Qe.slice(t.length%V),t]))),t}class Rt{constructor(t,e,n,r){h(this,"name");h(this,"type");h(this,"localName");h(this,"dynamic");T(this,{name:t,type:e,localName:n,dynamic:r},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){y(!1,t,this.localName,e)}}var xt,Ft,ie,Oe;class qe{constructor(){P(this,ie);P(this,xt);P(this,Ft);O(this,xt,[]),O(this,Ft,0)}get data(){return ne(m(this,xt))}get length(){return m(this,Ft)}appendWriter(t){return j(this,ie,Oe).call(this,mt(t.data))}writeBytes(t){let e=mt(t);const n=e.length%V;return n&&(e=mt(ne([e,Qe.slice(n)]))),j(this,ie,Oe).call(this,e)}writeValue(t){return j(this,ie,Oe).call(this,In(t))}writeUpdatableValue(){const t=m(this,xt).length;return m(this,xt).push(Qe),O(this,Ft,m(this,Ft)+V),e=>{m(this,xt)[t]=In(e)}}}xt=new WeakMap,Ft=new WeakMap,ie=new WeakSet,Oe=function(t){return m(this,xt).push(t),O(this,Ft,m(this,Ft)+t.length),t.length};var J,q,Dt,Ht,At,Jt,en,os;const gn=class gn{constructor(t,e,n){P(this,Jt);h(this,"allowLoose");P(this,J);P(this,q);P(this,Dt);P(this,Ht);P(this,At);T(this,{allowLoose:!!e}),O(this,J,mt(t)),O(this,Dt,0),O(this,Ht,null),O(this,At,n??1024),O(this,q,0)}get data(){return D(m(this,J))}get dataLength(){return m(this,J).length}get consumed(){return m(this,q)}get bytes(){return new Uint8Array(m(this,J))}subReader(t){const e=new gn(m(this,J).slice(m(this,q)+t),this.allowLoose,m(this,At));return O(e,Ht,this),e}readBytes(t,e){let n=j(this,Jt,os).call(this,0,t,!!e);return j(this,Jt,en).call(this,t),O(this,q,m(this,q)+n.length),n.slice(0,t)}readValue(){return ns(this.readBytes(V))}readIndex(){return fr(this.readBytes(V))}};J=new WeakMap,q=new WeakMap,Dt=new WeakMap,Ht=new WeakMap,At=new WeakMap,Jt=new WeakSet,en=function(t){var e;if(m(this,Ht))return j(e=m(this,Ht),Jt,en).call(e,t);O(this,Dt,m(this,Dt)+t),N(m(this,At)<1||m(this,Dt)<=m(this,At)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${m(this,At)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:mt(m(this,J)),offset:m(this,q),length:t,info:{bytesRead:m(this,Dt),dataLength:this.dataLength}})},os=function(t,e,n){let r=Math.ceil(e/V)*V;return m(this,q)+r>m(this,J).length&&(this.allowLoose&&n&&m(this,q)+e<=m(this,J).length?r=e:N(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:mt(m(this,J)),length:m(this,J).length,offset:m(this,q)+r})),m(this,J).slice(m(this,q),m(this,q)+r)};let tn=gn;function Rn(s){if(!Number.isSafeInteger(s)||s<0)throw new Error(`Wrong positive integer: ${s}`)}function cs(s,...t){if(!(s instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(s.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${s.length}`)}function On(s,t=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(t&&s.finished)throw new Error("Hash#digest() has already been called")}function Nr(s,t){cs(s);const e=t.outputLen;if(s.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vr=s=>s instanceof Uint8Array,Tr=s=>new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)),Sr=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Sr)throw new Error("Non little-endian hardware is not supported");function Ir(s){if(typeof s!="string")throw new Error(`utf8ToBytes expected string, got ${typeof s}`);return new Uint8Array(new TextEncoder().encode(s))}function ls(s){if(typeof s=="string"&&(s=Ir(s)),!vr(s))throw new Error(`expected Uint8Array, got ${typeof s}`);return s}class Rr{clone(){return this._cloneInto()}}function Or(s){const t=n=>s().update(ls(n)).digest(),e=s();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>s(),t}const Se=BigInt(2**32-1),An=BigInt(32);function Ar(s,t=!1){return t?{h:Number(s&Se),l:Number(s>>An&Se)}:{h:Number(s>>An&Se)|0,l:Number(s&Se)|0}}function kr(s,t=!1){let e=new Uint32Array(s.length),n=new Uint32Array(s.length);for(let r=0;r<s.length;r++){const{h:i,l:a}=Ar(s[r],t);[e[r],n[r]]=[i,a]}return[e,n]}const Cr=(s,t,e)=>s<<e|t>>>32-e,Pr=(s,t,e)=>t<<e|s>>>32-e,Lr=(s,t,e)=>t<<e-32|s>>>64-e,Ur=(s,t,e)=>s<<e-32|t>>>64-e,[us,hs,fs]=[[],[],[]],Br=BigInt(0),he=BigInt(1),jr=BigInt(2),Mr=BigInt(7),_r=BigInt(256),Fr=BigInt(113);for(let s=0,t=he,e=1,n=0;s<24;s++){[e,n]=[n,(2*e+3*n)%5],us.push(2*(5*n+e)),hs.push((s+1)*(s+2)/2%64);let r=Br;for(let i=0;i<7;i++)t=(t<<he^(t>>Mr)*Fr)%_r,t&jr&&(r^=he<<(he<<BigInt(i))-he);fs.push(r)}const[Dr,Hr]=kr(fs,!0),kn=(s,t,e)=>e>32?Lr(s,t,e):Cr(s,t,e),Cn=(s,t,e)=>e>32?Ur(s,t,e):Pr(s,t,e);function $r(s,t=24){const e=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let a=0;a<10;a++)e[a]=s[a]^s[a+10]^s[a+20]^s[a+30]^s[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,u=e[c],f=e[c+1],d=kn(u,f,1)^e[o],g=Cn(u,f,1)^e[o+1];for(let E=0;E<50;E+=10)s[a+E]^=d,s[a+E+1]^=g}let r=s[2],i=s[3];for(let a=0;a<24;a++){const o=hs[a],c=kn(r,i,o),u=Cn(r,i,o),f=us[a];r=s[f],i=s[f+1],s[f]=c,s[f+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)e[o]=s[a+o];for(let o=0;o<10;o++)s[a+o]^=~e[(o+2)%10]&e[(o+4)%10]}s[0]^=Dr[n],s[1]^=Hr[n]}e.fill(0)}class hn extends Rr{constructor(t,e,n,r=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Rn(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Tr(this.state)}keccak(){$r(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){On(this);const{blockLen:e,state:n}=this;t=ls(t);const r=t.length;for(let i=0;i<r;){const a=Math.min(e-this.pos,r-i);for(let o=0;o<a;o++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,e&128&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){On(this,!1),cs(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,i=t.length;r<i;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+a),r),this.posOut+=a,r+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Rn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Nr(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:i,enableXOF:a}=this;return t||(t=new hn(e,n,r,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=r,t.enableXOF=a,t.destroyed=this.destroyed,t}}const Gr=(s,t,e)=>Or(()=>new hn(t,s,e)),Wr=Gr(1,136,256/8);let ds=!1;const ps=function(s){return Wr(s)};let ms=ps;function Pt(s){const t=Tt(s,"data");return D(ms(t))}Pt._=ps;Pt.lock=function(){ds=!0};Pt.register=function(s){if(ds)throw new TypeError("keccak256 is locked");ms=s};Object.freeze(Pt);const zr=BigInt(0),Vr=BigInt(36);function Pn(s){s=s.toLowerCase();const t=s.substring(2).split(""),e=new Uint8Array(40);for(let r=0;r<40;r++)e[r]=t[r].charCodeAt(0);const n=Tt(Pt(e));for(let r=0;r<40;r+=2)n[r>>1]>>4>=8&&(t[r]=t[r].toUpperCase()),(n[r>>1]&15)>=8&&(t[r+1]=t[r+1].toUpperCase());return"0x"+t.join("")}const fn={};for(let s=0;s<10;s++)fn[String(s)]=String(s);for(let s=0;s<26;s++)fn[String.fromCharCode(65+s)]=String(10+s);const Ln=15;function Kr(s){s=s.toUpperCase(),s=s.substring(4)+s.substring(0,2)+"00";let t=s.split("").map(n=>fn[n]).join("");for(;t.length>=Ln;){let n=t.substring(0,Ln);t=parseInt(n,10)%97+t.substring(n.length)}let e=String(98-parseInt(t,10)%97);for(;e.length<2;)e="0"+e;return e}const Jr=function(){const s={};for(let t=0;t<36;t++){const e="0123456789abcdefghijklmnopqrstuvwxyz"[t];s[e]=BigInt(t)}return s}();function Yr(s){s=s.toLowerCase();let t=zr;for(let e=0;e<s.length;e++)t=t*Vr+Jr[s[e]];return t}function Wt(s){if(y(typeof s=="string","invalid address","address",s),s.match(/^(0x)?[0-9a-fA-F]{40}$/)){s.startsWith("0x")||(s="0x"+s);const t=Pn(s);return y(!s.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===s,"bad address checksum","address",s),t}if(s.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){y(s.substring(2,4)===Kr(s),"bad icap checksum","address",s);let t=Yr(s.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return Pn("0x"+t)}y(!1,"invalid address","address",s)}function gs(s){return s&&typeof s.getAddress=="function"}async function Ve(s,t){const e=await t;return(e==null||e==="0x0000000000000000000000000000000000000000")&&(N(typeof s!="string","unconfigured name","UNCONFIGURED_NAME",{value:s}),y(!1,"invalid AddressLike value; did not resolve to a value address","target",s)),Wt(e)}function me(s,t){if(typeof s=="string")return s.match(/^0x[0-9a-f]{40}$/i)?Wt(s):(N(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Ve(s,t.resolveName(s)));if(gs(s))return Ve(s,s.getAddress());if(s&&typeof s.then=="function")return Ve(s,s);y(!1,"unsupported addressable value","target",s)}const yt={};function x(s,t){let e=!1;return t<0&&(e=!0,t*=-1),new z(yt,`${e?"":"u"}int${t}`,s,{signed:e,width:t})}function k(s,t){return new z(yt,`bytes${t||""}`,s,{size:t})}const Un=Symbol.for("_ethers_typed");var $t;const wt=class wt{constructor(t,e,n,r){h(this,"type");h(this,"value");P(this,$t);h(this,"_typedSymbol");r==null&&(r=null),un(yt,t,"Typed"),T(this,{_typedSymbol:Un,type:e,value:n}),O(this,$t,r),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return m(this,$t)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return m(this,$t)===!0?-1:m(this,$t)===!1?this.value.length:null}static from(t,e){return new wt(yt,t,e)}static uint8(t){return x(t,8)}static uint16(t){return x(t,16)}static uint24(t){return x(t,24)}static uint32(t){return x(t,32)}static uint40(t){return x(t,40)}static uint48(t){return x(t,48)}static uint56(t){return x(t,56)}static uint64(t){return x(t,64)}static uint72(t){return x(t,72)}static uint80(t){return x(t,80)}static uint88(t){return x(t,88)}static uint96(t){return x(t,96)}static uint104(t){return x(t,104)}static uint112(t){return x(t,112)}static uint120(t){return x(t,120)}static uint128(t){return x(t,128)}static uint136(t){return x(t,136)}static uint144(t){return x(t,144)}static uint152(t){return x(t,152)}static uint160(t){return x(t,160)}static uint168(t){return x(t,168)}static uint176(t){return x(t,176)}static uint184(t){return x(t,184)}static uint192(t){return x(t,192)}static uint200(t){return x(t,200)}static uint208(t){return x(t,208)}static uint216(t){return x(t,216)}static uint224(t){return x(t,224)}static uint232(t){return x(t,232)}static uint240(t){return x(t,240)}static uint248(t){return x(t,248)}static uint256(t){return x(t,256)}static uint(t){return x(t,256)}static int8(t){return x(t,-8)}static int16(t){return x(t,-16)}static int24(t){return x(t,-24)}static int32(t){return x(t,-32)}static int40(t){return x(t,-40)}static int48(t){return x(t,-48)}static int56(t){return x(t,-56)}static int64(t){return x(t,-64)}static int72(t){return x(t,-72)}static int80(t){return x(t,-80)}static int88(t){return x(t,-88)}static int96(t){return x(t,-96)}static int104(t){return x(t,-104)}static int112(t){return x(t,-112)}static int120(t){return x(t,-120)}static int128(t){return x(t,-128)}static int136(t){return x(t,-136)}static int144(t){return x(t,-144)}static int152(t){return x(t,-152)}static int160(t){return x(t,-160)}static int168(t){return x(t,-168)}static int176(t){return x(t,-176)}static int184(t){return x(t,-184)}static int192(t){return x(t,-192)}static int200(t){return x(t,-200)}static int208(t){return x(t,-208)}static int216(t){return x(t,-216)}static int224(t){return x(t,-224)}static int232(t){return x(t,-232)}static int240(t){return x(t,-240)}static int248(t){return x(t,-248)}static int256(t){return x(t,-256)}static int(t){return x(t,-256)}static bytes1(t){return k(t,1)}static bytes2(t){return k(t,2)}static bytes3(t){return k(t,3)}static bytes4(t){return k(t,4)}static bytes5(t){return k(t,5)}static bytes6(t){return k(t,6)}static bytes7(t){return k(t,7)}static bytes8(t){return k(t,8)}static bytes9(t){return k(t,9)}static bytes10(t){return k(t,10)}static bytes11(t){return k(t,11)}static bytes12(t){return k(t,12)}static bytes13(t){return k(t,13)}static bytes14(t){return k(t,14)}static bytes15(t){return k(t,15)}static bytes16(t){return k(t,16)}static bytes17(t){return k(t,17)}static bytes18(t){return k(t,18)}static bytes19(t){return k(t,19)}static bytes20(t){return k(t,20)}static bytes21(t){return k(t,21)}static bytes22(t){return k(t,22)}static bytes23(t){return k(t,23)}static bytes24(t){return k(t,24)}static bytes25(t){return k(t,25)}static bytes26(t){return k(t,26)}static bytes27(t){return k(t,27)}static bytes28(t){return k(t,28)}static bytes29(t){return k(t,29)}static bytes30(t){return k(t,30)}static bytes31(t){return k(t,31)}static bytes32(t){return k(t,32)}static address(t){return new wt(yt,"address",t)}static bool(t){return new wt(yt,"bool",!!t)}static bytes(t){return new wt(yt,"bytes",t)}static string(t){return new wt(yt,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new wt(yt,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===Un}static dereference(t,e){if(wt.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}};$t=new WeakMap;let z=wt;class Xr extends Rt{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let n=z.dereference(e,"string");try{n=Wt(n)}catch(r){return this._throwError(r.message,e)}return t.writeValue(n)}decode(t){return Wt(ss(t.readValue(),20))}}class Qr extends Rt{constructor(e){super(e.name,e.type,"_",e.dynamic);h(this,"coder");this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,n){return this.coder.encode(e,n)}decode(e){return this.coder.decode(e)}}function ys(s,t,e){let n=[];if(Array.isArray(e))n=e;else if(e&&typeof e=="object"){let c={};n=t.map(u=>{const f=u.localName;return N(f,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),N(!c[f],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),c[f]=!0,e[f]})}else y(!1,"invalid tuple value","tuple",e);y(t.length===n.length,"types/value length mismatch","tuple",e);let r=new qe,i=new qe,a=[];t.forEach((c,u)=>{let f=n[u];if(c.dynamic){let d=i.length;c.encode(i,f);let g=r.writeUpdatableValue();a.push(E=>{g(E+d)})}else c.encode(r,f)}),a.forEach(c=>{c(r.length)});let o=s.appendWriter(r);return o+=s.appendWriter(i),o}function ws(s,t){let e=[],n=[],r=s.subReader(0);return t.forEach(i=>{let a=null;if(i.dynamic){let o=s.readIndex(),c=r.subReader(o);try{a=i.decode(c)}catch(u){if(ce(u,"BUFFER_OVERRUN"))throw u;a=u,a.baseType=i.name,a.name=i.localName,a.type=i.type}}else try{a=i.decode(s)}catch(o){if(ce(o,"BUFFER_OVERRUN"))throw o;a=o,a.baseType=i.name,a.name=i.localName,a.type=i.type}if(a==null)throw new Error("investigate");e.push(a),n.push(i.localName||null)}),le.fromItems(e,n)}class Zr extends Rt{constructor(e,n,r){const i=e.type+"["+(n>=0?n:"")+"]",a=n===-1||e.dynamic;super("array",i,r,a);h(this,"coder");h(this,"length");T(this,{coder:e,length:n})}defaultValue(){const e=this.coder.defaultValue(),n=[];for(let r=0;r<this.length;r++)n.push(e);return n}encode(e,n){const r=z.dereference(n,"array");Array.isArray(r)||this._throwError("expected array value",r);let i=this.length;i===-1&&(i=r.length,e.writeValue(r.length)),qn(r.length,i,"coder array"+(this.localName?" "+this.localName:""));let a=[];for(let o=0;o<r.length;o++)a.push(this.coder);return ys(e,a,r)}decode(e){let n=this.length;n===-1&&(n=e.readIndex(),N(n*V<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:n*V,length:e.dataLength}));let r=[];for(let i=0;i<n;i++)r.push(new Qr(this.coder));return ws(e,r)}}class qr extends Rt{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const n=z.dereference(e,"bool");return t.writeValue(n?1:0)}decode(t){return!!t.readValue()}}class bs extends Rt{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=mt(e);let n=t.writeValue(e.length);return n+=t.writeBytes(e),n}decode(t){return t.readBytes(t.readIndex(),!0)}}class ti extends bs{constructor(t){super("bytes",t)}decode(t){return D(super.decode(t))}}class ei extends Rt{constructor(e,n){let r="bytes"+String(e);super(r,r,n,!1);h(this,"size");T(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,n){let r=mt(z.dereference(n,this.type));return r.length!==this.size&&this._throwError("incorrect data length",n),e.writeBytes(r)}decode(e){return D(e.readBytes(this.size))}}const ni=new Uint8Array([]);class si extends Rt{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return e!=null&&this._throwError("not null",e),t.writeBytes(ni)}decode(t){return t.readBytes(0),null}}const ri=BigInt(0),ii=BigInt(1),ai=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class oi extends Rt{constructor(e,n,r){const i=(n?"int":"uint")+e*8;super(i,i,r,!1);h(this,"size");h(this,"signed");T(this,{size:e,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,n){let r=Lt(z.dereference(n,this.type)),i=ve(ai,V*8);if(this.signed){let a=ve(i,this.size*8-1);(r>a||r<-(a+ii))&&this._throwError("value out-of-bounds",n),r=hr(r,8*V)}else(r<ri||r>ve(i,this.size*8))&&this._throwError("value out-of-bounds",n);return e.writeValue(r)}decode(e){let n=ve(e.readValue(),this.size*8);return this.signed&&(n=ur(n,this.size*8)),n}}class ci extends bs{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,is(z.dereference(e,"string")))}decode(t){return xr(super.decode(t))}}class Ie extends Rt{constructor(e,n){let r=!1;const i=[];e.forEach(o=>{o.dynamic&&(r=!0),i.push(o.type)});const a="tuple("+i.join(",")+")";super("tuple",a,n,r);h(this,"coders");T(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const n=this.coders.reduce((r,i)=>{const a=i.localName;return a&&(r[a]||(r[a]=0),r[a]++),r},{});return this.coders.forEach((r,i)=>{let a=r.localName;!a||n[a]!==1||(a==="length"&&(a="_length"),e[a]==null&&(e[a]=e[i]))}),Object.freeze(e)}encode(e,n){const r=z.dereference(n,"tuple");return ys(e,this.coders,r)}decode(e){return ws(e,this.coders)}}function Ke(s,t){return{address:Wt(s),storageKeys:t.map((e,n)=>(y(Et(e,32),"invalid slot",`storageKeys[${n}]`,e),e.toLowerCase()))}}function li(s){if(Array.isArray(s))return s.map((e,n)=>Array.isArray(e)?(y(e.length===2,"invalid slot set",`value[${n}]`,e),Ke(e[0],e[1])):(y(e!=null&&typeof e=="object","invalid address-slot set","value",s),Ke(e.address,e.storageKeys)));y(s!=null&&typeof s=="object","invalid access list","value",s);const t=Object.keys(s).map(e=>{const n=s[e].reduce((r,i)=>(r[i]=!0,r),{});return Ke(e,Object.keys(n).sort())});return t.sort((e,n)=>e.address.localeCompare(n.address)),t}function ge(s){return Pt(is(s))}function K(s){const t=new Set;return s.forEach(e=>t.add(e)),Object.freeze(t)}const ui="external public payable override",hi=K(ui.split(" ")),xs="constant external internal payable private public pure view override",fi=K(xs.split(" ")),Es="constructor error event fallback function receive struct",Ns=K(Es.split(" ")),vs="calldata memory storage payable indexed",di=K(vs.split(" ")),pi="tuple returns",mi=[Es,vs,pi,xs].join(" "),gi=K(mi.split(" ")),yi={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},wi=new RegExp("^(\\s*)"),bi=new RegExp("^([0-9]+)"),xi=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Ts=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Ss=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var H,it,we,nn;const Ue=class Ue{constructor(t){P(this,we);P(this,H);P(this,it);O(this,H,0),O(this,it,t.slice())}get offset(){return m(this,H)}get length(){return m(this,it).length-m(this,H)}clone(){return new Ue(m(this,it))}reset(){O(this,H,0)}popKeyword(t){const e=this.peek();if(e.type!=="KEYWORD"||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const e=this.peek();throw new Error(`expected ${t}; got ${e.type} ${JSON.stringify(e.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=j(this,we,nn).call(this,m(this,H)+1,t.match+1);return O(this,H,t.match+1),e}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=[];for(;m(this,H)<t.match-1;){const n=this.peek().linkNext;e.push(j(this,we,nn).call(this,m(this,H)+1,n)),O(this,H,n)}return O(this,H,t.match+1),e}peek(){if(m(this,H)>=m(this,it).length)throw new Error("out-of-bounds");return m(this,it)[m(this,H)]}peekKeyword(t){const e=this.peekType("KEYWORD");return e!=null&&t.has(e)?e:null}peekType(t){if(this.length===0)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return En(this,H)._++,t}toString(){const t=[];for(let e=m(this,H);e<m(this,it).length;e++){const n=m(this,it)[e];t.push(`${n.type}:${n.text}`)}return`<TokenString ${t.join(" ")}>`}};H=new WeakMap,it=new WeakMap,we=new WeakSet,nn=function(t=0,e=0){return new Ue(m(this,it).slice(t,e).map(n=>Object.freeze(Object.assign({},n,{match:n.match-t,linkBack:n.linkBack-t,linkNext:n.linkNext-t}))))};let ot=Ue;function Ut(s){const t=[],e=a=>{const o=i<s.length?JSON.stringify(s[i]):"$EOI";throw new Error(`invalid token ${o} at ${i}: ${a}`)};let n=[],r=[],i=0;for(;i<s.length;){let a=s.substring(i),o=a.match(wi);o&&(i+=o[1].length,a=s.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let u=yi[a[0]]||"";if(u){if(c.type=u,c.text=a[0],i++,u==="OPEN_PAREN")n.push(t.length-1),r.push(t.length-1);else if(u=="CLOSE_PAREN")n.length===0&&e("no matching open bracket"),c.match=n.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=r.pop(),t[c.linkBack].linkNext=t.length-1;else if(u==="COMMA")c.linkBack=r.pop(),t[c.linkBack].linkNext=t.length-1,r.push(t.length-1);else if(u==="OPEN_BRACKET")c.type="BRACKET";else if(u==="CLOSE_BRACKET"){let f=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const d=t.pop().text;f=d+f,t[t.length-1].value=It(d)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=f}continue}if(o=a.match(xi),o){if(c.text=o[1],i+=c.text.length,gi.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Ss)){c.type="TYPE";continue}c.type="ID";continue}if(o=a.match(bi),o){c.text=o[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${i}`)}return new ot(t.map(a=>Object.freeze(a)))}function Bn(s,t){let e=[];for(const n in t.keys())s.has(n)&&e.push(n);if(e.length>1)throw new Error(`conflicting types: ${e.join(", ")}`)}function Fe(s,t){if(t.peekKeyword(Ns)){const e=t.pop().text;if(e!==s)throw new Error(`expected ${s}, got ${e}`)}return t.popType("ID")}function St(s,t){const e=new Set;for(;;){const n=s.peekType("KEYWORD");if(n==null||t&&!t.has(n))break;if(s.pop(),e.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);e.add(n)}return Object.freeze(e)}function Is(s){let t=St(s,fi);return Bn(t,K("constant payable nonpayable".split(" "))),Bn(t,K("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function vt(s,t){return s.popParams().map(e=>$.from(e,t))}function Rs(s){if(s.peekType("AT")){if(s.pop(),s.peekType("NUMBER"))return Lt(s.pop().text);throw new Error("invalid gas")}return null}function zt(s){if(s.length)throw new Error(`unexpected tokens at offset ${s.offset}: ${s.toString()}`)}const Ei=new RegExp(/^(.*)\[([0-9]*)\]$/);function jn(s){const t=s.match(Ss);if(y(t,"invalid type","type",s),s==="uint")return"uint256";if(s==="int")return"int256";if(t[2]){const e=parseInt(t[2]);y(e!==0&&e<=32,"invalid bytes length","type",s)}else if(t[3]){const e=parseInt(t[3]);y(e!==0&&e<=256&&e%8===0,"invalid numeric width","type",s)}return s}const M={},X=Symbol.for("_ethers_internal"),Mn="_ParamTypeInternal",_n="_ErrorInternal",Fn="_EventInternal",Dn="_ConstructorInternal",Hn="_FallbackInternal",$n="_FunctionInternal",Gn="_StructInternal";var ae,Ae;const et=class et{constructor(t,e,n,r,i,a,o,c){P(this,ae);h(this,"name");h(this,"type");h(this,"baseType");h(this,"indexed");h(this,"components");h(this,"arrayLength");h(this,"arrayChildren");if(un(t,M,"ParamType"),Object.defineProperty(this,X,{value:Mn}),a&&(a=Object.freeze(a.slice())),r==="array"){if(o==null||c==null)throw new Error("")}else if(o!=null||c!=null)throw new Error("");if(r==="tuple"){if(a==null)throw new Error("")}else if(a!=null)throw new Error("");T(this,{name:e,type:n,baseType:r,indexed:i,components:a,arrayLength:o,arrayChildren:c})}format(t){if(t==null&&(t="sighash"),t==="json"){const n=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=n,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const r={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(i=>JSON.parse(i.format(t)))),JSON.stringify(r)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map(n=>n.format(t)).join(t==="full"?", ":",")+")":e+=this.type,t!=="sighash"&&(this.indexed===!0&&(e+=" indexed"),t==="full"&&this.name&&(e+=" "+this.name)),e}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return t.map(r=>n.arrayChildren.walk(r,e))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const n=this;return t.map((r,i)=>n.components[i].walk(r,e))}return e(this.type,t)}async walkAsync(t,e){const n=[],r=[t];return j(this,ae,Ae).call(this,n,t,e,i=>{r[0]=i}),n.length&&await Promise.all(n),r[0]}static from(t,e){if(et.isParamType(t))return t;if(typeof t=="string")try{return et.from(Ut(t),e)}catch{y(!1,"invalid param type","obj",t)}else if(t instanceof ot){let o="",c="",u=null;St(t,K(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(c="tuple",u=t.popParams().map(A=>et.from(A)),o=`tuple(${u.map(A=>A.format()).join(",")})`):(o=jn(t.popType("TYPE")),c=o);let f=null,d=null;for(;t.length&&t.peekType("BRACKET");){const A=t.pop();f=new et(M,"",o,c,null,u,d,f),d=A.value,o+=A.text,c="array",u=null}let g=null;if(St(t,di).has("indexed")){if(!e)throw new Error("");g=!0}const S=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new et(M,S,o,c,g,u,d,f)}const n=t.name;y(!n||typeof n=="string"&&n.match(Ts),"invalid name","obj.name",n);let r=t.indexed;r!=null&&(y(e,"parameter cannot be indexed","obj.indexed",t.indexed),r=!!r);let i=t.type,a=i.match(Ei);if(a){const o=parseInt(a[2]||"-1"),c=et.from({type:a[1],components:t.components});return new et(M,n||"",i,"array",r,null,o,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const o=t.components!=null?t.components.map(u=>et.from(u)):null;return new et(M,n||"",i,"tuple",r,o,null,null)}return i=jn(t.type),new et(M,n||"",i,i,r,null,null,null)}static isParamType(t){return t&&t[X]===Mn}};ae=new WeakSet,Ae=function(t,e,n,r){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const a=this.arrayChildren,o=e.slice();o.forEach((c,u)=>{var f;j(f=a,ae,Ae).call(f,t,c,n,d=>{o[u]=d})}),r(o);return}if(this.isTuple()){const a=this.components;let o;if(Array.isArray(e))o=e.slice();else{if(e==null||typeof e!="object")throw new Error("invalid tuple value");o=a.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in e))throw new Error(`missing value for component ${c.name}`);return e[c.name]})}if(o.length!==this.components.length)throw new Error("array is wrong length");o.forEach((c,u)=>{var f;j(f=a[u],ae,Ae).call(f,t,c,n,d=>{o[u]=d})}),r(o);return}const i=n(this.type,e);i.then?t.push(async function(){r(await i)}()):r(i)};let $=et;class Vt{constructor(t,e,n){h(this,"type");h(this,"inputs");un(t,M,"Fragment"),n=Object.freeze(n.slice()),T(this,{type:e,inputs:n})}static from(t){if(typeof t=="string"){try{Vt.from(JSON.parse(t))}catch{}return Vt.from(Ut(t))}if(t instanceof ot)switch(t.peekKeyword(Ns)){case"constructor":return Nt.from(t);case"error":return Y.from(t);case"event":return dt.from(t);case"fallback":case"receive":return bt.from(t);case"function":return pt.from(t);case"struct":return Gt.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return Nt.from(t);case"error":return Y.from(t);case"event":return dt.from(t);case"fallback":case"receive":return bt.from(t);case"function":return pt.from(t);case"struct":return Gt.from(t)}N(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}y(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return Nt.isFragment(t)}static isError(t){return Y.isFragment(t)}static isEvent(t){return dt.isFragment(t)}static isFunction(t){return pt.isFragment(t)}static isStruct(t){return Gt.isFragment(t)}}class De extends Vt{constructor(e,n,r,i){super(e,n,i);h(this,"name");y(typeof r=="string"&&r.match(Ts),"invalid identifier","name",r),i=Object.freeze(i.slice()),T(this,{name:r})}}function ye(s,t){return"("+t.map(e=>e.format(s)).join(s==="full"?", ":",")+")"}class Y extends De{constructor(t,e,n){super(t,"error",e,n),Object.defineProperty(this,X,{value:_n})}get selector(){return ge(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(t)))});const e=[];return t!=="sighash"&&e.push("error"),e.push(this.name+ye(t,this.inputs)),e.join(" ")}static from(t){if(Y.isFragment(t))return t;if(typeof t=="string")return Y.from(Ut(t));if(t instanceof ot){const e=Fe("error",t),n=vt(t);return zt(t),new Y(M,e,n)}return new Y(M,t.name,t.inputs?t.inputs.map($.from):[])}static isFragment(t){return t&&t[X]===_n}}class dt extends De{constructor(e,n,r,i){super(e,"event",n,r);h(this,"anonymous");Object.defineProperty(this,X,{value:Fn}),T(this,{anonymous:i})}get topicHash(){return ge(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("event"),n.push(this.name+ye(e,this.inputs)),e!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(e,n){return n=(n||[]).map(i=>$.from(i)),new dt(M,e,n,!1).topicHash}static from(e){if(dt.isFragment(e))return e;if(typeof e=="string")try{return dt.from(Ut(e))}catch{y(!1,"invalid event fragment","obj",e)}else if(e instanceof ot){const n=Fe("event",e),r=vt(e,!0),i=!!St(e,K(["anonymous"])).has("anonymous");return zt(e),new dt(M,n,r,i)}return new dt(M,e.name,e.inputs?e.inputs.map(n=>$.from(n,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[X]===Fn}}class Nt extends Vt{constructor(e,n,r,i,a){super(e,n,r);h(this,"payable");h(this,"gas");Object.defineProperty(this,X,{value:Dn}),T(this,{payable:i,gas:a})}format(e){if(N(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[`constructor${ye(e,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(e){if(Nt.isFragment(e))return e;if(typeof e=="string")try{return Nt.from(Ut(e))}catch{y(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof ot){St(e,K(["constructor"]));const n=vt(e),r=!!St(e,hi).has("payable"),i=Rs(e);return zt(e),new Nt(M,"constructor",n,r,i)}return new Nt(M,"constructor",e.inputs?e.inputs.map($.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[X]===Dn}}class bt extends Vt{constructor(e,n,r){super(e,"fallback",n);h(this,"payable");Object.defineProperty(this,X,{value:Hn}),T(this,{payable:r})}format(e){const n=this.inputs.length===0?"receive":"fallback";if(e==="json"){const r=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:r})}return`${n}()${this.payable?" payable":""}`}static from(e){if(bt.isFragment(e))return e;if(typeof e=="string")try{return bt.from(Ut(e))}catch{y(!1,"invalid fallback fragment","obj",e)}else if(e instanceof ot){const n=e.toString(),r=e.peekKeyword(K(["fallback","receive"]));if(y(r,"type must be fallback or receive","obj",n),e.popKeyword(K(["fallback","receive"]))==="receive"){const c=vt(e);return y(c.length===0,"receive cannot have arguments","obj.inputs",c),St(e,K(["payable"])),zt(e),new bt(M,[],!0)}let a=vt(e);a.length?y(a.length===1&&a[0].type==="bytes","invalid fallback inputs","obj.inputs",a.map(c=>c.format("minimal")).join(", ")):a=[$.from("bytes")];const o=Is(e);if(y(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),St(e,K(["returns"])).has("returns")){const c=vt(e);y(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(u=>u.format("minimal")).join(", "))}return zt(e),new bt(M,a,o==="payable")}if(e.type==="receive")return new bt(M,[],!0);if(e.type==="fallback"){const n=[$.from("bytes")],r=e.stateMutability==="payable";return new bt(M,n,r)}y(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[X]===Hn}}class pt extends De{constructor(e,n,r,i,a,o){super(e,"function",n,i);h(this,"constant");h(this,"outputs");h(this,"stateMutability");h(this,"payable");h(this,"gas");Object.defineProperty(this,X,{value:$n}),a=Object.freeze(a.slice()),T(this,{constant:r==="view"||r==="pure",gas:o,outputs:a,payable:r==="payable",stateMutability:r})}get selector(){return ge(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("function"),n.push(this.name+ye(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(ye(e,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(e,n){return n=(n||[]).map(i=>$.from(i)),new pt(M,e,"view",n,[],null).selector}static from(e){if(pt.isFragment(e))return e;if(typeof e=="string")try{return pt.from(Ut(e))}catch{y(!1,"invalid function fragment","obj",e)}else if(e instanceof ot){const r=Fe("function",e),i=vt(e),a=Is(e);let o=[];St(e,K(["returns"])).has("returns")&&(o=vt(e));const c=Rs(e);return zt(e),new pt(M,r,a,i,o,c)}let n=e.stateMutability;return n==null&&(n="payable",typeof e.constant=="boolean"?(n="view",e.constant||(n="payable",typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable")),new pt(M,e.name,n,e.inputs?e.inputs.map($.from):[],e.outputs?e.outputs.map($.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[X]===$n}}class Gt extends De{constructor(t,e,n){super(t,"struct",e,n),Object.defineProperty(this,X,{value:Gn})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return Gt.from(Ut(t))}catch{y(!1,"invalid struct fragment","obj",t)}else if(t instanceof ot){const e=Fe("struct",t),n=vt(t);return zt(t),new Gt(M,e,n)}return new Gt(M,t.name,t.inputs?t.inputs.map($.from):[])}static isFragment(t){return t&&t[X]===Gn}}const ct=new Map;ct.set(0,"GENERIC_PANIC");ct.set(1,"ASSERT_FALSE");ct.set(17,"OVERFLOW");ct.set(18,"DIVIDE_BY_ZERO");ct.set(33,"ENUM_RANGE_ERROR");ct.set(34,"BAD_STORAGE_DATA");ct.set(49,"STACK_UNDERFLOW");ct.set(50,"ARRAY_RANGE_ERROR");ct.set(65,"OUT_OF_MEMORY");ct.set(81,"UNINITIALIZED_FUNCTION_CALL");const Ni=new RegExp(/^bytes([0-9]*)$/),vi=new RegExp(/^(u?int)([0-9]*)$/);let Je=null,Wn=1024;function Ti(s,t,e,n){let r="missing revert data",i=null;const a=null;let o=null;if(e){r="execution reverted";const u=Tt(e);if(e=D(e),u.length===0)r+=" (no data present; likely require(false) occurred",i="require(false)";else if(u.length%32!==4)r+=" (could not decode reason; invalid data length)";else if(D(u.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],u.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[i]},r+=`: ${JSON.stringify(i)}`}catch{r+=" (could not decode reason; invalid string data)"}else if(D(u.slice(0,4))==="0x4e487b71")try{const f=Number(n.decode(["uint256"],u.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[f]},i=`Panic due to ${ct.get(f)||"UNKNOWN"}(${f})`,r+=`: ${i}`}catch{r+=" (could not decode panic code)"}else r+=" (unknown custom error)"}const c={to:t.to?Wt(t.to):null,data:t.data||"0x"};return t.from&&(c.from=Wt(t.from)),pe(r,"CALL_EXCEPTION",{action:s,data:e,reason:i,transaction:c,invocation:a,revert:o})}var kt,Zt;const Be=class Be{constructor(){P(this,kt)}getDefaultValue(t){const e=t.map(r=>j(this,kt,Zt).call(this,$.from(r)));return new Ie(e,"_").defaultValue()}encode(t,e){qn(e.length,t.length,"types/values length mismatch");const n=t.map(a=>j(this,kt,Zt).call(this,$.from(a))),r=new Ie(n,"_"),i=new qe;return r.encode(i,e),i.data}decode(t,e,n){const r=t.map(a=>j(this,kt,Zt).call(this,$.from(a)));return new Ie(r,"_").decode(new tn(e,n,Wn))}static _setDefaultMaxInflation(t){y(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),Wn=t}static defaultAbiCoder(){return Je==null&&(Je=new Be),Je}static getBuiltinCallException(t,e,n){return Ti(t,e,n,Be.defaultAbiCoder())}};kt=new WeakSet,Zt=function(t){if(t.isArray())return new Zr(j(this,kt,Zt).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new Ie(t.components.map(n=>j(this,kt,Zt).call(this,n)),t.name);switch(t.baseType){case"address":return new Xr(t.name);case"bool":return new qr(t.name);case"string":return new ci(t.name);case"bytes":return new ti(t.name);case"":return new si(t.name)}let e=t.type.match(vi);if(e){let n=parseInt(e[2]||"256");return y(n!==0&&n<=256&&n%8===0,"invalid "+e[1]+" bit length","param",t),new oi(n/8,e[1]==="int",t.name)}if(e=t.type.match(Ni),e){let n=parseInt(e[1]);return y(n!==0&&n<=32,"invalid bytes length","param",t),new ei(n,t.name)}y(!1,"invalid type","type",t.type)};let Pe=Be;class Si{constructor(t,e,n){h(this,"fragment");h(this,"name");h(this,"signature");h(this,"topic");h(this,"args");const r=t.name,i=t.format();T(this,{fragment:t,name:r,signature:i,topic:e,args:n})}}class Ii{constructor(t,e,n,r){h(this,"fragment");h(this,"name");h(this,"args");h(this,"signature");h(this,"selector");h(this,"value");const i=t.name,a=t.format();T(this,{fragment:t,name:i,args:n,signature:a,selector:e,value:r})}}class Ri{constructor(t,e,n){h(this,"fragment");h(this,"name");h(this,"args");h(this,"signature");h(this,"selector");const r=t.name,i=t.format();T(this,{fragment:t,name:r,args:n,signature:i,selector:e})}}class zn{constructor(t){h(this,"hash");h(this,"_isIndexed");T(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const Vn={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},Kn={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:s=>`reverted with reason string ${JSON.stringify(s)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:s=>{let t="unknown panic code";return s>=0&&s<=255&&Vn[s.toString()]&&(t=Vn[s.toString()]),`reverted with panic code 0x${s.toString(16)} (${t})`}}};var ut,ht,ft,W,gt,ke,Ce;const Mt=class Mt{constructor(t){P(this,gt);h(this,"fragments");h(this,"deploy");h(this,"fallback");h(this,"receive");P(this,ut);P(this,ht);P(this,ft);P(this,W);let e=[];typeof t=="string"?e=JSON.parse(t):e=t,O(this,ft,new Map),O(this,ut,new Map),O(this,ht,new Map);const n=[];for(const a of e)try{n.push(Vt.from(a))}catch(o){console.log(`[Warning] Invalid Fragment ${JSON.stringify(a)}:`,o.message)}T(this,{fragments:Object.freeze(n)});let r=null,i=!1;O(this,W,this.getAbiCoder()),this.fragments.forEach((a,o)=>{let c;switch(a.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}T(this,{deploy:a});return;case"fallback":a.inputs.length===0?i=!0:(y(!r||a.payable!==r.payable,"conflicting fallback fragments",`fragments[${o}]`,a),r=a,i=r.payable);return;case"function":c=m(this,ft);break;case"event":c=m(this,ht);break;case"error":c=m(this,ut);break;default:return}const u=a.format();c.has(u)||c.set(u,a)}),this.deploy||T(this,{deploy:Nt.from("constructor()")}),T(this,{fallback:r,receive:i})}format(t){const e=t?"minimal":"full";return this.fragments.map(r=>r.format(e))}formatJson(){const t=this.fragments.map(e=>e.format("json"));return JSON.stringify(t.map(e=>JSON.parse(e)))}getAbiCoder(){return Pe.defaultAbiCoder()}getFunctionName(t){const e=j(this,gt,ke).call(this,t,null,!1);return y(e,"no matching function","key",t),e.name}hasFunction(t){return!!j(this,gt,ke).call(this,t,null,!1)}getFunction(t,e){return j(this,gt,ke).call(this,t,e||null,!0)}forEachFunction(t){const e=Array.from(m(this,ft).keys());e.sort((n,r)=>n.localeCompare(r));for(let n=0;n<e.length;n++){const r=e[n];t(m(this,ft).get(r),n)}}getEventName(t){const e=j(this,gt,Ce).call(this,t,null,!1);return y(e,"no matching event","key",t),e.name}hasEvent(t){return!!j(this,gt,Ce).call(this,t,null,!1)}getEvent(t,e){return j(this,gt,Ce).call(this,t,e||null,!0)}forEachEvent(t){const e=Array.from(m(this,ht).keys());e.sort((n,r)=>n.localeCompare(r));for(let n=0;n<e.length;n++){const r=e[n];t(m(this,ht).get(r),n)}}getError(t,e){if(Et(t)){const r=t.toLowerCase();if(Kn[r])return Y.from(Kn[r].signature);for(const i of m(this,ut).values())if(r===i.selector)return i;return null}if(t.indexOf("(")===-1){const r=[];for(const[i,a]of m(this,ut))i.split("(")[0]===t&&r.push(a);if(r.length===0)return t==="Error"?Y.from("error Error(string)"):t==="Panic"?Y.from("error Panic(uint256)"):null;if(r.length>1){const i=r.map(a=>JSON.stringify(a.format())).join(", ");y(!1,`ambiguous error description (i.e. ${i})`,"name",t)}return r[0]}if(t=Y.from(t).format(),t==="Error(string)")return Y.from("error Error(string)");if(t==="Panic(uint256)")return Y.from("error Panic(uint256)");const n=m(this,ut).get(t);return n||null}forEachError(t){const e=Array.from(m(this,ut).keys());e.sort((n,r)=>n.localeCompare(r));for(let n=0;n<e.length;n++){const r=e[n];t(m(this,ut).get(r),n)}}_decodeParams(t,e){return m(this,W).decode(t,e)}_encodeParams(t,e){return m(this,W).encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);y(n,"unknown error","fragment",t),t=n}return y(Qt(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,Qt(e,4))}encodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);y(n,"unknown error","fragment",t),t=n}return ne([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);y(n,"unknown function","fragment",t),t=n}return y(Qt(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,Qt(e,4))}encodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);y(n,"unknown function","fragment",t),t=n}return ne([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if(typeof t=="string"){const i=this.getFunction(t);y(i,"unknown function","fragment",t),t=i}let n="invalid length for result data";const r=mt(e);if(r.length%32===0)try{return m(this,W).decode(t.outputs,r)}catch{n="could not decode result data"}N(!1,n,"BAD_DATA",{value:D(r),info:{method:t.name,signature:t.format()}})}makeError(t,e){const n=Tt(t,"data"),r=Pe.getBuiltinCallException("call",e,n);if(r.message.startsWith("execution reverted (unknown custom error)")){const o=D(n.slice(0,4)),c=this.getError(o);if(c)try{const u=m(this,W).decode(c.inputs,n.slice(4));r.revert={name:c.name,signature:c.format(),args:u},r.reason=r.revert.signature,r.message=`execution reverted: ${r.reason}`}catch{r.message="execution reverted (coult not decode custom error)"}}const a=this.parseTransaction(e);return a&&(r.invocation={method:a.name,signature:a.signature,args:a.args}),r}encodeFunctionResult(t,e){if(typeof t=="string"){const n=this.getFunction(t);y(n,"unknown function","fragment",t),t=n}return D(m(this,W).encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if(typeof t=="string"){const i=this.getEvent(t);y(i,"unknown event","eventFragment",t),t=i}N(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const n=[];t.anonymous||n.push(t.topicHash);const r=(i,a)=>i.type==="string"?ge(a):i.type==="bytes"?Pt(D(a)):(i.type==="bool"&&typeof a=="boolean"?a=a?"0x01":"0x00":i.type.match(/^u?int/)?a=ss(a):i.type.match(/^bytes/)?a=lr(a,32):i.type==="address"&&m(this,W).encode(["address"],[a]),cr(D(a),32));for(e.forEach((i,a)=>{const o=t.inputs[a];if(!o.indexed){y(i==null,"cannot filter non-indexed parameters; must be null","contract."+o.name,i);return}i==null?n.push(null):o.baseType==="array"||o.baseType==="tuple"?y(!1,"filtering with tuples or arrays not supported","contract."+o.name,i):Array.isArray(i)?n.push(i.map(c=>r(o,c))):n.push(r(o,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(t,e){if(typeof t=="string"){const a=this.getEvent(t);y(a,"unknown event","eventFragment",t),t=a}const n=[],r=[],i=[];return t.anonymous||n.push(t.topicHash),y(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach((a,o)=>{const c=e[o];if(a.indexed)if(a.type==="string")n.push(ge(c));else if(a.type==="bytes")n.push(Pt(c));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");n.push(m(this,W).encode([a.type],[c]))}else r.push(a),i.push(c)}),{data:m(this,W).encode(r,i),topics:n}}decodeEventLog(t,e,n){if(typeof t=="string"){const E=this.getEvent(t);y(E,"unknown event","eventFragment",t),t=E}if(n!=null&&!t.anonymous){const E=t.topicHash;y(Et(n[0],32)&&n[0].toLowerCase()===E,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const r=[],i=[],a=[];t.inputs.forEach((E,S)=>{E.indexed?E.type==="string"||E.type==="bytes"||E.baseType==="tuple"||E.baseType==="array"?(r.push($.from({type:"bytes32",name:E.name})),a.push(!0)):(r.push(E),a.push(!1)):(i.push(E),a.push(!1))});const o=n!=null?m(this,W).decode(r,ne(n)):null,c=m(this,W).decode(i,e,!0),u=[],f=[];let d=0,g=0;return t.inputs.forEach((E,S)=>{let A=null;if(E.indexed)if(o==null)A=new zn(null);else if(a[S])A=new zn(o[g++]);else try{A=o[g++]}catch(L){A=L}else try{A=c[d++]}catch(L){A=L}u.push(A),f.push(E.name||null)}),le.fromItems(u,f)}parseTransaction(t){const e=Tt(t.data,"tx.data"),n=Lt(t.value!=null?t.value:0,"tx.value"),r=this.getFunction(D(e.slice(0,4)));if(!r)return null;const i=m(this,W).decode(r.inputs,e.slice(4));return new Ii(r,r.selector,i,n)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new Si(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=D(t),n=this.getError(Qt(e,0,4));if(!n)return null;const r=m(this,W).decode(n.inputs,Qt(e,4));return new Ri(n,n.selector,r)}static from(t){return t instanceof Mt?t:typeof t=="string"?new Mt(JSON.parse(t)):typeof t.formatJson=="function"?new Mt(t.formatJson()):typeof t.format=="function"?new Mt(t.format("json")):new Mt(t)}};ut=new WeakMap,ht=new WeakMap,ft=new WeakMap,W=new WeakMap,gt=new WeakSet,ke=function(t,e,n){if(Et(t)){const i=t.toLowerCase();for(const a of m(this,ft).values())if(i===a.selector)return a;return null}if(t.indexOf("(")===-1){const i=[];for(const[a,o]of m(this,ft))a.split("(")[0]===t&&i.push(o);if(e){const a=e.length>0?e[e.length-1]:null;let o=e.length,c=!0;z.isTyped(a)&&a.type==="overrides"&&(c=!1,o--);for(let u=i.length-1;u>=0;u--){const f=i[u].inputs.length;f!==o&&(!c||f!==o-1)&&i.splice(u,1)}for(let u=i.length-1;u>=0;u--){const f=i[u].inputs;for(let d=0;d<e.length;d++)if(z.isTyped(e[d])){if(d>=f.length){if(e[d].type==="overrides")continue;i.splice(u,1);break}if(e[d].type!==f[d].baseType){i.splice(u,1);break}}}}if(i.length===1&&e&&e.length!==i[0].inputs.length){const a=e[e.length-1];(a==null||Array.isArray(a)||typeof a!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){const a=i.map(o=>JSON.stringify(o.format())).join(", ");y(!1,`ambiguous function description (i.e. matches ${a})`,"key",t)}return i[0]}const r=m(this,ft).get(pt.from(t).format());return r||null},Ce=function(t,e,n){if(Et(t)){const i=t.toLowerCase();for(const a of m(this,ht).values())if(i===a.topicHash)return a;return null}if(t.indexOf("(")===-1){const i=[];for(const[a,o]of m(this,ht))a.split("(")[0]===t&&i.push(o);if(e){for(let a=i.length-1;a>=0;a--)i[a].inputs.length<e.length&&i.splice(a,1);for(let a=i.length-1;a>=0;a--){const o=i[a].inputs;for(let c=0;c<e.length;c++)if(z.isTyped(e[c])&&e[c].type!==o[c].baseType){i.splice(a,1);break}}}if(i.length===0)return null;if(i.length>1&&n){const a=i.map(o=>JSON.stringify(o.format())).join(", ");y(!1,`ambiguous event description (i.e. matches ${a})`,"key",t)}return i[0]}const r=m(this,ht).get(dt.from(t).format());return r||null};let sn=Mt;const Os=BigInt(0);function nt(s){return s==null?null:s.toString()}function Oi(s){const t={};s.to&&(t.to=s.to),s.from&&(t.from=s.from),s.data&&(t.data=D(s.data));const e="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of e)!(r in s)||s[r]==null||(t[r]=Lt(s[r],`request.${r}`));const n="type,nonce".split(/,/);for(const r of n)!(r in s)||s[r]==null||(t[r]=It(s[r],`request.${r}`));return s.accessList&&(t.accessList=li(s.accessList)),s.authorizationList&&(t.authorizationList=s.authorizationList.slice()),"blockTag"in s&&(t.blockTag=s.blockTag),"enableCcipRead"in s&&(t.enableCcipRead=!!s.enableCcipRead),"customData"in s&&(t.customData=s.customData),"blobVersionedHashes"in s&&s.blobVersionedHashes&&(t.blobVersionedHashes=s.blobVersionedHashes.slice()),"kzg"in s&&(t.kzg=s.kzg),"blobs"in s&&s.blobs&&(t.blobs=s.blobs.map(r=>or(r)?D(r):Object.assign({},r))),t}class He{constructor(t,e){h(this,"provider");h(this,"transactionHash");h(this,"blockHash");h(this,"blockNumber");h(this,"removed");h(this,"address");h(this,"data");h(this,"topics");h(this,"index");h(this,"transactionIndex");this.provider=e;const n=Object.freeze(t.topics.slice());T(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:n,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:n,data:r,index:i,removed:a,topics:o,transactionHash:c,transactionIndex:u}=this;return{_type:"log",address:t,blockHash:e,blockNumber:n,data:r,index:i,removed:a,topics:o,transactionHash:c,transactionIndex:u}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return N(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return N(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return N(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return ki(this)}}var be;class Ai{constructor(t,e){h(this,"provider");h(this,"to");h(this,"from");h(this,"contractAddress");h(this,"hash");h(this,"index");h(this,"blockHash");h(this,"blockNumber");h(this,"logsBloom");h(this,"gasUsed");h(this,"blobGasUsed");h(this,"cumulativeGasUsed");h(this,"gasPrice");h(this,"blobGasPrice");h(this,"type");h(this,"status");h(this,"root");P(this,be);O(this,be,Object.freeze(t.logs.map(r=>new He(r,e))));let n=Os;t.effectiveGasPrice!=null?n=t.effectiveGasPrice:t.gasPrice!=null&&(n=t.gasPrice),T(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:n,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return m(this,be)}toJSON(){const{to:t,from:e,contractAddress:n,hash:r,index:i,blockHash:a,blockNumber:o,logsBloom:c,logs:u,status:f,root:d}=this;return{_type:"TransactionReceipt",blockHash:a,blockNumber:o,contractAddress:n,cumulativeGasUsed:nt(this.cumulativeGasUsed),from:e,gasPrice:nt(this.gasPrice),blobGasUsed:nt(this.blobGasUsed),blobGasPrice:nt(this.blobGasPrice),gasUsed:nt(this.gasUsed),hash:r,index:i,logs:u,logsBloom:c,root:d,status:f,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return ks(this)}reorderedEvent(t){return N(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),As(this,t)}}be=new WeakMap;var Ct;const yn=class yn{constructor(t,e){h(this,"provider");h(this,"blockNumber");h(this,"blockHash");h(this,"index");h(this,"hash");h(this,"type");h(this,"to");h(this,"from");h(this,"nonce");h(this,"gasLimit");h(this,"gasPrice");h(this,"maxPriorityFeePerGas");h(this,"maxFeePerGas");h(this,"maxFeePerBlobGas");h(this,"data");h(this,"value");h(this,"chainId");h(this,"signature");h(this,"accessList");h(this,"blobVersionedHashes");h(this,"authorizationList");P(this,Ct);this.provider=e,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,this.authorizationList=t.authorizationList!=null?t.authorizationList:null,O(this,Ct,-1)}toJSON(){const{blockNumber:t,blockHash:e,index:n,hash:r,type:i,to:a,from:o,nonce:c,data:u,signature:f,accessList:d,blobVersionedHashes:g}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:t,blockHash:e,blobVersionedHashes:g,chainId:nt(this.chainId),data:u,from:o,gasLimit:nt(this.gasLimit),gasPrice:nt(this.gasPrice),hash:r,maxFeePerGas:nt(this.maxFeePerGas),maxPriorityFeePerGas:nt(this.maxPriorityFeePerGas),maxFeePerBlobGas:nt(this.maxFeePerBlobGas),nonce:c,signature:f,to:a,index:n,type:i,value:nt(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const n=await this.getTransaction();n&&(t=n.blockNumber)}if(t==null)return null;const e=this.provider.getBlock(t);if(e==null)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:e,blockNumber:n}=await Xe({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return e==null||e.blockNumber==null?0:n-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const n=t??1,r=e??0;let i=m(this,Ct),a=-1,o=i===-1;const c=async()=>{if(o)return null;const{blockNumber:g,nonce:E}=await Xe({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(E<this.nonce){i=g;return}if(o)return null;const S=await this.getTransaction();if(!(S&&S.blockNumber!=null))for(a===-1&&(a=i-3,a<m(this,Ct)&&(a=m(this,Ct)));a<=g;){if(o)return null;const A=await this.provider.getBlock(a,!0);if(A==null)return;for(const L of A)if(L===this.hash)return;for(let L=0;L<A.length;L++){const R=await A.getTransaction(L);if(R.from===this.from&&R.nonce===this.nonce){if(o)return null;const B=await this.provider.getTransactionReceipt(R.hash);if(B==null||g-B.blockNumber+1<n)return;let Q="replaced";R.data===this.data&&R.to===this.to&&R.value===this.value?Q="repriced":R.data==="0x"&&R.from===R.to&&R.value===Os&&(Q="cancelled"),N(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:Q==="replaced"||Q==="cancelled",reason:Q,replacement:R.replaceableTransaction(i),hash:R.hash,receipt:B})}}a++}},u=g=>{if(g==null||g.status!==0)return g;N(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:g.to,from:g.from,data:""},receipt:g})},f=await this.provider.getTransactionReceipt(this.hash);if(n===0)return u(f);if(f){if(n===1||await f.confirmations()>=n)return u(f)}else if(await c(),n===0)return null;return await new Promise((g,E)=>{const S=[],A=()=>{S.forEach(R=>R())};if(S.push(()=>{o=!0}),r>0){const R=setTimeout(()=>{A(),E(pe("wait for transaction timeout","TIMEOUT"))},r);S.push(()=>{clearTimeout(R)})}const L=async R=>{if(await R.confirmations()>=n){A();try{g(u(R))}catch(B){E(B)}}};if(S.push(()=>{this.provider.off(this.hash,L)}),this.provider.on(this.hash,L),i>=0){const R=async()=>{try{await c()}catch(B){if(ce(B,"TRANSACTION_REPLACED")){A(),E(B);return}}o||this.provider.once("block",R)};S.push(()=>{this.provider.off("block",R)}),this.provider.once("block",R)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return N(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ks(this)}reorderedEvent(t){return N(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),N(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),As(this,t)}replaceableTransaction(t){y(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new yn(this,this.provider);return O(e,Ct,t),e}};Ct=new WeakMap;let rn=yn;function As(s,t){return{orphan:"reorder-transaction",tx:s,other:t}}function ks(s){return{orphan:"drop-transaction",tx:s}}function ki(s){return{orphan:"drop-log",log:{transactionHash:s.transactionHash,blockHash:s.blockHash,blockNumber:s.blockNumber,address:s.address,data:s.data,topics:Object.freeze(s.topics.slice()),index:s.index}}}class dn extends He{constructor(e,n,r){super(e,e.provider);h(this,"interface");h(this,"fragment");h(this,"args");const i=n.decodeEventLog(r,e.data,e.topics);T(this,{args:i,fragment:r,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Cs extends He{constructor(e,n){super(e,e.provider);h(this,"error");T(this,{error:n})}}var oe;class Ci extends Ai{constructor(e,n,r){super(r,n);P(this,oe);O(this,oe,e)}get logs(){return super.logs.map(e=>{const n=e.topics.length?m(this,oe).getEvent(e.topics[0]):null;if(n)try{return new dn(e,m(this,oe),n)}catch(r){return new Cs(e,r)}return e})}}oe=new WeakMap;var xe;class pn extends rn{constructor(e,n,r){super(r,n);P(this,xe);O(this,xe,e)}async wait(e,n){const r=await super.wait(e,n);return r==null?null:new Ci(m(this,xe),this.provider,r)}}xe=new WeakMap;class Ps extends pr{constructor(e,n,r,i){super(e,n,r);h(this,"log");T(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Pi extends Ps{constructor(t,e,n,r,i){super(t,e,n,new dn(i,t.interface,r));const a=t.interface.decodeEventLog(r,this.log.data,this.log.topics);T(this,{args:a,fragment:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Jn=BigInt(0);function Ls(s){return s&&typeof s.call=="function"}function Us(s){return s&&typeof s.estimateGas=="function"}function $e(s){return s&&typeof s.resolveName=="function"}function Bs(s){return s&&typeof s.sendTransaction=="function"}function js(s){if(s!=null){if($e(s))return s;if(s.provider)return s.provider}}var Ee;class Li{constructor(t,e,n){P(this,Ee);h(this,"fragment");if(T(this,{fragment:e}),e.inputs.length<n.length)throw new Error("too many arguments");const r=Kt(t.runner,"resolveName"),i=$e(r)?r:null;O(this,Ee,async function(){const a=await Promise.all(e.inputs.map((o,c)=>n[c]==null?null:o.walkAsync(n[c],(f,d)=>f==="address"?Array.isArray(d)?Promise.all(d.map(g=>me(g,i))):me(d,i):d)));return t.interface.encodeFilterTopics(e,a)}())}getTopicFilter(){return m(this,Ee)}}Ee=new WeakMap;function Kt(s,t){return s==null?null:typeof s[t]=="function"?s:s.provider&&typeof s.provider[t]=="function"?s.provider:null}function _t(s){return s==null?null:s.provider||null}async function Ms(s,t){const e=z.dereference(s,"overrides");y(typeof e=="object","invalid overrides parameter","overrides",s);const n=Oi(e);return y(n.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),y(n.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function Ui(s,t,e){const n=Kt(s,"resolveName"),r=$e(n)?n:null;return await Promise.all(t.map((i,a)=>i.walkAsync(e[a],(o,c)=>(c=z.dereference(c,o),o==="address"?me(c,r):c))))}function Bi(s){const t=async function(a){const o=await Ms(a,["data"]);o.to=await s.getAddress(),o.from&&(o.from=await me(o.from,js(s.runner)));const c=s.interface,u=Lt(o.value||Jn,"overrides.value")===Jn,f=(o.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!f&&!u&&y(!1,"cannot send data to receive or send value to non-payable fallback","overrides",a),y(c.fallback||f,"cannot send data to receive-only contract","overrides.data",o.data);const d=c.receive||c.fallback&&c.fallback.payable;return y(d||u,"cannot send value to non-payable fallback","overrides.value",o.value),y(c.fallback||f,"cannot send data to receive-only contract","overrides.data",o.data),o},e=async function(a){const o=Kt(s.runner,"call");N(Ls(o),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await t(a);try{return await o.call(c)}catch(u){throw Zn(u)&&u.data?s.interface.makeError(u.data,c):u}},n=async function(a){const o=s.runner;N(Bs(o),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await o.sendTransaction(await t(a)),u=_t(s.runner);return new pn(s.interface,u,c)},r=async function(a){const o=Kt(s.runner,"estimateGas");return N(Us(o),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await o.estimateGas(await t(a))},i=async a=>await n(a);return T(i,{_contract:s,estimateGas:r,populateTransaction:t,send:n,staticCall:e}),i}function ji(s,t){const e=function(...u){const f=s.interface.getFunction(t,u);return N(f,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:u}}),f},n=async function(...u){const f=e(...u);let d={};if(f.inputs.length+1===u.length&&(d=await Ms(u.pop()),d.from&&(d.from=await me(d.from,js(s.runner)))),f.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const g=await Ui(s.runner,f.inputs,u);return Object.assign({},d,await Xe({to:s.getAddress(),data:s.interface.encodeFunctionData(f,g)}))},r=async function(...u){const f=await o(...u);return f.length===1?f[0]:f},i=async function(...u){const f=s.runner;N(Bs(f),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await f.sendTransaction(await n(...u)),g=_t(s.runner);return new pn(s.interface,g,d)},a=async function(...u){const f=Kt(s.runner,"estimateGas");return N(Us(f),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await f.estimateGas(await n(...u))},o=async function(...u){const f=Kt(s.runner,"call");N(Ls(f),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await n(...u);let g="0x";try{g=await f.call(d)}catch(S){throw Zn(S)&&S.data?s.interface.makeError(S.data,d):S}const E=e(...u);return s.interface.decodeFunctionResult(E,g)},c=async(...u)=>e(...u).constant?await r(...u):await i(...u);return T(c,{name:s.interface.getFunctionName(t),_contract:s,_key:t,getFragment:e,estimateGas:a,populateTransaction:n,send:i,staticCall:r,staticCallResult:o}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=s.interface.getFunction(t);return N(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),u}}),c}function Mi(s,t){const e=function(...r){const i=s.interface.getEvent(t,r);return N(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),i},n=function(...r){return new Li(s,e(...r),r)};return T(n,{name:s.interface.getEventName(t),_contract:s,_key:t,getFragment:e}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=s.interface.getEvent(t);return N(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),n}const Le=Symbol.for("_ethersInternal_contract"),_s=new WeakMap;function _i(s,t){_s.set(s[Le],t)}function Z(s){return _s.get(s[Le])}function Fi(s){return s&&typeof s=="object"&&"getTopicFilter"in s&&typeof s.getTopicFilter=="function"&&s.fragment}async function mn(s,t){let e,n=null;if(Array.isArray(t)){const i=function(a){if(Et(a,32))return a;const o=s.interface.getEvent(a);return y(o,"unknown fragment","name",a),o.topicHash};e=t.map(a=>a==null?null:Array.isArray(a)?a.map(i):i(a))}else t==="*"?e=[null]:typeof t=="string"?Et(t,32)?e=[t]:(n=s.interface.getEvent(t),y(n,"unknown fragment","event",t),e=[n.topicHash]):Fi(t)?e=await t.getTopicFilter():"fragment"in t?(n=t.fragment,e=[n.topicHash]):y(!1,"unknown event name","event",t);e=e.map(i=>{if(i==null)return null;if(Array.isArray(i)){const a=Array.from(new Set(i.map(o=>o.toLowerCase())).values());return a.length===1?a[0]:(a.sort(),a)}return i.toLowerCase()});const r=e.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:r,topics:e}}async function fe(s,t){const{subs:e}=Z(s);return e.get((await mn(s,t)).tag)||null}async function Yn(s,t,e){const n=_t(s.runner);N(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:r,tag:i,topics:a}=await mn(s,e),{addr:o,subs:c}=Z(s);let u=c.get(i);if(!u){const d={address:o||s,topics:a},g=L=>{let R=r;if(R==null)try{R=s.interface.getEvent(L.topics[0])}catch{}if(R){const B=R,Q=r?s.interface.decodeEventLog(r,L.data,L.topics):[];on(s,e,Q,v=>new Pi(s,v,e,B,L))}else on(s,e,[],B=>new Ps(s,B,e,L))};let E=[];u={tag:i,listeners:[],start:()=>{E.length||E.push(n.on(d,g))},stop:async()=>{if(E.length==0)return;let L=E;E=[],await Promise.all(L),n.off(d,g)}},c.set(i,u)}return u}let an=Promise.resolve();async function Di(s,t,e,n){await an;const r=await fe(s,t);if(!r)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:a,once:o})=>{const c=Array.from(e);n&&c.push(n(o?null:a));try{a.call(s,...c)}catch{}return!o}),r.listeners.length===0&&(r.stop(),Z(s).subs.delete(r.tag)),i>0}async function on(s,t,e,n){try{await an}catch{}const r=Di(s,t,e,n);return an=r,await r}const Re=["then"];var Xn;Xn=Le;const de=class de{constructor(t,e,n,r){h(this,"target");h(this,"interface");h(this,"runner");h(this,"filters");h(this,Xn);h(this,"fallback");y(typeof t=="string"||gs(t),"invalid value for Contract target","target",t),n==null&&(n=null);const i=sn.from(e);T(this,{target:t,runner:n,interface:i}),Object.defineProperty(this,Le,{value:{}});let a,o=null,c=null;if(r){const d=_t(n);c=new pn(this.interface,d,r)}let u=new Map;if(typeof t=="string")if(Et(t))o=t,a=Promise.resolve(t);else{const d=Kt(n,"resolveName");if(!$e(d))throw pe("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});a=d.resolveName(t).then(g=>{if(g==null)throw pe("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return Z(this).addr=g,g})}else a=t.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Z(this).addr=d,d});_i(this,{addrPromise:a,addr:o,deployTx:c,subs:u});const f=new Proxy({},{get:(d,g,E)=>{if(typeof g=="symbol"||Re.indexOf(g)>=0)return Reflect.get(d,g,E);try{return this.getEvent(g)}catch(S){if(!ce(S,"INVALID_ARGUMENT")||S.argument!=="key")throw S}},has:(d,g)=>Re.indexOf(g)>=0?Reflect.has(d,g):Reflect.has(d,g)||this.interface.hasEvent(String(g))});return T(this,{filters:f}),T(this,{fallback:i.receive||i.fallback?Bi(this):null}),new Proxy(this,{get:(d,g,E)=>{if(typeof g=="symbol"||g in d||Re.indexOf(g)>=0)return Reflect.get(d,g,E);try{return d.getFunction(g)}catch(S){if(!ce(S,"INVALID_ARGUMENT")||S.argument!=="key")throw S}},has:(d,g)=>typeof g=="symbol"||g in d||Re.indexOf(g)>=0?Reflect.has(d,g):d.interface.hasFunction(g)})}connect(t){return new de(this.target,this.interface,t)}attach(t){return new de(t,this.interface,this.runner)}async getAddress(){return await Z(this).addrPromise}async getDeployedCode(){const t=_t(this.runner);N(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return e==="0x"?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=_t(this.runner);return N(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((r,i)=>{const a=async()=>{try{if(await this.getDeployedCode()!=null)return r(this);n.once("block",a)}catch(o){i(o)}};a()})}deploymentTransaction(){return Z(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),ji(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),Mi(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,n){e==null&&(e=0),n==null&&(n="latest");const{addr:r,addrPromise:i}=Z(this),a=r||await i,{fragment:o,topics:c}=await mn(this,t),u={address:a,topics:c,fromBlock:e,toBlock:n},f=_t(this.runner);return N(f,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await f.getLogs(u)).map(d=>{let g=o;if(g==null)try{g=this.interface.getEvent(d.topics[0])}catch{}if(g)try{return new dn(d,this.interface,g)}catch(E){return new Cs(d,E)}return new He(d,f)})}async on(t,e){const n=await Yn(this,"on",t);return n.listeners.push({listener:e,once:!1}),n.start(),this}async once(t,e){const n=await Yn(this,"once",t);return n.listeners.push({listener:e,once:!0}),n.start(),this}async emit(t,...e){return await on(this,t,e,null)}async listenerCount(t){if(t){const r=await fe(this,t);return r?r.listeners.length:0}const{subs:e}=Z(this);let n=0;for(const{listeners:r}of e.values())n+=r.length;return n}async listeners(t){if(t){const r=await fe(this,t);return r?r.listeners.map(({listener:i})=>i):[]}const{subs:e}=Z(this);let n=[];for(const{listeners:r}of e.values())n=n.concat(r.map(({listener:i})=>i));return n}async off(t,e){const n=await fe(this,t);if(!n)return this;if(e){const r=n.listeners.map(({listener:i})=>i).indexOf(e);r>=0&&n.listeners.splice(r,1)}return(e==null||n.listeners.length===0)&&(n.stop(),Z(this).subs.delete(n.tag)),this}async removeAllListeners(t){if(t){const e=await fe(this,t);if(!e)return this;e.stop(),Z(this).subs.delete(e.tag)}else{const{subs:e}=Z(this);for(const{tag:n,stop:r}of e.values())r(),e.delete(n)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){class e extends de{constructor(r,i=null){super(r,t,i)}}return e}static from(t,e,n){return n==null&&(n=null),new this(t,e,n)}};let cn=de;function Hi(){return cn}class $i extends Hi(){}const Gi=["function startGame()","function makeMovement()","function endGame()","function getPlayerSession(address player) view returns (tuple(address player, uint256 score, uint256 movements, uint256 startTime, bool isActive))","function getPlayerHighScore(address player) view returns (uint256)","event GameStarted(address indexed player, uint256 timestamp)","event MovementMade(address indexed player, uint256 movementCount, uint256 score)","event GameEnded(address indexed player, uint256 finalScore, uint256 totalMovements)"],Wi={6342:"0x0000000000000000000000000000000000000000",84532:"0x0000000000000000000000000000000000000000",10143:"0x0000000000000000000000000000000000000000"};class zi{constructor(){this.provider=null,this.signer=null,this.contract=null,this.chainId=null,this.transactionQueue=[],this.isProcessingQueue=!1}async initialize(t){try{if(!t)throw new Error("No wallet provided");const e=await t.getEthersProvider();this.provider=e,this.signer=e.getSigner();const n=await e.getNetwork();this.chainId=n.chainId;const r=Wi[this.chainId];return r&&r!=="0x0000000000000000000000000000000000000000"&&(this.contract=new $i(r,Gi,this.signer)),console.log(`Blockchain service initialized on chain ${this.chainId}`),!0}catch(e){return console.error("Failed to initialize blockchain service:",e),!1}}async startGame(){if(!this.contract)return console.warn("Contract not available on current network"),{success:!1,error:"Contract not deployed on current network"};try{const t=await this.contract.startGame();console.log("Game started, transaction:",t.hash);const e=await t.wait();return console.log("Game start confirmed:",e.transactionHash),{success:!0,txHash:e.transactionHash}}catch(t){return console.error("Failed to start game:",t),{success:!1,error:t.message}}}async makeMovement(){return this.contract?new Promise(t=>{this.transactionQueue.push({type:"movement",resolve:t,timestamp:Date.now()}),this.processQueue()}):(console.warn("Contract not available, simulating movement"),{success:!0,simulated:!0})}async processQueue(){if(!(this.isProcessingQueue||this.transactionQueue.length===0)){this.isProcessingQueue=!0;try{const e=this.transactionQueue.splice(0,2);for(const n of e)try{const r=await this.contract.makeMovement();console.log("Movement transaction sent:",r.hash),r.wait().then(i=>{console.log("Movement confirmed:",i.transactionHash)}),n.resolve({success:!0,txHash:r.hash,pending:!0})}catch(r){console.error("Movement transaction failed:",r),n.resolve({success:!1,error:r.message})}}catch(t){console.error("Error processing transaction queue:",t)}this.isProcessingQueue=!1,this.transactionQueue.length>0&&setTimeout(()=>this.processQueue(),100)}}async endGame(){if(!this.contract)return console.warn("Contract not available on current network"),{success:!1,error:"Contract not deployed on current network"};try{const t=await this.contract.endGame();console.log("Game ended, transaction:",t.hash);const e=await t.wait();return console.log("Game end confirmed:",e.transactionHash),{success:!0,txHash:e.transactionHash}}catch(t){return console.error("Failed to end game:",t),{success:!1,error:t.message}}}async getPlayerSession(t){if(!this.contract)return null;try{const e=await this.contract.getPlayerSession(t);return{player:e.player,score:e.score.toString(),movements:e.movements.toString(),startTime:e.startTime.toString(),isActive:e.isActive}}catch(e){return console.error("Failed to get player session:",e),null}}async getPlayerHighScore(t){if(!this.contract)return 0;try{return(await this.contract.getPlayerHighScore(t)).toString()}catch(e){return console.error("Failed to get high score:",e),0}}getNetworkName(){return{6342:"MegaETH Testnet",84532:"Base Sepolia",10143:"Monad Testnet",1:"Ethereum Mainnet",11155111:"Sepolia Testnet"}[this.chainId]||`Unknown Network (${this.chainId})`}isContractAvailable(){return this.contract!==null}getPendingTransactions(){return this.transactionQueue.length}}const Bt=new zi,Vi=({selectedNetwork:s})=>{const t=F.useRef(null),e=F.useRef({}),{user:n,authenticated:r}=je(),{wallets:i}=Qn(),[a,o]=F.useState({initialized:!1,networkName:(s==null?void 0:s.name)||"Unknown",contractAvailable:!1,pendingTransactions:0,totalMovements:0,onChainScore:0}),c=1,u=1e-5,f=800,d=200,g=88/1.5,E=94/1.5,S=d,A=150,L=2400,R=24,B=.5,Q=[{width:48/1.5,height:100/1.5,imageSrc:"./images/carrot_1.png"},{width:98/1.5,height:100/1.5,imageSrc:"./images/carrot_2.png"},{width:68/1.5,height:70/1.5,imageSrc:"./images/carrot_3.png"}],v=async()=>{if(!r||!i||i.length===0||!s){o(w=>({...w,initialized:!1}));return}try{const w=i[0];try{await w.switchChain(s.id),console.log(`Switched to ${s.name}`)}catch(U){console.warn(`Failed to switch to ${s.name}:`,U)}const p=await Bt.initialize(w);o({initialized:p,networkName:s.name,contractAvailable:Bt.isContractAvailable(),pendingTransactions:0,totalMovements:0,onChainScore:0}),p&&Bt.isContractAvailable()&&await Bt.startGame()}catch(w){console.error("Failed to initialize blockchain:",w),o(p=>({...p,initialized:!1,networkName:s.name}))}},st=async()=>{if(a.initialized)try{const w=await Bt.makeMovement();if(o(p=>({...p,totalMovements:p.totalMovements+1,pendingTransactions:Bt.getPendingTransactions()})),w.success&&!w.simulated){const p=I();if(p){const U=await Bt.getPlayerScore(p);o(b=>({...b,onChainScore:U}))}}}catch(w){console.error("On-chain movement failed:",w)}},G=()=>{if(s&&s.isWeb2)return{identifier:"CLASSIC PLAYER",address:null,isWeb2:!0};if(!r||!n)return null;const w=I();return w?{identifier:`${w.slice(0,6)}...${w.slice(-4)}`,address:w}:n.email?{identifier:n.email.split("@")[0],address:null}:null},I=()=>{var w;return!r||!i||i.length===0?null:((w=i[0])==null?void 0:w.address)||null};return F.useEffect(()=>{if(s&&s.isWeb2){o({initialized:!1,networkName:s.name,contractAvailable:!1,pendingTransactions:0,totalMovements:0,onChainScore:0});return}v()},[r,n,s]),F.useEffect(()=>{const w=t.current;if(!w)return;const p=w.getContext("2d");let U;p.imageSmoothingEnabled=!1,p.webkitImageSmoothingEnabled=!1,p.mozImageSmoothingEnabled=!1,p.msImageSmoothingEnabled=!1;const b=e.current;Object.assign(b,{scaleRatio:null,previousTime:null,gameSpeed:c,gameOver:!1,hasAddedEventListenersForRestart:!1,waitingToStart:!0});function Yt(){const C=g*b.scaleRatio,_=E*b.scaleRatio,tt=A*b.scaleRatio,lt=S*b.scaleRatio,rt=L*b.scaleRatio,Vs=R*b.scaleRatio;b.player=new tr(p,C,_,tt,lt,b.scaleRatio,s&&!s.isWeb2?st:null),b.ground=new er(p,rt,Vs,B,b.scaleRatio);const Ks=Q.map(Ne=>{const We=new Image;return We.src=Ne.imageSrc,We.onerror=()=>console.error(`Failed to load ${Ne.imageSrc}`),{image:We,width:Ne.width*b.scaleRatio,height:Ne.height*b.scaleRatio}});b.carrotController=new sr(p,Ks,b.scaleRatio,B),b.score=new rr(p,b.scaleRatio)}function Ot(){b.scaleRatio=Fs(),w.width=f*b.scaleRatio,w.height=d*b.scaleRatio,Yt()}function Fs(){const C=Math.min(window.innerHeight,document.documentElement.clientHeight),_=Math.min(window.innerWidth,document.documentElement.clientWidth);return _/C<f/d?_/f:C/d}function Ds(){const C=Math.floor(b.scaleRatio*32);p.font=`${C}px monospace`,p.fillStyle="#ef5435",p.textAlign="center",p.shadowColor="#ef5435",p.shadowBlur=10,p.fillText("GAME OVER",w.width/2,w.height/2-C),p.shadowBlur=0;const _=Math.floor(b.scaleRatio*16);p.font=`${_}px monospace`,p.fillStyle="#929397",p.fillText("> PRESS ANY KEY TO RESTART",w.width/2,w.height/2+_);const tt=G();if(tt){const lt=Math.floor(b.scaleRatio*12);p.font=`${lt}px monospace`,p.fillStyle="#1391ff",p.fillText(`> PILOT: ${tt.identifier}`,w.width/2,w.height/2+_+lt+20),p.fillStyle="#929397",p.fillText(`> NETWORK: ${a.networkName}`,w.width/2,w.height/2+_+lt*2+25),a.totalMovements>0&&p.fillText(`> ON-CHAIN MOVES: ${a.totalMovements}`,w.width/2,w.height/2+_+lt*3+30)}}function Hs(){const C=Math.floor(b.scaleRatio*24);p.font=`${C}px monospace`,p.fillStyle="#929397",p.textAlign="center",p.shadowColor="#929397",p.shadowBlur=5,p.fillText("> PRESS ANY KEY TO START MISSION",w.width/2,w.height/2),p.shadowBlur=0;const _=G(),tt=Math.floor(b.scaleRatio*12);p.font=`${tt}px monospace`,_?(p.fillStyle="#1391ff",p.shadowColor="#1391ff",p.shadowBlur=3,p.fillText(`> PILOT AUTHENTICATED: ${_.identifier}`,w.width/2,w.height/2+C+20),p.shadowBlur=0,p.fillStyle="#929397",p.fillText(`> TARGET NETWORK: ${a.networkName}`,w.width/2,w.height/2+C+tt+25),a.initialized?(p.fillStyle="#28a745",p.fillText("> BLOCKCHAIN CONNECTION: ACTIVE",w.width/2,w.height/2+C+tt*2+30)):(p.fillStyle="#ffc107",p.fillText("> BLOCKCHAIN CONNECTION: SIMULATED MODE",w.width/2,w.height/2+C+tt*2+30))):(p.fillStyle="#ef5435",p.fillText("> WARNING: NO PILOT AUTHENTICATED",w.width/2,w.height/2+C+20))}function $s(){const C=p.createLinearGradient(0,0,0,w.height);C.addColorStop(0,"#121218"),C.addColorStop(.5,"#1a1a2e"),C.addColorStop(1,"#16213e"),p.fillStyle=C,p.fillRect(0,0,w.width,w.height),p.strokeStyle="rgba(146, 147, 151, 0.1)",p.lineWidth=1;const _=20*b.scaleRatio;for(let rt=0;rt<w.width;rt+=_)p.beginPath(),p.moveTo(rt,0),p.lineTo(rt,w.height),p.stroke();for(let rt=0;rt<w.height;rt+=_)p.beginPath(),p.moveTo(0,rt),p.lineTo(w.width,rt),p.stroke();const tt=Date.now()/20%w.height;p.strokeStyle="rgba(19, 145, 255, 0.3)",p.lineWidth=2,p.beginPath(),p.moveTo(0,tt),p.lineTo(w.width,tt),p.stroke();const lt=p.createLinearGradient(0,0,0,w.height*.3);lt.addColorStop(0,"rgba(19, 145, 255, 0.1)"),lt.addColorStop(1,"transparent"),p.fillStyle=lt,p.fillRect(0,0,w.width,w.height*.3)}function Gs(){b.hasAddedEventListenersForRestart||(b.hasAddedEventListenersForRestart=!0,setTimeout(()=>{const C=()=>{wn(),document.removeEventListener("keyup",C),document.removeEventListener("touchstart",C)};document.addEventListener("keyup",C),document.addEventListener("touchstart",C)},1e3))}function wn(){b.hasAddedEventListenersForRestart=!1,b.gameOver=!1,b.waitingToStart=!1,b.ground.reset(),b.carrotController.reset(),b.score.reset(),b.gameSpeed=c}function Ws(C){b.gameSpeed+=C*u}function zs(){return b.carrotController.collideWith(b.player)}function Ge(C){if(b.previousTime===null){b.previousTime=C,U=requestAnimationFrame(Ge);return}const _=C-b.previousTime;b.previousTime=C,$s(),!b.gameOver&&!b.waitingToStart&&(b.ground.update(b.gameSpeed,_),b.carrotController.update(b.gameSpeed,_),b.player.update(b.gameSpeed,_),b.score.update(_),Ws(_),zs()&&(b.gameOver=!0,Gs()),Math.random()<.01&&st()),b.ground.draw(),b.carrotController.draw(),b.player.draw(),b.score.draw(),b.gameOver&&Ds(),b.waitingToStart&&Hs(),U=requestAnimationFrame(Ge)}Ot();const bn=()=>setTimeout(Ot,500);window.addEventListener("resize",bn),screen.orientation&&screen.orientation.addEventListener("change",Ot);const Xt=()=>{wn(),document.removeEventListener("keyup",Xt),document.removeEventListener("touchstart",Xt)};return document.addEventListener("keyup",Xt),document.addEventListener("touchstart",Xt),U=requestAnimationFrame(Ge),()=>{U&&cancelAnimationFrame(U),window.removeEventListener("resize",bn),screen.orientation&&screen.orientation.removeEventListener("change",Ot),document.removeEventListener("keyup",Xt),document.removeEventListener("touchstart",Xt)}},[r,n,s]),l.jsxs("div",{className:"game-canvas-container",children:[l.jsx("canvas",{ref:t,id:"game",className:"game-canvas"}),l.jsx("div",{className:"game-ui-overlay"})]})},Ki=({selectedNetwork:s,onDisconnect:t,disableNetworkControls:e=!1})=>{var G;const{user:n,authenticated:r,ready:i}=je(),{login:a}=ln(),{logout:o}=Xs(),{wallets:c}=Qn(),[u,f]=F.useState(!1),[d,g]=F.useState(!1),E=[{id:6342,name:"MegaETH Testnet",emoji:"⚡"},{id:84532,name:"Base Sepolia",emoji:"🔵"},{id:10143,name:"Monad Testnet",emoji:"🟣"}];F.useEffect(()=>{(async()=>{if(r&&c&&c.length>0&&s&&!d)try{await c[0].getChainId()!==s.id&&(console.log(`Auto-switching to ${s.name}...`),g(!0),await A(s.id))}catch(w){console.warn("Auto network switch failed:",w)}finally{g(!1)}})()},[r,c,s]);const S=()=>{r?(o(),t&&t()):a()},A=async I=>{var w;if(!(!c||c.length===0)){g(!0);try{const p=c[0],U=((w=E.find(b=>b.id===I))==null?void 0:w.name)||"Unknown Network";try{await p.switchChain(I),f(!1),console.log(`Successfully switched to ${U}`);return}catch(b){console.log(`Network ${U} not found, attempting to add it...`,b);const Yt=L(I);if(Yt)console.log(`Adding network ${U} to wallet...`),await R(p,Yt),await new Promise(Ot=>setTimeout(Ot,1e3)),console.log(`Switching to ${U}...`),await p.switchChain(I),f(!1),console.log(`Successfully added and switched to ${U}`);else throw new Error(`Network configuration not found for chain ID ${I}`)}}catch(p){console.error("Failed to switch network:",p);let U="Failed to switch network. ";p.message.includes("rejected")?U+="User cancelled the operation.":p.message.includes("already pending")?U+="Another network operation is in progress. Please wait and try again.":U+="Please try again or add the network manually.",alert(U)}finally{g(!1)}}},L=I=>({6342:{chainId:"0x18C6",chainName:"MegaETH Testnet",rpcUrls:["https://carrot.megaeth.com/rpc"],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorerUrls:["https://carrot.megaeth.com"]},84532:{chainId:"0x14A34",chainName:"Base Sepolia",rpcUrls:["https://sepolia.base.org"],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorerUrls:["https://sepolia.basescan.org"]},10143:{chainId:"0x279F",chainName:"Monad Testnet",rpcUrls:["https://testnet-rpc.monad.xyz"],nativeCurrency:{name:"Monad",symbol:"MON",decimals:18},blockExplorerUrls:["https://testnet.monadexplorer.com"]}})[I],R=async(I,w)=>{try{await(await I.getEthersProvider()).send("wallet_addEthereumChain",[w])}catch(p){if(p.code===4902||p.message.includes("already exists")||p.message.includes("Already added")){console.log("Network already exists in wallet");return}throw p}},B=()=>{if(!c||c.length===0)return null;const I=c[0];return E.find(w=>w.id===I.chainId)},Q=I=>I?`${I.slice(0,6)}...${I.slice(-4)}`:"",v=()=>{var I;if((I=n==null?void 0:n.wallet)!=null&&I.address)return n.wallet.address;if(n!=null&&n.linkedAccounts){const w=n.linkedAccounts.find(p=>p.type==="wallet");return w==null?void 0:w.address}return null},st=()=>{var w,p;if((w=n==null?void 0:n.email)!=null&&w.address)return n.email.address;if((p=n==null?void 0:n.phone)!=null&&p.number)return n.phone.number;const I=v();return I?Q(I):"Unknown User"};return i?l.jsxs("div",{className:"wallet-container",children:[l.jsxs("div",{className:"wallet-controls",children:[l.jsx("button",{className:`wallet-button ${r?"connected":""}`,onClick:S,children:r?"Disconnect":"Connect Wallet"}),r&&c&&c.length>0&&!e&&l.jsxs("div",{className:"network-selector",children:[l.jsx("button",{className:"network-button",onClick:()=>f(!u),disabled:d,children:d?"🔄 Switching...":B()?`${B().emoji} ${B().name}`:"🌐 Select Network"}),u&&l.jsx("div",{className:"network-dropdown",children:E.map(I=>{var w;return l.jsxs("button",{className:`network-option ${((w=B())==null?void 0:w.id)===I.id?"active":""} ${(s==null?void 0:s.id)===I.id?"selected-game-network":""}`,onClick:()=>A(I.id),disabled:d,children:[d?"🔄":I.emoji," ",I.name,(s==null?void 0:s.id)===I.id&&" 🎮"]},I.id)})})]})]}),r&&l.jsxs("div",{className:"wallet-info",children:[l.jsx("div",{className:"wallet-status",children:"Connected"}),l.jsx("div",{className:"wallet-user",children:st()}),l.jsx("div",{className:"wallet-network",children:s?s.name:((G=B())==null?void 0:G.name)||"Unknown Network"})]})]}):l.jsx("div",{className:"wallet-container",children:l.jsx("button",{className:"wallet-button",disabled:!0,children:"Loading..."})})},Ji=({onNetworkSelect:s,onStartGame:t})=>{const[e,n]=F.useState(null),[r,i]=F.useState(!0),[a,o]=F.useState(""),[c,u]=F.useState({width:window.innerWidth,height:window.innerHeight}),{user:f,authenticated:d}=je(),{login:g}=ln(),E=[{id:"web2",name:"CLASSIC BROWSER",emoji:"🌐",description:"Pure web2 experience",tech:"No wallet required",color:"#2ecc71",status:"ONLINE",icon:"🦕",isWeb2:!0},{id:6342,name:"MEGAETH TESTNET",emoji:"⚡",description:"Ultra-fast execution layer",tech:"Lightning-fast transactions",color:"#ff6b6b",status:"ONLINE",icon:"🚀"},{id:84532,name:"BASE SEPOLIA",emoji:"🔵",description:"Ethereum L2 testnet",tech:"Reliable scaling solution",color:"#4ecdc4",status:"ONLINE",icon:"🌐"},{id:10143,name:"MONAD TESTNET",emoji:"🟣",description:"Next-gen blockchain",tech:"Advanced consensus",color:"#9b59b6",status:"BETA",icon:"🔮"}];F.useEffect(()=>{const v=["INITIALIZING NETWORK SCANNER...","DETECTING AVAILABLE CHAINS...","ESTABLISHING SECURE CONNECTIONS...","SYSTEM READY FOR NETWORK SELECTION"];let st=0;const G=setInterval(()=>{o(v[st]),st++,st>=v.length&&(clearInterval(G),setTimeout(()=>i(!1),500))},800);return()=>clearInterval(G)},[]),F.useEffect(()=>{const v=()=>{u({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),F.useEffect(()=>{},[c]);const S=()=>{const{width:v,height:st}=c,G=v<=768,I=v>768&&v<=1024,w=v>1024,p=v>1600;let U;G?U=Math.min(v*.98,v-20):I?U=Math.min(v*.92,v-60):p?U=Math.min(v*.85,1400):U=Math.min(v*.88,1200);const b=st*(G?.95:.9),Yt=Math.min(st*(G?.7:.6),G?500:600),Ot=G?Math.max(15,v*.03):Math.max(20,v*.025);return{containerStyle:{width:`${U}px`,maxHeight:`${b}px`,minHeight:`${Yt}px`,transition:"all 0.3s ease"},contentStyle:{padding:`${Ot}px`,transition:"all 0.3s ease"},networkGridStyle:{gridTemplateColumns:G?"1fr":I?"repeat(auto-fit, minmax(280px, 1fr))":"repeat(auto-fit, minmax(300px, 1fr))",gap:`${G?15:w?25:20}px`}}},{containerStyle:A,contentStyle:L,networkGridStyle:R}=S(),B=v=>{n(v),s(v)},Q=()=>{if(e){if(e.isWeb2){t(e);return}d&&f?t(e):(s(e),g())}};return F.useEffect(()=>{d&&f&&e&&t(e)},[d,f,e,t]),r?l.jsx("div",{className:"network-scanner-overlay",children:l.jsx("div",{className:"scanner-container",style:A,children:l.jsxs("div",{className:"scanner-content",style:L,children:[l.jsxs("div",{className:"terminal-header",children:[l.jsx("div",{className:"terminal-title",children:"NETWORK SCANNER PROTOCOL"}),l.jsxs("div",{className:"terminal-buttons",children:[l.jsx("div",{className:"terminal-button red"}),l.jsx("div",{className:"terminal-button yellow"}),l.jsx("div",{className:"terminal-button green"})]})]}),l.jsx("div",{className:"logo-section",children:l.jsx("div",{className:"pixel-logo",children:l.jsxs("div",{className:"logo-text",children:[l.jsx("span",{className:"logo-main",children:"BUDDY"}),l.jsx("span",{className:"logo-accent",children:"RUNNER"})]})})}),l.jsx("div",{className:"scanner-display",children:l.jsxs("div",{className:"radar-container",children:[l.jsx("div",{className:"radar-sweep"}),l.jsx("div",{className:"radar-grid"})]})}),l.jsxs("div",{className:"scanner-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," ",a]})]})})}):l.jsx("div",{className:"network-selection-overlay",children:l.jsx("div",{className:"network-selection-container",style:A,children:l.jsxs("div",{className:"network-selection-content",style:L,children:[l.jsxs("div",{className:"terminal-header",children:[l.jsx("div",{className:"terminal-title",children:"BLOCKCHAIN NETWORK SELECTOR"}),l.jsxs("div",{className:"terminal-buttons",children:[l.jsx("div",{className:"terminal-button red"}),l.jsx("div",{className:"terminal-button yellow"}),l.jsx("div",{className:"terminal-button green"})]})]}),l.jsx("div",{className:"logo-section",children:l.jsxs("div",{className:"pixel-logo",children:[l.jsxs("div",{className:"logo-text",children:[l.jsx("span",{className:"logo-main",children:"BUDDY"}),l.jsx("span",{className:"logo-accent",children:"RUNNER"})]}),l.jsxs("div",{className:"logo-powered",children:["POWERED BY ",l.jsx("strong",{children:"MEGA BUDDIES"})]})]})}),l.jsxs("div",{className:"mission-briefing",children:[l.jsx("div",{className:"briefing-title",children:"MISSION BRIEFING"}),l.jsxs("div",{className:"briefing-content",children:[l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," OBJECTIVE: SURVIVE 60 SECONDS ON EACH NETWORK"]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," ANALYZE BLOCK TIME IMPACT ON USER EXPERIENCE"]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," DISCOVER THE POWER OF REAL-TIME BLOCKCHAIN"]})]})]}),l.jsxs("div",{className:"network-selection",children:[l.jsx("div",{className:"selection-title",children:"SELECT TARGET BLOCKCHAIN NETWORK:"}),l.jsx("div",{className:"network-grid",style:R,children:E.map(v=>l.jsxs("div",{className:`network-card ${(e==null?void 0:e.id)===v.id?"selected":""}`,onClick:()=>B(v),children:[l.jsxs("div",{className:"network-header",children:[l.jsx("div",{className:"network-icon",children:v.icon}),l.jsx("div",{className:"network-status","data-status":v.status,children:v.status})]}),l.jsxs("div",{className:"network-info",children:[l.jsx("div",{className:"network-name",children:v.name}),l.jsx("div",{className:"network-description",children:v.description}),l.jsx("div",{className:"network-tech",children:v.tech})]}),l.jsxs("div",{className:"network-specs",children:[l.jsxs("div",{className:"spec-item",children:[l.jsx("span",{className:"spec-label",children:v.isWeb2?"TYPE:":"CHAIN ID:"}),l.jsx("span",{className:"spec-value",children:v.isWeb2?"WEB2":v.id})]}),l.jsxs("div",{className:"spec-item",children:[l.jsx("span",{className:"spec-label",children:"NETWORK:"}),l.jsx("span",{className:"spec-value",children:v.isWeb2?"BROWSER":"TESTNET"})]})]}),l.jsx("div",{className:"selection-indicator",children:(e==null?void 0:e.id)===v.id&&l.jsx("div",{className:"selected-glow",children:"SELECTED"})})]},v.id))}),e&&l.jsxs("div",{className:"launch-section",children:[l.jsxs("div",{className:"launch-info",children:[l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," TARGET NETWORK: ",e.name]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," MISSION STATUS: READY FOR DEPLOYMENT"]})]}),l.jsxs("button",{className:"launch-button",onClick:Q,children:[l.jsx("span",{className:"button-icon",children:"🚀"}),"LAUNCH MISSION ON ",e.name,l.jsx("div",{className:"button-glow"})]})]})]})]})})})},Yi=({onWalletConnected:s})=>{const{user:t,authenticated:e,ready:n}=je(),{login:r}=ln(),[i,a]=F.useState("INITIALIZING"),[o,c]=F.useState("");F.useEffect(()=>{e&&t&&s()},[e,t,s]),F.useEffect(()=>{const f=setInterval(()=>{c(g=>g.length>=3?"":g+".")},500),d=setInterval(()=>{const g=["INITIALIZING","LOADING SYSTEMS","CONNECTING","SYNCING"];a(g[Math.floor(Math.random()*g.length)])},2e3);return()=>{clearInterval(f),clearInterval(d)}},[]);const u=()=>{r()};return n?l.jsx("div",{className:"wallet-connection-overlay",children:l.jsx("div",{className:"wallet-connection-container",children:l.jsxs("div",{className:"wallet-connection-content",children:[l.jsxs("div",{className:"terminal-header",children:[l.jsx("div",{className:"terminal-title",children:"WALLET CONNECTION PROTOCOL"}),l.jsxs("div",{className:"terminal-buttons",children:[l.jsx("div",{className:"terminal-button red"}),l.jsx("div",{className:"terminal-button yellow"}),l.jsx("div",{className:"terminal-button green"})]})]}),l.jsx("div",{className:"logo-section",children:l.jsxs("div",{className:"pixel-logo",children:[l.jsxs("div",{className:"logo-text",children:[l.jsx("span",{className:"logo-main",children:"BUDDY"}),l.jsx("span",{className:"logo-accent",children:"RUNNER"})]}),l.jsxs("div",{className:"logo-powered",children:["POWERED BY ",l.jsx("strong",{children:"MEGA BUDDIES"})]})]})}),l.jsxs("div",{className:"connection-section",children:[l.jsx("div",{className:"connection-icon",children:"🔗"}),l.jsx("h2",{className:"connection-title",children:"AUTHENTICATION REQUIRED"}),l.jsxs("div",{className:"terminal-content",children:[l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," CONNECT YOUR WALLET TO ACCESS THE GAME"]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," ALL SCORES WILL BE STORED ON-CHAIN"]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," SECURE BLOCKCHAIN AUTHENTICATION"]})]}),l.jsxs("button",{className:"connect-wallet-button",onClick:u,children:[l.jsx("span",{className:"button-icon",children:"🔐"}),"CONNECT WALLET",l.jsx("div",{className:"button-glow"})]}),l.jsxs("div",{className:"supported-options",children:[l.jsx("div",{className:"options-title",children:"SUPPORTED AUTHENTICATION METHODS:"}),l.jsxs("div",{className:"options-grid",children:[l.jsxs("div",{className:"option-item",children:[l.jsx("span",{className:"option-icon",children:"📧"}),l.jsx("span",{className:"option-text",children:"EMAIL"})]}),l.jsxs("div",{className:"option-item",children:[l.jsx("span",{className:"option-icon",children:"📱"}),l.jsx("span",{className:"option-text",children:"PHONE"})]}),l.jsxs("div",{className:"option-item",children:[l.jsx("span",{className:"option-icon",children:"🦊"}),l.jsx("span",{className:"option-text",children:"METAMASK"})]}),l.jsxs("div",{className:"option-item",children:[l.jsx("span",{className:"option-icon",children:"💼"}),l.jsx("span",{className:"option-text",children:"OTHER WALLETS"})]})]})]}),l.jsxs("div",{className:"security-info",children:[l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," SECURITY: 256-BIT ENCRYPTION"]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," NETWORK: MEGAETH COMPATIBLE"]})]})]})]})})}):l.jsx("div",{className:"preloader-overlay",children:l.jsx("div",{className:"preloader-container",children:l.jsxs("div",{className:"preloader-content",children:[l.jsxs("div",{className:"terminal-header",children:[l.jsx("div",{className:"terminal-title",children:"BUDDY RUNNER SYSTEM"}),l.jsxs("div",{className:"terminal-buttons",children:[l.jsx("div",{className:"terminal-button red"}),l.jsx("div",{className:"terminal-button yellow"}),l.jsx("div",{className:"terminal-button green"})]})]}),l.jsx("div",{className:"logo-section",children:l.jsx("div",{className:"pixel-logo",children:l.jsxs("div",{className:"logo-text",children:[l.jsx("span",{className:"logo-main",children:"BUDDY"}),l.jsx("span",{className:"logo-accent",children:"RUNNER"})]})})}),l.jsx("div",{className:"loading-bar",children:l.jsx("div",{className:"progress",style:{width:"100%"}})}),l.jsxs("div",{className:"loading-text",children:[i,l.jsx("span",{className:"dots",children:o})]}),l.jsxs("div",{className:"terminal-text",children:[l.jsx("span",{className:"terminal-prompt",children:">"})," System initialization in progress..."]})]})})})},Xi=()=>{const s="cme84q0og02aalc0bh9blzwa9",[t,e]=F.useState("network-selection"),[n,r]=F.useState(null),i={appearance:{theme:"light",accentColor:"#7FBC7F",logo:"https://your-logo-url.com/logo.png"},embeddedWallets:{createOnLogin:"users-without-wallets",noPromptOnSignature:!1},loginMethods:["email","wallet"],supportedChains:[{id:6342,name:"MegaETH Testnet",network:"megaeth-testnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://carrot.megaeth.com/rpc"],webSocket:["wss://carrot.megaeth.com/ws"]}},blockExplorers:{default:{name:"MegaETH Explorer",url:"https://carrot.megaeth.com"}}},{id:84532,name:"Base Sepolia",network:"base-sepolia",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Base Sepolia Explorer",url:"https://sepolia.basescan.org"}}},{id:10143,name:"Monad Testnet",network:"monad-testnet",nativeCurrency:{name:"Monad",symbol:"MON",decimals:18},rpcUrls:{default:{http:["https://testnet-rpc.monad.xyz"]}},blockExplorers:{default:{name:"Monad Explorer",url:"https://testnet.monadexplorer.com"}}},{id:1,name:"Ethereum",network:"homestead",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth-mainnet.g.alchemy.com/v2/your-api-key"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io"}}},{id:11155111,name:"Sepolia",network:"sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.infura.io/v3/your-api-key"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io"}}}]},a=d=>{r(d)},o=d=>{r(d),e("game")},c=()=>{e("game")},u=()=>{e("network-selection"),r(null)},f=()=>{e("network-selection"),r(null)};return l.jsx(Qs,{appId:s,config:i,children:l.jsx("div",{className:"app",children:t==="network-selection"?l.jsx(Ji,{onNetworkSelect:a,onStartGame:o}):t==="wallet-connection"?l.jsxs("div",{children:[l.jsx("div",{className:"back-to-wallet",children:l.jsx("button",{className:"back-button-small",onClick:u,children:"← Back to Network Selection"})}),l.jsx(Yi,{onWalletConnected:c})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"back-to-network-button",children:l.jsx("button",{className:"back-button",onClick:u,children:"← Back to Network Selection"})}),n&&!n.isWeb2&&l.jsx(Ki,{selectedNetwork:n,onDisconnect:f,disableNetworkControls:!0}),l.jsx("div",{className:"game-layout",children:l.jsx("div",{className:"game-header",children:l.jsx("div",{className:"header-center",children:l.jsxs("div",{className:"title",children:["Buddy Runner",n&&n.isWeb2&&l.jsx("span",{className:"web2-mode",children:" - Classic Mode"})]})})})}),l.jsx(Vi,{selectedNetwork:n}),l.jsxs("div",{className:"instructions",children:[l.jsx("p",{className:"main-instruction",children:"📱 Press SPACE or tap to make Buddy jump!"}),l.jsx("p",{className:"help-text",children:"Help our brave bunny Buddy hop over the giant carrots and achieve the highest score!"}),l.jsx("p",{className:"warning-text",children:"Watch out for those sneaky garden carrots!"})]})]})})})};Ye.createRoot(document.getElementById("root")).render(l.jsx(qs.StrictMode,{children:l.jsx(Xi,{})}));
